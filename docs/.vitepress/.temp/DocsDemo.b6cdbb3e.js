import { defineComponent, useAttrs, useSlots, ref, toRefs, computed, isRef, watch, createVNode, render, watchEffect, openBlock, createElementBlock, unref, createCommentVNode, shallowRef, withAsyncContext, toValue, renderSlot, mergeProps, onUnmounted, createElementVNode, normalizeProps, guardReactiveProps, Fragment, renderList, reactive, getCurrentInstance, onMounted, nextTick, getCurrentScope, onScopeDispose, useSSRContext } from "vue";
import { Color, REVISION, Vector3, Vector4, BufferGeometry, InterleavedBuffer, InterleavedBufferAttribute, MathUtils, PlaneGeometry, ShaderMaterial, DoubleSide, Matrix4, Vector2, RGBAFormat, RGBA_ASTC_4x4_Format, RGBA_BPTC_Format, RGBA_ETC2_EAC_Format, RGBA_PVRTC_4BPPV1_Format, RGBA_S3TC_DXT5_Format, RGB_ETC1_Format, RGB_ETC2_Format, RGB_PVRTC_4BPPV1_Format, RGB_S3TC_DXT1_Format, Mesh, MeshBasicMaterial, FramebufferTexture, RawShaderMaterial, AdditiveBlending, Box2, CubeTextureLoader, CubeReflectionMapping, EquirectangularReflectionMapping, SRGBColorSpace, DefaultLoadingManager, TOUCH, Box3, Quaternion, Raycaster, Sphere, Spherical, WebGLRenderTarget, OrthographicCamera, MeshDepthMaterial, PerspectiveCamera, Plane, HalfFloatType, UniformsUtils, NoToneMapping, BackSide, BoxGeometry, Clock, UniformsLib, RepeatWrapping, Object3D, Euler, LineBasicMaterial, CylinderGeometry, Float32BufferAttribute, Line, OctahedronGeometry, TorusGeometry, SphereGeometry, EventDispatcher, MOUSE, NearestFilter, DepthTexture, UnsignedShortType, RGBADepthPacking, NoBlending, MeshNormalMaterial, CustomBlending, DstColorFactor, ZeroFactor, AddEquation, DstAlphaFactor, Loader, LoaderUtils, FileLoader, SpotLight, PointLight, DirectionalLight, MeshPhysicalMaterial, InstancedMesh, TextureLoader, ImageBitmapLoader, BufferAttribute, LinearFilter, LinearMipmapLinearFilter, Texture, PointsMaterial, Material, MeshStandardMaterial, PropertyBinding, SkinnedMesh, LineSegments, LineLoop, Points, Group, Skeleton, InterpolateLinear, AnimationClip, Bone, ExtrudeGeometry, ShapePath, DataTextureLoader, FloatType, VideoTexture, TrianglesDrawMode, TriangleFanDrawMode, TriangleStripDrawMode, DataTexture, ClampToEdgeWrapping, Uint32BufferAttribute, DynamicDrawUsage, DepthStencilFormat, UnsignedInt248Type, LuminanceFormat, RedFormat, SrcAlphaFactor, OneMinusSrcAlphaFactor, NormalBlending, NearestMipmapNearestFilter, LinearMipmapNearestFilter, NearestMipmapLinearFilter, MirroredRepeatWrapping, InterpolateDiscrete, FrontSide, VectorKeyframeTrack, QuaternionKeyframeTrack, NumberKeyframeTrack, MeshPhongMaterial, MeshLambertMaterial, AmbientLight, Uint16BufferAttribute, Matrix3, UnsignedByteType, CompressedTexture, DataUtils, Interpolant, Curve, RGFormat } from "three";
import { useTresContext, useRenderLoop, useLoader, useLogger, useTexture } from "@tresjs/core";
import "tweakpane";
import { ssrRenderAttrs, ssrRenderSuspense, ssrRenderSlot } from "vue/server-renderer";
import { _ as _export_sfc } from "./plugin-vue_export-helper.cc2b3d55.js";
var NA = Object.defineProperty;
var UA = (t, e, r) => e in t ? NA(t, e, { enumerable: true, configurable: true, writable: true, value: r }) : t[e] = r;
var tt = (t, e, r) => (UA(t, typeof e != "symbol" ? e + "" : e, r), r);
var nr = Uint8Array, Dn = Uint16Array, Dl = Uint32Array, ah = new nr([
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  1,
  1,
  1,
  1,
  2,
  2,
  2,
  2,
  3,
  3,
  3,
  3,
  4,
  4,
  4,
  4,
  5,
  5,
  5,
  5,
  0,
  /* unused */
  0,
  0,
  /* impossible */
  0
]), oh = new nr([
  0,
  0,
  0,
  0,
  1,
  1,
  2,
  2,
  3,
  3,
  4,
  4,
  5,
  5,
  6,
  6,
  7,
  7,
  8,
  8,
  9,
  9,
  10,
  10,
  11,
  11,
  12,
  12,
  13,
  13,
  /* unused */
  0,
  0
]), F5 = new nr([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]), lh = function(t, e) {
  for (var r = new Dn(31), n = 0; n < 31; ++n)
    r[n] = e += 1 << t[n - 1];
  for (var i = new Dl(r[30]), n = 1; n < 30; ++n)
    for (var s = r[n]; s < r[n + 1]; ++s)
      i[s] = s - r[n] << 5 | n;
  return [r, i];
}, ch = lh(ah, 2), uh = ch[0], L5 = ch[1];
uh[28] = 258, L5[258] = 28;
var O5 = lh(oh, 0), P5 = O5[0], kl = new Dn(32768);
for (var Je = 0; Je < 32768; ++Je) {
  var yn = (Je & 43690) >>> 1 | (Je & 21845) << 1;
  yn = (yn & 52428) >>> 2 | (yn & 13107) << 2, yn = (yn & 61680) >>> 4 | (yn & 3855) << 4, kl[Je] = ((yn & 65280) >>> 8 | (yn & 255) << 8) >>> 1;
}
var cs = function(t, e, r) {
  for (var n = t.length, i = 0, s = new Dn(e); i < n; ++i)
    ++s[t[i] - 1];
  var a = new Dn(e);
  for (i = 0; i < e; ++i)
    a[i] = a[i - 1] + s[i - 1] << 1;
  var o;
  if (r) {
    o = new Dn(1 << e);
    var l = 15 - e;
    for (i = 0; i < n; ++i)
      if (t[i])
        for (var c = i << 4 | t[i], u = e - t[i], h = a[t[i] - 1]++ << u, A = h | (1 << u) - 1; h <= A; ++h)
          o[kl[h] >>> l] = c;
  } else
    for (o = new Dn(n), i = 0; i < n; ++i)
      t[i] && (o[i] = kl[a[t[i] - 1]++] >>> 15 - t[i]);
  return o;
}, bs = new nr(288);
for (var Je = 0; Je < 144; ++Je)
  bs[Je] = 8;
for (var Je = 144; Je < 256; ++Je)
  bs[Je] = 9;
for (var Je = 256; Je < 280; ++Je)
  bs[Je] = 7;
for (var Je = 280; Je < 288; ++Je)
  bs[Je] = 8;
var hh = new nr(32);
for (var Je = 0; Je < 32; ++Je)
  hh[Je] = 5;
var Q5 = /* @__PURE__ */ cs(bs, 9, 1), N5 = /* @__PURE__ */ cs(hh, 5, 1), Lo = function(t) {
  for (var e = t[0], r = 1; r < t.length; ++r)
    t[r] > e && (e = t[r]);
  return e;
}, gr = function(t, e, r) {
  var n = e / 8 | 0;
  return (t[n] | t[n + 1] << 8) >> (e & 7) & r;
}, Oo = function(t, e) {
  var r = e / 8 | 0;
  return (t[r] | t[r + 1] << 8 | t[r + 2] << 16) >> (e & 7);
}, U5 = function(t) {
  return (t / 8 | 0) + (t & 7 && 1);
}, G5 = function(t, e, r) {
  (e == null || e < 0) && (e = 0), (r == null || r > t.length) && (r = t.length);
  var n = new (t instanceof Dn ? Dn : t instanceof Dl ? Dl : nr)(r - e);
  return n.set(t.subarray(e, r)), n;
}, H5 = function(t, e, r) {
  var n = t.length;
  if (!n || r && !r.l && n < 5)
    return e || new nr(0);
  var i = !e || r, s = !r || r.i;
  r || (r = {}), e || (e = new nr(n * 3));
  var a = function(V) {
    var k = e.length;
    if (V > k) {
      var q = new nr(Math.max(k * 2, V));
      q.set(e), e = q;
    }
  }, o = r.f || 0, l = r.p || 0, c = r.b || 0, u = r.l, h = r.d, A = r.m, f = r.n, d = n * 8;
  do {
    if (!u) {
      r.f = o = gr(t, l, 1);
      var v = gr(t, l + 1, 3);
      if (l += 3, v)
        if (v == 1)
          u = Q5, h = N5, A = 9, f = 5;
        else if (v == 2) {
          var p = gr(t, l, 31) + 257, g = gr(t, l + 10, 15) + 4, C = p + gr(t, l + 5, 31) + 1;
          l += 14;
          for (var S = new nr(C), x = new nr(19), T = 0; T < g; ++T)
            x[F5[T]] = gr(t, l + T * 3, 7);
          l += g * 3;
          for (var B = Lo(x), R = (1 << B) - 1, _ = cs(x, B, 1), T = 0; T < C; ) {
            var F = _[gr(t, l, R)];
            l += F & 15;
            var m = F >>> 4;
            if (m < 16)
              S[T++] = m;
            else {
              var U = 0, Y = 0;
              for (m == 16 ? (Y = 3 + gr(t, l, 3), l += 2, U = S[T - 1]) : m == 17 ? (Y = 3 + gr(t, l, 7), l += 3) : m == 18 && (Y = 11 + gr(t, l, 127), l += 7); Y--; )
                S[T++] = U;
            }
          }
          var N = S.subarray(0, p), Z = S.subarray(p);
          A = Lo(N), f = Lo(Z), u = cs(N, A, 1), h = cs(Z, f, 1);
        } else
          throw "invalid block type";
      else {
        var m = U5(l) + 4, E = t[m - 4] | t[m - 3] << 8, y = m + E;
        if (y > n) {
          if (s)
            throw "unexpected EOF";
          break;
        }
        i && a(c + E), e.set(t.subarray(m, y), c), r.b = c += E, r.p = l = y * 8;
        continue;
      }
      if (l > d) {
        if (s)
          throw "unexpected EOF";
        break;
      }
    }
    i && a(c + 131072);
    for (var j = (1 << A) - 1, Q = (1 << f) - 1, $ = l; ; $ = l) {
      var U = u[Oo(t, l) & j], X = U >>> 4;
      if (l += U & 15, l > d) {
        if (s)
          throw "unexpected EOF";
        break;
      }
      if (!U)
        throw "invalid length/literal";
      if (X < 256)
        e[c++] = X;
      else if (X == 256) {
        $ = l, u = null;
        break;
      } else {
        var K = X - 254;
        if (X > 264) {
          var T = X - 257, D = ah[T];
          K = gr(t, l, (1 << D) - 1) + uh[T], l += D;
        }
        var L = h[Oo(t, l) & Q], I = L >>> 4;
        if (!L)
          throw "invalid distance";
        l += L & 15;
        var Z = P5[I];
        if (I > 3) {
          var D = oh[I];
          Z += Oo(t, l) & (1 << D) - 1, l += D;
        }
        if (l > d) {
          if (s)
            throw "unexpected EOF";
          break;
        }
        i && a(c + 131072);
        for (var O = c + K; c < O; c += 4)
          e[c] = e[c - Z], e[c + 1] = e[c + 1 - Z], e[c + 2] = e[c + 2 - Z], e[c + 3] = e[c + 3 - Z];
        c = O;
      }
    }
    r.l = u, r.p = $, r.b = c, u && (o = 1, r.m = A, r.d = h, r.n = f);
  } while (!o);
  return c == e.length ? e : G5(e, 0, c);
}, V5 = /* @__PURE__ */ new nr(0), z5 = function(t) {
  if ((t[0] & 15) != 8 || t[0] >>> 4 > 7 || (t[0] << 8 | t[1]) % 31)
    throw "invalid zlib data";
  if (t[1] & 32)
    throw "invalid zlib data: preset dictionaries not supported";
};
function Y5(t, e) {
  return H5((z5(t), t.subarray(2, -4)), e);
}
var W5 = typeof TextDecoder < "u" && /* @__PURE__ */ new TextDecoder(), j5 = 0;
try {
  W5.decode(V5, { stream: true }), j5 = 1;
} catch {
}
function mc() {
}
mc.prototype.s2u = function(t) {
  for (var e = this.s2uTable, r = "", n = 0; n < t.length; ) {
    var i = t[n++];
    if (!(i >= 0 && i <= 126 || i >= 161 && i <= 223) && n < t.length && (i = i << 8 | t[n++]), e[i] === void 0)
      return console.error("unknown char code " + i + "."), r;
    r += String.fromCharCode(e[i]);
  }
  return r;
};
mc.prototype.s2uTable = {
  0: 0,
  1: 1,
  2: 2,
  3: 3,
  4: 4,
  5: 5,
  6: 6,
  7: 7,
  8: 8,
  9: 9,
  10: 10,
  11: 11,
  12: 12,
  13: 13,
  14: 14,
  15: 15,
  16: 16,
  17: 17,
  18: 18,
  19: 19,
  20: 20,
  21: 21,
  22: 22,
  23: 23,
  24: 24,
  25: 25,
  26: 26,
  27: 27,
  28: 28,
  29: 29,
  30: 30,
  31: 31,
  32: 32,
  33: 33,
  34: 34,
  35: 35,
  36: 36,
  37: 37,
  38: 38,
  39: 39,
  40: 40,
  41: 41,
  42: 42,
  43: 43,
  44: 44,
  45: 45,
  46: 46,
  47: 47,
  48: 48,
  49: 49,
  50: 50,
  51: 51,
  52: 52,
  53: 53,
  54: 54,
  55: 55,
  56: 56,
  57: 57,
  58: 58,
  59: 59,
  60: 60,
  61: 61,
  62: 62,
  63: 63,
  64: 64,
  65: 65,
  66: 66,
  67: 67,
  68: 68,
  69: 69,
  70: 70,
  71: 71,
  72: 72,
  73: 73,
  74: 74,
  75: 75,
  76: 76,
  77: 77,
  78: 78,
  79: 79,
  80: 80,
  81: 81,
  82: 82,
  83: 83,
  84: 84,
  85: 85,
  86: 86,
  87: 87,
  88: 88,
  89: 89,
  90: 90,
  91: 91,
  92: 92,
  93: 93,
  94: 94,
  95: 95,
  96: 96,
  97: 97,
  98: 98,
  99: 99,
  100: 100,
  101: 101,
  102: 102,
  103: 103,
  104: 104,
  105: 105,
  106: 106,
  107: 107,
  108: 108,
  109: 109,
  110: 110,
  111: 111,
  112: 112,
  113: 113,
  114: 114,
  115: 115,
  116: 116,
  117: 117,
  118: 118,
  119: 119,
  120: 120,
  121: 121,
  122: 122,
  123: 123,
  124: 124,
  125: 125,
  126: 126,
  161: 65377,
  162: 65378,
  163: 65379,
  164: 65380,
  165: 65381,
  166: 65382,
  167: 65383,
  168: 65384,
  169: 65385,
  170: 65386,
  171: 65387,
  172: 65388,
  173: 65389,
  174: 65390,
  175: 65391,
  176: 65392,
  177: 65393,
  178: 65394,
  179: 65395,
  180: 65396,
  181: 65397,
  182: 65398,
  183: 65399,
  184: 65400,
  185: 65401,
  186: 65402,
  187: 65403,
  188: 65404,
  189: 65405,
  190: 65406,
  191: 65407,
  192: 65408,
  193: 65409,
  194: 65410,
  195: 65411,
  196: 65412,
  197: 65413,
  198: 65414,
  199: 65415,
  200: 65416,
  201: 65417,
  202: 65418,
  203: 65419,
  204: 65420,
  205: 65421,
  206: 65422,
  207: 65423,
  208: 65424,
  209: 65425,
  210: 65426,
  211: 65427,
  212: 65428,
  213: 65429,
  214: 65430,
  215: 65431,
  216: 65432,
  217: 65433,
  218: 65434,
  219: 65435,
  220: 65436,
  221: 65437,
  222: 65438,
  223: 65439,
  33088: 12288,
  33089: 12289,
  33090: 12290,
  33091: 65292,
  33092: 65294,
  33093: 12539,
  33094: 65306,
  33095: 65307,
  33096: 65311,
  33097: 65281,
  33098: 12443,
  33099: 12444,
  33100: 180,
  33101: 65344,
  33102: 168,
  33103: 65342,
  33104: 65507,
  33105: 65343,
  33106: 12541,
  33107: 12542,
  33108: 12445,
  33109: 12446,
  33110: 12291,
  33111: 20189,
  33112: 12293,
  33113: 12294,
  33114: 12295,
  33115: 12540,
  33116: 8213,
  33117: 8208,
  33118: 65295,
  33119: 65340,
  33120: 65374,
  33121: 8741,
  33122: 65372,
  33123: 8230,
  33124: 8229,
  33125: 8216,
  33126: 8217,
  33127: 8220,
  33128: 8221,
  33129: 65288,
  33130: 65289,
  33131: 12308,
  33132: 12309,
  33133: 65339,
  33134: 65341,
  33135: 65371,
  33136: 65373,
  33137: 12296,
  33138: 12297,
  33139: 12298,
  33140: 12299,
  33141: 12300,
  33142: 12301,
  33143: 12302,
  33144: 12303,
  33145: 12304,
  33146: 12305,
  33147: 65291,
  33148: 65293,
  33149: 177,
  33150: 215,
  33152: 247,
  33153: 65309,
  33154: 8800,
  33155: 65308,
  33156: 65310,
  33157: 8806,
  33158: 8807,
  33159: 8734,
  33160: 8756,
  33161: 9794,
  33162: 9792,
  33163: 176,
  33164: 8242,
  33165: 8243,
  33166: 8451,
  33167: 65509,
  33168: 65284,
  33169: 65504,
  33170: 65505,
  33171: 65285,
  33172: 65283,
  33173: 65286,
  33174: 65290,
  33175: 65312,
  33176: 167,
  33177: 9734,
  33178: 9733,
  33179: 9675,
  33180: 9679,
  33181: 9678,
  33182: 9671,
  33183: 9670,
  33184: 9633,
  33185: 9632,
  33186: 9651,
  33187: 9650,
  33188: 9661,
  33189: 9660,
  33190: 8251,
  33191: 12306,
  33192: 8594,
  33193: 8592,
  33194: 8593,
  33195: 8595,
  33196: 12307,
  33208: 8712,
  33209: 8715,
  33210: 8838,
  33211: 8839,
  33212: 8834,
  33213: 8835,
  33214: 8746,
  33215: 8745,
  33224: 8743,
  33225: 8744,
  33226: 65506,
  33227: 8658,
  33228: 8660,
  33229: 8704,
  33230: 8707,
  33242: 8736,
  33243: 8869,
  33244: 8978,
  33245: 8706,
  33246: 8711,
  33247: 8801,
  33248: 8786,
  33249: 8810,
  33250: 8811,
  33251: 8730,
  33252: 8765,
  33253: 8733,
  33254: 8757,
  33255: 8747,
  33256: 8748,
  33264: 8491,
  33265: 8240,
  33266: 9839,
  33267: 9837,
  33268: 9834,
  33269: 8224,
  33270: 8225,
  33271: 182,
  33276: 9711,
  33359: 65296,
  33360: 65297,
  33361: 65298,
  33362: 65299,
  33363: 65300,
  33364: 65301,
  33365: 65302,
  33366: 65303,
  33367: 65304,
  33368: 65305,
  33376: 65313,
  33377: 65314,
  33378: 65315,
  33379: 65316,
  33380: 65317,
  33381: 65318,
  33382: 65319,
  33383: 65320,
  33384: 65321,
  33385: 65322,
  33386: 65323,
  33387: 65324,
  33388: 65325,
  33389: 65326,
  33390: 65327,
  33391: 65328,
  33392: 65329,
  33393: 65330,
  33394: 65331,
  33395: 65332,
  33396: 65333,
  33397: 65334,
  33398: 65335,
  33399: 65336,
  33400: 65337,
  33401: 65338,
  33409: 65345,
  33410: 65346,
  33411: 65347,
  33412: 65348,
  33413: 65349,
  33414: 65350,
  33415: 65351,
  33416: 65352,
  33417: 65353,
  33418: 65354,
  33419: 65355,
  33420: 65356,
  33421: 65357,
  33422: 65358,
  33423: 65359,
  33424: 65360,
  33425: 65361,
  33426: 65362,
  33427: 65363,
  33428: 65364,
  33429: 65365,
  33430: 65366,
  33431: 65367,
  33432: 65368,
  33433: 65369,
  33434: 65370,
  33439: 12353,
  33440: 12354,
  33441: 12355,
  33442: 12356,
  33443: 12357,
  33444: 12358,
  33445: 12359,
  33446: 12360,
  33447: 12361,
  33448: 12362,
  33449: 12363,
  33450: 12364,
  33451: 12365,
  33452: 12366,
  33453: 12367,
  33454: 12368,
  33455: 12369,
  33456: 12370,
  33457: 12371,
  33458: 12372,
  33459: 12373,
  33460: 12374,
  33461: 12375,
  33462: 12376,
  33463: 12377,
  33464: 12378,
  33465: 12379,
  33466: 12380,
  33467: 12381,
  33468: 12382,
  33469: 12383,
  33470: 12384,
  33471: 12385,
  33472: 12386,
  33473: 12387,
  33474: 12388,
  33475: 12389,
  33476: 12390,
  33477: 12391,
  33478: 12392,
  33479: 12393,
  33480: 12394,
  33481: 12395,
  33482: 12396,
  33483: 12397,
  33484: 12398,
  33485: 12399,
  33486: 12400,
  33487: 12401,
  33488: 12402,
  33489: 12403,
  33490: 12404,
  33491: 12405,
  33492: 12406,
  33493: 12407,
  33494: 12408,
  33495: 12409,
  33496: 12410,
  33497: 12411,
  33498: 12412,
  33499: 12413,
  33500: 12414,
  33501: 12415,
  33502: 12416,
  33503: 12417,
  33504: 12418,
  33505: 12419,
  33506: 12420,
  33507: 12421,
  33508: 12422,
  33509: 12423,
  33510: 12424,
  33511: 12425,
  33512: 12426,
  33513: 12427,
  33514: 12428,
  33515: 12429,
  33516: 12430,
  33517: 12431,
  33518: 12432,
  33519: 12433,
  33520: 12434,
  33521: 12435,
  33600: 12449,
  33601: 12450,
  33602: 12451,
  33603: 12452,
  33604: 12453,
  33605: 12454,
  33606: 12455,
  33607: 12456,
  33608: 12457,
  33609: 12458,
  33610: 12459,
  33611: 12460,
  33612: 12461,
  33613: 12462,
  33614: 12463,
  33615: 12464,
  33616: 12465,
  33617: 12466,
  33618: 12467,
  33619: 12468,
  33620: 12469,
  33621: 12470,
  33622: 12471,
  33623: 12472,
  33624: 12473,
  33625: 12474,
  33626: 12475,
  33627: 12476,
  33628: 12477,
  33629: 12478,
  33630: 12479,
  33631: 12480,
  33632: 12481,
  33633: 12482,
  33634: 12483,
  33635: 12484,
  33636: 12485,
  33637: 12486,
  33638: 12487,
  33639: 12488,
  33640: 12489,
  33641: 12490,
  33642: 12491,
  33643: 12492,
  33644: 12493,
  33645: 12494,
  33646: 12495,
  33647: 12496,
  33648: 12497,
  33649: 12498,
  33650: 12499,
  33651: 12500,
  33652: 12501,
  33653: 12502,
  33654: 12503,
  33655: 12504,
  33656: 12505,
  33657: 12506,
  33658: 12507,
  33659: 12508,
  33660: 12509,
  33661: 12510,
  33662: 12511,
  33664: 12512,
  33665: 12513,
  33666: 12514,
  33667: 12515,
  33668: 12516,
  33669: 12517,
  33670: 12518,
  33671: 12519,
  33672: 12520,
  33673: 12521,
  33674: 12522,
  33675: 12523,
  33676: 12524,
  33677: 12525,
  33678: 12526,
  33679: 12527,
  33680: 12528,
  33681: 12529,
  33682: 12530,
  33683: 12531,
  33684: 12532,
  33685: 12533,
  33686: 12534,
  33695: 913,
  33696: 914,
  33697: 915,
  33698: 916,
  33699: 917,
  33700: 918,
  33701: 919,
  33702: 920,
  33703: 921,
  33704: 922,
  33705: 923,
  33706: 924,
  33707: 925,
  33708: 926,
  33709: 927,
  33710: 928,
  33711: 929,
  33712: 931,
  33713: 932,
  33714: 933,
  33715: 934,
  33716: 935,
  33717: 936,
  33718: 937,
  33727: 945,
  33728: 946,
  33729: 947,
  33730: 948,
  33731: 949,
  33732: 950,
  33733: 951,
  33734: 952,
  33735: 953,
  33736: 954,
  33737: 955,
  33738: 956,
  33739: 957,
  33740: 958,
  33741: 959,
  33742: 960,
  33743: 961,
  33744: 963,
  33745: 964,
  33746: 965,
  33747: 966,
  33748: 967,
  33749: 968,
  33750: 969,
  33856: 1040,
  33857: 1041,
  33858: 1042,
  33859: 1043,
  33860: 1044,
  33861: 1045,
  33862: 1025,
  33863: 1046,
  33864: 1047,
  33865: 1048,
  33866: 1049,
  33867: 1050,
  33868: 1051,
  33869: 1052,
  33870: 1053,
  33871: 1054,
  33872: 1055,
  33873: 1056,
  33874: 1057,
  33875: 1058,
  33876: 1059,
  33877: 1060,
  33878: 1061,
  33879: 1062,
  33880: 1063,
  33881: 1064,
  33882: 1065,
  33883: 1066,
  33884: 1067,
  33885: 1068,
  33886: 1069,
  33887: 1070,
  33888: 1071,
  33904: 1072,
  33905: 1073,
  33906: 1074,
  33907: 1075,
  33908: 1076,
  33909: 1077,
  33910: 1105,
  33911: 1078,
  33912: 1079,
  33913: 1080,
  33914: 1081,
  33915: 1082,
  33916: 1083,
  33917: 1084,
  33918: 1085,
  33920: 1086,
  33921: 1087,
  33922: 1088,
  33923: 1089,
  33924: 1090,
  33925: 1091,
  33926: 1092,
  33927: 1093,
  33928: 1094,
  33929: 1095,
  33930: 1096,
  33931: 1097,
  33932: 1098,
  33933: 1099,
  33934: 1100,
  33935: 1101,
  33936: 1102,
  33937: 1103,
  33951: 9472,
  33952: 9474,
  33953: 9484,
  33954: 9488,
  33955: 9496,
  33956: 9492,
  33957: 9500,
  33958: 9516,
  33959: 9508,
  33960: 9524,
  33961: 9532,
  33962: 9473,
  33963: 9475,
  33964: 9487,
  33965: 9491,
  33966: 9499,
  33967: 9495,
  33968: 9507,
  33969: 9523,
  33970: 9515,
  33971: 9531,
  33972: 9547,
  33973: 9504,
  33974: 9519,
  33975: 9512,
  33976: 9527,
  33977: 9535,
  33978: 9501,
  33979: 9520,
  33980: 9509,
  33981: 9528,
  33982: 9538,
  34624: 9312,
  34625: 9313,
  34626: 9314,
  34627: 9315,
  34628: 9316,
  34629: 9317,
  34630: 9318,
  34631: 9319,
  34632: 9320,
  34633: 9321,
  34634: 9322,
  34635: 9323,
  34636: 9324,
  34637: 9325,
  34638: 9326,
  34639: 9327,
  34640: 9328,
  34641: 9329,
  34642: 9330,
  34643: 9331,
  34644: 8544,
  34645: 8545,
  34646: 8546,
  34647: 8547,
  34648: 8548,
  34649: 8549,
  34650: 8550,
  34651: 8551,
  34652: 8552,
  34653: 8553,
  34655: 13129,
  34656: 13076,
  34657: 13090,
  34658: 13133,
  34659: 13080,
  34660: 13095,
  34661: 13059,
  34662: 13110,
  34663: 13137,
  34664: 13143,
  34665: 13069,
  34666: 13094,
  34667: 13091,
  34668: 13099,
  34669: 13130,
  34670: 13115,
  34671: 13212,
  34672: 13213,
  34673: 13214,
  34674: 13198,
  34675: 13199,
  34676: 13252,
  34677: 13217,
  34686: 13179,
  34688: 12317,
  34689: 12319,
  34690: 8470,
  34691: 13261,
  34692: 8481,
  34693: 12964,
  34694: 12965,
  34695: 12966,
  34696: 12967,
  34697: 12968,
  34698: 12849,
  34699: 12850,
  34700: 12857,
  34701: 13182,
  34702: 13181,
  34703: 13180,
  34704: 8786,
  34705: 8801,
  34706: 8747,
  34707: 8750,
  34708: 8721,
  34709: 8730,
  34710: 8869,
  34711: 8736,
  34712: 8735,
  34713: 8895,
  34714: 8757,
  34715: 8745,
  34716: 8746,
  34975: 20124,
  34976: 21782,
  34977: 23043,
  34978: 38463,
  34979: 21696,
  34980: 24859,
  34981: 25384,
  34982: 23030,
  34983: 36898,
  34984: 33909,
  34985: 33564,
  34986: 31312,
  34987: 24746,
  34988: 25569,
  34989: 28197,
  34990: 26093,
  34991: 33894,
  34992: 33446,
  34993: 39925,
  34994: 26771,
  34995: 22311,
  34996: 26017,
  34997: 25201,
  34998: 23451,
  34999: 22992,
  35e3: 34427,
  35001: 39156,
  35002: 32098,
  35003: 32190,
  35004: 39822,
  35005: 25110,
  35006: 31903,
  35007: 34999,
  35008: 23433,
  35009: 24245,
  35010: 25353,
  35011: 26263,
  35012: 26696,
  35013: 38343,
  35014: 38797,
  35015: 26447,
  35016: 20197,
  35017: 20234,
  35018: 20301,
  35019: 20381,
  35020: 20553,
  35021: 22258,
  35022: 22839,
  35023: 22996,
  35024: 23041,
  35025: 23561,
  35026: 24799,
  35027: 24847,
  35028: 24944,
  35029: 26131,
  35030: 26885,
  35031: 28858,
  35032: 30031,
  35033: 30064,
  35034: 31227,
  35035: 32173,
  35036: 32239,
  35037: 32963,
  35038: 33806,
  35039: 34915,
  35040: 35586,
  35041: 36949,
  35042: 36986,
  35043: 21307,
  35044: 20117,
  35045: 20133,
  35046: 22495,
  35047: 32946,
  35048: 37057,
  35049: 30959,
  35050: 19968,
  35051: 22769,
  35052: 28322,
  35053: 36920,
  35054: 31282,
  35055: 33576,
  35056: 33419,
  35057: 39983,
  35058: 20801,
  35059: 21360,
  35060: 21693,
  35061: 21729,
  35062: 22240,
  35063: 23035,
  35064: 24341,
  35065: 39154,
  35066: 28139,
  35067: 32996,
  35068: 34093,
  35136: 38498,
  35137: 38512,
  35138: 38560,
  35139: 38907,
  35140: 21515,
  35141: 21491,
  35142: 23431,
  35143: 28879,
  35144: 32701,
  35145: 36802,
  35146: 38632,
  35147: 21359,
  35148: 40284,
  35149: 31418,
  35150: 19985,
  35151: 30867,
  35152: 33276,
  35153: 28198,
  35154: 22040,
  35155: 21764,
  35156: 27421,
  35157: 34074,
  35158: 39995,
  35159: 23013,
  35160: 21417,
  35161: 28006,
  35162: 29916,
  35163: 38287,
  35164: 22082,
  35165: 20113,
  35166: 36939,
  35167: 38642,
  35168: 33615,
  35169: 39180,
  35170: 21473,
  35171: 21942,
  35172: 23344,
  35173: 24433,
  35174: 26144,
  35175: 26355,
  35176: 26628,
  35177: 27704,
  35178: 27891,
  35179: 27945,
  35180: 29787,
  35181: 30408,
  35182: 31310,
  35183: 38964,
  35184: 33521,
  35185: 34907,
  35186: 35424,
  35187: 37613,
  35188: 28082,
  35189: 30123,
  35190: 30410,
  35191: 39365,
  35192: 24742,
  35193: 35585,
  35194: 36234,
  35195: 38322,
  35196: 27022,
  35197: 21421,
  35198: 20870,
  35200: 22290,
  35201: 22576,
  35202: 22852,
  35203: 23476,
  35204: 24310,
  35205: 24616,
  35206: 25513,
  35207: 25588,
  35208: 27839,
  35209: 28436,
  35210: 28814,
  35211: 28948,
  35212: 29017,
  35213: 29141,
  35214: 29503,
  35215: 32257,
  35216: 33398,
  35217: 33489,
  35218: 34199,
  35219: 36960,
  35220: 37467,
  35221: 40219,
  35222: 22633,
  35223: 26044,
  35224: 27738,
  35225: 29989,
  35226: 20985,
  35227: 22830,
  35228: 22885,
  35229: 24448,
  35230: 24540,
  35231: 25276,
  35232: 26106,
  35233: 27178,
  35234: 27431,
  35235: 27572,
  35236: 29579,
  35237: 32705,
  35238: 35158,
  35239: 40236,
  35240: 40206,
  35241: 40644,
  35242: 23713,
  35243: 27798,
  35244: 33659,
  35245: 20740,
  35246: 23627,
  35247: 25014,
  35248: 33222,
  35249: 26742,
  35250: 29281,
  35251: 20057,
  35252: 20474,
  35253: 21368,
  35254: 24681,
  35255: 28201,
  35256: 31311,
  35257: 38899,
  35258: 19979,
  35259: 21270,
  35260: 20206,
  35261: 20309,
  35262: 20285,
  35263: 20385,
  35264: 20339,
  35265: 21152,
  35266: 21487,
  35267: 22025,
  35268: 22799,
  35269: 23233,
  35270: 23478,
  35271: 23521,
  35272: 31185,
  35273: 26247,
  35274: 26524,
  35275: 26550,
  35276: 27468,
  35277: 27827,
  35278: 28779,
  35279: 29634,
  35280: 31117,
  35281: 31166,
  35282: 31292,
  35283: 31623,
  35284: 33457,
  35285: 33499,
  35286: 33540,
  35287: 33655,
  35288: 33775,
  35289: 33747,
  35290: 34662,
  35291: 35506,
  35292: 22057,
  35293: 36008,
  35294: 36838,
  35295: 36942,
  35296: 38686,
  35297: 34442,
  35298: 20420,
  35299: 23784,
  35300: 25105,
  35301: 29273,
  35302: 30011,
  35303: 33253,
  35304: 33469,
  35305: 34558,
  35306: 36032,
  35307: 38597,
  35308: 39187,
  35309: 39381,
  35310: 20171,
  35311: 20250,
  35312: 35299,
  35313: 22238,
  35314: 22602,
  35315: 22730,
  35316: 24315,
  35317: 24555,
  35318: 24618,
  35319: 24724,
  35320: 24674,
  35321: 25040,
  35322: 25106,
  35323: 25296,
  35324: 25913,
  35392: 39745,
  35393: 26214,
  35394: 26800,
  35395: 28023,
  35396: 28784,
  35397: 30028,
  35398: 30342,
  35399: 32117,
  35400: 33445,
  35401: 34809,
  35402: 38283,
  35403: 38542,
  35404: 35997,
  35405: 20977,
  35406: 21182,
  35407: 22806,
  35408: 21683,
  35409: 23475,
  35410: 23830,
  35411: 24936,
  35412: 27010,
  35413: 28079,
  35414: 30861,
  35415: 33995,
  35416: 34903,
  35417: 35442,
  35418: 37799,
  35419: 39608,
  35420: 28012,
  35421: 39336,
  35422: 34521,
  35423: 22435,
  35424: 26623,
  35425: 34510,
  35426: 37390,
  35427: 21123,
  35428: 22151,
  35429: 21508,
  35430: 24275,
  35431: 25313,
  35432: 25785,
  35433: 26684,
  35434: 26680,
  35435: 27579,
  35436: 29554,
  35437: 30906,
  35438: 31339,
  35439: 35226,
  35440: 35282,
  35441: 36203,
  35442: 36611,
  35443: 37101,
  35444: 38307,
  35445: 38548,
  35446: 38761,
  35447: 23398,
  35448: 23731,
  35449: 27005,
  35450: 38989,
  35451: 38990,
  35452: 25499,
  35453: 31520,
  35454: 27179,
  35456: 27263,
  35457: 26806,
  35458: 39949,
  35459: 28511,
  35460: 21106,
  35461: 21917,
  35462: 24688,
  35463: 25324,
  35464: 27963,
  35465: 28167,
  35466: 28369,
  35467: 33883,
  35468: 35088,
  35469: 36676,
  35470: 19988,
  35471: 39993,
  35472: 21494,
  35473: 26907,
  35474: 27194,
  35475: 38788,
  35476: 26666,
  35477: 20828,
  35478: 31427,
  35479: 33970,
  35480: 37340,
  35481: 37772,
  35482: 22107,
  35483: 40232,
  35484: 26658,
  35485: 33541,
  35486: 33841,
  35487: 31909,
  35488: 21e3,
  35489: 33477,
  35490: 29926,
  35491: 20094,
  35492: 20355,
  35493: 20896,
  35494: 23506,
  35495: 21002,
  35496: 21208,
  35497: 21223,
  35498: 24059,
  35499: 21914,
  35500: 22570,
  35501: 23014,
  35502: 23436,
  35503: 23448,
  35504: 23515,
  35505: 24178,
  35506: 24185,
  35507: 24739,
  35508: 24863,
  35509: 24931,
  35510: 25022,
  35511: 25563,
  35512: 25954,
  35513: 26577,
  35514: 26707,
  35515: 26874,
  35516: 27454,
  35517: 27475,
  35518: 27735,
  35519: 28450,
  35520: 28567,
  35521: 28485,
  35522: 29872,
  35523: 29976,
  35524: 30435,
  35525: 30475,
  35526: 31487,
  35527: 31649,
  35528: 31777,
  35529: 32233,
  35530: 32566,
  35531: 32752,
  35532: 32925,
  35533: 33382,
  35534: 33694,
  35535: 35251,
  35536: 35532,
  35537: 36011,
  35538: 36996,
  35539: 37969,
  35540: 38291,
  35541: 38289,
  35542: 38306,
  35543: 38501,
  35544: 38867,
  35545: 39208,
  35546: 33304,
  35547: 20024,
  35548: 21547,
  35549: 23736,
  35550: 24012,
  35551: 29609,
  35552: 30284,
  35553: 30524,
  35554: 23721,
  35555: 32747,
  35556: 36107,
  35557: 38593,
  35558: 38929,
  35559: 38996,
  35560: 39e3,
  35561: 20225,
  35562: 20238,
  35563: 21361,
  35564: 21916,
  35565: 22120,
  35566: 22522,
  35567: 22855,
  35568: 23305,
  35569: 23492,
  35570: 23696,
  35571: 24076,
  35572: 24190,
  35573: 24524,
  35574: 25582,
  35575: 26426,
  35576: 26071,
  35577: 26082,
  35578: 26399,
  35579: 26827,
  35580: 26820,
  35648: 27231,
  35649: 24112,
  35650: 27589,
  35651: 27671,
  35652: 27773,
  35653: 30079,
  35654: 31048,
  35655: 23395,
  35656: 31232,
  35657: 32e3,
  35658: 24509,
  35659: 35215,
  35660: 35352,
  35661: 36020,
  35662: 36215,
  35663: 36556,
  35664: 36637,
  35665: 39138,
  35666: 39438,
  35667: 39740,
  35668: 20096,
  35669: 20605,
  35670: 20736,
  35671: 22931,
  35672: 23452,
  35673: 25135,
  35674: 25216,
  35675: 25836,
  35676: 27450,
  35677: 29344,
  35678: 30097,
  35679: 31047,
  35680: 32681,
  35681: 34811,
  35682: 35516,
  35683: 35696,
  35684: 25516,
  35685: 33738,
  35686: 38816,
  35687: 21513,
  35688: 21507,
  35689: 21931,
  35690: 26708,
  35691: 27224,
  35692: 35440,
  35693: 30759,
  35694: 26485,
  35695: 40653,
  35696: 21364,
  35697: 23458,
  35698: 33050,
  35699: 34384,
  35700: 36870,
  35701: 19992,
  35702: 20037,
  35703: 20167,
  35704: 20241,
  35705: 21450,
  35706: 21560,
  35707: 23470,
  35708: 24339,
  35709: 24613,
  35710: 25937,
  35712: 26429,
  35713: 27714,
  35714: 27762,
  35715: 27875,
  35716: 28792,
  35717: 29699,
  35718: 31350,
  35719: 31406,
  35720: 31496,
  35721: 32026,
  35722: 31998,
  35723: 32102,
  35724: 26087,
  35725: 29275,
  35726: 21435,
  35727: 23621,
  35728: 24040,
  35729: 25298,
  35730: 25312,
  35731: 25369,
  35732: 28192,
  35733: 34394,
  35734: 35377,
  35735: 36317,
  35736: 37624,
  35737: 28417,
  35738: 31142,
  35739: 39770,
  35740: 20136,
  35741: 20139,
  35742: 20140,
  35743: 20379,
  35744: 20384,
  35745: 20689,
  35746: 20807,
  35747: 31478,
  35748: 20849,
  35749: 20982,
  35750: 21332,
  35751: 21281,
  35752: 21375,
  35753: 21483,
  35754: 21932,
  35755: 22659,
  35756: 23777,
  35757: 24375,
  35758: 24394,
  35759: 24623,
  35760: 24656,
  35761: 24685,
  35762: 25375,
  35763: 25945,
  35764: 27211,
  35765: 27841,
  35766: 29378,
  35767: 29421,
  35768: 30703,
  35769: 33016,
  35770: 33029,
  35771: 33288,
  35772: 34126,
  35773: 37111,
  35774: 37857,
  35775: 38911,
  35776: 39255,
  35777: 39514,
  35778: 20208,
  35779: 20957,
  35780: 23597,
  35781: 26241,
  35782: 26989,
  35783: 23616,
  35784: 26354,
  35785: 26997,
  35786: 29577,
  35787: 26704,
  35788: 31873,
  35789: 20677,
  35790: 21220,
  35791: 22343,
  35792: 24062,
  35793: 37670,
  35794: 26020,
  35795: 27427,
  35796: 27453,
  35797: 29748,
  35798: 31105,
  35799: 31165,
  35800: 31563,
  35801: 32202,
  35802: 33465,
  35803: 33740,
  35804: 34943,
  35805: 35167,
  35806: 35641,
  35807: 36817,
  35808: 37329,
  35809: 21535,
  35810: 37504,
  35811: 20061,
  35812: 20534,
  35813: 21477,
  35814: 21306,
  35815: 29399,
  35816: 29590,
  35817: 30697,
  35818: 33510,
  35819: 36527,
  35820: 39366,
  35821: 39368,
  35822: 39378,
  35823: 20855,
  35824: 24858,
  35825: 34398,
  35826: 21936,
  35827: 31354,
  35828: 20598,
  35829: 23507,
  35830: 36935,
  35831: 38533,
  35832: 20018,
  35833: 27355,
  35834: 37351,
  35835: 23633,
  35836: 23624,
  35904: 25496,
  35905: 31391,
  35906: 27795,
  35907: 38772,
  35908: 36705,
  35909: 31402,
  35910: 29066,
  35911: 38536,
  35912: 31874,
  35913: 26647,
  35914: 32368,
  35915: 26705,
  35916: 37740,
  35917: 21234,
  35918: 21531,
  35919: 34219,
  35920: 35347,
  35921: 32676,
  35922: 36557,
  35923: 37089,
  35924: 21350,
  35925: 34952,
  35926: 31041,
  35927: 20418,
  35928: 20670,
  35929: 21009,
  35930: 20804,
  35931: 21843,
  35932: 22317,
  35933: 29674,
  35934: 22411,
  35935: 22865,
  35936: 24418,
  35937: 24452,
  35938: 24693,
  35939: 24950,
  35940: 24935,
  35941: 25001,
  35942: 25522,
  35943: 25658,
  35944: 25964,
  35945: 26223,
  35946: 26690,
  35947: 28179,
  35948: 30054,
  35949: 31293,
  35950: 31995,
  35951: 32076,
  35952: 32153,
  35953: 32331,
  35954: 32619,
  35955: 33550,
  35956: 33610,
  35957: 34509,
  35958: 35336,
  35959: 35427,
  35960: 35686,
  35961: 36605,
  35962: 38938,
  35963: 40335,
  35964: 33464,
  35965: 36814,
  35966: 39912,
  35968: 21127,
  35969: 25119,
  35970: 25731,
  35971: 28608,
  35972: 38553,
  35973: 26689,
  35974: 20625,
  35975: 27424,
  35976: 27770,
  35977: 28500,
  35978: 31348,
  35979: 32080,
  35980: 34880,
  35981: 35363,
  35982: 26376,
  35983: 20214,
  35984: 20537,
  35985: 20518,
  35986: 20581,
  35987: 20860,
  35988: 21048,
  35989: 21091,
  35990: 21927,
  35991: 22287,
  35992: 22533,
  35993: 23244,
  35994: 24314,
  35995: 25010,
  35996: 25080,
  35997: 25331,
  35998: 25458,
  35999: 26908,
  36e3: 27177,
  36001: 29309,
  36002: 29356,
  36003: 29486,
  36004: 30740,
  36005: 30831,
  36006: 32121,
  36007: 30476,
  36008: 32937,
  36009: 35211,
  36010: 35609,
  36011: 36066,
  36012: 36562,
  36013: 36963,
  36014: 37749,
  36015: 38522,
  36016: 38997,
  36017: 39443,
  36018: 40568,
  36019: 20803,
  36020: 21407,
  36021: 21427,
  36022: 24187,
  36023: 24358,
  36024: 28187,
  36025: 28304,
  36026: 29572,
  36027: 29694,
  36028: 32067,
  36029: 33335,
  36030: 35328,
  36031: 35578,
  36032: 38480,
  36033: 20046,
  36034: 20491,
  36035: 21476,
  36036: 21628,
  36037: 22266,
  36038: 22993,
  36039: 23396,
  36040: 24049,
  36041: 24235,
  36042: 24359,
  36043: 25144,
  36044: 25925,
  36045: 26543,
  36046: 28246,
  36047: 29392,
  36048: 31946,
  36049: 34996,
  36050: 32929,
  36051: 32993,
  36052: 33776,
  36053: 34382,
  36054: 35463,
  36055: 36328,
  36056: 37431,
  36057: 38599,
  36058: 39015,
  36059: 40723,
  36060: 20116,
  36061: 20114,
  36062: 20237,
  36063: 21320,
  36064: 21577,
  36065: 21566,
  36066: 23087,
  36067: 24460,
  36068: 24481,
  36069: 24735,
  36070: 26791,
  36071: 27278,
  36072: 29786,
  36073: 30849,
  36074: 35486,
  36075: 35492,
  36076: 35703,
  36077: 37264,
  36078: 20062,
  36079: 39881,
  36080: 20132,
  36081: 20348,
  36082: 20399,
  36083: 20505,
  36084: 20502,
  36085: 20809,
  36086: 20844,
  36087: 21151,
  36088: 21177,
  36089: 21246,
  36090: 21402,
  36091: 21475,
  36092: 21521,
  36160: 21518,
  36161: 21897,
  36162: 22353,
  36163: 22434,
  36164: 22909,
  36165: 23380,
  36166: 23389,
  36167: 23439,
  36168: 24037,
  36169: 24039,
  36170: 24055,
  36171: 24184,
  36172: 24195,
  36173: 24218,
  36174: 24247,
  36175: 24344,
  36176: 24658,
  36177: 24908,
  36178: 25239,
  36179: 25304,
  36180: 25511,
  36181: 25915,
  36182: 26114,
  36183: 26179,
  36184: 26356,
  36185: 26477,
  36186: 26657,
  36187: 26775,
  36188: 27083,
  36189: 27743,
  36190: 27946,
  36191: 28009,
  36192: 28207,
  36193: 28317,
  36194: 30002,
  36195: 30343,
  36196: 30828,
  36197: 31295,
  36198: 31968,
  36199: 32005,
  36200: 32024,
  36201: 32094,
  36202: 32177,
  36203: 32789,
  36204: 32771,
  36205: 32943,
  36206: 32945,
  36207: 33108,
  36208: 33167,
  36209: 33322,
  36210: 33618,
  36211: 34892,
  36212: 34913,
  36213: 35611,
  36214: 36002,
  36215: 36092,
  36216: 37066,
  36217: 37237,
  36218: 37489,
  36219: 30783,
  36220: 37628,
  36221: 38308,
  36222: 38477,
  36224: 38917,
  36225: 39321,
  36226: 39640,
  36227: 40251,
  36228: 21083,
  36229: 21163,
  36230: 21495,
  36231: 21512,
  36232: 22741,
  36233: 25335,
  36234: 28640,
  36235: 35946,
  36236: 36703,
  36237: 40633,
  36238: 20811,
  36239: 21051,
  36240: 21578,
  36241: 22269,
  36242: 31296,
  36243: 37239,
  36244: 40288,
  36245: 40658,
  36246: 29508,
  36247: 28425,
  36248: 33136,
  36249: 29969,
  36250: 24573,
  36251: 24794,
  36252: 39592,
  36253: 29403,
  36254: 36796,
  36255: 27492,
  36256: 38915,
  36257: 20170,
  36258: 22256,
  36259: 22372,
  36260: 22718,
  36261: 23130,
  36262: 24680,
  36263: 25031,
  36264: 26127,
  36265: 26118,
  36266: 26681,
  36267: 26801,
  36268: 28151,
  36269: 30165,
  36270: 32058,
  36271: 33390,
  36272: 39746,
  36273: 20123,
  36274: 20304,
  36275: 21449,
  36276: 21766,
  36277: 23919,
  36278: 24038,
  36279: 24046,
  36280: 26619,
  36281: 27801,
  36282: 29811,
  36283: 30722,
  36284: 35408,
  36285: 37782,
  36286: 35039,
  36287: 22352,
  36288: 24231,
  36289: 25387,
  36290: 20661,
  36291: 20652,
  36292: 20877,
  36293: 26368,
  36294: 21705,
  36295: 22622,
  36296: 22971,
  36297: 23472,
  36298: 24425,
  36299: 25165,
  36300: 25505,
  36301: 26685,
  36302: 27507,
  36303: 28168,
  36304: 28797,
  36305: 37319,
  36306: 29312,
  36307: 30741,
  36308: 30758,
  36309: 31085,
  36310: 25998,
  36311: 32048,
  36312: 33756,
  36313: 35009,
  36314: 36617,
  36315: 38555,
  36316: 21092,
  36317: 22312,
  36318: 26448,
  36319: 32618,
  36320: 36001,
  36321: 20916,
  36322: 22338,
  36323: 38442,
  36324: 22586,
  36325: 27018,
  36326: 32948,
  36327: 21682,
  36328: 23822,
  36329: 22524,
  36330: 30869,
  36331: 40442,
  36332: 20316,
  36333: 21066,
  36334: 21643,
  36335: 25662,
  36336: 26152,
  36337: 26388,
  36338: 26613,
  36339: 31364,
  36340: 31574,
  36341: 32034,
  36342: 37679,
  36343: 26716,
  36344: 39853,
  36345: 31545,
  36346: 21273,
  36347: 20874,
  36348: 21047,
  36416: 23519,
  36417: 25334,
  36418: 25774,
  36419: 25830,
  36420: 26413,
  36421: 27578,
  36422: 34217,
  36423: 38609,
  36424: 30352,
  36425: 39894,
  36426: 25420,
  36427: 37638,
  36428: 39851,
  36429: 30399,
  36430: 26194,
  36431: 19977,
  36432: 20632,
  36433: 21442,
  36434: 23665,
  36435: 24808,
  36436: 25746,
  36437: 25955,
  36438: 26719,
  36439: 29158,
  36440: 29642,
  36441: 29987,
  36442: 31639,
  36443: 32386,
  36444: 34453,
  36445: 35715,
  36446: 36059,
  36447: 37240,
  36448: 39184,
  36449: 26028,
  36450: 26283,
  36451: 27531,
  36452: 20181,
  36453: 20180,
  36454: 20282,
  36455: 20351,
  36456: 21050,
  36457: 21496,
  36458: 21490,
  36459: 21987,
  36460: 22235,
  36461: 22763,
  36462: 22987,
  36463: 22985,
  36464: 23039,
  36465: 23376,
  36466: 23629,
  36467: 24066,
  36468: 24107,
  36469: 24535,
  36470: 24605,
  36471: 25351,
  36472: 25903,
  36473: 23388,
  36474: 26031,
  36475: 26045,
  36476: 26088,
  36477: 26525,
  36478: 27490,
  36480: 27515,
  36481: 27663,
  36482: 29509,
  36483: 31049,
  36484: 31169,
  36485: 31992,
  36486: 32025,
  36487: 32043,
  36488: 32930,
  36489: 33026,
  36490: 33267,
  36491: 35222,
  36492: 35422,
  36493: 35433,
  36494: 35430,
  36495: 35468,
  36496: 35566,
  36497: 36039,
  36498: 36060,
  36499: 38604,
  36500: 39164,
  36501: 27503,
  36502: 20107,
  36503: 20284,
  36504: 20365,
  36505: 20816,
  36506: 23383,
  36507: 23546,
  36508: 24904,
  36509: 25345,
  36510: 26178,
  36511: 27425,
  36512: 28363,
  36513: 27835,
  36514: 29246,
  36515: 29885,
  36516: 30164,
  36517: 30913,
  36518: 31034,
  36519: 32780,
  36520: 32819,
  36521: 33258,
  36522: 33940,
  36523: 36766,
  36524: 27728,
  36525: 40575,
  36526: 24335,
  36527: 35672,
  36528: 40235,
  36529: 31482,
  36530: 36600,
  36531: 23437,
  36532: 38635,
  36533: 19971,
  36534: 21489,
  36535: 22519,
  36536: 22833,
  36537: 23241,
  36538: 23460,
  36539: 24713,
  36540: 28287,
  36541: 28422,
  36542: 30142,
  36543: 36074,
  36544: 23455,
  36545: 34048,
  36546: 31712,
  36547: 20594,
  36548: 26612,
  36549: 33437,
  36550: 23649,
  36551: 34122,
  36552: 32286,
  36553: 33294,
  36554: 20889,
  36555: 23556,
  36556: 25448,
  36557: 36198,
  36558: 26012,
  36559: 29038,
  36560: 31038,
  36561: 32023,
  36562: 32773,
  36563: 35613,
  36564: 36554,
  36565: 36974,
  36566: 34503,
  36567: 37034,
  36568: 20511,
  36569: 21242,
  36570: 23610,
  36571: 26451,
  36572: 28796,
  36573: 29237,
  36574: 37196,
  36575: 37320,
  36576: 37675,
  36577: 33509,
  36578: 23490,
  36579: 24369,
  36580: 24825,
  36581: 20027,
  36582: 21462,
  36583: 23432,
  36584: 25163,
  36585: 26417,
  36586: 27530,
  36587: 29417,
  36588: 29664,
  36589: 31278,
  36590: 33131,
  36591: 36259,
  36592: 37202,
  36593: 39318,
  36594: 20754,
  36595: 21463,
  36596: 21610,
  36597: 23551,
  36598: 25480,
  36599: 27193,
  36600: 32172,
  36601: 38656,
  36602: 22234,
  36603: 21454,
  36604: 21608,
  36672: 23447,
  36673: 23601,
  36674: 24030,
  36675: 20462,
  36676: 24833,
  36677: 25342,
  36678: 27954,
  36679: 31168,
  36680: 31179,
  36681: 32066,
  36682: 32333,
  36683: 32722,
  36684: 33261,
  36685: 33311,
  36686: 33936,
  36687: 34886,
  36688: 35186,
  36689: 35728,
  36690: 36468,
  36691: 36655,
  36692: 36913,
  36693: 37195,
  36694: 37228,
  36695: 38598,
  36696: 37276,
  36697: 20160,
  36698: 20303,
  36699: 20805,
  36700: 21313,
  36701: 24467,
  36702: 25102,
  36703: 26580,
  36704: 27713,
  36705: 28171,
  36706: 29539,
  36707: 32294,
  36708: 37325,
  36709: 37507,
  36710: 21460,
  36711: 22809,
  36712: 23487,
  36713: 28113,
  36714: 31069,
  36715: 32302,
  36716: 31899,
  36717: 22654,
  36718: 29087,
  36719: 20986,
  36720: 34899,
  36721: 36848,
  36722: 20426,
  36723: 23803,
  36724: 26149,
  36725: 30636,
  36726: 31459,
  36727: 33308,
  36728: 39423,
  36729: 20934,
  36730: 24490,
  36731: 26092,
  36732: 26991,
  36733: 27529,
  36734: 28147,
  36736: 28310,
  36737: 28516,
  36738: 30462,
  36739: 32020,
  36740: 24033,
  36741: 36981,
  36742: 37255,
  36743: 38918,
  36744: 20966,
  36745: 21021,
  36746: 25152,
  36747: 26257,
  36748: 26329,
  36749: 28186,
  36750: 24246,
  36751: 32210,
  36752: 32626,
  36753: 26360,
  36754: 34223,
  36755: 34295,
  36756: 35576,
  36757: 21161,
  36758: 21465,
  36759: 22899,
  36760: 24207,
  36761: 24464,
  36762: 24661,
  36763: 37604,
  36764: 38500,
  36765: 20663,
  36766: 20767,
  36767: 21213,
  36768: 21280,
  36769: 21319,
  36770: 21484,
  36771: 21736,
  36772: 21830,
  36773: 21809,
  36774: 22039,
  36775: 22888,
  36776: 22974,
  36777: 23100,
  36778: 23477,
  36779: 23558,
  36780: 23567,
  36781: 23569,
  36782: 23578,
  36783: 24196,
  36784: 24202,
  36785: 24288,
  36786: 24432,
  36787: 25215,
  36788: 25220,
  36789: 25307,
  36790: 25484,
  36791: 25463,
  36792: 26119,
  36793: 26124,
  36794: 26157,
  36795: 26230,
  36796: 26494,
  36797: 26786,
  36798: 27167,
  36799: 27189,
  36800: 27836,
  36801: 28040,
  36802: 28169,
  36803: 28248,
  36804: 28988,
  36805: 28966,
  36806: 29031,
  36807: 30151,
  36808: 30465,
  36809: 30813,
  36810: 30977,
  36811: 31077,
  36812: 31216,
  36813: 31456,
  36814: 31505,
  36815: 31911,
  36816: 32057,
  36817: 32918,
  36818: 33750,
  36819: 33931,
  36820: 34121,
  36821: 34909,
  36822: 35059,
  36823: 35359,
  36824: 35388,
  36825: 35412,
  36826: 35443,
  36827: 35937,
  36828: 36062,
  36829: 37284,
  36830: 37478,
  36831: 37758,
  36832: 37912,
  36833: 38556,
  36834: 38808,
  36835: 19978,
  36836: 19976,
  36837: 19998,
  36838: 20055,
  36839: 20887,
  36840: 21104,
  36841: 22478,
  36842: 22580,
  36843: 22732,
  36844: 23330,
  36845: 24120,
  36846: 24773,
  36847: 25854,
  36848: 26465,
  36849: 26454,
  36850: 27972,
  36851: 29366,
  36852: 30067,
  36853: 31331,
  36854: 33976,
  36855: 35698,
  36856: 37304,
  36857: 37664,
  36858: 22065,
  36859: 22516,
  36860: 39166,
  36928: 25325,
  36929: 26893,
  36930: 27542,
  36931: 29165,
  36932: 32340,
  36933: 32887,
  36934: 33394,
  36935: 35302,
  36936: 39135,
  36937: 34645,
  36938: 36785,
  36939: 23611,
  36940: 20280,
  36941: 20449,
  36942: 20405,
  36943: 21767,
  36944: 23072,
  36945: 23517,
  36946: 23529,
  36947: 24515,
  36948: 24910,
  36949: 25391,
  36950: 26032,
  36951: 26187,
  36952: 26862,
  36953: 27035,
  36954: 28024,
  36955: 28145,
  36956: 30003,
  36957: 30137,
  36958: 30495,
  36959: 31070,
  36960: 31206,
  36961: 32051,
  36962: 33251,
  36963: 33455,
  36964: 34218,
  36965: 35242,
  36966: 35386,
  36967: 36523,
  36968: 36763,
  36969: 36914,
  36970: 37341,
  36971: 38663,
  36972: 20154,
  36973: 20161,
  36974: 20995,
  36975: 22645,
  36976: 22764,
  36977: 23563,
  36978: 29978,
  36979: 23613,
  36980: 33102,
  36981: 35338,
  36982: 36805,
  36983: 38499,
  36984: 38765,
  36985: 31525,
  36986: 35535,
  36987: 38920,
  36988: 37218,
  36989: 22259,
  36990: 21416,
  36992: 36887,
  36993: 21561,
  36994: 22402,
  36995: 24101,
  36996: 25512,
  36997: 27700,
  36998: 28810,
  36999: 30561,
  37e3: 31883,
  37001: 32736,
  37002: 34928,
  37003: 36930,
  37004: 37204,
  37005: 37648,
  37006: 37656,
  37007: 38543,
  37008: 29790,
  37009: 39620,
  37010: 23815,
  37011: 23913,
  37012: 25968,
  37013: 26530,
  37014: 36264,
  37015: 38619,
  37016: 25454,
  37017: 26441,
  37018: 26905,
  37019: 33733,
  37020: 38935,
  37021: 38592,
  37022: 35070,
  37023: 28548,
  37024: 25722,
  37025: 23544,
  37026: 19990,
  37027: 28716,
  37028: 30045,
  37029: 26159,
  37030: 20932,
  37031: 21046,
  37032: 21218,
  37033: 22995,
  37034: 24449,
  37035: 24615,
  37036: 25104,
  37037: 25919,
  37038: 25972,
  37039: 26143,
  37040: 26228,
  37041: 26866,
  37042: 26646,
  37043: 27491,
  37044: 28165,
  37045: 29298,
  37046: 29983,
  37047: 30427,
  37048: 31934,
  37049: 32854,
  37050: 22768,
  37051: 35069,
  37052: 35199,
  37053: 35488,
  37054: 35475,
  37055: 35531,
  37056: 36893,
  37057: 37266,
  37058: 38738,
  37059: 38745,
  37060: 25993,
  37061: 31246,
  37062: 33030,
  37063: 38587,
  37064: 24109,
  37065: 24796,
  37066: 25114,
  37067: 26021,
  37068: 26132,
  37069: 26512,
  37070: 30707,
  37071: 31309,
  37072: 31821,
  37073: 32318,
  37074: 33034,
  37075: 36012,
  37076: 36196,
  37077: 36321,
  37078: 36447,
  37079: 30889,
  37080: 20999,
  37081: 25305,
  37082: 25509,
  37083: 25666,
  37084: 25240,
  37085: 35373,
  37086: 31363,
  37087: 31680,
  37088: 35500,
  37089: 38634,
  37090: 32118,
  37091: 33292,
  37092: 34633,
  37093: 20185,
  37094: 20808,
  37095: 21315,
  37096: 21344,
  37097: 23459,
  37098: 23554,
  37099: 23574,
  37100: 24029,
  37101: 25126,
  37102: 25159,
  37103: 25776,
  37104: 26643,
  37105: 26676,
  37106: 27849,
  37107: 27973,
  37108: 27927,
  37109: 26579,
  37110: 28508,
  37111: 29006,
  37112: 29053,
  37113: 26059,
  37114: 31359,
  37115: 31661,
  37116: 32218,
  37184: 32330,
  37185: 32680,
  37186: 33146,
  37187: 33307,
  37188: 33337,
  37189: 34214,
  37190: 35438,
  37191: 36046,
  37192: 36341,
  37193: 36984,
  37194: 36983,
  37195: 37549,
  37196: 37521,
  37197: 38275,
  37198: 39854,
  37199: 21069,
  37200: 21892,
  37201: 28472,
  37202: 28982,
  37203: 20840,
  37204: 31109,
  37205: 32341,
  37206: 33203,
  37207: 31950,
  37208: 22092,
  37209: 22609,
  37210: 23720,
  37211: 25514,
  37212: 26366,
  37213: 26365,
  37214: 26970,
  37215: 29401,
  37216: 30095,
  37217: 30094,
  37218: 30990,
  37219: 31062,
  37220: 31199,
  37221: 31895,
  37222: 32032,
  37223: 32068,
  37224: 34311,
  37225: 35380,
  37226: 38459,
  37227: 36961,
  37228: 40736,
  37229: 20711,
  37230: 21109,
  37231: 21452,
  37232: 21474,
  37233: 20489,
  37234: 21930,
  37235: 22766,
  37236: 22863,
  37237: 29245,
  37238: 23435,
  37239: 23652,
  37240: 21277,
  37241: 24803,
  37242: 24819,
  37243: 25436,
  37244: 25475,
  37245: 25407,
  37246: 25531,
  37248: 25805,
  37249: 26089,
  37250: 26361,
  37251: 24035,
  37252: 27085,
  37253: 27133,
  37254: 28437,
  37255: 29157,
  37256: 20105,
  37257: 30185,
  37258: 30456,
  37259: 31379,
  37260: 31967,
  37261: 32207,
  37262: 32156,
  37263: 32865,
  37264: 33609,
  37265: 33624,
  37266: 33900,
  37267: 33980,
  37268: 34299,
  37269: 35013,
  37270: 36208,
  37271: 36865,
  37272: 36973,
  37273: 37783,
  37274: 38684,
  37275: 39442,
  37276: 20687,
  37277: 22679,
  37278: 24974,
  37279: 33235,
  37280: 34101,
  37281: 36104,
  37282: 36896,
  37283: 20419,
  37284: 20596,
  37285: 21063,
  37286: 21363,
  37287: 24687,
  37288: 25417,
  37289: 26463,
  37290: 28204,
  37291: 36275,
  37292: 36895,
  37293: 20439,
  37294: 23646,
  37295: 36042,
  37296: 26063,
  37297: 32154,
  37298: 21330,
  37299: 34966,
  37300: 20854,
  37301: 25539,
  37302: 23384,
  37303: 23403,
  37304: 23562,
  37305: 25613,
  37306: 26449,
  37307: 36956,
  37308: 20182,
  37309: 22810,
  37310: 22826,
  37311: 27760,
  37312: 35409,
  37313: 21822,
  37314: 22549,
  37315: 22949,
  37316: 24816,
  37317: 25171,
  37318: 26561,
  37319: 33333,
  37320: 26965,
  37321: 38464,
  37322: 39364,
  37323: 39464,
  37324: 20307,
  37325: 22534,
  37326: 23550,
  37327: 32784,
  37328: 23729,
  37329: 24111,
  37330: 24453,
  37331: 24608,
  37332: 24907,
  37333: 25140,
  37334: 26367,
  37335: 27888,
  37336: 28382,
  37337: 32974,
  37338: 33151,
  37339: 33492,
  37340: 34955,
  37341: 36024,
  37342: 36864,
  37343: 36910,
  37344: 38538,
  37345: 40667,
  37346: 39899,
  37347: 20195,
  37348: 21488,
  37349: 22823,
  37350: 31532,
  37351: 37261,
  37352: 38988,
  37353: 40441,
  37354: 28381,
  37355: 28711,
  37356: 21331,
  37357: 21828,
  37358: 23429,
  37359: 25176,
  37360: 25246,
  37361: 25299,
  37362: 27810,
  37363: 28655,
  37364: 29730,
  37365: 35351,
  37366: 37944,
  37367: 28609,
  37368: 35582,
  37369: 33592,
  37370: 20967,
  37371: 34552,
  37372: 21482,
  37440: 21481,
  37441: 20294,
  37442: 36948,
  37443: 36784,
  37444: 22890,
  37445: 33073,
  37446: 24061,
  37447: 31466,
  37448: 36799,
  37449: 26842,
  37450: 35895,
  37451: 29432,
  37452: 40008,
  37453: 27197,
  37454: 35504,
  37455: 20025,
  37456: 21336,
  37457: 22022,
  37458: 22374,
  37459: 25285,
  37460: 25506,
  37461: 26086,
  37462: 27470,
  37463: 28129,
  37464: 28251,
  37465: 28845,
  37466: 30701,
  37467: 31471,
  37468: 31658,
  37469: 32187,
  37470: 32829,
  37471: 32966,
  37472: 34507,
  37473: 35477,
  37474: 37723,
  37475: 22243,
  37476: 22727,
  37477: 24382,
  37478: 26029,
  37479: 26262,
  37480: 27264,
  37481: 27573,
  37482: 30007,
  37483: 35527,
  37484: 20516,
  37485: 30693,
  37486: 22320,
  37487: 24347,
  37488: 24677,
  37489: 26234,
  37490: 27744,
  37491: 30196,
  37492: 31258,
  37493: 32622,
  37494: 33268,
  37495: 34584,
  37496: 36933,
  37497: 39347,
  37498: 31689,
  37499: 30044,
  37500: 31481,
  37501: 31569,
  37502: 33988,
  37504: 36880,
  37505: 31209,
  37506: 31378,
  37507: 33590,
  37508: 23265,
  37509: 30528,
  37510: 20013,
  37511: 20210,
  37512: 23449,
  37513: 24544,
  37514: 25277,
  37515: 26172,
  37516: 26609,
  37517: 27880,
  37518: 34411,
  37519: 34935,
  37520: 35387,
  37521: 37198,
  37522: 37619,
  37523: 39376,
  37524: 27159,
  37525: 28710,
  37526: 29482,
  37527: 33511,
  37528: 33879,
  37529: 36015,
  37530: 19969,
  37531: 20806,
  37532: 20939,
  37533: 21899,
  37534: 23541,
  37535: 24086,
  37536: 24115,
  37537: 24193,
  37538: 24340,
  37539: 24373,
  37540: 24427,
  37541: 24500,
  37542: 25074,
  37543: 25361,
  37544: 26274,
  37545: 26397,
  37546: 28526,
  37547: 29266,
  37548: 30010,
  37549: 30522,
  37550: 32884,
  37551: 33081,
  37552: 33144,
  37553: 34678,
  37554: 35519,
  37555: 35548,
  37556: 36229,
  37557: 36339,
  37558: 37530,
  37559: 38263,
  37560: 38914,
  37561: 40165,
  37562: 21189,
  37563: 25431,
  37564: 30452,
  37565: 26389,
  37566: 27784,
  37567: 29645,
  37568: 36035,
  37569: 37806,
  37570: 38515,
  37571: 27941,
  37572: 22684,
  37573: 26894,
  37574: 27084,
  37575: 36861,
  37576: 37786,
  37577: 30171,
  37578: 36890,
  37579: 22618,
  37580: 26626,
  37581: 25524,
  37582: 27131,
  37583: 20291,
  37584: 28460,
  37585: 26584,
  37586: 36795,
  37587: 34086,
  37588: 32180,
  37589: 37716,
  37590: 26943,
  37591: 28528,
  37592: 22378,
  37593: 22775,
  37594: 23340,
  37595: 32044,
  37596: 29226,
  37597: 21514,
  37598: 37347,
  37599: 40372,
  37600: 20141,
  37601: 20302,
  37602: 20572,
  37603: 20597,
  37604: 21059,
  37605: 35998,
  37606: 21576,
  37607: 22564,
  37608: 23450,
  37609: 24093,
  37610: 24213,
  37611: 24237,
  37612: 24311,
  37613: 24351,
  37614: 24716,
  37615: 25269,
  37616: 25402,
  37617: 25552,
  37618: 26799,
  37619: 27712,
  37620: 30855,
  37621: 31118,
  37622: 31243,
  37623: 32224,
  37624: 33351,
  37625: 35330,
  37626: 35558,
  37627: 36420,
  37628: 36883,
  37696: 37048,
  37697: 37165,
  37698: 37336,
  37699: 40718,
  37700: 27877,
  37701: 25688,
  37702: 25826,
  37703: 25973,
  37704: 28404,
  37705: 30340,
  37706: 31515,
  37707: 36969,
  37708: 37841,
  37709: 28346,
  37710: 21746,
  37711: 24505,
  37712: 25764,
  37713: 36685,
  37714: 36845,
  37715: 37444,
  37716: 20856,
  37717: 22635,
  37718: 22825,
  37719: 23637,
  37720: 24215,
  37721: 28155,
  37722: 32399,
  37723: 29980,
  37724: 36028,
  37725: 36578,
  37726: 39003,
  37727: 28857,
  37728: 20253,
  37729: 27583,
  37730: 28593,
  37731: 3e4,
  37732: 38651,
  37733: 20814,
  37734: 21520,
  37735: 22581,
  37736: 22615,
  37737: 22956,
  37738: 23648,
  37739: 24466,
  37740: 26007,
  37741: 26460,
  37742: 28193,
  37743: 30331,
  37744: 33759,
  37745: 36077,
  37746: 36884,
  37747: 37117,
  37748: 37709,
  37749: 30757,
  37750: 30778,
  37751: 21162,
  37752: 24230,
  37753: 22303,
  37754: 22900,
  37755: 24594,
  37756: 20498,
  37757: 20826,
  37758: 20908,
  37760: 20941,
  37761: 20992,
  37762: 21776,
  37763: 22612,
  37764: 22616,
  37765: 22871,
  37766: 23445,
  37767: 23798,
  37768: 23947,
  37769: 24764,
  37770: 25237,
  37771: 25645,
  37772: 26481,
  37773: 26691,
  37774: 26812,
  37775: 26847,
  37776: 30423,
  37777: 28120,
  37778: 28271,
  37779: 28059,
  37780: 28783,
  37781: 29128,
  37782: 24403,
  37783: 30168,
  37784: 31095,
  37785: 31561,
  37786: 31572,
  37787: 31570,
  37788: 31958,
  37789: 32113,
  37790: 21040,
  37791: 33891,
  37792: 34153,
  37793: 34276,
  37794: 35342,
  37795: 35588,
  37796: 35910,
  37797: 36367,
  37798: 36867,
  37799: 36879,
  37800: 37913,
  37801: 38518,
  37802: 38957,
  37803: 39472,
  37804: 38360,
  37805: 20685,
  37806: 21205,
  37807: 21516,
  37808: 22530,
  37809: 23566,
  37810: 24999,
  37811: 25758,
  37812: 27934,
  37813: 30643,
  37814: 31461,
  37815: 33012,
  37816: 33796,
  37817: 36947,
  37818: 37509,
  37819: 23776,
  37820: 40199,
  37821: 21311,
  37822: 24471,
  37823: 24499,
  37824: 28060,
  37825: 29305,
  37826: 30563,
  37827: 31167,
  37828: 31716,
  37829: 27602,
  37830: 29420,
  37831: 35501,
  37832: 26627,
  37833: 27233,
  37834: 20984,
  37835: 31361,
  37836: 26932,
  37837: 23626,
  37838: 40182,
  37839: 33515,
  37840: 23493,
  37841: 37193,
  37842: 28702,
  37843: 22136,
  37844: 23663,
  37845: 24775,
  37846: 25958,
  37847: 27788,
  37848: 35930,
  37849: 36929,
  37850: 38931,
  37851: 21585,
  37852: 26311,
  37853: 37389,
  37854: 22856,
  37855: 37027,
  37856: 20869,
  37857: 20045,
  37858: 20970,
  37859: 34201,
  37860: 35598,
  37861: 28760,
  37862: 25466,
  37863: 37707,
  37864: 26978,
  37865: 39348,
  37866: 32260,
  37867: 30071,
  37868: 21335,
  37869: 26976,
  37870: 36575,
  37871: 38627,
  37872: 27741,
  37873: 20108,
  37874: 23612,
  37875: 24336,
  37876: 36841,
  37877: 21250,
  37878: 36049,
  37879: 32905,
  37880: 34425,
  37881: 24319,
  37882: 26085,
  37883: 20083,
  37884: 20837,
  37952: 22914,
  37953: 23615,
  37954: 38894,
  37955: 20219,
  37956: 22922,
  37957: 24525,
  37958: 35469,
  37959: 28641,
  37960: 31152,
  37961: 31074,
  37962: 23527,
  37963: 33905,
  37964: 29483,
  37965: 29105,
  37966: 24180,
  37967: 24565,
  37968: 25467,
  37969: 25754,
  37970: 29123,
  37971: 31896,
  37972: 20035,
  37973: 24316,
  37974: 20043,
  37975: 22492,
  37976: 22178,
  37977: 24745,
  37978: 28611,
  37979: 32013,
  37980: 33021,
  37981: 33075,
  37982: 33215,
  37983: 36786,
  37984: 35223,
  37985: 34468,
  37986: 24052,
  37987: 25226,
  37988: 25773,
  37989: 35207,
  37990: 26487,
  37991: 27874,
  37992: 27966,
  37993: 29750,
  37994: 30772,
  37995: 23110,
  37996: 32629,
  37997: 33453,
  37998: 39340,
  37999: 20467,
  38e3: 24259,
  38001: 25309,
  38002: 25490,
  38003: 25943,
  38004: 26479,
  38005: 30403,
  38006: 29260,
  38007: 32972,
  38008: 32954,
  38009: 36649,
  38010: 37197,
  38011: 20493,
  38012: 22521,
  38013: 23186,
  38014: 26757,
  38016: 26995,
  38017: 29028,
  38018: 29437,
  38019: 36023,
  38020: 22770,
  38021: 36064,
  38022: 38506,
  38023: 36889,
  38024: 34687,
  38025: 31204,
  38026: 30695,
  38027: 33833,
  38028: 20271,
  38029: 21093,
  38030: 21338,
  38031: 25293,
  38032: 26575,
  38033: 27850,
  38034: 30333,
  38035: 31636,
  38036: 31893,
  38037: 33334,
  38038: 34180,
  38039: 36843,
  38040: 26333,
  38041: 28448,
  38042: 29190,
  38043: 32283,
  38044: 33707,
  38045: 39361,
  38046: 40614,
  38047: 20989,
  38048: 31665,
  38049: 30834,
  38050: 31672,
  38051: 32903,
  38052: 31560,
  38053: 27368,
  38054: 24161,
  38055: 32908,
  38056: 30033,
  38057: 30048,
  38058: 20843,
  38059: 37474,
  38060: 28300,
  38061: 30330,
  38062: 37271,
  38063: 39658,
  38064: 20240,
  38065: 32624,
  38066: 25244,
  38067: 31567,
  38068: 38309,
  38069: 40169,
  38070: 22138,
  38071: 22617,
  38072: 34532,
  38073: 38588,
  38074: 20276,
  38075: 21028,
  38076: 21322,
  38077: 21453,
  38078: 21467,
  38079: 24070,
  38080: 25644,
  38081: 26001,
  38082: 26495,
  38083: 27710,
  38084: 27726,
  38085: 29256,
  38086: 29359,
  38087: 29677,
  38088: 30036,
  38089: 32321,
  38090: 33324,
  38091: 34281,
  38092: 36009,
  38093: 31684,
  38094: 37318,
  38095: 29033,
  38096: 38930,
  38097: 39151,
  38098: 25405,
  38099: 26217,
  38100: 30058,
  38101: 30436,
  38102: 30928,
  38103: 34115,
  38104: 34542,
  38105: 21290,
  38106: 21329,
  38107: 21542,
  38108: 22915,
  38109: 24199,
  38110: 24444,
  38111: 24754,
  38112: 25161,
  38113: 25209,
  38114: 25259,
  38115: 26e3,
  38116: 27604,
  38117: 27852,
  38118: 30130,
  38119: 30382,
  38120: 30865,
  38121: 31192,
  38122: 32203,
  38123: 32631,
  38124: 32933,
  38125: 34987,
  38126: 35513,
  38127: 36027,
  38128: 36991,
  38129: 38750,
  38130: 39131,
  38131: 27147,
  38132: 31800,
  38133: 20633,
  38134: 23614,
  38135: 24494,
  38136: 26503,
  38137: 27608,
  38138: 29749,
  38139: 30473,
  38140: 32654,
  38208: 40763,
  38209: 26570,
  38210: 31255,
  38211: 21305,
  38212: 30091,
  38213: 39661,
  38214: 24422,
  38215: 33181,
  38216: 33777,
  38217: 32920,
  38218: 24380,
  38219: 24517,
  38220: 30050,
  38221: 31558,
  38222: 36924,
  38223: 26727,
  38224: 23019,
  38225: 23195,
  38226: 32016,
  38227: 30334,
  38228: 35628,
  38229: 20469,
  38230: 24426,
  38231: 27161,
  38232: 27703,
  38233: 28418,
  38234: 29922,
  38235: 31080,
  38236: 34920,
  38237: 35413,
  38238: 35961,
  38239: 24287,
  38240: 25551,
  38241: 30149,
  38242: 31186,
  38243: 33495,
  38244: 37672,
  38245: 37618,
  38246: 33948,
  38247: 34541,
  38248: 39981,
  38249: 21697,
  38250: 24428,
  38251: 25996,
  38252: 27996,
  38253: 28693,
  38254: 36007,
  38255: 36051,
  38256: 38971,
  38257: 25935,
  38258: 29942,
  38259: 19981,
  38260: 20184,
  38261: 22496,
  38262: 22827,
  38263: 23142,
  38264: 23500,
  38265: 20904,
  38266: 24067,
  38267: 24220,
  38268: 24598,
  38269: 25206,
  38270: 25975,
  38272: 26023,
  38273: 26222,
  38274: 28014,
  38275: 29238,
  38276: 31526,
  38277: 33104,
  38278: 33178,
  38279: 33433,
  38280: 35676,
  38281: 36e3,
  38282: 36070,
  38283: 36212,
  38284: 38428,
  38285: 38468,
  38286: 20398,
  38287: 25771,
  38288: 27494,
  38289: 33310,
  38290: 33889,
  38291: 34154,
  38292: 37096,
  38293: 23553,
  38294: 26963,
  38295: 39080,
  38296: 33914,
  38297: 34135,
  38298: 20239,
  38299: 21103,
  38300: 24489,
  38301: 24133,
  38302: 26381,
  38303: 31119,
  38304: 33145,
  38305: 35079,
  38306: 35206,
  38307: 28149,
  38308: 24343,
  38309: 25173,
  38310: 27832,
  38311: 20175,
  38312: 29289,
  38313: 39826,
  38314: 20998,
  38315: 21563,
  38316: 22132,
  38317: 22707,
  38318: 24996,
  38319: 25198,
  38320: 28954,
  38321: 22894,
  38322: 31881,
  38323: 31966,
  38324: 32027,
  38325: 38640,
  38326: 25991,
  38327: 32862,
  38328: 19993,
  38329: 20341,
  38330: 20853,
  38331: 22592,
  38332: 24163,
  38333: 24179,
  38334: 24330,
  38335: 26564,
  38336: 20006,
  38337: 34109,
  38338: 38281,
  38339: 38491,
  38340: 31859,
  38341: 38913,
  38342: 20731,
  38343: 22721,
  38344: 30294,
  38345: 30887,
  38346: 21029,
  38347: 30629,
  38348: 34065,
  38349: 31622,
  38350: 20559,
  38351: 22793,
  38352: 29255,
  38353: 31687,
  38354: 32232,
  38355: 36794,
  38356: 36820,
  38357: 36941,
  38358: 20415,
  38359: 21193,
  38360: 23081,
  38361: 24321,
  38362: 38829,
  38363: 20445,
  38364: 33303,
  38365: 37610,
  38366: 22275,
  38367: 25429,
  38368: 27497,
  38369: 29995,
  38370: 35036,
  38371: 36628,
  38372: 31298,
  38373: 21215,
  38374: 22675,
  38375: 24917,
  38376: 25098,
  38377: 26286,
  38378: 27597,
  38379: 31807,
  38380: 33769,
  38381: 20515,
  38382: 20472,
  38383: 21253,
  38384: 21574,
  38385: 22577,
  38386: 22857,
  38387: 23453,
  38388: 23792,
  38389: 23791,
  38390: 23849,
  38391: 24214,
  38392: 25265,
  38393: 25447,
  38394: 25918,
  38395: 26041,
  38396: 26379,
  38464: 27861,
  38465: 27873,
  38466: 28921,
  38467: 30770,
  38468: 32299,
  38469: 32990,
  38470: 33459,
  38471: 33804,
  38472: 34028,
  38473: 34562,
  38474: 35090,
  38475: 35370,
  38476: 35914,
  38477: 37030,
  38478: 37586,
  38479: 39165,
  38480: 40179,
  38481: 40300,
  38482: 20047,
  38483: 20129,
  38484: 20621,
  38485: 21078,
  38486: 22346,
  38487: 22952,
  38488: 24125,
  38489: 24536,
  38490: 24537,
  38491: 25151,
  38492: 26292,
  38493: 26395,
  38494: 26576,
  38495: 26834,
  38496: 20882,
  38497: 32033,
  38498: 32938,
  38499: 33192,
  38500: 35584,
  38501: 35980,
  38502: 36031,
  38503: 37502,
  38504: 38450,
  38505: 21536,
  38506: 38956,
  38507: 21271,
  38508: 20693,
  38509: 21340,
  38510: 22696,
  38511: 25778,
  38512: 26420,
  38513: 29287,
  38514: 30566,
  38515: 31302,
  38516: 37350,
  38517: 21187,
  38518: 27809,
  38519: 27526,
  38520: 22528,
  38521: 24140,
  38522: 22868,
  38523: 26412,
  38524: 32763,
  38525: 20961,
  38526: 30406,
  38528: 25705,
  38529: 30952,
  38530: 39764,
  38531: 40635,
  38532: 22475,
  38533: 22969,
  38534: 26151,
  38535: 26522,
  38536: 27598,
  38537: 21737,
  38538: 27097,
  38539: 24149,
  38540: 33180,
  38541: 26517,
  38542: 39850,
  38543: 26622,
  38544: 40018,
  38545: 26717,
  38546: 20134,
  38547: 20451,
  38548: 21448,
  38549: 25273,
  38550: 26411,
  38551: 27819,
  38552: 36804,
  38553: 20397,
  38554: 32365,
  38555: 40639,
  38556: 19975,
  38557: 24930,
  38558: 28288,
  38559: 28459,
  38560: 34067,
  38561: 21619,
  38562: 26410,
  38563: 39749,
  38564: 24051,
  38565: 31637,
  38566: 23724,
  38567: 23494,
  38568: 34588,
  38569: 28234,
  38570: 34001,
  38571: 31252,
  38572: 33032,
  38573: 22937,
  38574: 31885,
  38575: 27665,
  38576: 30496,
  38577: 21209,
  38578: 22818,
  38579: 28961,
  38580: 29279,
  38581: 30683,
  38582: 38695,
  38583: 40289,
  38584: 26891,
  38585: 23167,
  38586: 23064,
  38587: 20901,
  38588: 21517,
  38589: 21629,
  38590: 26126,
  38591: 30431,
  38592: 36855,
  38593: 37528,
  38594: 40180,
  38595: 23018,
  38596: 29277,
  38597: 28357,
  38598: 20813,
  38599: 26825,
  38600: 32191,
  38601: 32236,
  38602: 38754,
  38603: 40634,
  38604: 25720,
  38605: 27169,
  38606: 33538,
  38607: 22916,
  38608: 23391,
  38609: 27611,
  38610: 29467,
  38611: 30450,
  38612: 32178,
  38613: 32791,
  38614: 33945,
  38615: 20786,
  38616: 26408,
  38617: 40665,
  38618: 30446,
  38619: 26466,
  38620: 21247,
  38621: 39173,
  38622: 23588,
  38623: 25147,
  38624: 31870,
  38625: 36016,
  38626: 21839,
  38627: 24758,
  38628: 32011,
  38629: 38272,
  38630: 21249,
  38631: 20063,
  38632: 20918,
  38633: 22812,
  38634: 29242,
  38635: 32822,
  38636: 37326,
  38637: 24357,
  38638: 30690,
  38639: 21380,
  38640: 24441,
  38641: 32004,
  38642: 34220,
  38643: 35379,
  38644: 36493,
  38645: 38742,
  38646: 26611,
  38647: 34222,
  38648: 37971,
  38649: 24841,
  38650: 24840,
  38651: 27833,
  38652: 30290,
  38720: 35565,
  38721: 36664,
  38722: 21807,
  38723: 20305,
  38724: 20778,
  38725: 21191,
  38726: 21451,
  38727: 23461,
  38728: 24189,
  38729: 24736,
  38730: 24962,
  38731: 25558,
  38732: 26377,
  38733: 26586,
  38734: 28263,
  38735: 28044,
  38736: 29494,
  38737: 29495,
  38738: 30001,
  38739: 31056,
  38740: 35029,
  38741: 35480,
  38742: 36938,
  38743: 37009,
  38744: 37109,
  38745: 38596,
  38746: 34701,
  38747: 22805,
  38748: 20104,
  38749: 20313,
  38750: 19982,
  38751: 35465,
  38752: 36671,
  38753: 38928,
  38754: 20653,
  38755: 24188,
  38756: 22934,
  38757: 23481,
  38758: 24248,
  38759: 25562,
  38760: 25594,
  38761: 25793,
  38762: 26332,
  38763: 26954,
  38764: 27096,
  38765: 27915,
  38766: 28342,
  38767: 29076,
  38768: 29992,
  38769: 31407,
  38770: 32650,
  38771: 32768,
  38772: 33865,
  38773: 33993,
  38774: 35201,
  38775: 35617,
  38776: 36362,
  38777: 36965,
  38778: 38525,
  38779: 39178,
  38780: 24958,
  38781: 25233,
  38782: 27442,
  38784: 27779,
  38785: 28020,
  38786: 32716,
  38787: 32764,
  38788: 28096,
  38789: 32645,
  38790: 34746,
  38791: 35064,
  38792: 26469,
  38793: 33713,
  38794: 38972,
  38795: 38647,
  38796: 27931,
  38797: 32097,
  38798: 33853,
  38799: 37226,
  38800: 20081,
  38801: 21365,
  38802: 23888,
  38803: 27396,
  38804: 28651,
  38805: 34253,
  38806: 34349,
  38807: 35239,
  38808: 21033,
  38809: 21519,
  38810: 23653,
  38811: 26446,
  38812: 26792,
  38813: 29702,
  38814: 29827,
  38815: 30178,
  38816: 35023,
  38817: 35041,
  38818: 37324,
  38819: 38626,
  38820: 38520,
  38821: 24459,
  38822: 29575,
  38823: 31435,
  38824: 33870,
  38825: 25504,
  38826: 30053,
  38827: 21129,
  38828: 27969,
  38829: 28316,
  38830: 29705,
  38831: 30041,
  38832: 30827,
  38833: 31890,
  38834: 38534,
  38835: 31452,
  38836: 40845,
  38837: 20406,
  38838: 24942,
  38839: 26053,
  38840: 34396,
  38841: 20102,
  38842: 20142,
  38843: 20698,
  38844: 20001,
  38845: 20940,
  38846: 23534,
  38847: 26009,
  38848: 26753,
  38849: 28092,
  38850: 29471,
  38851: 30274,
  38852: 30637,
  38853: 31260,
  38854: 31975,
  38855: 33391,
  38856: 35538,
  38857: 36988,
  38858: 37327,
  38859: 38517,
  38860: 38936,
  38861: 21147,
  38862: 32209,
  38863: 20523,
  38864: 21400,
  38865: 26519,
  38866: 28107,
  38867: 29136,
  38868: 29747,
  38869: 33256,
  38870: 36650,
  38871: 38563,
  38872: 40023,
  38873: 40607,
  38874: 29792,
  38875: 22593,
  38876: 28057,
  38877: 32047,
  38878: 39006,
  38879: 20196,
  38880: 20278,
  38881: 20363,
  38882: 20919,
  38883: 21169,
  38884: 23994,
  38885: 24604,
  38886: 29618,
  38887: 31036,
  38888: 33491,
  38889: 37428,
  38890: 38583,
  38891: 38646,
  38892: 38666,
  38893: 40599,
  38894: 40802,
  38895: 26278,
  38896: 27508,
  38897: 21015,
  38898: 21155,
  38899: 28872,
  38900: 35010,
  38901: 24265,
  38902: 24651,
  38903: 24976,
  38904: 28451,
  38905: 29001,
  38906: 31806,
  38907: 32244,
  38908: 32879,
  38976: 34030,
  38977: 36899,
  38978: 37676,
  38979: 21570,
  38980: 39791,
  38981: 27347,
  38982: 28809,
  38983: 36034,
  38984: 36335,
  38985: 38706,
  38986: 21172,
  38987: 23105,
  38988: 24266,
  38989: 24324,
  38990: 26391,
  38991: 27004,
  38992: 27028,
  38993: 28010,
  38994: 28431,
  38995: 29282,
  38996: 29436,
  38997: 31725,
  38998: 32769,
  38999: 32894,
  39e3: 34635,
  39001: 37070,
  39002: 20845,
  39003: 40595,
  39004: 31108,
  39005: 32907,
  39006: 37682,
  39007: 35542,
  39008: 20525,
  39009: 21644,
  39010: 35441,
  39011: 27498,
  39012: 36036,
  39013: 33031,
  39014: 24785,
  39015: 26528,
  39016: 40434,
  39017: 20121,
  39018: 20120,
  39019: 39952,
  39020: 35435,
  39021: 34241,
  39022: 34152,
  39023: 26880,
  39024: 28286,
  39025: 30871,
  39026: 33109,
  39071: 24332,
  39072: 19984,
  39073: 19989,
  39074: 20010,
  39075: 20017,
  39076: 20022,
  39077: 20028,
  39078: 20031,
  39079: 20034,
  39080: 20054,
  39081: 20056,
  39082: 20098,
  39083: 20101,
  39084: 35947,
  39085: 20106,
  39086: 33298,
  39087: 24333,
  39088: 20110,
  39089: 20126,
  39090: 20127,
  39091: 20128,
  39092: 20130,
  39093: 20144,
  39094: 20147,
  39095: 20150,
  39096: 20174,
  39097: 20173,
  39098: 20164,
  39099: 20166,
  39100: 20162,
  39101: 20183,
  39102: 20190,
  39103: 20205,
  39104: 20191,
  39105: 20215,
  39106: 20233,
  39107: 20314,
  39108: 20272,
  39109: 20315,
  39110: 20317,
  39111: 20311,
  39112: 20295,
  39113: 20342,
  39114: 20360,
  39115: 20367,
  39116: 20376,
  39117: 20347,
  39118: 20329,
  39119: 20336,
  39120: 20369,
  39121: 20335,
  39122: 20358,
  39123: 20374,
  39124: 20760,
  39125: 20436,
  39126: 20447,
  39127: 20430,
  39128: 20440,
  39129: 20443,
  39130: 20433,
  39131: 20442,
  39132: 20432,
  39133: 20452,
  39134: 20453,
  39135: 20506,
  39136: 20520,
  39137: 20500,
  39138: 20522,
  39139: 20517,
  39140: 20485,
  39141: 20252,
  39142: 20470,
  39143: 20513,
  39144: 20521,
  39145: 20524,
  39146: 20478,
  39147: 20463,
  39148: 20497,
  39149: 20486,
  39150: 20547,
  39151: 20551,
  39152: 26371,
  39153: 20565,
  39154: 20560,
  39155: 20552,
  39156: 20570,
  39157: 20566,
  39158: 20588,
  39159: 20600,
  39160: 20608,
  39161: 20634,
  39162: 20613,
  39163: 20660,
  39164: 20658,
  39232: 20681,
  39233: 20682,
  39234: 20659,
  39235: 20674,
  39236: 20694,
  39237: 20702,
  39238: 20709,
  39239: 20717,
  39240: 20707,
  39241: 20718,
  39242: 20729,
  39243: 20725,
  39244: 20745,
  39245: 20737,
  39246: 20738,
  39247: 20758,
  39248: 20757,
  39249: 20756,
  39250: 20762,
  39251: 20769,
  39252: 20794,
  39253: 20791,
  39254: 20796,
  39255: 20795,
  39256: 20799,
  39257: 20800,
  39258: 20818,
  39259: 20812,
  39260: 20820,
  39261: 20834,
  39262: 31480,
  39263: 20841,
  39264: 20842,
  39265: 20846,
  39266: 20864,
  39267: 20866,
  39268: 22232,
  39269: 20876,
  39270: 20873,
  39271: 20879,
  39272: 20881,
  39273: 20883,
  39274: 20885,
  39275: 20886,
  39276: 20900,
  39277: 20902,
  39278: 20898,
  39279: 20905,
  39280: 20906,
  39281: 20907,
  39282: 20915,
  39283: 20913,
  39284: 20914,
  39285: 20912,
  39286: 20917,
  39287: 20925,
  39288: 20933,
  39289: 20937,
  39290: 20955,
  39291: 20960,
  39292: 34389,
  39293: 20969,
  39294: 20973,
  39296: 20976,
  39297: 20981,
  39298: 20990,
  39299: 20996,
  39300: 21003,
  39301: 21012,
  39302: 21006,
  39303: 21031,
  39304: 21034,
  39305: 21038,
  39306: 21043,
  39307: 21049,
  39308: 21071,
  39309: 21060,
  39310: 21067,
  39311: 21068,
  39312: 21086,
  39313: 21076,
  39314: 21098,
  39315: 21108,
  39316: 21097,
  39317: 21107,
  39318: 21119,
  39319: 21117,
  39320: 21133,
  39321: 21140,
  39322: 21138,
  39323: 21105,
  39324: 21128,
  39325: 21137,
  39326: 36776,
  39327: 36775,
  39328: 21164,
  39329: 21165,
  39330: 21180,
  39331: 21173,
  39332: 21185,
  39333: 21197,
  39334: 21207,
  39335: 21214,
  39336: 21219,
  39337: 21222,
  39338: 39149,
  39339: 21216,
  39340: 21235,
  39341: 21237,
  39342: 21240,
  39343: 21241,
  39344: 21254,
  39345: 21256,
  39346: 30008,
  39347: 21261,
  39348: 21264,
  39349: 21263,
  39350: 21269,
  39351: 21274,
  39352: 21283,
  39353: 21295,
  39354: 21297,
  39355: 21299,
  39356: 21304,
  39357: 21312,
  39358: 21318,
  39359: 21317,
  39360: 19991,
  39361: 21321,
  39362: 21325,
  39363: 20950,
  39364: 21342,
  39365: 21353,
  39366: 21358,
  39367: 22808,
  39368: 21371,
  39369: 21367,
  39370: 21378,
  39371: 21398,
  39372: 21408,
  39373: 21414,
  39374: 21413,
  39375: 21422,
  39376: 21424,
  39377: 21430,
  39378: 21443,
  39379: 31762,
  39380: 38617,
  39381: 21471,
  39382: 26364,
  39383: 29166,
  39384: 21486,
  39385: 21480,
  39386: 21485,
  39387: 21498,
  39388: 21505,
  39389: 21565,
  39390: 21568,
  39391: 21548,
  39392: 21549,
  39393: 21564,
  39394: 21550,
  39395: 21558,
  39396: 21545,
  39397: 21533,
  39398: 21582,
  39399: 21647,
  39400: 21621,
  39401: 21646,
  39402: 21599,
  39403: 21617,
  39404: 21623,
  39405: 21616,
  39406: 21650,
  39407: 21627,
  39408: 21632,
  39409: 21622,
  39410: 21636,
  39411: 21648,
  39412: 21638,
  39413: 21703,
  39414: 21666,
  39415: 21688,
  39416: 21669,
  39417: 21676,
  39418: 21700,
  39419: 21704,
  39420: 21672,
  39488: 21675,
  39489: 21698,
  39490: 21668,
  39491: 21694,
  39492: 21692,
  39493: 21720,
  39494: 21733,
  39495: 21734,
  39496: 21775,
  39497: 21780,
  39498: 21757,
  39499: 21742,
  39500: 21741,
  39501: 21754,
  39502: 21730,
  39503: 21817,
  39504: 21824,
  39505: 21859,
  39506: 21836,
  39507: 21806,
  39508: 21852,
  39509: 21829,
  39510: 21846,
  39511: 21847,
  39512: 21816,
  39513: 21811,
  39514: 21853,
  39515: 21913,
  39516: 21888,
  39517: 21679,
  39518: 21898,
  39519: 21919,
  39520: 21883,
  39521: 21886,
  39522: 21912,
  39523: 21918,
  39524: 21934,
  39525: 21884,
  39526: 21891,
  39527: 21929,
  39528: 21895,
  39529: 21928,
  39530: 21978,
  39531: 21957,
  39532: 21983,
  39533: 21956,
  39534: 21980,
  39535: 21988,
  39536: 21972,
  39537: 22036,
  39538: 22007,
  39539: 22038,
  39540: 22014,
  39541: 22013,
  39542: 22043,
  39543: 22009,
  39544: 22094,
  39545: 22096,
  39546: 29151,
  39547: 22068,
  39548: 22070,
  39549: 22066,
  39550: 22072,
  39552: 22123,
  39553: 22116,
  39554: 22063,
  39555: 22124,
  39556: 22122,
  39557: 22150,
  39558: 22144,
  39559: 22154,
  39560: 22176,
  39561: 22164,
  39562: 22159,
  39563: 22181,
  39564: 22190,
  39565: 22198,
  39566: 22196,
  39567: 22210,
  39568: 22204,
  39569: 22209,
  39570: 22211,
  39571: 22208,
  39572: 22216,
  39573: 22222,
  39574: 22225,
  39575: 22227,
  39576: 22231,
  39577: 22254,
  39578: 22265,
  39579: 22272,
  39580: 22271,
  39581: 22276,
  39582: 22281,
  39583: 22280,
  39584: 22283,
  39585: 22285,
  39586: 22291,
  39587: 22296,
  39588: 22294,
  39589: 21959,
  39590: 22300,
  39591: 22310,
  39592: 22327,
  39593: 22328,
  39594: 22350,
  39595: 22331,
  39596: 22336,
  39597: 22351,
  39598: 22377,
  39599: 22464,
  39600: 22408,
  39601: 22369,
  39602: 22399,
  39603: 22409,
  39604: 22419,
  39605: 22432,
  39606: 22451,
  39607: 22436,
  39608: 22442,
  39609: 22448,
  39610: 22467,
  39611: 22470,
  39612: 22484,
  39613: 22482,
  39614: 22483,
  39615: 22538,
  39616: 22486,
  39617: 22499,
  39618: 22539,
  39619: 22553,
  39620: 22557,
  39621: 22642,
  39622: 22561,
  39623: 22626,
  39624: 22603,
  39625: 22640,
  39626: 27584,
  39627: 22610,
  39628: 22589,
  39629: 22649,
  39630: 22661,
  39631: 22713,
  39632: 22687,
  39633: 22699,
  39634: 22714,
  39635: 22750,
  39636: 22715,
  39637: 22712,
  39638: 22702,
  39639: 22725,
  39640: 22739,
  39641: 22737,
  39642: 22743,
  39643: 22745,
  39644: 22744,
  39645: 22757,
  39646: 22748,
  39647: 22756,
  39648: 22751,
  39649: 22767,
  39650: 22778,
  39651: 22777,
  39652: 22779,
  39653: 22780,
  39654: 22781,
  39655: 22786,
  39656: 22794,
  39657: 22800,
  39658: 22811,
  39659: 26790,
  39660: 22821,
  39661: 22828,
  39662: 22829,
  39663: 22834,
  39664: 22840,
  39665: 22846,
  39666: 31442,
  39667: 22869,
  39668: 22864,
  39669: 22862,
  39670: 22874,
  39671: 22872,
  39672: 22882,
  39673: 22880,
  39674: 22887,
  39675: 22892,
  39676: 22889,
  39744: 22904,
  39745: 22913,
  39746: 22941,
  39747: 20318,
  39748: 20395,
  39749: 22947,
  39750: 22962,
  39751: 22982,
  39752: 23016,
  39753: 23004,
  39754: 22925,
  39755: 23001,
  39756: 23002,
  39757: 23077,
  39758: 23071,
  39759: 23057,
  39760: 23068,
  39761: 23049,
  39762: 23066,
  39763: 23104,
  39764: 23148,
  39765: 23113,
  39766: 23093,
  39767: 23094,
  39768: 23138,
  39769: 23146,
  39770: 23194,
  39771: 23228,
  39772: 23230,
  39773: 23243,
  39774: 23234,
  39775: 23229,
  39776: 23267,
  39777: 23255,
  39778: 23270,
  39779: 23273,
  39780: 23254,
  39781: 23290,
  39782: 23291,
  39783: 23308,
  39784: 23307,
  39785: 23318,
  39786: 23346,
  39787: 23248,
  39788: 23338,
  39789: 23350,
  39790: 23358,
  39791: 23363,
  39792: 23365,
  39793: 23360,
  39794: 23377,
  39795: 23381,
  39796: 23386,
  39797: 23387,
  39798: 23397,
  39799: 23401,
  39800: 23408,
  39801: 23411,
  39802: 23413,
  39803: 23416,
  39804: 25992,
  39805: 23418,
  39806: 23424,
  39808: 23427,
  39809: 23462,
  39810: 23480,
  39811: 23491,
  39812: 23495,
  39813: 23497,
  39814: 23508,
  39815: 23504,
  39816: 23524,
  39817: 23526,
  39818: 23522,
  39819: 23518,
  39820: 23525,
  39821: 23531,
  39822: 23536,
  39823: 23542,
  39824: 23539,
  39825: 23557,
  39826: 23559,
  39827: 23560,
  39828: 23565,
  39829: 23571,
  39830: 23584,
  39831: 23586,
  39832: 23592,
  39833: 23608,
  39834: 23609,
  39835: 23617,
  39836: 23622,
  39837: 23630,
  39838: 23635,
  39839: 23632,
  39840: 23631,
  39841: 23409,
  39842: 23660,
  39843: 23662,
  39844: 20066,
  39845: 23670,
  39846: 23673,
  39847: 23692,
  39848: 23697,
  39849: 23700,
  39850: 22939,
  39851: 23723,
  39852: 23739,
  39853: 23734,
  39854: 23740,
  39855: 23735,
  39856: 23749,
  39857: 23742,
  39858: 23751,
  39859: 23769,
  39860: 23785,
  39861: 23805,
  39862: 23802,
  39863: 23789,
  39864: 23948,
  39865: 23786,
  39866: 23819,
  39867: 23829,
  39868: 23831,
  39869: 23900,
  39870: 23839,
  39871: 23835,
  39872: 23825,
  39873: 23828,
  39874: 23842,
  39875: 23834,
  39876: 23833,
  39877: 23832,
  39878: 23884,
  39879: 23890,
  39880: 23886,
  39881: 23883,
  39882: 23916,
  39883: 23923,
  39884: 23926,
  39885: 23943,
  39886: 23940,
  39887: 23938,
  39888: 23970,
  39889: 23965,
  39890: 23980,
  39891: 23982,
  39892: 23997,
  39893: 23952,
  39894: 23991,
  39895: 23996,
  39896: 24009,
  39897: 24013,
  39898: 24019,
  39899: 24018,
  39900: 24022,
  39901: 24027,
  39902: 24043,
  39903: 24050,
  39904: 24053,
  39905: 24075,
  39906: 24090,
  39907: 24089,
  39908: 24081,
  39909: 24091,
  39910: 24118,
  39911: 24119,
  39912: 24132,
  39913: 24131,
  39914: 24128,
  39915: 24142,
  39916: 24151,
  39917: 24148,
  39918: 24159,
  39919: 24162,
  39920: 24164,
  39921: 24135,
  39922: 24181,
  39923: 24182,
  39924: 24186,
  39925: 40636,
  39926: 24191,
  39927: 24224,
  39928: 24257,
  39929: 24258,
  39930: 24264,
  39931: 24272,
  39932: 24271,
  4e4: 24278,
  40001: 24291,
  40002: 24285,
  40003: 24282,
  40004: 24283,
  40005: 24290,
  40006: 24289,
  40007: 24296,
  40008: 24297,
  40009: 24300,
  40010: 24305,
  40011: 24307,
  40012: 24304,
  40013: 24308,
  40014: 24312,
  40015: 24318,
  40016: 24323,
  40017: 24329,
  40018: 24413,
  40019: 24412,
  40020: 24331,
  40021: 24337,
  40022: 24342,
  40023: 24361,
  40024: 24365,
  40025: 24376,
  40026: 24385,
  40027: 24392,
  40028: 24396,
  40029: 24398,
  40030: 24367,
  40031: 24401,
  40032: 24406,
  40033: 24407,
  40034: 24409,
  40035: 24417,
  40036: 24429,
  40037: 24435,
  40038: 24439,
  40039: 24451,
  40040: 24450,
  40041: 24447,
  40042: 24458,
  40043: 24456,
  40044: 24465,
  40045: 24455,
  40046: 24478,
  40047: 24473,
  40048: 24472,
  40049: 24480,
  40050: 24488,
  40051: 24493,
  40052: 24508,
  40053: 24534,
  40054: 24571,
  40055: 24548,
  40056: 24568,
  40057: 24561,
  40058: 24541,
  40059: 24755,
  40060: 24575,
  40061: 24609,
  40062: 24672,
  40064: 24601,
  40065: 24592,
  40066: 24617,
  40067: 24590,
  40068: 24625,
  40069: 24603,
  40070: 24597,
  40071: 24619,
  40072: 24614,
  40073: 24591,
  40074: 24634,
  40075: 24666,
  40076: 24641,
  40077: 24682,
  40078: 24695,
  40079: 24671,
  40080: 24650,
  40081: 24646,
  40082: 24653,
  40083: 24675,
  40084: 24643,
  40085: 24676,
  40086: 24642,
  40087: 24684,
  40088: 24683,
  40089: 24665,
  40090: 24705,
  40091: 24717,
  40092: 24807,
  40093: 24707,
  40094: 24730,
  40095: 24708,
  40096: 24731,
  40097: 24726,
  40098: 24727,
  40099: 24722,
  40100: 24743,
  40101: 24715,
  40102: 24801,
  40103: 24760,
  40104: 24800,
  40105: 24787,
  40106: 24756,
  40107: 24560,
  40108: 24765,
  40109: 24774,
  40110: 24757,
  40111: 24792,
  40112: 24909,
  40113: 24853,
  40114: 24838,
  40115: 24822,
  40116: 24823,
  40117: 24832,
  40118: 24820,
  40119: 24826,
  40120: 24835,
  40121: 24865,
  40122: 24827,
  40123: 24817,
  40124: 24845,
  40125: 24846,
  40126: 24903,
  40127: 24894,
  40128: 24872,
  40129: 24871,
  40130: 24906,
  40131: 24895,
  40132: 24892,
  40133: 24876,
  40134: 24884,
  40135: 24893,
  40136: 24898,
  40137: 24900,
  40138: 24947,
  40139: 24951,
  40140: 24920,
  40141: 24921,
  40142: 24922,
  40143: 24939,
  40144: 24948,
  40145: 24943,
  40146: 24933,
  40147: 24945,
  40148: 24927,
  40149: 24925,
  40150: 24915,
  40151: 24949,
  40152: 24985,
  40153: 24982,
  40154: 24967,
  40155: 25004,
  40156: 24980,
  40157: 24986,
  40158: 24970,
  40159: 24977,
  40160: 25003,
  40161: 25006,
  40162: 25036,
  40163: 25034,
  40164: 25033,
  40165: 25079,
  40166: 25032,
  40167: 25027,
  40168: 25030,
  40169: 25018,
  40170: 25035,
  40171: 32633,
  40172: 25037,
  40173: 25062,
  40174: 25059,
  40175: 25078,
  40176: 25082,
  40177: 25076,
  40178: 25087,
  40179: 25085,
  40180: 25084,
  40181: 25086,
  40182: 25088,
  40183: 25096,
  40184: 25097,
  40185: 25101,
  40186: 25100,
  40187: 25108,
  40188: 25115,
  40256: 25118,
  40257: 25121,
  40258: 25130,
  40259: 25134,
  40260: 25136,
  40261: 25138,
  40262: 25139,
  40263: 25153,
  40264: 25166,
  40265: 25182,
  40266: 25187,
  40267: 25179,
  40268: 25184,
  40269: 25192,
  40270: 25212,
  40271: 25218,
  40272: 25225,
  40273: 25214,
  40274: 25234,
  40275: 25235,
  40276: 25238,
  40277: 25300,
  40278: 25219,
  40279: 25236,
  40280: 25303,
  40281: 25297,
  40282: 25275,
  40283: 25295,
  40284: 25343,
  40285: 25286,
  40286: 25812,
  40287: 25288,
  40288: 25308,
  40289: 25292,
  40290: 25290,
  40291: 25282,
  40292: 25287,
  40293: 25243,
  40294: 25289,
  40295: 25356,
  40296: 25326,
  40297: 25329,
  40298: 25383,
  40299: 25346,
  40300: 25352,
  40301: 25327,
  40302: 25333,
  40303: 25424,
  40304: 25406,
  40305: 25421,
  40306: 25628,
  40307: 25423,
  40308: 25494,
  40309: 25486,
  40310: 25472,
  40311: 25515,
  40312: 25462,
  40313: 25507,
  40314: 25487,
  40315: 25481,
  40316: 25503,
  40317: 25525,
  40318: 25451,
  40320: 25449,
  40321: 25534,
  40322: 25577,
  40323: 25536,
  40324: 25542,
  40325: 25571,
  40326: 25545,
  40327: 25554,
  40328: 25590,
  40329: 25540,
  40330: 25622,
  40331: 25652,
  40332: 25606,
  40333: 25619,
  40334: 25638,
  40335: 25654,
  40336: 25885,
  40337: 25623,
  40338: 25640,
  40339: 25615,
  40340: 25703,
  40341: 25711,
  40342: 25718,
  40343: 25678,
  40344: 25898,
  40345: 25749,
  40346: 25747,
  40347: 25765,
  40348: 25769,
  40349: 25736,
  40350: 25788,
  40351: 25818,
  40352: 25810,
  40353: 25797,
  40354: 25799,
  40355: 25787,
  40356: 25816,
  40357: 25794,
  40358: 25841,
  40359: 25831,
  40360: 33289,
  40361: 25824,
  40362: 25825,
  40363: 25260,
  40364: 25827,
  40365: 25839,
  40366: 25900,
  40367: 25846,
  40368: 25844,
  40369: 25842,
  40370: 25850,
  40371: 25856,
  40372: 25853,
  40373: 25880,
  40374: 25884,
  40375: 25861,
  40376: 25892,
  40377: 25891,
  40378: 25899,
  40379: 25908,
  40380: 25909,
  40381: 25911,
  40382: 25910,
  40383: 25912,
  40384: 30027,
  40385: 25928,
  40386: 25942,
  40387: 25941,
  40388: 25933,
  40389: 25944,
  40390: 25950,
  40391: 25949,
  40392: 25970,
  40393: 25976,
  40394: 25986,
  40395: 25987,
  40396: 35722,
  40397: 26011,
  40398: 26015,
  40399: 26027,
  40400: 26039,
  40401: 26051,
  40402: 26054,
  40403: 26049,
  40404: 26052,
  40405: 26060,
  40406: 26066,
  40407: 26075,
  40408: 26073,
  40409: 26080,
  40410: 26081,
  40411: 26097,
  40412: 26482,
  40413: 26122,
  40414: 26115,
  40415: 26107,
  40416: 26483,
  40417: 26165,
  40418: 26166,
  40419: 26164,
  40420: 26140,
  40421: 26191,
  40422: 26180,
  40423: 26185,
  40424: 26177,
  40425: 26206,
  40426: 26205,
  40427: 26212,
  40428: 26215,
  40429: 26216,
  40430: 26207,
  40431: 26210,
  40432: 26224,
  40433: 26243,
  40434: 26248,
  40435: 26254,
  40436: 26249,
  40437: 26244,
  40438: 26264,
  40439: 26269,
  40440: 26305,
  40441: 26297,
  40442: 26313,
  40443: 26302,
  40444: 26300,
  40512: 26308,
  40513: 26296,
  40514: 26326,
  40515: 26330,
  40516: 26336,
  40517: 26175,
  40518: 26342,
  40519: 26345,
  40520: 26352,
  40521: 26357,
  40522: 26359,
  40523: 26383,
  40524: 26390,
  40525: 26398,
  40526: 26406,
  40527: 26407,
  40528: 38712,
  40529: 26414,
  40530: 26431,
  40531: 26422,
  40532: 26433,
  40533: 26424,
  40534: 26423,
  40535: 26438,
  40536: 26462,
  40537: 26464,
  40538: 26457,
  40539: 26467,
  40540: 26468,
  40541: 26505,
  40542: 26480,
  40543: 26537,
  40544: 26492,
  40545: 26474,
  40546: 26508,
  40547: 26507,
  40548: 26534,
  40549: 26529,
  40550: 26501,
  40551: 26551,
  40552: 26607,
  40553: 26548,
  40554: 26604,
  40555: 26547,
  40556: 26601,
  40557: 26552,
  40558: 26596,
  40559: 26590,
  40560: 26589,
  40561: 26594,
  40562: 26606,
  40563: 26553,
  40564: 26574,
  40565: 26566,
  40566: 26599,
  40567: 27292,
  40568: 26654,
  40569: 26694,
  40570: 26665,
  40571: 26688,
  40572: 26701,
  40573: 26674,
  40574: 26702,
  40576: 26803,
  40577: 26667,
  40578: 26713,
  40579: 26723,
  40580: 26743,
  40581: 26751,
  40582: 26783,
  40583: 26767,
  40584: 26797,
  40585: 26772,
  40586: 26781,
  40587: 26779,
  40588: 26755,
  40589: 27310,
  40590: 26809,
  40591: 26740,
  40592: 26805,
  40593: 26784,
  40594: 26810,
  40595: 26895,
  40596: 26765,
  40597: 26750,
  40598: 26881,
  40599: 26826,
  40600: 26888,
  40601: 26840,
  40602: 26914,
  40603: 26918,
  40604: 26849,
  40605: 26892,
  40606: 26829,
  40607: 26836,
  40608: 26855,
  40609: 26837,
  40610: 26934,
  40611: 26898,
  40612: 26884,
  40613: 26839,
  40614: 26851,
  40615: 26917,
  40616: 26873,
  40617: 26848,
  40618: 26863,
  40619: 26920,
  40620: 26922,
  40621: 26906,
  40622: 26915,
  40623: 26913,
  40624: 26822,
  40625: 27001,
  40626: 26999,
  40627: 26972,
  40628: 27e3,
  40629: 26987,
  40630: 26964,
  40631: 27006,
  40632: 26990,
  40633: 26937,
  40634: 26996,
  40635: 26941,
  40636: 26969,
  40637: 26928,
  40638: 26977,
  40639: 26974,
  40640: 26973,
  40641: 27009,
  40642: 26986,
  40643: 27058,
  40644: 27054,
  40645: 27088,
  40646: 27071,
  40647: 27073,
  40648: 27091,
  40649: 27070,
  40650: 27086,
  40651: 23528,
  40652: 27082,
  40653: 27101,
  40654: 27067,
  40655: 27075,
  40656: 27047,
  40657: 27182,
  40658: 27025,
  40659: 27040,
  40660: 27036,
  40661: 27029,
  40662: 27060,
  40663: 27102,
  40664: 27112,
  40665: 27138,
  40666: 27163,
  40667: 27135,
  40668: 27402,
  40669: 27129,
  40670: 27122,
  40671: 27111,
  40672: 27141,
  40673: 27057,
  40674: 27166,
  40675: 27117,
  40676: 27156,
  40677: 27115,
  40678: 27146,
  40679: 27154,
  40680: 27329,
  40681: 27171,
  40682: 27155,
  40683: 27204,
  40684: 27148,
  40685: 27250,
  40686: 27190,
  40687: 27256,
  40688: 27207,
  40689: 27234,
  40690: 27225,
  40691: 27238,
  40692: 27208,
  40693: 27192,
  40694: 27170,
  40695: 27280,
  40696: 27277,
  40697: 27296,
  40698: 27268,
  40699: 27298,
  40700: 27299,
  40768: 27287,
  40769: 34327,
  40770: 27323,
  40771: 27331,
  40772: 27330,
  40773: 27320,
  40774: 27315,
  40775: 27308,
  40776: 27358,
  40777: 27345,
  40778: 27359,
  40779: 27306,
  40780: 27354,
  40781: 27370,
  40782: 27387,
  40783: 27397,
  40784: 34326,
  40785: 27386,
  40786: 27410,
  40787: 27414,
  40788: 39729,
  40789: 27423,
  40790: 27448,
  40791: 27447,
  40792: 30428,
  40793: 27449,
  40794: 39150,
  40795: 27463,
  40796: 27459,
  40797: 27465,
  40798: 27472,
  40799: 27481,
  40800: 27476,
  40801: 27483,
  40802: 27487,
  40803: 27489,
  40804: 27512,
  40805: 27513,
  40806: 27519,
  40807: 27520,
  40808: 27524,
  40809: 27523,
  40810: 27533,
  40811: 27544,
  40812: 27541,
  40813: 27550,
  40814: 27556,
  40815: 27562,
  40816: 27563,
  40817: 27567,
  40818: 27570,
  40819: 27569,
  40820: 27571,
  40821: 27575,
  40822: 27580,
  40823: 27590,
  40824: 27595,
  40825: 27603,
  40826: 27615,
  40827: 27628,
  40828: 27627,
  40829: 27635,
  40830: 27631,
  40832: 40638,
  40833: 27656,
  40834: 27667,
  40835: 27668,
  40836: 27675,
  40837: 27684,
  40838: 27683,
  40839: 27742,
  40840: 27733,
  40841: 27746,
  40842: 27754,
  40843: 27778,
  40844: 27789,
  40845: 27802,
  40846: 27777,
  40847: 27803,
  40848: 27774,
  40849: 27752,
  40850: 27763,
  40851: 27794,
  40852: 27792,
  40853: 27844,
  40854: 27889,
  40855: 27859,
  40856: 27837,
  40857: 27863,
  40858: 27845,
  40859: 27869,
  40860: 27822,
  40861: 27825,
  40862: 27838,
  40863: 27834,
  40864: 27867,
  40865: 27887,
  40866: 27865,
  40867: 27882,
  40868: 27935,
  40869: 34893,
  40870: 27958,
  40871: 27947,
  40872: 27965,
  40873: 27960,
  40874: 27929,
  40875: 27957,
  40876: 27955,
  40877: 27922,
  40878: 27916,
  40879: 28003,
  40880: 28051,
  40881: 28004,
  40882: 27994,
  40883: 28025,
  40884: 27993,
  40885: 28046,
  40886: 28053,
  40887: 28644,
  40888: 28037,
  40889: 28153,
  40890: 28181,
  40891: 28170,
  40892: 28085,
  40893: 28103,
  40894: 28134,
  40895: 28088,
  40896: 28102,
  40897: 28140,
  40898: 28126,
  40899: 28108,
  40900: 28136,
  40901: 28114,
  40902: 28101,
  40903: 28154,
  40904: 28121,
  40905: 28132,
  40906: 28117,
  40907: 28138,
  40908: 28142,
  40909: 28205,
  40910: 28270,
  40911: 28206,
  40912: 28185,
  40913: 28274,
  40914: 28255,
  40915: 28222,
  40916: 28195,
  40917: 28267,
  40918: 28203,
  40919: 28278,
  40920: 28237,
  40921: 28191,
  40922: 28227,
  40923: 28218,
  40924: 28238,
  40925: 28196,
  40926: 28415,
  40927: 28189,
  40928: 28216,
  40929: 28290,
  40930: 28330,
  40931: 28312,
  40932: 28361,
  40933: 28343,
  40934: 28371,
  40935: 28349,
  40936: 28335,
  40937: 28356,
  40938: 28338,
  40939: 28372,
  40940: 28373,
  40941: 28303,
  40942: 28325,
  40943: 28354,
  40944: 28319,
  40945: 28481,
  40946: 28433,
  40947: 28748,
  40948: 28396,
  40949: 28408,
  40950: 28414,
  40951: 28479,
  40952: 28402,
  40953: 28465,
  40954: 28399,
  40955: 28466,
  40956: 28364,
  57408: 28478,
  57409: 28435,
  57410: 28407,
  57411: 28550,
  57412: 28538,
  57413: 28536,
  57414: 28545,
  57415: 28544,
  57416: 28527,
  57417: 28507,
  57418: 28659,
  57419: 28525,
  57420: 28546,
  57421: 28540,
  57422: 28504,
  57423: 28558,
  57424: 28561,
  57425: 28610,
  57426: 28518,
  57427: 28595,
  57428: 28579,
  57429: 28577,
  57430: 28580,
  57431: 28601,
  57432: 28614,
  57433: 28586,
  57434: 28639,
  57435: 28629,
  57436: 28652,
  57437: 28628,
  57438: 28632,
  57439: 28657,
  57440: 28654,
  57441: 28635,
  57442: 28681,
  57443: 28683,
  57444: 28666,
  57445: 28689,
  57446: 28673,
  57447: 28687,
  57448: 28670,
  57449: 28699,
  57450: 28698,
  57451: 28532,
  57452: 28701,
  57453: 28696,
  57454: 28703,
  57455: 28720,
  57456: 28734,
  57457: 28722,
  57458: 28753,
  57459: 28771,
  57460: 28825,
  57461: 28818,
  57462: 28847,
  57463: 28913,
  57464: 28844,
  57465: 28856,
  57466: 28851,
  57467: 28846,
  57468: 28895,
  57469: 28875,
  57470: 28893,
  57472: 28889,
  57473: 28937,
  57474: 28925,
  57475: 28956,
  57476: 28953,
  57477: 29029,
  57478: 29013,
  57479: 29064,
  57480: 29030,
  57481: 29026,
  57482: 29004,
  57483: 29014,
  57484: 29036,
  57485: 29071,
  57486: 29179,
  57487: 29060,
  57488: 29077,
  57489: 29096,
  57490: 29100,
  57491: 29143,
  57492: 29113,
  57493: 29118,
  57494: 29138,
  57495: 29129,
  57496: 29140,
  57497: 29134,
  57498: 29152,
  57499: 29164,
  57500: 29159,
  57501: 29173,
  57502: 29180,
  57503: 29177,
  57504: 29183,
  57505: 29197,
  57506: 29200,
  57507: 29211,
  57508: 29224,
  57509: 29229,
  57510: 29228,
  57511: 29232,
  57512: 29234,
  57513: 29243,
  57514: 29244,
  57515: 29247,
  57516: 29248,
  57517: 29254,
  57518: 29259,
  57519: 29272,
  57520: 29300,
  57521: 29310,
  57522: 29314,
  57523: 29313,
  57524: 29319,
  57525: 29330,
  57526: 29334,
  57527: 29346,
  57528: 29351,
  57529: 29369,
  57530: 29362,
  57531: 29379,
  57532: 29382,
  57533: 29380,
  57534: 29390,
  57535: 29394,
  57536: 29410,
  57537: 29408,
  57538: 29409,
  57539: 29433,
  57540: 29431,
  57541: 20495,
  57542: 29463,
  57543: 29450,
  57544: 29468,
  57545: 29462,
  57546: 29469,
  57547: 29492,
  57548: 29487,
  57549: 29481,
  57550: 29477,
  57551: 29502,
  57552: 29518,
  57553: 29519,
  57554: 40664,
  57555: 29527,
  57556: 29546,
  57557: 29544,
  57558: 29552,
  57559: 29560,
  57560: 29557,
  57561: 29563,
  57562: 29562,
  57563: 29640,
  57564: 29619,
  57565: 29646,
  57566: 29627,
  57567: 29632,
  57568: 29669,
  57569: 29678,
  57570: 29662,
  57571: 29858,
  57572: 29701,
  57573: 29807,
  57574: 29733,
  57575: 29688,
  57576: 29746,
  57577: 29754,
  57578: 29781,
  57579: 29759,
  57580: 29791,
  57581: 29785,
  57582: 29761,
  57583: 29788,
  57584: 29801,
  57585: 29808,
  57586: 29795,
  57587: 29802,
  57588: 29814,
  57589: 29822,
  57590: 29835,
  57591: 29854,
  57592: 29863,
  57593: 29898,
  57594: 29903,
  57595: 29908,
  57596: 29681,
  57664: 29920,
  57665: 29923,
  57666: 29927,
  57667: 29929,
  57668: 29934,
  57669: 29938,
  57670: 29936,
  57671: 29937,
  57672: 29944,
  57673: 29943,
  57674: 29956,
  57675: 29955,
  57676: 29957,
  57677: 29964,
  57678: 29966,
  57679: 29965,
  57680: 29973,
  57681: 29971,
  57682: 29982,
  57683: 29990,
  57684: 29996,
  57685: 30012,
  57686: 30020,
  57687: 30029,
  57688: 30026,
  57689: 30025,
  57690: 30043,
  57691: 30022,
  57692: 30042,
  57693: 30057,
  57694: 30052,
  57695: 30055,
  57696: 30059,
  57697: 30061,
  57698: 30072,
  57699: 30070,
  57700: 30086,
  57701: 30087,
  57702: 30068,
  57703: 30090,
  57704: 30089,
  57705: 30082,
  57706: 30100,
  57707: 30106,
  57708: 30109,
  57709: 30117,
  57710: 30115,
  57711: 30146,
  57712: 30131,
  57713: 30147,
  57714: 30133,
  57715: 30141,
  57716: 30136,
  57717: 30140,
  57718: 30129,
  57719: 30157,
  57720: 30154,
  57721: 30162,
  57722: 30169,
  57723: 30179,
  57724: 30174,
  57725: 30206,
  57726: 30207,
  57728: 30204,
  57729: 30209,
  57730: 30192,
  57731: 30202,
  57732: 30194,
  57733: 30195,
  57734: 30219,
  57735: 30221,
  57736: 30217,
  57737: 30239,
  57738: 30247,
  57739: 30240,
  57740: 30241,
  57741: 30242,
  57742: 30244,
  57743: 30260,
  57744: 30256,
  57745: 30267,
  57746: 30279,
  57747: 30280,
  57748: 30278,
  57749: 30300,
  57750: 30296,
  57751: 30305,
  57752: 30306,
  57753: 30312,
  57754: 30313,
  57755: 30314,
  57756: 30311,
  57757: 30316,
  57758: 30320,
  57759: 30322,
  57760: 30326,
  57761: 30328,
  57762: 30332,
  57763: 30336,
  57764: 30339,
  57765: 30344,
  57766: 30347,
  57767: 30350,
  57768: 30358,
  57769: 30355,
  57770: 30361,
  57771: 30362,
  57772: 30384,
  57773: 30388,
  57774: 30392,
  57775: 30393,
  57776: 30394,
  57777: 30402,
  57778: 30413,
  57779: 30422,
  57780: 30418,
  57781: 30430,
  57782: 30433,
  57783: 30437,
  57784: 30439,
  57785: 30442,
  57786: 34351,
  57787: 30459,
  57788: 30472,
  57789: 30471,
  57790: 30468,
  57791: 30505,
  57792: 30500,
  57793: 30494,
  57794: 30501,
  57795: 30502,
  57796: 30491,
  57797: 30519,
  57798: 30520,
  57799: 30535,
  57800: 30554,
  57801: 30568,
  57802: 30571,
  57803: 30555,
  57804: 30565,
  57805: 30591,
  57806: 30590,
  57807: 30585,
  57808: 30606,
  57809: 30603,
  57810: 30609,
  57811: 30624,
  57812: 30622,
  57813: 30640,
  57814: 30646,
  57815: 30649,
  57816: 30655,
  57817: 30652,
  57818: 30653,
  57819: 30651,
  57820: 30663,
  57821: 30669,
  57822: 30679,
  57823: 30682,
  57824: 30684,
  57825: 30691,
  57826: 30702,
  57827: 30716,
  57828: 30732,
  57829: 30738,
  57830: 31014,
  57831: 30752,
  57832: 31018,
  57833: 30789,
  57834: 30862,
  57835: 30836,
  57836: 30854,
  57837: 30844,
  57838: 30874,
  57839: 30860,
  57840: 30883,
  57841: 30901,
  57842: 30890,
  57843: 30895,
  57844: 30929,
  57845: 30918,
  57846: 30923,
  57847: 30932,
  57848: 30910,
  57849: 30908,
  57850: 30917,
  57851: 30922,
  57852: 30956,
  57920: 30951,
  57921: 30938,
  57922: 30973,
  57923: 30964,
  57924: 30983,
  57925: 30994,
  57926: 30993,
  57927: 31001,
  57928: 31020,
  57929: 31019,
  57930: 31040,
  57931: 31072,
  57932: 31063,
  57933: 31071,
  57934: 31066,
  57935: 31061,
  57936: 31059,
  57937: 31098,
  57938: 31103,
  57939: 31114,
  57940: 31133,
  57941: 31143,
  57942: 40779,
  57943: 31146,
  57944: 31150,
  57945: 31155,
  57946: 31161,
  57947: 31162,
  57948: 31177,
  57949: 31189,
  57950: 31207,
  57951: 31212,
  57952: 31201,
  57953: 31203,
  57954: 31240,
  57955: 31245,
  57956: 31256,
  57957: 31257,
  57958: 31264,
  57959: 31263,
  57960: 31104,
  57961: 31281,
  57962: 31291,
  57963: 31294,
  57964: 31287,
  57965: 31299,
  57966: 31319,
  57967: 31305,
  57968: 31329,
  57969: 31330,
  57970: 31337,
  57971: 40861,
  57972: 31344,
  57973: 31353,
  57974: 31357,
  57975: 31368,
  57976: 31383,
  57977: 31381,
  57978: 31384,
  57979: 31382,
  57980: 31401,
  57981: 31432,
  57982: 31408,
  57984: 31414,
  57985: 31429,
  57986: 31428,
  57987: 31423,
  57988: 36995,
  57989: 31431,
  57990: 31434,
  57991: 31437,
  57992: 31439,
  57993: 31445,
  57994: 31443,
  57995: 31449,
  57996: 31450,
  57997: 31453,
  57998: 31457,
  57999: 31458,
  58e3: 31462,
  58001: 31469,
  58002: 31472,
  58003: 31490,
  58004: 31503,
  58005: 31498,
  58006: 31494,
  58007: 31539,
  58008: 31512,
  58009: 31513,
  58010: 31518,
  58011: 31541,
  58012: 31528,
  58013: 31542,
  58014: 31568,
  58015: 31610,
  58016: 31492,
  58017: 31565,
  58018: 31499,
  58019: 31564,
  58020: 31557,
  58021: 31605,
  58022: 31589,
  58023: 31604,
  58024: 31591,
  58025: 31600,
  58026: 31601,
  58027: 31596,
  58028: 31598,
  58029: 31645,
  58030: 31640,
  58031: 31647,
  58032: 31629,
  58033: 31644,
  58034: 31642,
  58035: 31627,
  58036: 31634,
  58037: 31631,
  58038: 31581,
  58039: 31641,
  58040: 31691,
  58041: 31681,
  58042: 31692,
  58043: 31695,
  58044: 31668,
  58045: 31686,
  58046: 31709,
  58047: 31721,
  58048: 31761,
  58049: 31764,
  58050: 31718,
  58051: 31717,
  58052: 31840,
  58053: 31744,
  58054: 31751,
  58055: 31763,
  58056: 31731,
  58057: 31735,
  58058: 31767,
  58059: 31757,
  58060: 31734,
  58061: 31779,
  58062: 31783,
  58063: 31786,
  58064: 31775,
  58065: 31799,
  58066: 31787,
  58067: 31805,
  58068: 31820,
  58069: 31811,
  58070: 31828,
  58071: 31823,
  58072: 31808,
  58073: 31824,
  58074: 31832,
  58075: 31839,
  58076: 31844,
  58077: 31830,
  58078: 31845,
  58079: 31852,
  58080: 31861,
  58081: 31875,
  58082: 31888,
  58083: 31908,
  58084: 31917,
  58085: 31906,
  58086: 31915,
  58087: 31905,
  58088: 31912,
  58089: 31923,
  58090: 31922,
  58091: 31921,
  58092: 31918,
  58093: 31929,
  58094: 31933,
  58095: 31936,
  58096: 31941,
  58097: 31938,
  58098: 31960,
  58099: 31954,
  58100: 31964,
  58101: 31970,
  58102: 39739,
  58103: 31983,
  58104: 31986,
  58105: 31988,
  58106: 31990,
  58107: 31994,
  58108: 32006,
  58176: 32002,
  58177: 32028,
  58178: 32021,
  58179: 32010,
  58180: 32069,
  58181: 32075,
  58182: 32046,
  58183: 32050,
  58184: 32063,
  58185: 32053,
  58186: 32070,
  58187: 32115,
  58188: 32086,
  58189: 32078,
  58190: 32114,
  58191: 32104,
  58192: 32110,
  58193: 32079,
  58194: 32099,
  58195: 32147,
  58196: 32137,
  58197: 32091,
  58198: 32143,
  58199: 32125,
  58200: 32155,
  58201: 32186,
  58202: 32174,
  58203: 32163,
  58204: 32181,
  58205: 32199,
  58206: 32189,
  58207: 32171,
  58208: 32317,
  58209: 32162,
  58210: 32175,
  58211: 32220,
  58212: 32184,
  58213: 32159,
  58214: 32176,
  58215: 32216,
  58216: 32221,
  58217: 32228,
  58218: 32222,
  58219: 32251,
  58220: 32242,
  58221: 32225,
  58222: 32261,
  58223: 32266,
  58224: 32291,
  58225: 32289,
  58226: 32274,
  58227: 32305,
  58228: 32287,
  58229: 32265,
  58230: 32267,
  58231: 32290,
  58232: 32326,
  58233: 32358,
  58234: 32315,
  58235: 32309,
  58236: 32313,
  58237: 32323,
  58238: 32311,
  58240: 32306,
  58241: 32314,
  58242: 32359,
  58243: 32349,
  58244: 32342,
  58245: 32350,
  58246: 32345,
  58247: 32346,
  58248: 32377,
  58249: 32362,
  58250: 32361,
  58251: 32380,
  58252: 32379,
  58253: 32387,
  58254: 32213,
  58255: 32381,
  58256: 36782,
  58257: 32383,
  58258: 32392,
  58259: 32393,
  58260: 32396,
  58261: 32402,
  58262: 32400,
  58263: 32403,
  58264: 32404,
  58265: 32406,
  58266: 32398,
  58267: 32411,
  58268: 32412,
  58269: 32568,
  58270: 32570,
  58271: 32581,
  58272: 32588,
  58273: 32589,
  58274: 32590,
  58275: 32592,
  58276: 32593,
  58277: 32597,
  58278: 32596,
  58279: 32600,
  58280: 32607,
  58281: 32608,
  58282: 32616,
  58283: 32617,
  58284: 32615,
  58285: 32632,
  58286: 32642,
  58287: 32646,
  58288: 32643,
  58289: 32648,
  58290: 32647,
  58291: 32652,
  58292: 32660,
  58293: 32670,
  58294: 32669,
  58295: 32666,
  58296: 32675,
  58297: 32687,
  58298: 32690,
  58299: 32697,
  58300: 32686,
  58301: 32694,
  58302: 32696,
  58303: 35697,
  58304: 32709,
  58305: 32710,
  58306: 32714,
  58307: 32725,
  58308: 32724,
  58309: 32737,
  58310: 32742,
  58311: 32745,
  58312: 32755,
  58313: 32761,
  58314: 39132,
  58315: 32774,
  58316: 32772,
  58317: 32779,
  58318: 32786,
  58319: 32792,
  58320: 32793,
  58321: 32796,
  58322: 32801,
  58323: 32808,
  58324: 32831,
  58325: 32827,
  58326: 32842,
  58327: 32838,
  58328: 32850,
  58329: 32856,
  58330: 32858,
  58331: 32863,
  58332: 32866,
  58333: 32872,
  58334: 32883,
  58335: 32882,
  58336: 32880,
  58337: 32886,
  58338: 32889,
  58339: 32893,
  58340: 32895,
  58341: 32900,
  58342: 32902,
  58343: 32901,
  58344: 32923,
  58345: 32915,
  58346: 32922,
  58347: 32941,
  58348: 20880,
  58349: 32940,
  58350: 32987,
  58351: 32997,
  58352: 32985,
  58353: 32989,
  58354: 32964,
  58355: 32986,
  58356: 32982,
  58357: 33033,
  58358: 33007,
  58359: 33009,
  58360: 33051,
  58361: 33065,
  58362: 33059,
  58363: 33071,
  58364: 33099,
  58432: 38539,
  58433: 33094,
  58434: 33086,
  58435: 33107,
  58436: 33105,
  58437: 33020,
  58438: 33137,
  58439: 33134,
  58440: 33125,
  58441: 33126,
  58442: 33140,
  58443: 33155,
  58444: 33160,
  58445: 33162,
  58446: 33152,
  58447: 33154,
  58448: 33184,
  58449: 33173,
  58450: 33188,
  58451: 33187,
  58452: 33119,
  58453: 33171,
  58454: 33193,
  58455: 33200,
  58456: 33205,
  58457: 33214,
  58458: 33208,
  58459: 33213,
  58460: 33216,
  58461: 33218,
  58462: 33210,
  58463: 33225,
  58464: 33229,
  58465: 33233,
  58466: 33241,
  58467: 33240,
  58468: 33224,
  58469: 33242,
  58470: 33247,
  58471: 33248,
  58472: 33255,
  58473: 33274,
  58474: 33275,
  58475: 33278,
  58476: 33281,
  58477: 33282,
  58478: 33285,
  58479: 33287,
  58480: 33290,
  58481: 33293,
  58482: 33296,
  58483: 33302,
  58484: 33321,
  58485: 33323,
  58486: 33336,
  58487: 33331,
  58488: 33344,
  58489: 33369,
  58490: 33368,
  58491: 33373,
  58492: 33370,
  58493: 33375,
  58494: 33380,
  58496: 33378,
  58497: 33384,
  58498: 33386,
  58499: 33387,
  58500: 33326,
  58501: 33393,
  58502: 33399,
  58503: 33400,
  58504: 33406,
  58505: 33421,
  58506: 33426,
  58507: 33451,
  58508: 33439,
  58509: 33467,
  58510: 33452,
  58511: 33505,
  58512: 33507,
  58513: 33503,
  58514: 33490,
  58515: 33524,
  58516: 33523,
  58517: 33530,
  58518: 33683,
  58519: 33539,
  58520: 33531,
  58521: 33529,
  58522: 33502,
  58523: 33542,
  58524: 33500,
  58525: 33545,
  58526: 33497,
  58527: 33589,
  58528: 33588,
  58529: 33558,
  58530: 33586,
  58531: 33585,
  58532: 33600,
  58533: 33593,
  58534: 33616,
  58535: 33605,
  58536: 33583,
  58537: 33579,
  58538: 33559,
  58539: 33560,
  58540: 33669,
  58541: 33690,
  58542: 33706,
  58543: 33695,
  58544: 33698,
  58545: 33686,
  58546: 33571,
  58547: 33678,
  58548: 33671,
  58549: 33674,
  58550: 33660,
  58551: 33717,
  58552: 33651,
  58553: 33653,
  58554: 33696,
  58555: 33673,
  58556: 33704,
  58557: 33780,
  58558: 33811,
  58559: 33771,
  58560: 33742,
  58561: 33789,
  58562: 33795,
  58563: 33752,
  58564: 33803,
  58565: 33729,
  58566: 33783,
  58567: 33799,
  58568: 33760,
  58569: 33778,
  58570: 33805,
  58571: 33826,
  58572: 33824,
  58573: 33725,
  58574: 33848,
  58575: 34054,
  58576: 33787,
  58577: 33901,
  58578: 33834,
  58579: 33852,
  58580: 34138,
  58581: 33924,
  58582: 33911,
  58583: 33899,
  58584: 33965,
  58585: 33902,
  58586: 33922,
  58587: 33897,
  58588: 33862,
  58589: 33836,
  58590: 33903,
  58591: 33913,
  58592: 33845,
  58593: 33994,
  58594: 33890,
  58595: 33977,
  58596: 33983,
  58597: 33951,
  58598: 34009,
  58599: 33997,
  58600: 33979,
  58601: 34010,
  58602: 34e3,
  58603: 33985,
  58604: 33990,
  58605: 34006,
  58606: 33953,
  58607: 34081,
  58608: 34047,
  58609: 34036,
  58610: 34071,
  58611: 34072,
  58612: 34092,
  58613: 34079,
  58614: 34069,
  58615: 34068,
  58616: 34044,
  58617: 34112,
  58618: 34147,
  58619: 34136,
  58620: 34120,
  58688: 34113,
  58689: 34306,
  58690: 34123,
  58691: 34133,
  58692: 34176,
  58693: 34212,
  58694: 34184,
  58695: 34193,
  58696: 34186,
  58697: 34216,
  58698: 34157,
  58699: 34196,
  58700: 34203,
  58701: 34282,
  58702: 34183,
  58703: 34204,
  58704: 34167,
  58705: 34174,
  58706: 34192,
  58707: 34249,
  58708: 34234,
  58709: 34255,
  58710: 34233,
  58711: 34256,
  58712: 34261,
  58713: 34269,
  58714: 34277,
  58715: 34268,
  58716: 34297,
  58717: 34314,
  58718: 34323,
  58719: 34315,
  58720: 34302,
  58721: 34298,
  58722: 34310,
  58723: 34338,
  58724: 34330,
  58725: 34352,
  58726: 34367,
  58727: 34381,
  58728: 20053,
  58729: 34388,
  58730: 34399,
  58731: 34407,
  58732: 34417,
  58733: 34451,
  58734: 34467,
  58735: 34473,
  58736: 34474,
  58737: 34443,
  58738: 34444,
  58739: 34486,
  58740: 34479,
  58741: 34500,
  58742: 34502,
  58743: 34480,
  58744: 34505,
  58745: 34851,
  58746: 34475,
  58747: 34516,
  58748: 34526,
  58749: 34537,
  58750: 34540,
  58752: 34527,
  58753: 34523,
  58754: 34543,
  58755: 34578,
  58756: 34566,
  58757: 34568,
  58758: 34560,
  58759: 34563,
  58760: 34555,
  58761: 34577,
  58762: 34569,
  58763: 34573,
  58764: 34553,
  58765: 34570,
  58766: 34612,
  58767: 34623,
  58768: 34615,
  58769: 34619,
  58770: 34597,
  58771: 34601,
  58772: 34586,
  58773: 34656,
  58774: 34655,
  58775: 34680,
  58776: 34636,
  58777: 34638,
  58778: 34676,
  58779: 34647,
  58780: 34664,
  58781: 34670,
  58782: 34649,
  58783: 34643,
  58784: 34659,
  58785: 34666,
  58786: 34821,
  58787: 34722,
  58788: 34719,
  58789: 34690,
  58790: 34735,
  58791: 34763,
  58792: 34749,
  58793: 34752,
  58794: 34768,
  58795: 38614,
  58796: 34731,
  58797: 34756,
  58798: 34739,
  58799: 34759,
  58800: 34758,
  58801: 34747,
  58802: 34799,
  58803: 34802,
  58804: 34784,
  58805: 34831,
  58806: 34829,
  58807: 34814,
  58808: 34806,
  58809: 34807,
  58810: 34830,
  58811: 34770,
  58812: 34833,
  58813: 34838,
  58814: 34837,
  58815: 34850,
  58816: 34849,
  58817: 34865,
  58818: 34870,
  58819: 34873,
  58820: 34855,
  58821: 34875,
  58822: 34884,
  58823: 34882,
  58824: 34898,
  58825: 34905,
  58826: 34910,
  58827: 34914,
  58828: 34923,
  58829: 34945,
  58830: 34942,
  58831: 34974,
  58832: 34933,
  58833: 34941,
  58834: 34997,
  58835: 34930,
  58836: 34946,
  58837: 34967,
  58838: 34962,
  58839: 34990,
  58840: 34969,
  58841: 34978,
  58842: 34957,
  58843: 34980,
  58844: 34992,
  58845: 35007,
  58846: 34993,
  58847: 35011,
  58848: 35012,
  58849: 35028,
  58850: 35032,
  58851: 35033,
  58852: 35037,
  58853: 35065,
  58854: 35074,
  58855: 35068,
  58856: 35060,
  58857: 35048,
  58858: 35058,
  58859: 35076,
  58860: 35084,
  58861: 35082,
  58862: 35091,
  58863: 35139,
  58864: 35102,
  58865: 35109,
  58866: 35114,
  58867: 35115,
  58868: 35137,
  58869: 35140,
  58870: 35131,
  58871: 35126,
  58872: 35128,
  58873: 35148,
  58874: 35101,
  58875: 35168,
  58876: 35166,
  58944: 35174,
  58945: 35172,
  58946: 35181,
  58947: 35178,
  58948: 35183,
  58949: 35188,
  58950: 35191,
  58951: 35198,
  58952: 35203,
  58953: 35208,
  58954: 35210,
  58955: 35219,
  58956: 35224,
  58957: 35233,
  58958: 35241,
  58959: 35238,
  58960: 35244,
  58961: 35247,
  58962: 35250,
  58963: 35258,
  58964: 35261,
  58965: 35263,
  58966: 35264,
  58967: 35290,
  58968: 35292,
  58969: 35293,
  58970: 35303,
  58971: 35316,
  58972: 35320,
  58973: 35331,
  58974: 35350,
  58975: 35344,
  58976: 35340,
  58977: 35355,
  58978: 35357,
  58979: 35365,
  58980: 35382,
  58981: 35393,
  58982: 35419,
  58983: 35410,
  58984: 35398,
  58985: 35400,
  58986: 35452,
  58987: 35437,
  58988: 35436,
  58989: 35426,
  58990: 35461,
  58991: 35458,
  58992: 35460,
  58993: 35496,
  58994: 35489,
  58995: 35473,
  58996: 35493,
  58997: 35494,
  58998: 35482,
  58999: 35491,
  59e3: 35524,
  59001: 35533,
  59002: 35522,
  59003: 35546,
  59004: 35563,
  59005: 35571,
  59006: 35559,
  59008: 35556,
  59009: 35569,
  59010: 35604,
  59011: 35552,
  59012: 35554,
  59013: 35575,
  59014: 35550,
  59015: 35547,
  59016: 35596,
  59017: 35591,
  59018: 35610,
  59019: 35553,
  59020: 35606,
  59021: 35600,
  59022: 35607,
  59023: 35616,
  59024: 35635,
  59025: 38827,
  59026: 35622,
  59027: 35627,
  59028: 35646,
  59029: 35624,
  59030: 35649,
  59031: 35660,
  59032: 35663,
  59033: 35662,
  59034: 35657,
  59035: 35670,
  59036: 35675,
  59037: 35674,
  59038: 35691,
  59039: 35679,
  59040: 35692,
  59041: 35695,
  59042: 35700,
  59043: 35709,
  59044: 35712,
  59045: 35724,
  59046: 35726,
  59047: 35730,
  59048: 35731,
  59049: 35734,
  59050: 35737,
  59051: 35738,
  59052: 35898,
  59053: 35905,
  59054: 35903,
  59055: 35912,
  59056: 35916,
  59057: 35918,
  59058: 35920,
  59059: 35925,
  59060: 35938,
  59061: 35948,
  59062: 35960,
  59063: 35962,
  59064: 35970,
  59065: 35977,
  59066: 35973,
  59067: 35978,
  59068: 35981,
  59069: 35982,
  59070: 35988,
  59071: 35964,
  59072: 35992,
  59073: 25117,
  59074: 36013,
  59075: 36010,
  59076: 36029,
  59077: 36018,
  59078: 36019,
  59079: 36014,
  59080: 36022,
  59081: 36040,
  59082: 36033,
  59083: 36068,
  59084: 36067,
  59085: 36058,
  59086: 36093,
  59087: 36090,
  59088: 36091,
  59089: 36100,
  59090: 36101,
  59091: 36106,
  59092: 36103,
  59093: 36111,
  59094: 36109,
  59095: 36112,
  59096: 40782,
  59097: 36115,
  59098: 36045,
  59099: 36116,
  59100: 36118,
  59101: 36199,
  59102: 36205,
  59103: 36209,
  59104: 36211,
  59105: 36225,
  59106: 36249,
  59107: 36290,
  59108: 36286,
  59109: 36282,
  59110: 36303,
  59111: 36314,
  59112: 36310,
  59113: 36300,
  59114: 36315,
  59115: 36299,
  59116: 36330,
  59117: 36331,
  59118: 36319,
  59119: 36323,
  59120: 36348,
  59121: 36360,
  59122: 36361,
  59123: 36351,
  59124: 36381,
  59125: 36382,
  59126: 36368,
  59127: 36383,
  59128: 36418,
  59129: 36405,
  59130: 36400,
  59131: 36404,
  59132: 36426,
  59200: 36423,
  59201: 36425,
  59202: 36428,
  59203: 36432,
  59204: 36424,
  59205: 36441,
  59206: 36452,
  59207: 36448,
  59208: 36394,
  59209: 36451,
  59210: 36437,
  59211: 36470,
  59212: 36466,
  59213: 36476,
  59214: 36481,
  59215: 36487,
  59216: 36485,
  59217: 36484,
  59218: 36491,
  59219: 36490,
  59220: 36499,
  59221: 36497,
  59222: 36500,
  59223: 36505,
  59224: 36522,
  59225: 36513,
  59226: 36524,
  59227: 36528,
  59228: 36550,
  59229: 36529,
  59230: 36542,
  59231: 36549,
  59232: 36552,
  59233: 36555,
  59234: 36571,
  59235: 36579,
  59236: 36604,
  59237: 36603,
  59238: 36587,
  59239: 36606,
  59240: 36618,
  59241: 36613,
  59242: 36629,
  59243: 36626,
  59244: 36633,
  59245: 36627,
  59246: 36636,
  59247: 36639,
  59248: 36635,
  59249: 36620,
  59250: 36646,
  59251: 36659,
  59252: 36667,
  59253: 36665,
  59254: 36677,
  59255: 36674,
  59256: 36670,
  59257: 36684,
  59258: 36681,
  59259: 36678,
  59260: 36686,
  59261: 36695,
  59262: 36700,
  59264: 36706,
  59265: 36707,
  59266: 36708,
  59267: 36764,
  59268: 36767,
  59269: 36771,
  59270: 36781,
  59271: 36783,
  59272: 36791,
  59273: 36826,
  59274: 36837,
  59275: 36834,
  59276: 36842,
  59277: 36847,
  59278: 36999,
  59279: 36852,
  59280: 36869,
  59281: 36857,
  59282: 36858,
  59283: 36881,
  59284: 36885,
  59285: 36897,
  59286: 36877,
  59287: 36894,
  59288: 36886,
  59289: 36875,
  59290: 36903,
  59291: 36918,
  59292: 36917,
  59293: 36921,
  59294: 36856,
  59295: 36943,
  59296: 36944,
  59297: 36945,
  59298: 36946,
  59299: 36878,
  59300: 36937,
  59301: 36926,
  59302: 36950,
  59303: 36952,
  59304: 36958,
  59305: 36968,
  59306: 36975,
  59307: 36982,
  59308: 38568,
  59309: 36978,
  59310: 36994,
  59311: 36989,
  59312: 36993,
  59313: 36992,
  59314: 37002,
  59315: 37001,
  59316: 37007,
  59317: 37032,
  59318: 37039,
  59319: 37041,
  59320: 37045,
  59321: 37090,
  59322: 37092,
  59323: 25160,
  59324: 37083,
  59325: 37122,
  59326: 37138,
  59327: 37145,
  59328: 37170,
  59329: 37168,
  59330: 37194,
  59331: 37206,
  59332: 37208,
  59333: 37219,
  59334: 37221,
  59335: 37225,
  59336: 37235,
  59337: 37234,
  59338: 37259,
  59339: 37257,
  59340: 37250,
  59341: 37282,
  59342: 37291,
  59343: 37295,
  59344: 37290,
  59345: 37301,
  59346: 37300,
  59347: 37306,
  59348: 37312,
  59349: 37313,
  59350: 37321,
  59351: 37323,
  59352: 37328,
  59353: 37334,
  59354: 37343,
  59355: 37345,
  59356: 37339,
  59357: 37372,
  59358: 37365,
  59359: 37366,
  59360: 37406,
  59361: 37375,
  59362: 37396,
  59363: 37420,
  59364: 37397,
  59365: 37393,
  59366: 37470,
  59367: 37463,
  59368: 37445,
  59369: 37449,
  59370: 37476,
  59371: 37448,
  59372: 37525,
  59373: 37439,
  59374: 37451,
  59375: 37456,
  59376: 37532,
  59377: 37526,
  59378: 37523,
  59379: 37531,
  59380: 37466,
  59381: 37583,
  59382: 37561,
  59383: 37559,
  59384: 37609,
  59385: 37647,
  59386: 37626,
  59387: 37700,
  59388: 37678,
  59456: 37657,
  59457: 37666,
  59458: 37658,
  59459: 37667,
  59460: 37690,
  59461: 37685,
  59462: 37691,
  59463: 37724,
  59464: 37728,
  59465: 37756,
  59466: 37742,
  59467: 37718,
  59468: 37808,
  59469: 37804,
  59470: 37805,
  59471: 37780,
  59472: 37817,
  59473: 37846,
  59474: 37847,
  59475: 37864,
  59476: 37861,
  59477: 37848,
  59478: 37827,
  59479: 37853,
  59480: 37840,
  59481: 37832,
  59482: 37860,
  59483: 37914,
  59484: 37908,
  59485: 37907,
  59486: 37891,
  59487: 37895,
  59488: 37904,
  59489: 37942,
  59490: 37931,
  59491: 37941,
  59492: 37921,
  59493: 37946,
  59494: 37953,
  59495: 37970,
  59496: 37956,
  59497: 37979,
  59498: 37984,
  59499: 37986,
  59500: 37982,
  59501: 37994,
  59502: 37417,
  59503: 38e3,
  59504: 38005,
  59505: 38007,
  59506: 38013,
  59507: 37978,
  59508: 38012,
  59509: 38014,
  59510: 38017,
  59511: 38015,
  59512: 38274,
  59513: 38279,
  59514: 38282,
  59515: 38292,
  59516: 38294,
  59517: 38296,
  59518: 38297,
  59520: 38304,
  59521: 38312,
  59522: 38311,
  59523: 38317,
  59524: 38332,
  59525: 38331,
  59526: 38329,
  59527: 38334,
  59528: 38346,
  59529: 28662,
  59530: 38339,
  59531: 38349,
  59532: 38348,
  59533: 38357,
  59534: 38356,
  59535: 38358,
  59536: 38364,
  59537: 38369,
  59538: 38373,
  59539: 38370,
  59540: 38433,
  59541: 38440,
  59542: 38446,
  59543: 38447,
  59544: 38466,
  59545: 38476,
  59546: 38479,
  59547: 38475,
  59548: 38519,
  59549: 38492,
  59550: 38494,
  59551: 38493,
  59552: 38495,
  59553: 38502,
  59554: 38514,
  59555: 38508,
  59556: 38541,
  59557: 38552,
  59558: 38549,
  59559: 38551,
  59560: 38570,
  59561: 38567,
  59562: 38577,
  59563: 38578,
  59564: 38576,
  59565: 38580,
  59566: 38582,
  59567: 38584,
  59568: 38585,
  59569: 38606,
  59570: 38603,
  59571: 38601,
  59572: 38605,
  59573: 35149,
  59574: 38620,
  59575: 38669,
  59576: 38613,
  59577: 38649,
  59578: 38660,
  59579: 38662,
  59580: 38664,
  59581: 38675,
  59582: 38670,
  59583: 38673,
  59584: 38671,
  59585: 38678,
  59586: 38681,
  59587: 38692,
  59588: 38698,
  59589: 38704,
  59590: 38713,
  59591: 38717,
  59592: 38718,
  59593: 38724,
  59594: 38726,
  59595: 38728,
  59596: 38722,
  59597: 38729,
  59598: 38748,
  59599: 38752,
  59600: 38756,
  59601: 38758,
  59602: 38760,
  59603: 21202,
  59604: 38763,
  59605: 38769,
  59606: 38777,
  59607: 38789,
  59608: 38780,
  59609: 38785,
  59610: 38778,
  59611: 38790,
  59612: 38795,
  59613: 38799,
  59614: 38800,
  59615: 38812,
  59616: 38824,
  59617: 38822,
  59618: 38819,
  59619: 38835,
  59620: 38836,
  59621: 38851,
  59622: 38854,
  59623: 38856,
  59624: 38859,
  59625: 38876,
  59626: 38893,
  59627: 40783,
  59628: 38898,
  59629: 31455,
  59630: 38902,
  59631: 38901,
  59632: 38927,
  59633: 38924,
  59634: 38968,
  59635: 38948,
  59636: 38945,
  59637: 38967,
  59638: 38973,
  59639: 38982,
  59640: 38991,
  59641: 38987,
  59642: 39019,
  59643: 39023,
  59644: 39024,
  59712: 39025,
  59713: 39028,
  59714: 39027,
  59715: 39082,
  59716: 39087,
  59717: 39089,
  59718: 39094,
  59719: 39108,
  59720: 39107,
  59721: 39110,
  59722: 39145,
  59723: 39147,
  59724: 39171,
  59725: 39177,
  59726: 39186,
  59727: 39188,
  59728: 39192,
  59729: 39201,
  59730: 39197,
  59731: 39198,
  59732: 39204,
  59733: 39200,
  59734: 39212,
  59735: 39214,
  59736: 39229,
  59737: 39230,
  59738: 39234,
  59739: 39241,
  59740: 39237,
  59741: 39248,
  59742: 39243,
  59743: 39249,
  59744: 39250,
  59745: 39244,
  59746: 39253,
  59747: 39319,
  59748: 39320,
  59749: 39333,
  59750: 39341,
  59751: 39342,
  59752: 39356,
  59753: 39391,
  59754: 39387,
  59755: 39389,
  59756: 39384,
  59757: 39377,
  59758: 39405,
  59759: 39406,
  59760: 39409,
  59761: 39410,
  59762: 39419,
  59763: 39416,
  59764: 39425,
  59765: 39439,
  59766: 39429,
  59767: 39394,
  59768: 39449,
  59769: 39467,
  59770: 39479,
  59771: 39493,
  59772: 39490,
  59773: 39488,
  59774: 39491,
  59776: 39486,
  59777: 39509,
  59778: 39501,
  59779: 39515,
  59780: 39511,
  59781: 39519,
  59782: 39522,
  59783: 39525,
  59784: 39524,
  59785: 39529,
  59786: 39531,
  59787: 39530,
  59788: 39597,
  59789: 39600,
  59790: 39612,
  59791: 39616,
  59792: 39631,
  59793: 39633,
  59794: 39635,
  59795: 39636,
  59796: 39646,
  59797: 39647,
  59798: 39650,
  59799: 39651,
  59800: 39654,
  59801: 39663,
  59802: 39659,
  59803: 39662,
  59804: 39668,
  59805: 39665,
  59806: 39671,
  59807: 39675,
  59808: 39686,
  59809: 39704,
  59810: 39706,
  59811: 39711,
  59812: 39714,
  59813: 39715,
  59814: 39717,
  59815: 39719,
  59816: 39720,
  59817: 39721,
  59818: 39722,
  59819: 39726,
  59820: 39727,
  59821: 39730,
  59822: 39748,
  59823: 39747,
  59824: 39759,
  59825: 39757,
  59826: 39758,
  59827: 39761,
  59828: 39768,
  59829: 39796,
  59830: 39827,
  59831: 39811,
  59832: 39825,
  59833: 39830,
  59834: 39831,
  59835: 39839,
  59836: 39840,
  59837: 39848,
  59838: 39860,
  59839: 39872,
  59840: 39882,
  59841: 39865,
  59842: 39878,
  59843: 39887,
  59844: 39889,
  59845: 39890,
  59846: 39907,
  59847: 39906,
  59848: 39908,
  59849: 39892,
  59850: 39905,
  59851: 39994,
  59852: 39922,
  59853: 39921,
  59854: 39920,
  59855: 39957,
  59856: 39956,
  59857: 39945,
  59858: 39955,
  59859: 39948,
  59860: 39942,
  59861: 39944,
  59862: 39954,
  59863: 39946,
  59864: 39940,
  59865: 39982,
  59866: 39963,
  59867: 39973,
  59868: 39972,
  59869: 39969,
  59870: 39984,
  59871: 40007,
  59872: 39986,
  59873: 40006,
  59874: 39998,
  59875: 40026,
  59876: 40032,
  59877: 40039,
  59878: 40054,
  59879: 40056,
  59880: 40167,
  59881: 40172,
  59882: 40176,
  59883: 40201,
  59884: 40200,
  59885: 40171,
  59886: 40195,
  59887: 40198,
  59888: 40234,
  59889: 40230,
  59890: 40367,
  59891: 40227,
  59892: 40223,
  59893: 40260,
  59894: 40213,
  59895: 40210,
  59896: 40257,
  59897: 40255,
  59898: 40254,
  59899: 40262,
  59900: 40264,
  59968: 40285,
  59969: 40286,
  59970: 40292,
  59971: 40273,
  59972: 40272,
  59973: 40281,
  59974: 40306,
  59975: 40329,
  59976: 40327,
  59977: 40363,
  59978: 40303,
  59979: 40314,
  59980: 40346,
  59981: 40356,
  59982: 40361,
  59983: 40370,
  59984: 40388,
  59985: 40385,
  59986: 40379,
  59987: 40376,
  59988: 40378,
  59989: 40390,
  59990: 40399,
  59991: 40386,
  59992: 40409,
  59993: 40403,
  59994: 40440,
  59995: 40422,
  59996: 40429,
  59997: 40431,
  59998: 40445,
  59999: 40474,
  6e4: 40475,
  60001: 40478,
  60002: 40565,
  60003: 40569,
  60004: 40573,
  60005: 40577,
  60006: 40584,
  60007: 40587,
  60008: 40588,
  60009: 40594,
  60010: 40597,
  60011: 40593,
  60012: 40605,
  60013: 40613,
  60014: 40617,
  60015: 40632,
  60016: 40618,
  60017: 40621,
  60018: 38753,
  60019: 40652,
  60020: 40654,
  60021: 40655,
  60022: 40656,
  60023: 40660,
  60024: 40668,
  60025: 40670,
  60026: 40669,
  60027: 40672,
  60028: 40677,
  60029: 40680,
  60030: 40687,
  60032: 40692,
  60033: 40694,
  60034: 40695,
  60035: 40697,
  60036: 40699,
  60037: 40700,
  60038: 40701,
  60039: 40711,
  60040: 40712,
  60041: 30391,
  60042: 40725,
  60043: 40737,
  60044: 40748,
  60045: 40766,
  60046: 40778,
  60047: 40786,
  60048: 40788,
  60049: 40803,
  60050: 40799,
  60051: 40800,
  60052: 40801,
  60053: 40806,
  60054: 40807,
  60055: 40812,
  60056: 40810,
  60057: 40823,
  60058: 40818,
  60059: 40822,
  60060: 40853,
  60061: 40860,
  60062: 40864,
  60063: 22575,
  60064: 27079,
  60065: 36953,
  60066: 29796,
  60067: 20956,
  60068: 29081,
  60736: 32394,
  60737: 35100,
  60738: 37704,
  60739: 37512,
  60740: 34012,
  60741: 20425,
  60742: 28859,
  60743: 26161,
  60744: 26824,
  60745: 37625,
  60746: 26363,
  60747: 24389,
  60748: 20008,
  60749: 20193,
  60750: 20220,
  60751: 20224,
  60752: 20227,
  60753: 20281,
  60754: 20310,
  60755: 20370,
  60756: 20362,
  60757: 20378,
  60758: 20372,
  60759: 20429,
  60760: 20544,
  60761: 20514,
  60762: 20479,
  60763: 20510,
  60764: 20550,
  60765: 20592,
  60766: 20546,
  60767: 20628,
  60768: 20724,
  60769: 20696,
  60770: 20810,
  60771: 20836,
  60772: 20893,
  60773: 20926,
  60774: 20972,
  60775: 21013,
  60776: 21148,
  60777: 21158,
  60778: 21184,
  60779: 21211,
  60780: 21248,
  60781: 21255,
  60782: 21284,
  60783: 21362,
  60784: 21395,
  60785: 21426,
  60786: 21469,
  60787: 64014,
  60788: 21660,
  60789: 21642,
  60790: 21673,
  60791: 21759,
  60792: 21894,
  60793: 22361,
  60794: 22373,
  60795: 22444,
  60796: 22472,
  60797: 22471,
  60798: 64015,
  60800: 64016,
  60801: 22686,
  60802: 22706,
  60803: 22795,
  60804: 22867,
  60805: 22875,
  60806: 22877,
  60807: 22883,
  60808: 22948,
  60809: 22970,
  60810: 23382,
  60811: 23488,
  60812: 29999,
  60813: 23512,
  60814: 23532,
  60815: 23582,
  60816: 23718,
  60817: 23738,
  60818: 23797,
  60819: 23847,
  60820: 23891,
  60821: 64017,
  60822: 23874,
  60823: 23917,
  60824: 23992,
  60825: 23993,
  60826: 24016,
  60827: 24353,
  60828: 24372,
  60829: 24423,
  60830: 24503,
  60831: 24542,
  60832: 24669,
  60833: 24709,
  60834: 24714,
  60835: 24798,
  60836: 24789,
  60837: 24864,
  60838: 24818,
  60839: 24849,
  60840: 24887,
  60841: 24880,
  60842: 24984,
  60843: 25107,
  60844: 25254,
  60845: 25589,
  60846: 25696,
  60847: 25757,
  60848: 25806,
  60849: 25934,
  60850: 26112,
  60851: 26133,
  60852: 26171,
  60853: 26121,
  60854: 26158,
  60855: 26142,
  60856: 26148,
  60857: 26213,
  60858: 26199,
  60859: 26201,
  60860: 64018,
  60861: 26227,
  60862: 26265,
  60863: 26272,
  60864: 26290,
  60865: 26303,
  60866: 26362,
  60867: 26382,
  60868: 63785,
  60869: 26470,
  60870: 26555,
  60871: 26706,
  60872: 26560,
  60873: 26625,
  60874: 26692,
  60875: 26831,
  60876: 64019,
  60877: 26984,
  60878: 64020,
  60879: 27032,
  60880: 27106,
  60881: 27184,
  60882: 27243,
  60883: 27206,
  60884: 27251,
  60885: 27262,
  60886: 27362,
  60887: 27364,
  60888: 27606,
  60889: 27711,
  60890: 27740,
  60891: 27782,
  60892: 27759,
  60893: 27866,
  60894: 27908,
  60895: 28039,
  60896: 28015,
  60897: 28054,
  60898: 28076,
  60899: 28111,
  60900: 28152,
  60901: 28146,
  60902: 28156,
  60903: 28217,
  60904: 28252,
  60905: 28199,
  60906: 28220,
  60907: 28351,
  60908: 28552,
  60909: 28597,
  60910: 28661,
  60911: 28677,
  60912: 28679,
  60913: 28712,
  60914: 28805,
  60915: 28843,
  60916: 28943,
  60917: 28932,
  60918: 29020,
  60919: 28998,
  60920: 28999,
  60921: 64021,
  60922: 29121,
  60923: 29182,
  60924: 29361,
  60992: 29374,
  60993: 29476,
  60994: 64022,
  60995: 29559,
  60996: 29629,
  60997: 29641,
  60998: 29654,
  60999: 29667,
  61e3: 29650,
  61001: 29703,
  61002: 29685,
  61003: 29734,
  61004: 29738,
  61005: 29737,
  61006: 29742,
  61007: 29794,
  61008: 29833,
  61009: 29855,
  61010: 29953,
  61011: 30063,
  61012: 30338,
  61013: 30364,
  61014: 30366,
  61015: 30363,
  61016: 30374,
  61017: 64023,
  61018: 30534,
  61019: 21167,
  61020: 30753,
  61021: 30798,
  61022: 30820,
  61023: 30842,
  61024: 31024,
  61025: 64024,
  61026: 64025,
  61027: 64026,
  61028: 31124,
  61029: 64027,
  61030: 31131,
  61031: 31441,
  61032: 31463,
  61033: 64028,
  61034: 31467,
  61035: 31646,
  61036: 64029,
  61037: 32072,
  61038: 32092,
  61039: 32183,
  61040: 32160,
  61041: 32214,
  61042: 32338,
  61043: 32583,
  61044: 32673,
  61045: 64030,
  61046: 33537,
  61047: 33634,
  61048: 33663,
  61049: 33735,
  61050: 33782,
  61051: 33864,
  61052: 33972,
  61053: 34131,
  61054: 34137,
  61056: 34155,
  61057: 64031,
  61058: 34224,
  61059: 64032,
  61060: 64033,
  61061: 34823,
  61062: 35061,
  61063: 35346,
  61064: 35383,
  61065: 35449,
  61066: 35495,
  61067: 35518,
  61068: 35551,
  61069: 64034,
  61070: 35574,
  61071: 35667,
  61072: 35711,
  61073: 36080,
  61074: 36084,
  61075: 36114,
  61076: 36214,
  61077: 64035,
  61078: 36559,
  61079: 64036,
  61080: 64037,
  61081: 36967,
  61082: 37086,
  61083: 64038,
  61084: 37141,
  61085: 37159,
  61086: 37338,
  61087: 37335,
  61088: 37342,
  61089: 37357,
  61090: 37358,
  61091: 37348,
  61092: 37349,
  61093: 37382,
  61094: 37392,
  61095: 37386,
  61096: 37434,
  61097: 37440,
  61098: 37436,
  61099: 37454,
  61100: 37465,
  61101: 37457,
  61102: 37433,
  61103: 37479,
  61104: 37543,
  61105: 37495,
  61106: 37496,
  61107: 37607,
  61108: 37591,
  61109: 37593,
  61110: 37584,
  61111: 64039,
  61112: 37589,
  61113: 37600,
  61114: 37587,
  61115: 37669,
  61116: 37665,
  61117: 37627,
  61118: 64040,
  61119: 37662,
  61120: 37631,
  61121: 37661,
  61122: 37634,
  61123: 37744,
  61124: 37719,
  61125: 37796,
  61126: 37830,
  61127: 37854,
  61128: 37880,
  61129: 37937,
  61130: 37957,
  61131: 37960,
  61132: 38290,
  61133: 63964,
  61134: 64041,
  61135: 38557,
  61136: 38575,
  61137: 38707,
  61138: 38715,
  61139: 38723,
  61140: 38733,
  61141: 38735,
  61142: 38737,
  61143: 38741,
  61144: 38999,
  61145: 39013,
  61146: 64042,
  61147: 64043,
  61148: 39207,
  61149: 64044,
  61150: 39326,
  61151: 39502,
  61152: 39641,
  61153: 39644,
  61154: 39797,
  61155: 39794,
  61156: 39823,
  61157: 39857,
  61158: 39867,
  61159: 39936,
  61160: 40304,
  61161: 40299,
  61162: 64045,
  61163: 40473,
  61164: 40657,
  61167: 8560,
  61168: 8561,
  61169: 8562,
  61170: 8563,
  61171: 8564,
  61172: 8565,
  61173: 8566,
  61174: 8567,
  61175: 8568,
  61176: 8569,
  61177: 65506,
  61178: 65508,
  61179: 65287,
  61180: 65282,
  61504: 57344,
  61505: 57345,
  61506: 57346,
  61507: 57347,
  61508: 57348,
  61509: 57349,
  61510: 57350,
  61511: 57351,
  61512: 57352,
  61513: 57353,
  61514: 57354,
  61515: 57355,
  61516: 57356,
  61517: 57357,
  61518: 57358,
  61519: 57359,
  61520: 57360,
  61521: 57361,
  61522: 57362,
  61523: 57363,
  61524: 57364,
  61525: 57365,
  61526: 57366,
  61527: 57367,
  61528: 57368,
  61529: 57369,
  61530: 57370,
  61531: 57371,
  61532: 57372,
  61533: 57373,
  61534: 57374,
  61535: 57375,
  61536: 57376,
  61537: 57377,
  61538: 57378,
  61539: 57379,
  61540: 57380,
  61541: 57381,
  61542: 57382,
  61543: 57383,
  61544: 57384,
  61545: 57385,
  61546: 57386,
  61547: 57387,
  61548: 57388,
  61549: 57389,
  61550: 57390,
  61551: 57391,
  61552: 57392,
  61553: 57393,
  61554: 57394,
  61555: 57395,
  61556: 57396,
  61557: 57397,
  61558: 57398,
  61559: 57399,
  61560: 57400,
  61561: 57401,
  61562: 57402,
  61563: 57403,
  61564: 57404,
  61565: 57405,
  61566: 57406,
  61568: 57407,
  61569: 57408,
  61570: 57409,
  61571: 57410,
  61572: 57411,
  61573: 57412,
  61574: 57413,
  61575: 57414,
  61576: 57415,
  61577: 57416,
  61578: 57417,
  61579: 57418,
  61580: 57419,
  61581: 57420,
  61582: 57421,
  61583: 57422,
  61584: 57423,
  61585: 57424,
  61586: 57425,
  61587: 57426,
  61588: 57427,
  61589: 57428,
  61590: 57429,
  61591: 57430,
  61592: 57431,
  61593: 57432,
  61594: 57433,
  61595: 57434,
  61596: 57435,
  61597: 57436,
  61598: 57437,
  61599: 57438,
  61600: 57439,
  61601: 57440,
  61602: 57441,
  61603: 57442,
  61604: 57443,
  61605: 57444,
  61606: 57445,
  61607: 57446,
  61608: 57447,
  61609: 57448,
  61610: 57449,
  61611: 57450,
  61612: 57451,
  61613: 57452,
  61614: 57453,
  61615: 57454,
  61616: 57455,
  61617: 57456,
  61618: 57457,
  61619: 57458,
  61620: 57459,
  61621: 57460,
  61622: 57461,
  61623: 57462,
  61624: 57463,
  61625: 57464,
  61626: 57465,
  61627: 57466,
  61628: 57467,
  61629: 57468,
  61630: 57469,
  61631: 57470,
  61632: 57471,
  61633: 57472,
  61634: 57473,
  61635: 57474,
  61636: 57475,
  61637: 57476,
  61638: 57477,
  61639: 57478,
  61640: 57479,
  61641: 57480,
  61642: 57481,
  61643: 57482,
  61644: 57483,
  61645: 57484,
  61646: 57485,
  61647: 57486,
  61648: 57487,
  61649: 57488,
  61650: 57489,
  61651: 57490,
  61652: 57491,
  61653: 57492,
  61654: 57493,
  61655: 57494,
  61656: 57495,
  61657: 57496,
  61658: 57497,
  61659: 57498,
  61660: 57499,
  61661: 57500,
  61662: 57501,
  61663: 57502,
  61664: 57503,
  61665: 57504,
  61666: 57505,
  61667: 57506,
  61668: 57507,
  61669: 57508,
  61670: 57509,
  61671: 57510,
  61672: 57511,
  61673: 57512,
  61674: 57513,
  61675: 57514,
  61676: 57515,
  61677: 57516,
  61678: 57517,
  61679: 57518,
  61680: 57519,
  61681: 57520,
  61682: 57521,
  61683: 57522,
  61684: 57523,
  61685: 57524,
  61686: 57525,
  61687: 57526,
  61688: 57527,
  61689: 57528,
  61690: 57529,
  61691: 57530,
  61692: 57531,
  61760: 57532,
  61761: 57533,
  61762: 57534,
  61763: 57535,
  61764: 57536,
  61765: 57537,
  61766: 57538,
  61767: 57539,
  61768: 57540,
  61769: 57541,
  61770: 57542,
  61771: 57543,
  61772: 57544,
  61773: 57545,
  61774: 57546,
  61775: 57547,
  61776: 57548,
  61777: 57549,
  61778: 57550,
  61779: 57551,
  61780: 57552,
  61781: 57553,
  61782: 57554,
  61783: 57555,
  61784: 57556,
  61785: 57557,
  61786: 57558,
  61787: 57559,
  61788: 57560,
  61789: 57561,
  61790: 57562,
  61791: 57563,
  61792: 57564,
  61793: 57565,
  61794: 57566,
  61795: 57567,
  61796: 57568,
  61797: 57569,
  61798: 57570,
  61799: 57571,
  61800: 57572,
  61801: 57573,
  61802: 57574,
  61803: 57575,
  61804: 57576,
  61805: 57577,
  61806: 57578,
  61807: 57579,
  61808: 57580,
  61809: 57581,
  61810: 57582,
  61811: 57583,
  61812: 57584,
  61813: 57585,
  61814: 57586,
  61815: 57587,
  61816: 57588,
  61817: 57589,
  61818: 57590,
  61819: 57591,
  61820: 57592,
  61821: 57593,
  61822: 57594,
  61824: 57595,
  61825: 57596,
  61826: 57597,
  61827: 57598,
  61828: 57599,
  61829: 57600,
  61830: 57601,
  61831: 57602,
  61832: 57603,
  61833: 57604,
  61834: 57605,
  61835: 57606,
  61836: 57607,
  61837: 57608,
  61838: 57609,
  61839: 57610,
  61840: 57611,
  61841: 57612,
  61842: 57613,
  61843: 57614,
  61844: 57615,
  61845: 57616,
  61846: 57617,
  61847: 57618,
  61848: 57619,
  61849: 57620,
  61850: 57621,
  61851: 57622,
  61852: 57623,
  61853: 57624,
  61854: 57625,
  61855: 57626,
  61856: 57627,
  61857: 57628,
  61858: 57629,
  61859: 57630,
  61860: 57631,
  61861: 57632,
  61862: 57633,
  61863: 57634,
  61864: 57635,
  61865: 57636,
  61866: 57637,
  61867: 57638,
  61868: 57639,
  61869: 57640,
  61870: 57641,
  61871: 57642,
  61872: 57643,
  61873: 57644,
  61874: 57645,
  61875: 57646,
  61876: 57647,
  61877: 57648,
  61878: 57649,
  61879: 57650,
  61880: 57651,
  61881: 57652,
  61882: 57653,
  61883: 57654,
  61884: 57655,
  61885: 57656,
  61886: 57657,
  61887: 57658,
  61888: 57659,
  61889: 57660,
  61890: 57661,
  61891: 57662,
  61892: 57663,
  61893: 57664,
  61894: 57665,
  61895: 57666,
  61896: 57667,
  61897: 57668,
  61898: 57669,
  61899: 57670,
  61900: 57671,
  61901: 57672,
  61902: 57673,
  61903: 57674,
  61904: 57675,
  61905: 57676,
  61906: 57677,
  61907: 57678,
  61908: 57679,
  61909: 57680,
  61910: 57681,
  61911: 57682,
  61912: 57683,
  61913: 57684,
  61914: 57685,
  61915: 57686,
  61916: 57687,
  61917: 57688,
  61918: 57689,
  61919: 57690,
  61920: 57691,
  61921: 57692,
  61922: 57693,
  61923: 57694,
  61924: 57695,
  61925: 57696,
  61926: 57697,
  61927: 57698,
  61928: 57699,
  61929: 57700,
  61930: 57701,
  61931: 57702,
  61932: 57703,
  61933: 57704,
  61934: 57705,
  61935: 57706,
  61936: 57707,
  61937: 57708,
  61938: 57709,
  61939: 57710,
  61940: 57711,
  61941: 57712,
  61942: 57713,
  61943: 57714,
  61944: 57715,
  61945: 57716,
  61946: 57717,
  61947: 57718,
  61948: 57719,
  62016: 57720,
  62017: 57721,
  62018: 57722,
  62019: 57723,
  62020: 57724,
  62021: 57725,
  62022: 57726,
  62023: 57727,
  62024: 57728,
  62025: 57729,
  62026: 57730,
  62027: 57731,
  62028: 57732,
  62029: 57733,
  62030: 57734,
  62031: 57735,
  62032: 57736,
  62033: 57737,
  62034: 57738,
  62035: 57739,
  62036: 57740,
  62037: 57741,
  62038: 57742,
  62039: 57743,
  62040: 57744,
  62041: 57745,
  62042: 57746,
  62043: 57747,
  62044: 57748,
  62045: 57749,
  62046: 57750,
  62047: 57751,
  62048: 57752,
  62049: 57753,
  62050: 57754,
  62051: 57755,
  62052: 57756,
  62053: 57757,
  62054: 57758,
  62055: 57759,
  62056: 57760,
  62057: 57761,
  62058: 57762,
  62059: 57763,
  62060: 57764,
  62061: 57765,
  62062: 57766,
  62063: 57767,
  62064: 57768,
  62065: 57769,
  62066: 57770,
  62067: 57771,
  62068: 57772,
  62069: 57773,
  62070: 57774,
  62071: 57775,
  62072: 57776,
  62073: 57777,
  62074: 57778,
  62075: 57779,
  62076: 57780,
  62077: 57781,
  62078: 57782,
  62080: 57783,
  62081: 57784,
  62082: 57785,
  62083: 57786,
  62084: 57787,
  62085: 57788,
  62086: 57789,
  62087: 57790,
  62088: 57791,
  62089: 57792,
  62090: 57793,
  62091: 57794,
  62092: 57795,
  62093: 57796,
  62094: 57797,
  62095: 57798,
  62096: 57799,
  62097: 57800,
  62098: 57801,
  62099: 57802,
  62100: 57803,
  62101: 57804,
  62102: 57805,
  62103: 57806,
  62104: 57807,
  62105: 57808,
  62106: 57809,
  62107: 57810,
  62108: 57811,
  62109: 57812,
  62110: 57813,
  62111: 57814,
  62112: 57815,
  62113: 57816,
  62114: 57817,
  62115: 57818,
  62116: 57819,
  62117: 57820,
  62118: 57821,
  62119: 57822,
  62120: 57823,
  62121: 57824,
  62122: 57825,
  62123: 57826,
  62124: 57827,
  62125: 57828,
  62126: 57829,
  62127: 57830,
  62128: 57831,
  62129: 57832,
  62130: 57833,
  62131: 57834,
  62132: 57835,
  62133: 57836,
  62134: 57837,
  62135: 57838,
  62136: 57839,
  62137: 57840,
  62138: 57841,
  62139: 57842,
  62140: 57843,
  62141: 57844,
  62142: 57845,
  62143: 57846,
  62144: 57847,
  62145: 57848,
  62146: 57849,
  62147: 57850,
  62148: 57851,
  62149: 57852,
  62150: 57853,
  62151: 57854,
  62152: 57855,
  62153: 57856,
  62154: 57857,
  62155: 57858,
  62156: 57859,
  62157: 57860,
  62158: 57861,
  62159: 57862,
  62160: 57863,
  62161: 57864,
  62162: 57865,
  62163: 57866,
  62164: 57867,
  62165: 57868,
  62166: 57869,
  62167: 57870,
  62168: 57871,
  62169: 57872,
  62170: 57873,
  62171: 57874,
  62172: 57875,
  62173: 57876,
  62174: 57877,
  62175: 57878,
  62176: 57879,
  62177: 57880,
  62178: 57881,
  62179: 57882,
  62180: 57883,
  62181: 57884,
  62182: 57885,
  62183: 57886,
  62184: 57887,
  62185: 57888,
  62186: 57889,
  62187: 57890,
  62188: 57891,
  62189: 57892,
  62190: 57893,
  62191: 57894,
  62192: 57895,
  62193: 57896,
  62194: 57897,
  62195: 57898,
  62196: 57899,
  62197: 57900,
  62198: 57901,
  62199: 57902,
  62200: 57903,
  62201: 57904,
  62202: 57905,
  62203: 57906,
  62204: 57907,
  62272: 57908,
  62273: 57909,
  62274: 57910,
  62275: 57911,
  62276: 57912,
  62277: 57913,
  62278: 57914,
  62279: 57915,
  62280: 57916,
  62281: 57917,
  62282: 57918,
  62283: 57919,
  62284: 57920,
  62285: 57921,
  62286: 57922,
  62287: 57923,
  62288: 57924,
  62289: 57925,
  62290: 57926,
  62291: 57927,
  62292: 57928,
  62293: 57929,
  62294: 57930,
  62295: 57931,
  62296: 57932,
  62297: 57933,
  62298: 57934,
  62299: 57935,
  62300: 57936,
  62301: 57937,
  62302: 57938,
  62303: 57939,
  62304: 57940,
  62305: 57941,
  62306: 57942,
  62307: 57943,
  62308: 57944,
  62309: 57945,
  62310: 57946,
  62311: 57947,
  62312: 57948,
  62313: 57949,
  62314: 57950,
  62315: 57951,
  62316: 57952,
  62317: 57953,
  62318: 57954,
  62319: 57955,
  62320: 57956,
  62321: 57957,
  62322: 57958,
  62323: 57959,
  62324: 57960,
  62325: 57961,
  62326: 57962,
  62327: 57963,
  62328: 57964,
  62329: 57965,
  62330: 57966,
  62331: 57967,
  62332: 57968,
  62333: 57969,
  62334: 57970,
  62336: 57971,
  62337: 57972,
  62338: 57973,
  62339: 57974,
  62340: 57975,
  62341: 57976,
  62342: 57977,
  62343: 57978,
  62344: 57979,
  62345: 57980,
  62346: 57981,
  62347: 57982,
  62348: 57983,
  62349: 57984,
  62350: 57985,
  62351: 57986,
  62352: 57987,
  62353: 57988,
  62354: 57989,
  62355: 57990,
  62356: 57991,
  62357: 57992,
  62358: 57993,
  62359: 57994,
  62360: 57995,
  62361: 57996,
  62362: 57997,
  62363: 57998,
  62364: 57999,
  62365: 58e3,
  62366: 58001,
  62367: 58002,
  62368: 58003,
  62369: 58004,
  62370: 58005,
  62371: 58006,
  62372: 58007,
  62373: 58008,
  62374: 58009,
  62375: 58010,
  62376: 58011,
  62377: 58012,
  62378: 58013,
  62379: 58014,
  62380: 58015,
  62381: 58016,
  62382: 58017,
  62383: 58018,
  62384: 58019,
  62385: 58020,
  62386: 58021,
  62387: 58022,
  62388: 58023,
  62389: 58024,
  62390: 58025,
  62391: 58026,
  62392: 58027,
  62393: 58028,
  62394: 58029,
  62395: 58030,
  62396: 58031,
  62397: 58032,
  62398: 58033,
  62399: 58034,
  62400: 58035,
  62401: 58036,
  62402: 58037,
  62403: 58038,
  62404: 58039,
  62405: 58040,
  62406: 58041,
  62407: 58042,
  62408: 58043,
  62409: 58044,
  62410: 58045,
  62411: 58046,
  62412: 58047,
  62413: 58048,
  62414: 58049,
  62415: 58050,
  62416: 58051,
  62417: 58052,
  62418: 58053,
  62419: 58054,
  62420: 58055,
  62421: 58056,
  62422: 58057,
  62423: 58058,
  62424: 58059,
  62425: 58060,
  62426: 58061,
  62427: 58062,
  62428: 58063,
  62429: 58064,
  62430: 58065,
  62431: 58066,
  62432: 58067,
  62433: 58068,
  62434: 58069,
  62435: 58070,
  62436: 58071,
  62437: 58072,
  62438: 58073,
  62439: 58074,
  62440: 58075,
  62441: 58076,
  62442: 58077,
  62443: 58078,
  62444: 58079,
  62445: 58080,
  62446: 58081,
  62447: 58082,
  62448: 58083,
  62449: 58084,
  62450: 58085,
  62451: 58086,
  62452: 58087,
  62453: 58088,
  62454: 58089,
  62455: 58090,
  62456: 58091,
  62457: 58092,
  62458: 58093,
  62459: 58094,
  62460: 58095,
  62528: 58096,
  62529: 58097,
  62530: 58098,
  62531: 58099,
  62532: 58100,
  62533: 58101,
  62534: 58102,
  62535: 58103,
  62536: 58104,
  62537: 58105,
  62538: 58106,
  62539: 58107,
  62540: 58108,
  62541: 58109,
  62542: 58110,
  62543: 58111,
  62544: 58112,
  62545: 58113,
  62546: 58114,
  62547: 58115,
  62548: 58116,
  62549: 58117,
  62550: 58118,
  62551: 58119,
  62552: 58120,
  62553: 58121,
  62554: 58122,
  62555: 58123,
  62556: 58124,
  62557: 58125,
  62558: 58126,
  62559: 58127,
  62560: 58128,
  62561: 58129,
  62562: 58130,
  62563: 58131,
  62564: 58132,
  62565: 58133,
  62566: 58134,
  62567: 58135,
  62568: 58136,
  62569: 58137,
  62570: 58138,
  62571: 58139,
  62572: 58140,
  62573: 58141,
  62574: 58142,
  62575: 58143,
  62576: 58144,
  62577: 58145,
  62578: 58146,
  62579: 58147,
  62580: 58148,
  62581: 58149,
  62582: 58150,
  62583: 58151,
  62584: 58152,
  62585: 58153,
  62586: 58154,
  62587: 58155,
  62588: 58156,
  62589: 58157,
  62590: 58158,
  62592: 58159,
  62593: 58160,
  62594: 58161,
  62595: 58162,
  62596: 58163,
  62597: 58164,
  62598: 58165,
  62599: 58166,
  62600: 58167,
  62601: 58168,
  62602: 58169,
  62603: 58170,
  62604: 58171,
  62605: 58172,
  62606: 58173,
  62607: 58174,
  62608: 58175,
  62609: 58176,
  62610: 58177,
  62611: 58178,
  62612: 58179,
  62613: 58180,
  62614: 58181,
  62615: 58182,
  62616: 58183,
  62617: 58184,
  62618: 58185,
  62619: 58186,
  62620: 58187,
  62621: 58188,
  62622: 58189,
  62623: 58190,
  62624: 58191,
  62625: 58192,
  62626: 58193,
  62627: 58194,
  62628: 58195,
  62629: 58196,
  62630: 58197,
  62631: 58198,
  62632: 58199,
  62633: 58200,
  62634: 58201,
  62635: 58202,
  62636: 58203,
  62637: 58204,
  62638: 58205,
  62639: 58206,
  62640: 58207,
  62641: 58208,
  62642: 58209,
  62643: 58210,
  62644: 58211,
  62645: 58212,
  62646: 58213,
  62647: 58214,
  62648: 58215,
  62649: 58216,
  62650: 58217,
  62651: 58218,
  62652: 58219,
  62653: 58220,
  62654: 58221,
  62655: 58222,
  62656: 58223,
  62657: 58224,
  62658: 58225,
  62659: 58226,
  62660: 58227,
  62661: 58228,
  62662: 58229,
  62663: 58230,
  62664: 58231,
  62665: 58232,
  62666: 58233,
  62667: 58234,
  62668: 58235,
  62669: 58236,
  62670: 58237,
  62671: 58238,
  62672: 58239,
  62673: 58240,
  62674: 58241,
  62675: 58242,
  62676: 58243,
  62677: 58244,
  62678: 58245,
  62679: 58246,
  62680: 58247,
  62681: 58248,
  62682: 58249,
  62683: 58250,
  62684: 58251,
  62685: 58252,
  62686: 58253,
  62687: 58254,
  62688: 58255,
  62689: 58256,
  62690: 58257,
  62691: 58258,
  62692: 58259,
  62693: 58260,
  62694: 58261,
  62695: 58262,
  62696: 58263,
  62697: 58264,
  62698: 58265,
  62699: 58266,
  62700: 58267,
  62701: 58268,
  62702: 58269,
  62703: 58270,
  62704: 58271,
  62705: 58272,
  62706: 58273,
  62707: 58274,
  62708: 58275,
  62709: 58276,
  62710: 58277,
  62711: 58278,
  62712: 58279,
  62713: 58280,
  62714: 58281,
  62715: 58282,
  62716: 58283,
  62784: 58284,
  62785: 58285,
  62786: 58286,
  62787: 58287,
  62788: 58288,
  62789: 58289,
  62790: 58290,
  62791: 58291,
  62792: 58292,
  62793: 58293,
  62794: 58294,
  62795: 58295,
  62796: 58296,
  62797: 58297,
  62798: 58298,
  62799: 58299,
  62800: 58300,
  62801: 58301,
  62802: 58302,
  62803: 58303,
  62804: 58304,
  62805: 58305,
  62806: 58306,
  62807: 58307,
  62808: 58308,
  62809: 58309,
  62810: 58310,
  62811: 58311,
  62812: 58312,
  62813: 58313,
  62814: 58314,
  62815: 58315,
  62816: 58316,
  62817: 58317,
  62818: 58318,
  62819: 58319,
  62820: 58320,
  62821: 58321,
  62822: 58322,
  62823: 58323,
  62824: 58324,
  62825: 58325,
  62826: 58326,
  62827: 58327,
  62828: 58328,
  62829: 58329,
  62830: 58330,
  62831: 58331,
  62832: 58332,
  62833: 58333,
  62834: 58334,
  62835: 58335,
  62836: 58336,
  62837: 58337,
  62838: 58338,
  62839: 58339,
  62840: 58340,
  62841: 58341,
  62842: 58342,
  62843: 58343,
  62844: 58344,
  62845: 58345,
  62846: 58346,
  62848: 58347,
  62849: 58348,
  62850: 58349,
  62851: 58350,
  62852: 58351,
  62853: 58352,
  62854: 58353,
  62855: 58354,
  62856: 58355,
  62857: 58356,
  62858: 58357,
  62859: 58358,
  62860: 58359,
  62861: 58360,
  62862: 58361,
  62863: 58362,
  62864: 58363,
  62865: 58364,
  62866: 58365,
  62867: 58366,
  62868: 58367,
  62869: 58368,
  62870: 58369,
  62871: 58370,
  62872: 58371,
  62873: 58372,
  62874: 58373,
  62875: 58374,
  62876: 58375,
  62877: 58376,
  62878: 58377,
  62879: 58378,
  62880: 58379,
  62881: 58380,
  62882: 58381,
  62883: 58382,
  62884: 58383,
  62885: 58384,
  62886: 58385,
  62887: 58386,
  62888: 58387,
  62889: 58388,
  62890: 58389,
  62891: 58390,
  62892: 58391,
  62893: 58392,
  62894: 58393,
  62895: 58394,
  62896: 58395,
  62897: 58396,
  62898: 58397,
  62899: 58398,
  62900: 58399,
  62901: 58400,
  62902: 58401,
  62903: 58402,
  62904: 58403,
  62905: 58404,
  62906: 58405,
  62907: 58406,
  62908: 58407,
  62909: 58408,
  62910: 58409,
  62911: 58410,
  62912: 58411,
  62913: 58412,
  62914: 58413,
  62915: 58414,
  62916: 58415,
  62917: 58416,
  62918: 58417,
  62919: 58418,
  62920: 58419,
  62921: 58420,
  62922: 58421,
  62923: 58422,
  62924: 58423,
  62925: 58424,
  62926: 58425,
  62927: 58426,
  62928: 58427,
  62929: 58428,
  62930: 58429,
  62931: 58430,
  62932: 58431,
  62933: 58432,
  62934: 58433,
  62935: 58434,
  62936: 58435,
  62937: 58436,
  62938: 58437,
  62939: 58438,
  62940: 58439,
  62941: 58440,
  62942: 58441,
  62943: 58442,
  62944: 58443,
  62945: 58444,
  62946: 58445,
  62947: 58446,
  62948: 58447,
  62949: 58448,
  62950: 58449,
  62951: 58450,
  62952: 58451,
  62953: 58452,
  62954: 58453,
  62955: 58454,
  62956: 58455,
  62957: 58456,
  62958: 58457,
  62959: 58458,
  62960: 58459,
  62961: 58460,
  62962: 58461,
  62963: 58462,
  62964: 58463,
  62965: 58464,
  62966: 58465,
  62967: 58466,
  62968: 58467,
  62969: 58468,
  62970: 58469,
  62971: 58470,
  62972: 58471,
  63040: 58472,
  63041: 58473,
  63042: 58474,
  63043: 58475,
  63044: 58476,
  63045: 58477,
  63046: 58478,
  63047: 58479,
  63048: 58480,
  63049: 58481,
  63050: 58482,
  63051: 58483,
  63052: 58484,
  63053: 58485,
  63054: 58486,
  63055: 58487,
  63056: 58488,
  63057: 58489,
  63058: 58490,
  63059: 58491,
  63060: 58492,
  63061: 58493,
  63062: 58494,
  63063: 58495,
  63064: 58496,
  63065: 58497,
  63066: 58498,
  63067: 58499,
  63068: 58500,
  63069: 58501,
  63070: 58502,
  63071: 58503,
  63072: 58504,
  63073: 58505,
  63074: 58506,
  63075: 58507,
  63076: 58508,
  63077: 58509,
  63078: 58510,
  63079: 58511,
  63080: 58512,
  63081: 58513,
  63082: 58514,
  63083: 58515,
  63084: 58516,
  63085: 58517,
  63086: 58518,
  63087: 58519,
  63088: 58520,
  63089: 58521,
  63090: 58522,
  63091: 58523,
  63092: 58524,
  63093: 58525,
  63094: 58526,
  63095: 58527,
  63096: 58528,
  63097: 58529,
  63098: 58530,
  63099: 58531,
  63100: 58532,
  63101: 58533,
  63102: 58534,
  63104: 58535,
  63105: 58536,
  63106: 58537,
  63107: 58538,
  63108: 58539,
  63109: 58540,
  63110: 58541,
  63111: 58542,
  63112: 58543,
  63113: 58544,
  63114: 58545,
  63115: 58546,
  63116: 58547,
  63117: 58548,
  63118: 58549,
  63119: 58550,
  63120: 58551,
  63121: 58552,
  63122: 58553,
  63123: 58554,
  63124: 58555,
  63125: 58556,
  63126: 58557,
  63127: 58558,
  63128: 58559,
  63129: 58560,
  63130: 58561,
  63131: 58562,
  63132: 58563,
  63133: 58564,
  63134: 58565,
  63135: 58566,
  63136: 58567,
  63137: 58568,
  63138: 58569,
  63139: 58570,
  63140: 58571,
  63141: 58572,
  63142: 58573,
  63143: 58574,
  63144: 58575,
  63145: 58576,
  63146: 58577,
  63147: 58578,
  63148: 58579,
  63149: 58580,
  63150: 58581,
  63151: 58582,
  63152: 58583,
  63153: 58584,
  63154: 58585,
  63155: 58586,
  63156: 58587,
  63157: 58588,
  63158: 58589,
  63159: 58590,
  63160: 58591,
  63161: 58592,
  63162: 58593,
  63163: 58594,
  63164: 58595,
  63165: 58596,
  63166: 58597,
  63167: 58598,
  63168: 58599,
  63169: 58600,
  63170: 58601,
  63171: 58602,
  63172: 58603,
  63173: 58604,
  63174: 58605,
  63175: 58606,
  63176: 58607,
  63177: 58608,
  63178: 58609,
  63179: 58610,
  63180: 58611,
  63181: 58612,
  63182: 58613,
  63183: 58614,
  63184: 58615,
  63185: 58616,
  63186: 58617,
  63187: 58618,
  63188: 58619,
  63189: 58620,
  63190: 58621,
  63191: 58622,
  63192: 58623,
  63193: 58624,
  63194: 58625,
  63195: 58626,
  63196: 58627,
  63197: 58628,
  63198: 58629,
  63199: 58630,
  63200: 58631,
  63201: 58632,
  63202: 58633,
  63203: 58634,
  63204: 58635,
  63205: 58636,
  63206: 58637,
  63207: 58638,
  63208: 58639,
  63209: 58640,
  63210: 58641,
  63211: 58642,
  63212: 58643,
  63213: 58644,
  63214: 58645,
  63215: 58646,
  63216: 58647,
  63217: 58648,
  63218: 58649,
  63219: 58650,
  63220: 58651,
  63221: 58652,
  63222: 58653,
  63223: 58654,
  63224: 58655,
  63225: 58656,
  63226: 58657,
  63227: 58658,
  63228: 58659,
  63296: 58660,
  63297: 58661,
  63298: 58662,
  63299: 58663,
  63300: 58664,
  63301: 58665,
  63302: 58666,
  63303: 58667,
  63304: 58668,
  63305: 58669,
  63306: 58670,
  63307: 58671,
  63308: 58672,
  63309: 58673,
  63310: 58674,
  63311: 58675,
  63312: 58676,
  63313: 58677,
  63314: 58678,
  63315: 58679,
  63316: 58680,
  63317: 58681,
  63318: 58682,
  63319: 58683,
  63320: 58684,
  63321: 58685,
  63322: 58686,
  63323: 58687,
  63324: 58688,
  63325: 58689,
  63326: 58690,
  63327: 58691,
  63328: 58692,
  63329: 58693,
  63330: 58694,
  63331: 58695,
  63332: 58696,
  63333: 58697,
  63334: 58698,
  63335: 58699,
  63336: 58700,
  63337: 58701,
  63338: 58702,
  63339: 58703,
  63340: 58704,
  63341: 58705,
  63342: 58706,
  63343: 58707,
  63344: 58708,
  63345: 58709,
  63346: 58710,
  63347: 58711,
  63348: 58712,
  63349: 58713,
  63350: 58714,
  63351: 58715,
  63352: 58716,
  63353: 58717,
  63354: 58718,
  63355: 58719,
  63356: 58720,
  63357: 58721,
  63358: 58722,
  63360: 58723,
  63361: 58724,
  63362: 58725,
  63363: 58726,
  63364: 58727,
  63365: 58728,
  63366: 58729,
  63367: 58730,
  63368: 58731,
  63369: 58732,
  63370: 58733,
  63371: 58734,
  63372: 58735,
  63373: 58736,
  63374: 58737,
  63375: 58738,
  63376: 58739,
  63377: 58740,
  63378: 58741,
  63379: 58742,
  63380: 58743,
  63381: 58744,
  63382: 58745,
  63383: 58746,
  63384: 58747,
  63385: 58748,
  63386: 58749,
  63387: 58750,
  63388: 58751,
  63389: 58752,
  63390: 58753,
  63391: 58754,
  63392: 58755,
  63393: 58756,
  63394: 58757,
  63395: 58758,
  63396: 58759,
  63397: 58760,
  63398: 58761,
  63399: 58762,
  63400: 58763,
  63401: 58764,
  63402: 58765,
  63403: 58766,
  63404: 58767,
  63405: 58768,
  63406: 58769,
  63407: 58770,
  63408: 58771,
  63409: 58772,
  63410: 58773,
  63411: 58774,
  63412: 58775,
  63413: 58776,
  63414: 58777,
  63415: 58778,
  63416: 58779,
  63417: 58780,
  63418: 58781,
  63419: 58782,
  63420: 58783,
  63421: 58784,
  63422: 58785,
  63423: 58786,
  63424: 58787,
  63425: 58788,
  63426: 58789,
  63427: 58790,
  63428: 58791,
  63429: 58792,
  63430: 58793,
  63431: 58794,
  63432: 58795,
  63433: 58796,
  63434: 58797,
  63435: 58798,
  63436: 58799,
  63437: 58800,
  63438: 58801,
  63439: 58802,
  63440: 58803,
  63441: 58804,
  63442: 58805,
  63443: 58806,
  63444: 58807,
  63445: 58808,
  63446: 58809,
  63447: 58810,
  63448: 58811,
  63449: 58812,
  63450: 58813,
  63451: 58814,
  63452: 58815,
  63453: 58816,
  63454: 58817,
  63455: 58818,
  63456: 58819,
  63457: 58820,
  63458: 58821,
  63459: 58822,
  63460: 58823,
  63461: 58824,
  63462: 58825,
  63463: 58826,
  63464: 58827,
  63465: 58828,
  63466: 58829,
  63467: 58830,
  63468: 58831,
  63469: 58832,
  63470: 58833,
  63471: 58834,
  63472: 58835,
  63473: 58836,
  63474: 58837,
  63475: 58838,
  63476: 58839,
  63477: 58840,
  63478: 58841,
  63479: 58842,
  63480: 58843,
  63481: 58844,
  63482: 58845,
  63483: 58846,
  63484: 58847,
  63552: 58848,
  63553: 58849,
  63554: 58850,
  63555: 58851,
  63556: 58852,
  63557: 58853,
  63558: 58854,
  63559: 58855,
  63560: 58856,
  63561: 58857,
  63562: 58858,
  63563: 58859,
  63564: 58860,
  63565: 58861,
  63566: 58862,
  63567: 58863,
  63568: 58864,
  63569: 58865,
  63570: 58866,
  63571: 58867,
  63572: 58868,
  63573: 58869,
  63574: 58870,
  63575: 58871,
  63576: 58872,
  63577: 58873,
  63578: 58874,
  63579: 58875,
  63580: 58876,
  63581: 58877,
  63582: 58878,
  63583: 58879,
  63584: 58880,
  63585: 58881,
  63586: 58882,
  63587: 58883,
  63588: 58884,
  63589: 58885,
  63590: 58886,
  63591: 58887,
  63592: 58888,
  63593: 58889,
  63594: 58890,
  63595: 58891,
  63596: 58892,
  63597: 58893,
  63598: 58894,
  63599: 58895,
  63600: 58896,
  63601: 58897,
  63602: 58898,
  63603: 58899,
  63604: 58900,
  63605: 58901,
  63606: 58902,
  63607: 58903,
  63608: 58904,
  63609: 58905,
  63610: 58906,
  63611: 58907,
  63612: 58908,
  63613: 58909,
  63614: 58910,
  63616: 58911,
  63617: 58912,
  63618: 58913,
  63619: 58914,
  63620: 58915,
  63621: 58916,
  63622: 58917,
  63623: 58918,
  63624: 58919,
  63625: 58920,
  63626: 58921,
  63627: 58922,
  63628: 58923,
  63629: 58924,
  63630: 58925,
  63631: 58926,
  63632: 58927,
  63633: 58928,
  63634: 58929,
  63635: 58930,
  63636: 58931,
  63637: 58932,
  63638: 58933,
  63639: 58934,
  63640: 58935,
  63641: 58936,
  63642: 58937,
  63643: 58938,
  63644: 58939,
  63645: 58940,
  63646: 58941,
  63647: 58942,
  63648: 58943,
  63649: 58944,
  63650: 58945,
  63651: 58946,
  63652: 58947,
  63653: 58948,
  63654: 58949,
  63655: 58950,
  63656: 58951,
  63657: 58952,
  63658: 58953,
  63659: 58954,
  63660: 58955,
  63661: 58956,
  63662: 58957,
  63663: 58958,
  63664: 58959,
  63665: 58960,
  63666: 58961,
  63667: 58962,
  63668: 58963,
  63669: 58964,
  63670: 58965,
  63671: 58966,
  63672: 58967,
  63673: 58968,
  63674: 58969,
  63675: 58970,
  63676: 58971,
  63677: 58972,
  63678: 58973,
  63679: 58974,
  63680: 58975,
  63681: 58976,
  63682: 58977,
  63683: 58978,
  63684: 58979,
  63685: 58980,
  63686: 58981,
  63687: 58982,
  63688: 58983,
  63689: 58984,
  63690: 58985,
  63691: 58986,
  63692: 58987,
  63693: 58988,
  63694: 58989,
  63695: 58990,
  63696: 58991,
  63697: 58992,
  63698: 58993,
  63699: 58994,
  63700: 58995,
  63701: 58996,
  63702: 58997,
  63703: 58998,
  63704: 58999,
  63705: 59e3,
  63706: 59001,
  63707: 59002,
  63708: 59003,
  63709: 59004,
  63710: 59005,
  63711: 59006,
  63712: 59007,
  63713: 59008,
  63714: 59009,
  63715: 59010,
  63716: 59011,
  63717: 59012,
  63718: 59013,
  63719: 59014,
  63720: 59015,
  63721: 59016,
  63722: 59017,
  63723: 59018,
  63724: 59019,
  63725: 59020,
  63726: 59021,
  63727: 59022,
  63728: 59023,
  63729: 59024,
  63730: 59025,
  63731: 59026,
  63732: 59027,
  63733: 59028,
  63734: 59029,
  63735: 59030,
  63736: 59031,
  63737: 59032,
  63738: 59033,
  63739: 59034,
  63740: 59035,
  64064: 8560,
  64065: 8561,
  64066: 8562,
  64067: 8563,
  64068: 8564,
  64069: 8565,
  64070: 8566,
  64071: 8567,
  64072: 8568,
  64073: 8569,
  64074: 8544,
  64075: 8545,
  64076: 8546,
  64077: 8547,
  64078: 8548,
  64079: 8549,
  64080: 8550,
  64081: 8551,
  64082: 8552,
  64083: 8553,
  64084: 65506,
  64085: 65508,
  64086: 65287,
  64087: 65282,
  64088: 12849,
  64089: 8470,
  64090: 8481,
  64091: 8757,
  64092: 32394,
  64093: 35100,
  64094: 37704,
  64095: 37512,
  64096: 34012,
  64097: 20425,
  64098: 28859,
  64099: 26161,
  64100: 26824,
  64101: 37625,
  64102: 26363,
  64103: 24389,
  64104: 20008,
  64105: 20193,
  64106: 20220,
  64107: 20224,
  64108: 20227,
  64109: 20281,
  64110: 20310,
  64111: 20370,
  64112: 20362,
  64113: 20378,
  64114: 20372,
  64115: 20429,
  64116: 20544,
  64117: 20514,
  64118: 20479,
  64119: 20510,
  64120: 20550,
  64121: 20592,
  64122: 20546,
  64123: 20628,
  64124: 20724,
  64125: 20696,
  64126: 20810,
  64128: 20836,
  64129: 20893,
  64130: 20926,
  64131: 20972,
  64132: 21013,
  64133: 21148,
  64134: 21158,
  64135: 21184,
  64136: 21211,
  64137: 21248,
  64138: 21255,
  64139: 21284,
  64140: 21362,
  64141: 21395,
  64142: 21426,
  64143: 21469,
  64144: 64014,
  64145: 21660,
  64146: 21642,
  64147: 21673,
  64148: 21759,
  64149: 21894,
  64150: 22361,
  64151: 22373,
  64152: 22444,
  64153: 22472,
  64154: 22471,
  64155: 64015,
  64156: 64016,
  64157: 22686,
  64158: 22706,
  64159: 22795,
  64160: 22867,
  64161: 22875,
  64162: 22877,
  64163: 22883,
  64164: 22948,
  64165: 22970,
  64166: 23382,
  64167: 23488,
  64168: 29999,
  64169: 23512,
  64170: 23532,
  64171: 23582,
  64172: 23718,
  64173: 23738,
  64174: 23797,
  64175: 23847,
  64176: 23891,
  64177: 64017,
  64178: 23874,
  64179: 23917,
  64180: 23992,
  64181: 23993,
  64182: 24016,
  64183: 24353,
  64184: 24372,
  64185: 24423,
  64186: 24503,
  64187: 24542,
  64188: 24669,
  64189: 24709,
  64190: 24714,
  64191: 24798,
  64192: 24789,
  64193: 24864,
  64194: 24818,
  64195: 24849,
  64196: 24887,
  64197: 24880,
  64198: 24984,
  64199: 25107,
  64200: 25254,
  64201: 25589,
  64202: 25696,
  64203: 25757,
  64204: 25806,
  64205: 25934,
  64206: 26112,
  64207: 26133,
  64208: 26171,
  64209: 26121,
  64210: 26158,
  64211: 26142,
  64212: 26148,
  64213: 26213,
  64214: 26199,
  64215: 26201,
  64216: 64018,
  64217: 26227,
  64218: 26265,
  64219: 26272,
  64220: 26290,
  64221: 26303,
  64222: 26362,
  64223: 26382,
  64224: 63785,
  64225: 26470,
  64226: 26555,
  64227: 26706,
  64228: 26560,
  64229: 26625,
  64230: 26692,
  64231: 26831,
  64232: 64019,
  64233: 26984,
  64234: 64020,
  64235: 27032,
  64236: 27106,
  64237: 27184,
  64238: 27243,
  64239: 27206,
  64240: 27251,
  64241: 27262,
  64242: 27362,
  64243: 27364,
  64244: 27606,
  64245: 27711,
  64246: 27740,
  64247: 27782,
  64248: 27759,
  64249: 27866,
  64250: 27908,
  64251: 28039,
  64252: 28015,
  64320: 28054,
  64321: 28076,
  64322: 28111,
  64323: 28152,
  64324: 28146,
  64325: 28156,
  64326: 28217,
  64327: 28252,
  64328: 28199,
  64329: 28220,
  64330: 28351,
  64331: 28552,
  64332: 28597,
  64333: 28661,
  64334: 28677,
  64335: 28679,
  64336: 28712,
  64337: 28805,
  64338: 28843,
  64339: 28943,
  64340: 28932,
  64341: 29020,
  64342: 28998,
  64343: 28999,
  64344: 64021,
  64345: 29121,
  64346: 29182,
  64347: 29361,
  64348: 29374,
  64349: 29476,
  64350: 64022,
  64351: 29559,
  64352: 29629,
  64353: 29641,
  64354: 29654,
  64355: 29667,
  64356: 29650,
  64357: 29703,
  64358: 29685,
  64359: 29734,
  64360: 29738,
  64361: 29737,
  64362: 29742,
  64363: 29794,
  64364: 29833,
  64365: 29855,
  64366: 29953,
  64367: 30063,
  64368: 30338,
  64369: 30364,
  64370: 30366,
  64371: 30363,
  64372: 30374,
  64373: 64023,
  64374: 30534,
  64375: 21167,
  64376: 30753,
  64377: 30798,
  64378: 30820,
  64379: 30842,
  64380: 31024,
  64381: 64024,
  64382: 64025,
  64384: 64026,
  64385: 31124,
  64386: 64027,
  64387: 31131,
  64388: 31441,
  64389: 31463,
  64390: 64028,
  64391: 31467,
  64392: 31646,
  64393: 64029,
  64394: 32072,
  64395: 32092,
  64396: 32183,
  64397: 32160,
  64398: 32214,
  64399: 32338,
  64400: 32583,
  64401: 32673,
  64402: 64030,
  64403: 33537,
  64404: 33634,
  64405: 33663,
  64406: 33735,
  64407: 33782,
  64408: 33864,
  64409: 33972,
  64410: 34131,
  64411: 34137,
  64412: 34155,
  64413: 64031,
  64414: 34224,
  64415: 64032,
  64416: 64033,
  64417: 34823,
  64418: 35061,
  64419: 35346,
  64420: 35383,
  64421: 35449,
  64422: 35495,
  64423: 35518,
  64424: 35551,
  64425: 64034,
  64426: 35574,
  64427: 35667,
  64428: 35711,
  64429: 36080,
  64430: 36084,
  64431: 36114,
  64432: 36214,
  64433: 64035,
  64434: 36559,
  64435: 64036,
  64436: 64037,
  64437: 36967,
  64438: 37086,
  64439: 64038,
  64440: 37141,
  64441: 37159,
  64442: 37338,
  64443: 37335,
  64444: 37342,
  64445: 37357,
  64446: 37358,
  64447: 37348,
  64448: 37349,
  64449: 37382,
  64450: 37392,
  64451: 37386,
  64452: 37434,
  64453: 37440,
  64454: 37436,
  64455: 37454,
  64456: 37465,
  64457: 37457,
  64458: 37433,
  64459: 37479,
  64460: 37543,
  64461: 37495,
  64462: 37496,
  64463: 37607,
  64464: 37591,
  64465: 37593,
  64466: 37584,
  64467: 64039,
  64468: 37589,
  64469: 37600,
  64470: 37587,
  64471: 37669,
  64472: 37665,
  64473: 37627,
  64474: 64040,
  64475: 37662,
  64476: 37631,
  64477: 37661,
  64478: 37634,
  64479: 37744,
  64480: 37719,
  64481: 37796,
  64482: 37830,
  64483: 37854,
  64484: 37880,
  64485: 37937,
  64486: 37957,
  64487: 37960,
  64488: 38290,
  64489: 63964,
  64490: 64041,
  64491: 38557,
  64492: 38575,
  64493: 38707,
  64494: 38715,
  64495: 38723,
  64496: 38733,
  64497: 38735,
  64498: 38737,
  64499: 38741,
  64500: 38999,
  64501: 39013,
  64502: 64042,
  64503: 64043,
  64504: 39207,
  64505: 64044,
  64506: 39326,
  64507: 39502,
  64508: 39641,
  64576: 39644,
  64577: 39797,
  64578: 39794,
  64579: 39823,
  64580: 39857,
  64581: 39867,
  64582: 39936,
  64583: 40304,
  64584: 40299,
  64585: 64045,
  64586: 40473,
  64587: 40657
};
function o3(t, e) {
  this.dv = new DataView(t), this.offset = 0, this.littleEndian = e !== void 0 ? e : true, this.encoder = new mc();
}
o3.prototype = {
  constructor: o3,
  getInt8: function() {
    var t = this.dv.getInt8(this.offset);
    return this.offset += 1, t;
  },
  getInt8Array: function(t) {
    for (var e = [], r = 0; r < t; r++)
      e.push(this.getInt8());
    return e;
  },
  getUint8: function() {
    var t = this.dv.getUint8(this.offset);
    return this.offset += 1, t;
  },
  getUint8Array: function(t) {
    for (var e = [], r = 0; r < t; r++)
      e.push(this.getUint8());
    return e;
  },
  getInt16: function() {
    var t = this.dv.getInt16(this.offset, this.littleEndian);
    return this.offset += 2, t;
  },
  getInt16Array: function(t) {
    for (var e = [], r = 0; r < t; r++)
      e.push(this.getInt16());
    return e;
  },
  getUint16: function() {
    var t = this.dv.getUint16(this.offset, this.littleEndian);
    return this.offset += 2, t;
  },
  getUint16Array: function(t) {
    for (var e = [], r = 0; r < t; r++)
      e.push(this.getUint16());
    return e;
  },
  getInt32: function() {
    var t = this.dv.getInt32(this.offset, this.littleEndian);
    return this.offset += 4, t;
  },
  getInt32Array: function(t) {
    for (var e = [], r = 0; r < t; r++)
      e.push(this.getInt32());
    return e;
  },
  getUint32: function() {
    var t = this.dv.getUint32(this.offset, this.littleEndian);
    return this.offset += 4, t;
  },
  getUint32Array: function(t) {
    for (var e = [], r = 0; r < t; r++)
      e.push(this.getUint32());
    return e;
  },
  getFloat32: function() {
    var t = this.dv.getFloat32(this.offset, this.littleEndian);
    return this.offset += 4, t;
  },
  getFloat32Array: function(t) {
    for (var e = [], r = 0; r < t; r++)
      e.push(this.getFloat32());
    return e;
  },
  getFloat64: function() {
    var t = this.dv.getFloat64(this.offset, this.littleEndian);
    return this.offset += 8, t;
  },
  getFloat64Array: function(t) {
    for (var e = [], r = 0; r < t; r++)
      e.push(this.getFloat64());
    return e;
  },
  getIndex: function(t, e) {
    switch (t) {
      case 1:
        return e === true ? this.getUint8() : this.getInt8();
      case 2:
        return e === true ? this.getUint16() : this.getInt16();
      case 4:
        return this.getInt32();
      default:
        throw "unknown number type " + t + " exception.";
    }
  },
  getIndexArray: function(t, e, r) {
    for (var n = [], i = 0; i < e; i++)
      n.push(this.getIndex(t, r));
    return n;
  },
  getChars: function(t) {
    for (var e = ""; t > 0; ) {
      var r = this.getUint8();
      if (t--, r === 0)
        break;
      e += String.fromCharCode(r);
    }
    for (; t > 0; )
      this.getUint8(), t--;
    return e;
  },
  getSjisStringsAsUnicode: function(t) {
    for (var e = []; t > 0; ) {
      var r = this.getUint8();
      if (t--, r === 0)
        break;
      e.push(r);
    }
    for (; t > 0; )
      this.getUint8(), t--;
    return this.encoder.s2u(new Uint8Array(e));
  },
  getUnicodeStrings: function(t) {
    for (var e = ""; t > 0; ) {
      var r = this.getUint16();
      if (t -= 2, r === 0)
        break;
      e += String.fromCharCode(r);
    }
    for (; t > 0; )
      this.getUint8(), t--;
    return e;
  },
  getTextBuffer: function() {
    var t = this.getUint32();
    return this.getUnicodeStrings(t);
  }
};
function l3() {
}
l3.prototype = {
  constructor: l3,
  leftToRightVector3: function(t) {
    t[2] = -t[2];
  },
  leftToRightQuaternion: function(t) {
    t[0] = -t[0], t[1] = -t[1];
  },
  leftToRightEuler: function(t) {
    t[0] = -t[0], t[1] = -t[1];
  },
  leftToRightIndexOrder: function(t) {
    var e = t[2];
    t[2] = t[0], t[0] = e;
  },
  leftToRightVector3Range: function(t, e) {
    var r = -e[2];
    e[2] = -t[2], t[2] = r;
  },
  leftToRightEulerRange: function(t, e) {
    var r = -e[0], n = -e[1];
    e[0] = -t[0], e[1] = -t[1], t[0] = r, t[1] = n;
  }
};
const Ah = 0, q5 = 2, K5 = 0, X5 = 0, $5 = 2, Z5 = 0, J5 = 0, ef = 1, Fl = 2, tf = 1, rf = 64, fh = 0, ph = 9, vc = 15, dh = 16, yc = 22, gh = 37, Ec = 43, mh = 76, vh = 83, yh = 97, Eh = 100, Ih = 103, Ch = 109;
class nf {
  constructor() {
    this.vkFormat = fh, this.typeSize = 1, this.pixelWidth = 0, this.pixelHeight = 0, this.pixelDepth = 0, this.layerCount = 0, this.faceCount = 1, this.supercompressionScheme = Ah, this.levels = [], this.dataFormatDescriptor = [{
      vendorId: X5,
      descriptorType: K5,
      descriptorBlockSize: 0,
      versionNumber: $5,
      colorModel: Z5,
      colorPrimaries: tf,
      transferFunction: Fl,
      flags: J5,
      texelBlockDimension: [0, 0, 0, 0],
      bytesPlane: [0, 0, 0, 0, 0, 0, 0, 0],
      samples: []
    }], this.keyValue = {}, this.globalData = null;
  }
}
class Vi {
  constructor(e, r, n, i) {
    this._dataView = void 0, this._littleEndian = void 0, this._offset = void 0, this._dataView = new DataView(e.buffer, e.byteOffset + r, n), this._littleEndian = i, this._offset = 0;
  }
  _nextUint8() {
    const e = this._dataView.getUint8(this._offset);
    return this._offset += 1, e;
  }
  _nextUint16() {
    const e = this._dataView.getUint16(this._offset, this._littleEndian);
    return this._offset += 2, e;
  }
  _nextUint32() {
    const e = this._dataView.getUint32(this._offset, this._littleEndian);
    return this._offset += 4, e;
  }
  _nextUint64() {
    const e = this._dataView.getUint32(this._offset, this._littleEndian), r = this._dataView.getUint32(this._offset + 4, this._littleEndian), n = e + 2 ** 32 * r;
    return this._offset += 8, n;
  }
  _nextInt32() {
    const e = this._dataView.getInt32(this._offset, this._littleEndian);
    return this._offset += 4, e;
  }
  _skip(e) {
    return this._offset += e, this;
  }
  _scan(e, r = 0) {
    const n = this._offset;
    let i = 0;
    for (; this._dataView.getUint8(this._offset) !== r && i < e; )
      i++, this._offset++;
    return i < e && this._offset++, new Uint8Array(this._dataView.buffer, this._dataView.byteOffset + n, i);
  }
}
const Rt = [
  // '´', 'K', 'T', 'X', '2', '0', 'ª', '\r', '\n', '\x1A', '\n'
  171,
  75,
  84,
  88,
  32,
  50,
  48,
  187,
  13,
  10,
  26,
  10
];
function c3(t) {
  return typeof TextDecoder < "u" ? new TextDecoder().decode(t) : Buffer.from(t).toString("utf8");
}
function sf(t) {
  const e = new Uint8Array(t.buffer, t.byteOffset, Rt.length);
  if (e[0] !== Rt[0] || // '´'
  e[1] !== Rt[1] || // 'K'
  e[2] !== Rt[2] || // 'T'
  e[3] !== Rt[3] || // 'X'
  e[4] !== Rt[4] || // ' '
  e[5] !== Rt[5] || // '2'
  e[6] !== Rt[6] || // '0'
  e[7] !== Rt[7] || // 'ª'
  e[8] !== Rt[8] || // '\r'
  e[9] !== Rt[9] || // '\n'
  e[10] !== Rt[10] || // '\x1A'
  e[11] !== Rt[11])
    throw new Error("Missing KTX 2.0 identifier.");
  const r = new nf(), n = 17 * Uint32Array.BYTES_PER_ELEMENT, i = new Vi(t, Rt.length, n, true);
  r.vkFormat = i._nextUint32(), r.typeSize = i._nextUint32(), r.pixelWidth = i._nextUint32(), r.pixelHeight = i._nextUint32(), r.pixelDepth = i._nextUint32(), r.layerCount = i._nextUint32(), r.faceCount = i._nextUint32();
  const s = i._nextUint32();
  r.supercompressionScheme = i._nextUint32();
  const a = i._nextUint32(), o = i._nextUint32(), l = i._nextUint32(), c = i._nextUint32(), u = i._nextUint64(), h = i._nextUint64(), A = s * 3 * 8, f = new Vi(t, Rt.length + n, A, true);
  for (let X = 0; X < s; X++)
    r.levels.push({
      levelData: new Uint8Array(t.buffer, t.byteOffset + f._nextUint64(), f._nextUint64()),
      uncompressedByteLength: f._nextUint64()
    });
  const d = new Vi(t, a, o, true), v = {
    vendorId: d._skip(
      4
      /* totalSize */
    )._nextUint16(),
    descriptorType: d._nextUint16(),
    versionNumber: d._nextUint16(),
    descriptorBlockSize: d._nextUint16(),
    colorModel: d._nextUint8(),
    colorPrimaries: d._nextUint8(),
    transferFunction: d._nextUint8(),
    flags: d._nextUint8(),
    texelBlockDimension: [d._nextUint8(), d._nextUint8(), d._nextUint8(), d._nextUint8()],
    bytesPlane: [d._nextUint8(), d._nextUint8(), d._nextUint8(), d._nextUint8(), d._nextUint8(), d._nextUint8(), d._nextUint8(), d._nextUint8()],
    samples: []
  }, m = 6, E = 4, y = (v.descriptorBlockSize / 4 - m) / E;
  for (let X = 0; X < y; X++) {
    const K = {
      bitOffset: d._nextUint16(),
      bitLength: d._nextUint8(),
      channelType: d._nextUint8(),
      samplePosition: [d._nextUint8(), d._nextUint8(), d._nextUint8(), d._nextUint8()],
      sampleLower: -1 / 0,
      sampleUpper: 1 / 0
    };
    K.channelType & rf ? (K.sampleLower = d._nextInt32(), K.sampleUpper = d._nextInt32()) : (K.sampleLower = d._nextUint32(), K.sampleUpper = d._nextUint32()), v.samples[X] = K;
  }
  r.dataFormatDescriptor.length = 0, r.dataFormatDescriptor.push(v);
  const p = new Vi(t, l, c, true);
  for (; p._offset < c; ) {
    const X = p._nextUint32(), K = p._scan(X), D = c3(K), L = p._scan(X - K.byteLength);
    r.keyValue[D] = D.match(/^ktx/i) ? c3(L) : L, p._offset % 4 && p._skip(4 - p._offset % 4);
  }
  if (h <= 0)
    return r;
  const g = new Vi(t, u, h, true), C = g._nextUint16(), S = g._nextUint16(), x = g._nextUint32(), T = g._nextUint32(), B = g._nextUint32(), R = g._nextUint32(), _ = [];
  for (let X = 0; X < s; X++)
    _.push({
      imageFlags: g._nextUint32(),
      rgbSliceByteOffset: g._nextUint32(),
      rgbSliceByteLength: g._nextUint32(),
      alphaSliceByteOffset: g._nextUint32(),
      alphaSliceByteLength: g._nextUint32()
    });
  const F = u + g._offset, U = F + x, Y = U + T, N = Y + B, Z = new Uint8Array(t.buffer, t.byteOffset + F, x), j = new Uint8Array(t.buffer, t.byteOffset + U, T), Q = new Uint8Array(t.buffer, t.byteOffset + Y, B), $ = new Uint8Array(t.buffer, t.byteOffset + N, R);
  return r.globalData = {
    endpointCount: C,
    selectorCount: S,
    imageDescs: _,
    endpointsData: Z,
    selectorsData: j,
    tablesData: Q,
    extendedData: $
  }, r;
}
let Po, Jr, Ll;
const Qo = { env: { emscripten_notify_memory_growth: function(t) {
  Ll = new Uint8Array(Jr.exports.memory.buffer);
} } };
class af {
  init() {
    return Po || (Po = typeof fetch < "u" ? fetch("data:application/wasm;base64," + u3).then((e) => e.arrayBuffer()).then((e) => WebAssembly.instantiate(e, Qo)).then(this._init) : WebAssembly.instantiate(Buffer.from(u3, "base64"), Qo).then(this._init), Po);
  }
  _init(e) {
    Jr = e.instance, Qo.env.emscripten_notify_memory_growth(0);
  }
  decode(e, r = 0) {
    if (!Jr)
      throw new Error("ZSTDDecoder: Await .init() before decoding.");
    const n = e.byteLength, i = Jr.exports.malloc(n);
    Ll.set(e, i), r = r || Number(Jr.exports.ZSTD_findDecompressedSize(i, n));
    const s = Jr.exports.malloc(r), a = Jr.exports.ZSTD_decompress(s, r, i, n), o = Ll.slice(s, s + a);
    return Jr.exports.free(i), Jr.exports.free(s), o;
  }
}
const u3 = "AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ";
/*! https://mths.be/codepointat v0.2.0 by @mathias */
String.prototype.codePointAt || function() {
  var t = function() {
    try {
      var r = {}, n = Object.defineProperty, i = n(r, r, r) && n;
    } catch {
    }
    return i;
  }(), e = function(r) {
    if (this == null)
      throw TypeError();
    var n = String(this), i = n.length, s = r ? Number(r) : 0;
    if (s != s && (s = 0), !(s < 0 || s >= i)) {
      var a = n.charCodeAt(s), o;
      return (
        // check if it’s the start of a surrogate pair
        a >= 55296 && a <= 56319 && // high surrogate
        i > s + 1 && (o = n.charCodeAt(s + 1), o >= 56320 && o <= 57343) ? (a - 55296) * 1024 + o - 56320 + 65536 : a
      );
    }
  };
  t ? t(String.prototype, "codePointAt", {
    value: e,
    configurable: true,
    writable: true
  }) : String.prototype.codePointAt = e;
}();
function xh() {
  this.table = new Uint16Array(16), this.trans = new Uint16Array(288);
}
var of = new xh(), lf = new xh(), Th = new Uint8Array(30), Sh = new Uint16Array(30), cf = new Uint8Array(30), uf = new Uint16Array(30);
function wh(t, e, r, n) {
  var i, s;
  for (i = 0; i < r; ++i)
    t[i] = 0;
  for (i = 0; i < 30 - r; ++i)
    t[i + r] = i / r | 0;
  for (s = n, i = 0; i < 30; ++i)
    e[i] = s, s += 1 << t[i];
}
function hf(t, e) {
  var r;
  for (r = 0; r < 7; ++r)
    t.table[r] = 0;
  for (t.table[7] = 24, t.table[8] = 152, t.table[9] = 112, r = 0; r < 24; ++r)
    t.trans[r] = 256 + r;
  for (r = 0; r < 144; ++r)
    t.trans[24 + r] = r;
  for (r = 0; r < 8; ++r)
    t.trans[24 + 144 + r] = 280 + r;
  for (r = 0; r < 112; ++r)
    t.trans[24 + 144 + 8 + r] = 144 + r;
  for (r = 0; r < 5; ++r)
    e.table[r] = 0;
  for (e.table[5] = 32, r = 0; r < 32; ++r)
    e.trans[r] = r;
}
hf(of, lf);
wh(Th, Sh, 4, 3);
wh(cf, uf, 2, 1);
Th[28] = 0;
Sh[28] = 258;
function Bh(t) {
  throw new Error(t);
}
function h3(t, e) {
  t || Bh(e);
}
var Se = { fail: Bh, argument: h3, assert: h3 }, A3 = 32768, f3 = 2147483648, ae = {}, xe = {};
function Br(t) {
  return function() {
    return t;
  };
}
ae.BYTE = function(t) {
  return Se.argument(t >= 0 && t <= 255, "Byte value should be between 0 and 255."), [t];
};
xe.BYTE = Br(1);
ae.CHAR = function(t) {
  return [t.charCodeAt(0)];
};
xe.CHAR = Br(1);
ae.CHARARRAY = function(t) {
  typeof t > "u" && (t = "", console.warn("Undefined CHARARRAY encountered and treated as an empty string. This is probably caused by a missing glyph name."));
  for (var e = [], r = 0; r < t.length; r += 1)
    e[r] = t.charCodeAt(r);
  return e;
};
xe.CHARARRAY = function(t) {
  return typeof t > "u" ? 0 : t.length;
};
ae.USHORT = function(t) {
  return [t >> 8 & 255, t & 255];
};
xe.USHORT = Br(2);
ae.SHORT = function(t) {
  return t >= A3 && (t = -(2 * A3 - t)), [t >> 8 & 255, t & 255];
};
xe.SHORT = Br(2);
ae.UINT24 = function(t) {
  return [t >> 16 & 255, t >> 8 & 255, t & 255];
};
xe.UINT24 = Br(3);
ae.ULONG = function(t) {
  return [t >> 24 & 255, t >> 16 & 255, t >> 8 & 255, t & 255];
};
xe.ULONG = Br(4);
ae.LONG = function(t) {
  return t >= f3 && (t = -(2 * f3 - t)), [t >> 24 & 255, t >> 16 & 255, t >> 8 & 255, t & 255];
};
xe.LONG = Br(4);
ae.FIXED = ae.ULONG;
xe.FIXED = xe.ULONG;
ae.FWORD = ae.SHORT;
xe.FWORD = xe.SHORT;
ae.UFWORD = ae.USHORT;
xe.UFWORD = xe.USHORT;
ae.LONGDATETIME = function(t) {
  return [0, 0, 0, 0, t >> 24 & 255, t >> 16 & 255, t >> 8 & 255, t & 255];
};
xe.LONGDATETIME = Br(8);
ae.TAG = function(t) {
  return Se.argument(t.length === 4, "Tag should be exactly 4 ASCII characters."), [
    t.charCodeAt(0),
    t.charCodeAt(1),
    t.charCodeAt(2),
    t.charCodeAt(3)
  ];
};
xe.TAG = Br(4);
ae.Card8 = ae.BYTE;
xe.Card8 = xe.BYTE;
ae.Card16 = ae.USHORT;
xe.Card16 = xe.USHORT;
ae.OffSize = ae.BYTE;
xe.OffSize = xe.BYTE;
ae.SID = ae.USHORT;
xe.SID = xe.USHORT;
ae.NUMBER = function(t) {
  return t >= -107 && t <= 107 ? [t + 139] : t >= 108 && t <= 1131 ? (t = t - 108, [(t >> 8) + 247, t & 255]) : t >= -1131 && t <= -108 ? (t = -t - 108, [(t >> 8) + 251, t & 255]) : t >= -32768 && t <= 32767 ? ae.NUMBER16(t) : ae.NUMBER32(t);
};
xe.NUMBER = function(t) {
  return ae.NUMBER(t).length;
};
ae.NUMBER16 = function(t) {
  return [28, t >> 8 & 255, t & 255];
};
xe.NUMBER16 = Br(3);
ae.NUMBER32 = function(t) {
  return [29, t >> 24 & 255, t >> 16 & 255, t >> 8 & 255, t & 255];
};
xe.NUMBER32 = Br(5);
ae.REAL = function(t) {
  var e = t.toString(), r = /\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(e);
  if (r) {
    var n = parseFloat("1e" + ((r[2] ? +r[2] : 0) + r[1].length));
    e = (Math.round(t * n) / n).toString();
  }
  for (var i = "", s = 0, a = e.length; s < a; s += 1) {
    var o = e[s];
    o === "e" ? i += e[++s] === "-" ? "c" : "b" : o === "." ? i += "a" : o === "-" ? i += "e" : i += o;
  }
  i += i.length & 1 ? "f" : "ff";
  for (var l = [30], c = 0, u = i.length; c < u; c += 2)
    l.push(parseInt(i.substr(c, 2), 16));
  return l;
};
xe.REAL = function(t) {
  return ae.REAL(t).length;
};
ae.NAME = ae.CHARARRAY;
xe.NAME = xe.CHARARRAY;
ae.STRING = ae.CHARARRAY;
xe.STRING = xe.CHARARRAY;
ae.UTF16 = function(t) {
  for (var e = [], r = 0; r < t.length; r += 1) {
    var n = t.charCodeAt(r);
    e[e.length] = n >> 8 & 255, e[e.length] = n & 255;
  }
  return e;
};
xe.UTF16 = function(t) {
  return t.length * 2;
};
var Ol = {
  "x-mac-croatian": (
    // Python: 'mac_croatian'
    "ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®Š™´¨≠ŽØ∞±≤≥∆µ∂∑∏š∫ªºΩžø¿¡¬√ƒ≈Ć«Č… ÀÃÕŒœĐ—“”‘’÷◊©⁄€‹›Æ»–·‚„‰ÂćÁčÈÍÎÏÌÓÔđÒÚÛÙıˆ˜¯πË˚¸Êæˇ"
  ),
  "x-mac-cyrillic": (
    // Python: 'mac_cyrillic'
    "АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ†°Ґ£§•¶І®©™Ђђ≠Ѓѓ∞±≤≥іµґЈЄєЇїЉљЊњјЅ¬√ƒ≈∆«»… ЋћЌќѕ–—“”‘’÷„ЎўЏџ№Ёёяабвгдежзийклмнопрстуфхцчшщъыьэю"
  ),
  "x-mac-gaelic": (
    // http://unicode.org/Public/MAPPINGS/VENDORS/APPLE/GAELIC.TXT
    "ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØḂ±≤≥ḃĊċḊḋḞḟĠġṀæøṁṖṗɼƒſṠ«»… ÀÃÕŒœ–—“”‘’ṡẛÿŸṪ€‹›Ŷŷṫ·Ỳỳ⁊ÂÊÁËÈÍÎÏÌÓÔ♣ÒÚÛÙıÝýŴŵẄẅẀẁẂẃ"
  ),
  "x-mac-greek": (
    // Python: 'mac_greek'
    "Ä¹²É³ÖÜ΅àâä΄¨çéèêë£™îï•½‰ôö¦€ùûü†ΓΔΘΛΞΠß®©ΣΪ§≠°·Α±≤≥¥ΒΕΖΗΙΚΜΦΫΨΩάΝ¬ΟΡ≈Τ«»… ΥΧΆΈœ–―“”‘’÷ΉΊΌΎέήίόΏύαβψδεφγηιξκλμνοπώρστθωςχυζϊϋΐΰ­"
  ),
  "x-mac-icelandic": (
    // Python: 'mac_iceland'
    "ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûüÝ°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€ÐðÞþý·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ"
  ),
  "x-mac-inuit": (
    // http://unicode.org/Public/MAPPINGS/VENDORS/APPLE/INUIT.TXT
    "ᐃᐄᐅᐆᐊᐋᐱᐲᐳᐴᐸᐹᑉᑎᑏᑐᑑᑕᑖᑦᑭᑮᑯᑰᑲᑳᒃᒋᒌᒍᒎᒐᒑ°ᒡᒥᒦ•¶ᒧ®©™ᒨᒪᒫᒻᓂᓃᓄᓅᓇᓈᓐᓯᓰᓱᓲᓴᓵᔅᓕᓖᓗᓘᓚᓛᓪᔨᔩᔪᔫᔭ… ᔮᔾᕕᕖᕗ–—“”‘’ᕘᕙᕚᕝᕆᕇᕈᕉᕋᕌᕐᕿᖀᖁᖂᖃᖄᖅᖏᖐᖑᖒᖓᖔᖕᙱᙲᙳᙴᙵᙶᖖᖠᖡᖢᖣᖤᖥᖦᕼŁł"
  ),
  "x-mac-ce": (
    // Python: 'mac_latin2'
    "ÄĀāÉĄÖÜáąČäčĆćéŹźĎíďĒēĖóėôöõúĚěü†°Ę£§•¶ß®©™ę¨≠ģĮįĪ≤≥īĶ∂∑łĻļĽľĹĺŅņŃ¬√ńŇ∆«»… ňŐÕőŌ–—“”‘’÷◊ōŔŕŘ‹›řŖŗŠ‚„šŚśÁŤťÍŽžŪÓÔūŮÚůŰűŲųÝýķŻŁżĢˇ"
  ),
  macintosh: (
    // Python: 'mac_roman'
    "ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›ﬁﬂ‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ"
  ),
  "x-mac-romanian": (
    // Python: 'mac_romanian'
    "ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ĂȘ∞±≤≥¥µ∂∑∏π∫ªºΩăș¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›Țț‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ"
  ),
  "x-mac-turkish": (
    // Python: 'mac_turkish'
    "ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸĞğİıŞş‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙˆ˜¯˘˙˚¸˝˛ˇ"
  )
};
var $s = typeof WeakMap == "function" && /* @__PURE__ */ new WeakMap(), Zs, Af = function(t) {
  if (!Zs) {
    Zs = {};
    for (var e in Ol)
      Zs[e] = new String(e);
  }
  var r = Zs[t];
  if (r !== void 0) {
    if ($s) {
      var n = $s.get(r);
      if (n !== void 0)
        return n;
    }
    var i = Ol[t];
    if (i !== void 0) {
      for (var s = {}, a = 0; a < i.length; a++)
        s[i.charCodeAt(a)] = a + 128;
      return $s && $s.set(r, s), s;
    }
  }
};
ae.MACSTRING = function(t, e) {
  var r = Af(e);
  if (r !== void 0) {
    for (var n = [], i = 0; i < t.length; i++) {
      var s = t.charCodeAt(i);
      if (s >= 128 && (s = r[s], s === void 0))
        return;
      n[i] = s;
    }
    return n;
  }
};
xe.MACSTRING = function(t, e) {
  var r = ae.MACSTRING(t, e);
  return r !== void 0 ? r.length : 0;
};
function Pl(t) {
  return t >= -128 && t <= 127;
}
function ff(t, e, r) {
  for (var n = 0, i = t.length; e < i && n < 64 && t[e] === 0; )
    ++e, ++n;
  return r.push(128 | n - 1), e;
}
function pf(t, e, r) {
  for (var n = 0, i = t.length, s = e; s < i && n < 64; ) {
    var a = t[s];
    if (!Pl(a) || a === 0 && s + 1 < i && t[s + 1] === 0)
      break;
    ++s, ++n;
  }
  r.push(n - 1);
  for (var o = e; o < s; ++o)
    r.push(t[o] + 256 & 255);
  return s;
}
function df(t, e, r) {
  for (var n = 0, i = t.length, s = e; s < i && n < 64; ) {
    var a = t[s];
    if (a === 0 || Pl(a) && s + 1 < i && Pl(t[s + 1]))
      break;
    ++s, ++n;
  }
  r.push(64 | n - 1);
  for (var o = e; o < s; ++o) {
    var l = t[o];
    r.push(l + 65536 >> 8 & 255, l + 256 & 255);
  }
  return s;
}
ae.VARDELTAS = function(t) {
  for (var e = 0, r = []; e < t.length; ) {
    var n = t[e];
    n === 0 ? e = ff(t, e, r) : n >= -128 && n <= 127 ? e = pf(t, e, r) : e = df(t, e, r);
  }
  return r;
};
ae.INDEX = function(t) {
  for (var e = 1, r = [e], n = [], i = 0; i < t.length; i += 1) {
    var s = ae.OBJECT(t[i]);
    Array.prototype.push.apply(n, s), e += s.length, r.push(e);
  }
  if (n.length === 0)
    return [0, 0];
  for (var a = [], o = 1 + Math.floor(Math.log(e) / Math.log(2)) / 8 | 0, l = [void 0, ae.BYTE, ae.USHORT, ae.UINT24, ae.ULONG][o], c = 0; c < r.length; c += 1) {
    var u = l(r[c]);
    Array.prototype.push.apply(a, u);
  }
  return Array.prototype.concat(
    ae.Card16(t.length),
    ae.OffSize(o),
    a,
    n
  );
};
xe.INDEX = function(t) {
  return ae.INDEX(t).length;
};
ae.DICT = function(t) {
  for (var e = [], r = Object.keys(t), n = r.length, i = 0; i < n; i += 1) {
    var s = parseInt(r[i], 0), a = t[s];
    e = e.concat(ae.OPERAND(a.value, a.type)), e = e.concat(ae.OPERATOR(s));
  }
  return e;
};
xe.DICT = function(t) {
  return ae.DICT(t).length;
};
ae.OPERATOR = function(t) {
  return t < 1200 ? [t] : [12, t - 1200];
};
ae.OPERAND = function(t, e) {
  var r = [];
  if (Array.isArray(e))
    for (var n = 0; n < e.length; n += 1)
      Se.argument(t.length === e.length, "Not enough arguments given for type" + e), r = r.concat(ae.OPERAND(t[n], e[n]));
  else if (e === "SID")
    r = r.concat(ae.NUMBER(t));
  else if (e === "offset")
    r = r.concat(ae.NUMBER32(t));
  else if (e === "number")
    r = r.concat(ae.NUMBER(t));
  else if (e === "real")
    r = r.concat(ae.REAL(t));
  else
    throw new Error("Unknown operand type " + e);
  return r;
};
ae.OP = ae.BYTE;
xe.OP = xe.BYTE;
var Js = typeof WeakMap == "function" && /* @__PURE__ */ new WeakMap();
ae.CHARSTRING = function(t) {
  if (Js) {
    var e = Js.get(t);
    if (e !== void 0)
      return e;
  }
  for (var r = [], n = t.length, i = 0; i < n; i += 1) {
    var s = t[i];
    r = r.concat(ae[s.type](s.value));
  }
  return Js && Js.set(t, r), r;
};
xe.CHARSTRING = function(t) {
  return ae.CHARSTRING(t).length;
};
ae.OBJECT = function(t) {
  var e = ae[t.type];
  return Se.argument(e !== void 0, "No encoding function for type " + t.type), e(t.value);
};
xe.OBJECT = function(t) {
  var e = xe[t.type];
  return Se.argument(e !== void 0, "No sizeOf function for type " + t.type), e(t.value);
};
ae.TABLE = function(t) {
  for (var e = [], r = t.fields.length, n = [], i = [], s = 0; s < r; s += 1) {
    var a = t.fields[s], o = ae[a.type];
    Se.argument(o !== void 0, "No encoding function for field type " + a.type + " (" + a.name + ")");
    var l = t[a.name];
    l === void 0 && (l = a.value);
    var c = o(l);
    a.type === "TABLE" ? (i.push(e.length), e = e.concat([0, 0]), n.push(c)) : e = e.concat(c);
  }
  for (var u = 0; u < n.length; u += 1) {
    var h = i[u], A = e.length;
    Se.argument(A < 65536, "Table " + t.tableName + " too big."), e[h] = A >> 8, e[h + 1] = A & 255, e = e.concat(n[u]);
  }
  return e;
};
xe.TABLE = function(t) {
  for (var e = 0, r = t.fields.length, n = 0; n < r; n += 1) {
    var i = t.fields[n], s = xe[i.type];
    Se.argument(s !== void 0, "No sizeOf function for field type " + i.type + " (" + i.name + ")");
    var a = t[i.name];
    a === void 0 && (a = i.value), e += s(a), i.type === "TABLE" && (e += 2);
  }
  return e;
};
ae.RECORD = ae.TABLE;
xe.RECORD = xe.TABLE;
ae.LITERAL = function(t) {
  return t;
};
xe.LITERAL = function(t) {
  return t.length;
};
function yt(t, e, r) {
  if (e.length && (e[0].name !== "coverageFormat" || e[0].value === 1))
    for (var n = 0; n < e.length; n += 1) {
      var i = e[n];
      this[i.name] = i.value;
    }
  if (this.tableName = t, this.fields = e, r)
    for (var s = Object.keys(r), a = 0; a < s.length; a += 1) {
      var o = s[a], l = r[o];
      this[o] !== void 0 && (this[o] = l);
    }
}
yt.prototype.encode = function() {
  return ae.TABLE(this);
};
yt.prototype.sizeOf = function() {
  return xe.TABLE(this);
};
function ms(t, e, r) {
  r === void 0 && (r = e.length);
  var n = new Array(e.length + 1);
  n[0] = { name: t + "Count", type: "USHORT", value: r };
  for (var i = 0; i < e.length; i++)
    n[i + 1] = { name: t + i, type: "USHORT", value: e[i] };
  return n;
}
function Ql(t, e, r) {
  var n = e.length, i = new Array(n + 1);
  i[0] = { name: t + "Count", type: "USHORT", value: n };
  for (var s = 0; s < n; s++)
    i[s + 1] = { name: t + s, type: "TABLE", value: r(e[s], s) };
  return i;
}
function vs(t, e, r) {
  var n = e.length, i = [];
  i[0] = { name: t + "Count", type: "USHORT", value: n };
  for (var s = 0; s < n; s++)
    i = i.concat(r(e[s], s));
  return i;
}
function Da(t) {
  t.format === 1 ? yt.call(
    this,
    "coverageTable",
    [{ name: "coverageFormat", type: "USHORT", value: 1 }].concat(ms("glyph", t.glyphs))
  ) : t.format === 2 ? yt.call(
    this,
    "coverageTable",
    [{ name: "coverageFormat", type: "USHORT", value: 2 }].concat(vs("rangeRecord", t.ranges, function(e) {
      return [
        { name: "startGlyphID", type: "USHORT", value: e.start },
        { name: "endGlyphID", type: "USHORT", value: e.end },
        { name: "startCoverageIndex", type: "USHORT", value: e.index }
      ];
    }))
  ) : Se.assert(false, "Coverage format must be 1 or 2.");
}
Da.prototype = Object.create(yt.prototype);
Da.prototype.constructor = Da;
function ka(t) {
  yt.call(
    this,
    "scriptListTable",
    vs("scriptRecord", t, function(e, r) {
      var n = e.script, i = n.defaultLangSys;
      return Se.assert(!!i, "Unable to write GSUB: script " + e.tag + " has no default language system."), [
        { name: "scriptTag" + r, type: "TAG", value: e.tag },
        { name: "script" + r, type: "TABLE", value: new yt("scriptTable", [
          { name: "defaultLangSys", type: "TABLE", value: new yt("defaultLangSys", [
            { name: "lookupOrder", type: "USHORT", value: 0 },
            { name: "reqFeatureIndex", type: "USHORT", value: i.reqFeatureIndex }
          ].concat(ms("featureIndex", i.featureIndexes))) }
        ].concat(vs("langSys", n.langSysRecords, function(s, a) {
          var o = s.langSys;
          return [
            { name: "langSysTag" + a, type: "TAG", value: s.tag },
            { name: "langSys" + a, type: "TABLE", value: new yt("langSys", [
              { name: "lookupOrder", type: "USHORT", value: 0 },
              { name: "reqFeatureIndex", type: "USHORT", value: o.reqFeatureIndex }
            ].concat(ms("featureIndex", o.featureIndexes))) }
          ];
        }))) }
      ];
    })
  );
}
ka.prototype = Object.create(yt.prototype);
ka.prototype.constructor = ka;
function Fa(t) {
  yt.call(
    this,
    "featureListTable",
    vs("featureRecord", t, function(e, r) {
      var n = e.feature;
      return [
        { name: "featureTag" + r, type: "TAG", value: e.tag },
        { name: "feature" + r, type: "TABLE", value: new yt("featureTable", [
          { name: "featureParams", type: "USHORT", value: n.featureParams }
        ].concat(ms("lookupListIndex", n.lookupListIndexes))) }
      ];
    })
  );
}
Fa.prototype = Object.create(yt.prototype);
Fa.prototype.constructor = Fa;
function La(t, e) {
  yt.call(this, "lookupListTable", Ql("lookup", t, function(r) {
    var n = e[r.lookupType];
    return Se.assert(!!n, "Unable to write GSUB lookup type " + r.lookupType + " tables."), new yt("lookupTable", [
      { name: "lookupType", type: "USHORT", value: r.lookupType },
      { name: "lookupFlag", type: "USHORT", value: r.lookupFlag }
    ].concat(Ql("subtable", r.subtables, n)));
  }));
}
La.prototype = Object.create(yt.prototype);
La.prototype.constructor = La;
var Ae = {
  Table: yt,
  Record: yt,
  Coverage: Da,
  ScriptList: ka,
  FeatureList: Fa,
  LookupList: La,
  ushortList: ms,
  tableList: Ql,
  recordList: vs
};
function Oa(t, e) {
  return t.getUint16(e, false);
}
function Ic(t, e) {
  return t.getUint32(e, false);
}
function bh(t, e) {
  var r = t.getInt16(e, false), n = t.getUint16(e + 2, false);
  return r + n / 65535;
}
var If = {
  byte: 1,
  uShort: 2,
  short: 2,
  uLong: 4,
  fixed: 4,
  longDateTime: 8,
  tag: 4
};
function z(t, e) {
  this.data = t, this.offset = e, this.relativeOffset = 0;
}
z.prototype.parseByte = function() {
  var t = this.data.getUint8(this.offset + this.relativeOffset);
  return this.relativeOffset += 1, t;
};
z.prototype.parseChar = function() {
  var t = this.data.getInt8(this.offset + this.relativeOffset);
  return this.relativeOffset += 1, t;
};
z.prototype.parseCard8 = z.prototype.parseByte;
z.prototype.parseUShort = function() {
  var t = this.data.getUint16(this.offset + this.relativeOffset);
  return this.relativeOffset += 2, t;
};
z.prototype.parseCard16 = z.prototype.parseUShort;
z.prototype.parseSID = z.prototype.parseUShort;
z.prototype.parseOffset16 = z.prototype.parseUShort;
z.prototype.parseShort = function() {
  var t = this.data.getInt16(this.offset + this.relativeOffset);
  return this.relativeOffset += 2, t;
};
z.prototype.parseF2Dot14 = function() {
  var t = this.data.getInt16(this.offset + this.relativeOffset) / 16384;
  return this.relativeOffset += 2, t;
};
z.prototype.parseULong = function() {
  var t = Ic(this.data, this.offset + this.relativeOffset);
  return this.relativeOffset += 4, t;
};
z.prototype.parseOffset32 = z.prototype.parseULong;
z.prototype.parseFixed = function() {
  var t = bh(this.data, this.offset + this.relativeOffset);
  return this.relativeOffset += 4, t;
};
z.prototype.parseString = function(t) {
  var e = this.data, r = this.offset + this.relativeOffset, n = "";
  this.relativeOffset += t;
  for (var i = 0; i < t; i++)
    n += String.fromCharCode(e.getUint8(r + i));
  return n;
};
z.prototype.parseTag = function() {
  return this.parseString(4);
};
z.prototype.parseLongDateTime = function() {
  var t = Ic(this.data, this.offset + this.relativeOffset + 4);
  return t -= 2082844800, this.relativeOffset += 8, t;
};
z.prototype.parseVersion = function(t) {
  var e = Oa(this.data, this.offset + this.relativeOffset), r = Oa(this.data, this.offset + this.relativeOffset + 2);
  return this.relativeOffset += 4, t === void 0 && (t = 4096), e + r / t / 10;
};
z.prototype.skip = function(t, e) {
  e === void 0 && (e = 1), this.relativeOffset += If[t] * e;
};
z.prototype.parseULongList = function(t) {
  t === void 0 && (t = this.parseULong());
  for (var e = new Array(t), r = this.data, n = this.offset + this.relativeOffset, i = 0; i < t; i++)
    e[i] = r.getUint32(n), n += 4;
  return this.relativeOffset += t * 4, e;
};
z.prototype.parseOffset16List = z.prototype.parseUShortList = function(t) {
  t === void 0 && (t = this.parseUShort());
  for (var e = new Array(t), r = this.data, n = this.offset + this.relativeOffset, i = 0; i < t; i++)
    e[i] = r.getUint16(n), n += 2;
  return this.relativeOffset += t * 2, e;
};
z.prototype.parseShortList = function(t) {
  for (var e = new Array(t), r = this.data, n = this.offset + this.relativeOffset, i = 0; i < t; i++)
    e[i] = r.getInt16(n), n += 2;
  return this.relativeOffset += t * 2, e;
};
z.prototype.parseByteList = function(t) {
  for (var e = new Array(t), r = this.data, n = this.offset + this.relativeOffset, i = 0; i < t; i++)
    e[i] = r.getUint8(n++);
  return this.relativeOffset += t, e;
};
z.prototype.parseList = function(t, e) {
  e || (e = t, t = this.parseUShort());
  for (var r = new Array(t), n = 0; n < t; n++)
    r[n] = e.call(this);
  return r;
};
z.prototype.parseList32 = function(t, e) {
  e || (e = t, t = this.parseULong());
  for (var r = new Array(t), n = 0; n < t; n++)
    r[n] = e.call(this);
  return r;
};
z.prototype.parseRecordList = function(t, e) {
  e || (e = t, t = this.parseUShort());
  for (var r = new Array(t), n = Object.keys(e), i = 0; i < t; i++) {
    for (var s = {}, a = 0; a < n.length; a++) {
      var o = n[a], l = e[o];
      s[o] = l.call(this);
    }
    r[i] = s;
  }
  return r;
};
z.prototype.parseRecordList32 = function(t, e) {
  e || (e = t, t = this.parseULong());
  for (var r = new Array(t), n = Object.keys(e), i = 0; i < t; i++) {
    for (var s = {}, a = 0; a < n.length; a++) {
      var o = n[a], l = e[o];
      s[o] = l.call(this);
    }
    r[i] = s;
  }
  return r;
};
z.prototype.parseStruct = function(t) {
  if (typeof t == "function")
    return t.call(this);
  for (var e = Object.keys(t), r = {}, n = 0; n < e.length; n++) {
    var i = e[n], s = t[i];
    r[i] = s.call(this);
  }
  return r;
};
z.prototype.parseValueRecord = function(t) {
  if (t === void 0 && (t = this.parseUShort()), t !== 0) {
    var e = {};
    return t & 1 && (e.xPlacement = this.parseShort()), t & 2 && (e.yPlacement = this.parseShort()), t & 4 && (e.xAdvance = this.parseShort()), t & 8 && (e.yAdvance = this.parseShort()), t & 16 && (e.xPlaDevice = void 0, this.parseShort()), t & 32 && (e.yPlaDevice = void 0, this.parseShort()), t & 64 && (e.xAdvDevice = void 0, this.parseShort()), t & 128 && (e.yAdvDevice = void 0, this.parseShort()), e;
  }
};
z.prototype.parseValueRecordList = function() {
  for (var t = this.parseUShort(), e = this.parseUShort(), r = new Array(e), n = 0; n < e; n++)
    r[n] = this.parseValueRecord(t);
  return r;
};
z.prototype.parsePointer = function(t) {
  var e = this.parseOffset16();
  if (e > 0)
    return new z(this.data, this.offset + e).parseStruct(t);
};
z.prototype.parsePointer32 = function(t) {
  var e = this.parseOffset32();
  if (e > 0)
    return new z(this.data, this.offset + e).parseStruct(t);
};
z.prototype.parseListOfLists = function(t) {
  for (var e = this.parseOffset16List(), r = e.length, n = this.relativeOffset, i = new Array(r), s = 0; s < r; s++) {
    var a = e[s];
    if (a === 0) {
      i[s] = void 0;
      continue;
    }
    if (this.relativeOffset = a, t) {
      for (var o = this.parseOffset16List(), l = new Array(o.length), c = 0; c < o.length; c++)
        this.relativeOffset = a + o[c], l[c] = t.call(this);
      i[s] = l;
    } else
      i[s] = this.parseUShortList();
  }
  return this.relativeOffset = n, i;
};
z.prototype.parseCoverage = function() {
  var t = this.offset + this.relativeOffset, e = this.parseUShort(), r = this.parseUShort();
  if (e === 1)
    return {
      format: 1,
      glyphs: this.parseUShortList(r)
    };
  if (e === 2) {
    for (var n = new Array(r), i = 0; i < r; i++)
      n[i] = {
        start: this.parseUShort(),
        end: this.parseUShort(),
        index: this.parseUShort()
      };
    return {
      format: 2,
      ranges: n
    };
  }
  throw new Error("0x" + t.toString(16) + ": Coverage format must be 1 or 2.");
};
z.prototype.parseClassDef = function() {
  var t = this.offset + this.relativeOffset, e = this.parseUShort();
  if (e === 1)
    return {
      format: 1,
      startGlyph: this.parseUShort(),
      classes: this.parseUShortList()
    };
  if (e === 2)
    return {
      format: 2,
      ranges: this.parseRecordList({
        start: z.uShort,
        end: z.uShort,
        classId: z.uShort
      })
    };
  throw new Error("0x" + t.toString(16) + ": ClassDef format must be 1 or 2.");
};
z.list = function(t, e) {
  return function() {
    return this.parseList(t, e);
  };
};
z.list32 = function(t, e) {
  return function() {
    return this.parseList32(t, e);
  };
};
z.recordList = function(t, e) {
  return function() {
    return this.parseRecordList(t, e);
  };
};
z.recordList32 = function(t, e) {
  return function() {
    return this.parseRecordList32(t, e);
  };
};
z.pointer = function(t) {
  return function() {
    return this.parsePointer(t);
  };
};
z.pointer32 = function(t) {
  return function() {
    return this.parsePointer32(t);
  };
};
z.tag = z.prototype.parseTag;
z.byte = z.prototype.parseByte;
z.uShort = z.offset16 = z.prototype.parseUShort;
z.uShortList = z.prototype.parseUShortList;
z.uLong = z.offset32 = z.prototype.parseULong;
z.uLongList = z.prototype.parseULongList;
z.struct = z.prototype.parseStruct;
z.coverage = z.prototype.parseCoverage;
z.classDef = z.prototype.parseClassDef;
var d3 = {
  reserved: z.uShort,
  reqFeatureIndex: z.uShort,
  featureIndexes: z.uShortList
};
z.prototype.parseScriptList = function() {
  return this.parsePointer(z.recordList({
    tag: z.tag,
    script: z.pointer({
      defaultLangSys: z.pointer(d3),
      langSysRecords: z.recordList({
        tag: z.tag,
        langSys: z.pointer(d3)
      })
    })
  })) || [];
};
z.prototype.parseFeatureList = function() {
  return this.parsePointer(z.recordList({
    tag: z.tag,
    feature: z.pointer({
      featureParams: z.offset16,
      lookupListIndexes: z.uShortList
    })
  })) || [];
};
z.prototype.parseLookupList = function(t) {
  return this.parsePointer(z.list(z.pointer(function() {
    var e = this.parseUShort();
    Se.argument(1 <= e && e <= 9, "GPOS/GSUB lookup type " + e + " unknown.");
    var r = this.parseUShort(), n = r & 16;
    return {
      lookupType: e,
      lookupFlag: r,
      subtables: this.parseList(z.pointer(t[e])),
      markFilteringSet: n ? this.parseUShort() : void 0
    };
  }))) || [];
};
z.prototype.parseFeatureVariationsList = function() {
  return this.parsePointer32(function() {
    var t = this.parseUShort(), e = this.parseUShort();
    Se.argument(t === 1 && e < 1, "GPOS/GSUB feature variations table unknown.");
    var r = this.parseRecordList32({
      conditionSetOffset: z.offset32,
      featureTableSubstitutionOffset: z.offset32
    });
    return r;
  }) || [];
};
var xr = new Array(9);
xr[1] = function() {
  var e = this.offset + this.relativeOffset, r = this.parseUShort();
  if (r === 1)
    return {
      substFormat: 1,
      coverage: this.parsePointer(z.coverage),
      deltaGlyphId: this.parseUShort()
    };
  if (r === 2)
    return {
      substFormat: 2,
      coverage: this.parsePointer(z.coverage),
      substitute: this.parseOffset16List()
    };
  Se.assert(false, "0x" + e.toString(16) + ": lookup type 1 format must be 1 or 2.");
};
xr[2] = function() {
  var e = this.parseUShort();
  return Se.argument(e === 1, "GSUB Multiple Substitution Subtable identifier-format must be 1"), {
    substFormat: e,
    coverage: this.parsePointer(z.coverage),
    sequences: this.parseListOfLists()
  };
};
xr[3] = function() {
  var e = this.parseUShort();
  return Se.argument(e === 1, "GSUB Alternate Substitution Subtable identifier-format must be 1"), {
    substFormat: e,
    coverage: this.parsePointer(z.coverage),
    alternateSets: this.parseListOfLists()
  };
};
xr[4] = function() {
  var e = this.parseUShort();
  return Se.argument(e === 1, "GSUB ligature table identifier-format must be 1"), {
    substFormat: e,
    coverage: this.parsePointer(z.coverage),
    ligatureSets: this.parseListOfLists(function() {
      return {
        ligGlyph: this.parseUShort(),
        components: this.parseUShortList(this.parseUShort() - 1)
      };
    })
  };
};
var bi = {
  sequenceIndex: z.uShort,
  lookupListIndex: z.uShort
};
xr[5] = function() {
  var e = this.offset + this.relativeOffset, r = this.parseUShort();
  if (r === 1)
    return {
      substFormat: r,
      coverage: this.parsePointer(z.coverage),
      ruleSets: this.parseListOfLists(function() {
        var s = this.parseUShort(), a = this.parseUShort();
        return {
          input: this.parseUShortList(s - 1),
          lookupRecords: this.parseRecordList(a, bi)
        };
      })
    };
  if (r === 2)
    return {
      substFormat: r,
      coverage: this.parsePointer(z.coverage),
      classDef: this.parsePointer(z.classDef),
      classSets: this.parseListOfLists(function() {
        var s = this.parseUShort(), a = this.parseUShort();
        return {
          classes: this.parseUShortList(s - 1),
          lookupRecords: this.parseRecordList(a, bi)
        };
      })
    };
  if (r === 3) {
    var n = this.parseUShort(), i = this.parseUShort();
    return {
      substFormat: r,
      coverages: this.parseList(n, z.pointer(z.coverage)),
      lookupRecords: this.parseRecordList(i, bi)
    };
  }
  Se.assert(false, "0x" + e.toString(16) + ": lookup type 5 format must be 1, 2 or 3.");
};
xr[6] = function() {
  var e = this.offset + this.relativeOffset, r = this.parseUShort();
  if (r === 1)
    return {
      substFormat: 1,
      coverage: this.parsePointer(z.coverage),
      chainRuleSets: this.parseListOfLists(function() {
        return {
          backtrack: this.parseUShortList(),
          input: this.parseUShortList(this.parseShort() - 1),
          lookahead: this.parseUShortList(),
          lookupRecords: this.parseRecordList(bi)
        };
      })
    };
  if (r === 2)
    return {
      substFormat: 2,
      coverage: this.parsePointer(z.coverage),
      backtrackClassDef: this.parsePointer(z.classDef),
      inputClassDef: this.parsePointer(z.classDef),
      lookaheadClassDef: this.parsePointer(z.classDef),
      chainClassSet: this.parseListOfLists(function() {
        return {
          backtrack: this.parseUShortList(),
          input: this.parseUShortList(this.parseShort() - 1),
          lookahead: this.parseUShortList(),
          lookupRecords: this.parseRecordList(bi)
        };
      })
    };
  if (r === 3)
    return {
      substFormat: 3,
      backtrackCoverage: this.parseList(z.pointer(z.coverage)),
      inputCoverage: this.parseList(z.pointer(z.coverage)),
      lookaheadCoverage: this.parseList(z.pointer(z.coverage)),
      lookupRecords: this.parseRecordList(bi)
    };
  Se.assert(false, "0x" + e.toString(16) + ": lookup type 6 format must be 1, 2 or 3.");
};
xr[7] = function() {
  var e = this.parseUShort();
  Se.argument(e === 1, "GSUB Extension Substitution subtable identifier-format must be 1");
  var r = this.parseUShort(), n = new z(this.data, this.offset + this.parseULong());
  return {
    substFormat: 1,
    lookupType: r,
    extension: xr[r].call(n)
  };
};
xr[8] = function() {
  var e = this.parseUShort();
  return Se.argument(e === 1, "GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"), {
    substFormat: e,
    coverage: this.parsePointer(z.coverage),
    backtrackCoverage: this.parseList(z.pointer(z.coverage)),
    lookaheadCoverage: this.parseList(z.pointer(z.coverage)),
    substitutes: this.parseUShortList()
  };
};
var Ni = new Array(9);
Ni[1] = function(e) {
  return e.substFormat === 1 ? new Ae.Table("substitutionTable", [
    { name: "substFormat", type: "USHORT", value: 1 },
    { name: "coverage", type: "TABLE", value: new Ae.Coverage(e.coverage) },
    { name: "deltaGlyphID", type: "USHORT", value: e.deltaGlyphId }
  ]) : new Ae.Table("substitutionTable", [
    { name: "substFormat", type: "USHORT", value: 2 },
    { name: "coverage", type: "TABLE", value: new Ae.Coverage(e.coverage) }
  ].concat(Ae.ushortList("substitute", e.substitute)));
};
Ni[2] = function(e) {
  return Se.assert(e.substFormat === 1, "Lookup type 2 substFormat must be 1."), new Ae.Table("substitutionTable", [
    { name: "substFormat", type: "USHORT", value: 1 },
    { name: "coverage", type: "TABLE", value: new Ae.Coverage(e.coverage) }
  ].concat(Ae.tableList("seqSet", e.sequences, function(r) {
    return new Ae.Table("sequenceSetTable", Ae.ushortList("sequence", r));
  })));
};
Ni[3] = function(e) {
  return Se.assert(e.substFormat === 1, "Lookup type 3 substFormat must be 1."), new Ae.Table("substitutionTable", [
    { name: "substFormat", type: "USHORT", value: 1 },
    { name: "coverage", type: "TABLE", value: new Ae.Coverage(e.coverage) }
  ].concat(Ae.tableList("altSet", e.alternateSets, function(r) {
    return new Ae.Table("alternateSetTable", Ae.ushortList("alternate", r));
  })));
};
Ni[4] = function(e) {
  return Se.assert(e.substFormat === 1, "Lookup type 4 substFormat must be 1."), new Ae.Table("substitutionTable", [
    { name: "substFormat", type: "USHORT", value: 1 },
    { name: "coverage", type: "TABLE", value: new Ae.Coverage(e.coverage) }
  ].concat(Ae.tableList("ligSet", e.ligatureSets, function(r) {
    return new Ae.Table("ligatureSetTable", Ae.tableList("ligature", r, function(n) {
      return new Ae.Table(
        "ligatureTable",
        [{ name: "ligGlyph", type: "USHORT", value: n.ligGlyph }].concat(Ae.ushortList("component", n.components, n.components.length + 1))
      );
    }));
  })));
};
Ni[6] = function(e) {
  if (e.substFormat === 1) {
    var r = new Ae.Table("chainContextTable", [
      { name: "substFormat", type: "USHORT", value: e.substFormat },
      { name: "coverage", type: "TABLE", value: new Ae.Coverage(e.coverage) }
    ].concat(Ae.tableList("chainRuleSet", e.chainRuleSets, function(s) {
      return new Ae.Table("chainRuleSetTable", Ae.tableList("chainRule", s, function(a) {
        var o = Ae.ushortList("backtrackGlyph", a.backtrack, a.backtrack.length).concat(Ae.ushortList("inputGlyph", a.input, a.input.length + 1)).concat(Ae.ushortList("lookaheadGlyph", a.lookahead, a.lookahead.length)).concat(Ae.ushortList("substitution", [], a.lookupRecords.length));
        return a.lookupRecords.forEach(function(l, c) {
          o = o.concat({ name: "sequenceIndex" + c, type: "USHORT", value: l.sequenceIndex }).concat({ name: "lookupListIndex" + c, type: "USHORT", value: l.lookupListIndex });
        }), new Ae.Table("chainRuleTable", o);
      }));
    })));
    return r;
  } else if (e.substFormat === 2)
    Se.assert(false, "lookup type 6 format 2 is not yet supported.");
  else if (e.substFormat === 3) {
    var n = [
      { name: "substFormat", type: "USHORT", value: e.substFormat }
    ];
    n.push({ name: "backtrackGlyphCount", type: "USHORT", value: e.backtrackCoverage.length }), e.backtrackCoverage.forEach(function(s, a) {
      n.push({ name: "backtrackCoverage" + a, type: "TABLE", value: new Ae.Coverage(s) });
    }), n.push({ name: "inputGlyphCount", type: "USHORT", value: e.inputCoverage.length }), e.inputCoverage.forEach(function(s, a) {
      n.push({ name: "inputCoverage" + a, type: "TABLE", value: new Ae.Coverage(s) });
    }), n.push({ name: "lookaheadGlyphCount", type: "USHORT", value: e.lookaheadCoverage.length }), e.lookaheadCoverage.forEach(function(s, a) {
      n.push({ name: "lookaheadCoverage" + a, type: "TABLE", value: new Ae.Coverage(s) });
    }), n.push({ name: "substitutionCount", type: "USHORT", value: e.lookupRecords.length }), e.lookupRecords.forEach(function(s, a) {
      n = n.concat({ name: "sequenceIndex" + a, type: "USHORT", value: s.sequenceIndex }).concat({ name: "lookupListIndex" + a, type: "USHORT", value: s.lookupListIndex });
    });
    var i = new Ae.Table("chainContextTable", n);
    return i;
  }
  Se.assert(false, "lookup type 6 format must be 1, 2 or 3.");
};
function Uo(t, e) {
  for (var r = 0, n = t.length - 1; r <= n; ) {
    var i = r + n >>> 1, s = t[i].tag;
    if (s === e)
      return i;
    s < e ? r = i + 1 : n = i - 1;
  }
  return -r - 1;
}
function B3(t, e) {
  for (var r = 0, n = t.length - 1; r <= n; ) {
    var i = r + n >>> 1, s = t[i];
    if (s === e)
      return i;
    s < e ? r = i + 1 : n = i - 1;
  }
  return -r - 1;
}
function b3(t, e) {
  for (var r, n = 0, i = t.length - 1; n <= i; ) {
    var s = n + i >>> 1;
    r = t[s];
    var a = r.start;
    if (a === e)
      return r;
    a < e ? n = s + 1 : i = s - 1;
  }
  if (n > 0)
    return r = t[n - 1], e > r.end ? 0 : r;
}
function _s(t, e) {
  this.font = t, this.tableName = e;
}
_s.prototype = {
  /**
   * Binary search an object by "tag" property
   * @instance
   * @function searchTag
   * @memberof opentype.Layout
   * @param  {Array} arr
   * @param  {string} tag
   * @return {number}
   */
  searchTag: Uo,
  /**
   * Binary search in a list of numbers
   * @instance
   * @function binSearch
   * @memberof opentype.Layout
   * @param  {Array} arr
   * @param  {number} value
   * @return {number}
   */
  binSearch: B3,
  /**
   * Get or create the Layout table (GSUB, GPOS etc).
   * @param  {boolean} create - Whether to create a new one.
   * @return {Object} The GSUB or GPOS table.
   */
  getTable: function(t) {
    var e = this.font.tables[this.tableName];
    return !e && t && (e = this.font.tables[this.tableName] = this.createDefaultTable()), e;
  },
  /**
   * Returns all scripts in the substitution table.
   * @instance
   * @return {Array}
   */
  getScriptNames: function() {
    var t = this.getTable();
    return t ? t.scripts.map(function(e) {
      return e.tag;
    }) : [];
  },
  /**
   * Returns the best bet for a script name.
   * Returns 'DFLT' if it exists.
   * If not, returns 'latn' if it exists.
   * If neither exist, returns undefined.
   */
  getDefaultScriptName: function() {
    var t = this.getTable();
    if (t) {
      for (var e = false, r = 0; r < t.scripts.length; r++) {
        var n = t.scripts[r].tag;
        if (n === "DFLT")
          return n;
        n === "latn" && (e = true);
      }
      if (e)
        return "latn";
    }
  },
  /**
   * Returns all LangSysRecords in the given script.
   * @instance
   * @param {string} [script='DFLT']
   * @param {boolean} create - forces the creation of this script table if it doesn't exist.
   * @return {Object} An object with tag and script properties.
   */
  getScriptTable: function(t, e) {
    var r = this.getTable(e);
    if (r) {
      t = t || "DFLT";
      var n = r.scripts, i = Uo(r.scripts, t);
      if (i >= 0)
        return n[i].script;
      if (e) {
        var s = {
          tag: t,
          script: {
            defaultLangSys: { reserved: 0, reqFeatureIndex: 65535, featureIndexes: [] },
            langSysRecords: []
          }
        };
        return n.splice(-1 - i, 0, s), s.script;
      }
    }
  },
  /**
   * Returns a language system table
   * @instance
   * @param {string} [script='DFLT']
   * @param {string} [language='dlft']
   * @param {boolean} create - forces the creation of this langSysTable if it doesn't exist.
   * @return {Object}
   */
  getLangSysTable: function(t, e, r) {
    var n = this.getScriptTable(t, r);
    if (n) {
      if (!e || e === "dflt" || e === "DFLT")
        return n.defaultLangSys;
      var i = Uo(n.langSysRecords, e);
      if (i >= 0)
        return n.langSysRecords[i].langSys;
      if (r) {
        var s = {
          tag: e,
          langSys: { reserved: 0, reqFeatureIndex: 65535, featureIndexes: [] }
        };
        return n.langSysRecords.splice(-1 - i, 0, s), s.langSys;
      }
    }
  },
  /**
   * Get a specific feature table.
   * @instance
   * @param {string} [script='DFLT']
   * @param {string} [language='dlft']
   * @param {string} feature - One of the codes listed at https://www.microsoft.com/typography/OTSPEC/featurelist.htm
   * @param {boolean} create - forces the creation of the feature table if it doesn't exist.
   * @return {Object}
   */
  getFeatureTable: function(t, e, r, n) {
    var i = this.getLangSysTable(t, e, n);
    if (i) {
      for (var s, a = i.featureIndexes, o = this.font.tables[this.tableName].features, l = 0; l < a.length; l++)
        if (s = o[a[l]], s.tag === r)
          return s.feature;
      if (n) {
        var c = o.length;
        return Se.assert(c === 0 || r >= o[c - 1].tag, "Features must be added in alphabetical order."), s = {
          tag: r,
          feature: { params: 0, lookupListIndexes: [] }
        }, o.push(s), a.push(c), s.feature;
      }
    }
  },
  /**
   * Get the lookup tables of a given type for a script/language/feature.
   * @instance
   * @param {string} [script='DFLT']
   * @param {string} [language='dlft']
   * @param {string} feature - 4-letter feature code
   * @param {number} lookupType - 1 to 9
   * @param {boolean} create - forces the creation of the lookup table if it doesn't exist, with no subtables.
   * @return {Object[]}
   */
  getLookupTables: function(t, e, r, n, i) {
    var s = this.getFeatureTable(t, e, r, i), a = [];
    if (s) {
      for (var o, l = s.lookupListIndexes, c = this.font.tables[this.tableName].lookups, u = 0; u < l.length; u++)
        o = c[l[u]], o.lookupType === n && a.push(o);
      if (a.length === 0 && i) {
        o = {
          lookupType: n,
          lookupFlag: 0,
          subtables: [],
          markFilteringSet: void 0
        };
        var h = c.length;
        return c.push(o), l.push(h), [o];
      }
    }
    return a;
  },
  /**
   * Find a glyph in a class definition table
   * https://docs.microsoft.com/en-us/typography/opentype/spec/chapter2#class-definition-table
   * @param {object} classDefTable - an OpenType Layout class definition table
   * @param {number} glyphIndex - the index of the glyph to find
   * @returns {number} -1 if not found
   */
  getGlyphClass: function(t, e) {
    switch (t.format) {
      case 1:
        return t.startGlyph <= e && e < t.startGlyph + t.classes.length ? t.classes[e - t.startGlyph] : 0;
      case 2:
        var r = b3(t.ranges, e);
        return r ? r.classId : 0;
    }
  },
  /**
   * Find a glyph in a coverage table
   * https://docs.microsoft.com/en-us/typography/opentype/spec/chapter2#coverage-table
   * @param {object} coverageTable - an OpenType Layout coverage table
   * @param {number} glyphIndex - the index of the glyph to find
   * @returns {number} -1 if not found
   */
  getCoverageIndex: function(t, e) {
    switch (t.format) {
      case 1:
        var r = B3(t.glyphs, e);
        return r >= 0 ? r : -1;
      case 2:
        var n = b3(t.ranges, e);
        return n ? n.index + e - n.start : -1;
    }
  },
  /**
   * Returns the list of glyph indexes of a coverage table.
   * Format 1: the list is stored raw
   * Format 2: compact list as range records.
   * @instance
   * @param  {Object} coverageTable
   * @return {Array}
   */
  expandCoverage: function(t) {
    if (t.format === 1)
      return t.glyphs;
    for (var e = [], r = t.ranges, n = 0; n < r.length; n++)
      for (var i = r[n], s = i.start, a = i.end, o = s; o <= a; o++)
        e.push(o);
    return e;
  }
};
function Rs(t) {
  _s.call(this, t, "gpos");
}
Rs.prototype = _s.prototype;
Rs.prototype.init = function() {
  var t = this.getDefaultScriptName();
  this.defaultKerningTables = this.getKerningTables(t);
};
Rs.prototype.getKerningValue = function(t, e, r) {
  for (var n = 0; n < t.length; n++)
    for (var i = t[n].subtables, s = 0; s < i.length; s++) {
      var a = i[s], o = this.getCoverageIndex(a.coverage, e);
      if (!(o < 0))
        switch (a.posFormat) {
          case 1:
            for (var l = a.pairSets[o], c = 0; c < l.length; c++) {
              var u = l[c];
              if (u.secondGlyph === r)
                return u.value1 && u.value1.xAdvance || 0;
            }
            break;
          case 2:
            var h = this.getGlyphClass(a.classDef1, e), A = this.getGlyphClass(a.classDef2, r), f = a.classRecords[h][A];
            return f.value1 && f.value1.xAdvance || 0;
        }
    }
  return 0;
};
Rs.prototype.getKerningTables = function(t, e) {
  if (this.font.tables.gpos)
    return this.getLookupTables(t, e, "kern", 2);
};
function Jt(t) {
  _s.call(this, t, "gsub");
}
function V1(t, e) {
  var r = t.length;
  if (r !== e.length)
    return false;
  for (var n = 0; n < r; n++)
    if (t[n] !== e[n])
      return false;
  return true;
}
function Tc(t, e, r) {
  for (var n = t.subtables, i = 0; i < n.length; i++) {
    var s = n[i];
    if (s.substFormat === e)
      return s;
  }
  if (r)
    return n.push(r), r;
}
Jt.prototype = _s.prototype;
Jt.prototype.createDefaultTable = function() {
  return {
    version: 1,
    scripts: [{
      tag: "DFLT",
      script: {
        defaultLangSys: { reserved: 0, reqFeatureIndex: 65535, featureIndexes: [] },
        langSysRecords: []
      }
    }],
    features: [],
    lookups: []
  };
};
Jt.prototype.getSingle = function(t, e, r) {
  for (var n = [], i = this.getLookupTables(e, r, t, 1), s = 0; s < i.length; s++)
    for (var a = i[s].subtables, o = 0; o < a.length; o++) {
      var l = a[o], c = this.expandCoverage(l.coverage), u = void 0;
      if (l.substFormat === 1) {
        var h = l.deltaGlyphId;
        for (u = 0; u < c.length; u++) {
          var A = c[u];
          n.push({ sub: A, by: A + h });
        }
      } else {
        var f = l.substitute;
        for (u = 0; u < c.length; u++)
          n.push({ sub: c[u], by: f[u] });
      }
    }
  return n;
};
Jt.prototype.getMultiple = function(t, e, r) {
  for (var n = [], i = this.getLookupTables(e, r, t, 2), s = 0; s < i.length; s++)
    for (var a = i[s].subtables, o = 0; o < a.length; o++) {
      var l = a[o], c = this.expandCoverage(l.coverage), u = void 0;
      for (u = 0; u < c.length; u++) {
        var h = c[u], A = l.sequences[u];
        n.push({ sub: h, by: A });
      }
    }
  return n;
};
Jt.prototype.getAlternates = function(t, e, r) {
  for (var n = [], i = this.getLookupTables(e, r, t, 3), s = 0; s < i.length; s++)
    for (var a = i[s].subtables, o = 0; o < a.length; o++)
      for (var l = a[o], c = this.expandCoverage(l.coverage), u = l.alternateSets, h = 0; h < c.length; h++)
        n.push({ sub: c[h], by: u[h] });
  return n;
};
Jt.prototype.getLigatures = function(t, e, r) {
  for (var n = [], i = this.getLookupTables(e, r, t, 4), s = 0; s < i.length; s++)
    for (var a = i[s].subtables, o = 0; o < a.length; o++)
      for (var l = a[o], c = this.expandCoverage(l.coverage), u = l.ligatureSets, h = 0; h < c.length; h++)
        for (var A = c[h], f = u[h], d = 0; d < f.length; d++) {
          var v = f[d];
          n.push({
            sub: [A].concat(v.components),
            by: v.ligGlyph
          });
        }
  return n;
};
Jt.prototype.addSingle = function(t, e, r, n) {
  var i = this.getLookupTables(r, n, t, 1, true)[0], s = Tc(i, 2, {
    // lookup type 1 subtable, format 2, coverage format 1
    substFormat: 2,
    coverage: { format: 1, glyphs: [] },
    substitute: []
  });
  Se.assert(s.coverage.format === 1, "Single: unable to modify coverage table format " + s.coverage.format);
  var a = e.sub, o = this.binSearch(s.coverage.glyphs, a);
  o < 0 && (o = -1 - o, s.coverage.glyphs.splice(o, 0, a), s.substitute.splice(o, 0, 0)), s.substitute[o] = e.by;
};
Jt.prototype.addMultiple = function(t, e, r, n) {
  Se.assert(e.by instanceof Array && e.by.length > 1, 'Multiple: "by" must be an array of two or more ids');
  var i = this.getLookupTables(r, n, t, 2, true)[0], s = Tc(i, 1, {
    // lookup type 2 subtable, format 1, coverage format 1
    substFormat: 1,
    coverage: { format: 1, glyphs: [] },
    sequences: []
  });
  Se.assert(s.coverage.format === 1, "Multiple: unable to modify coverage table format " + s.coverage.format);
  var a = e.sub, o = this.binSearch(s.coverage.glyphs, a);
  o < 0 && (o = -1 - o, s.coverage.glyphs.splice(o, 0, a), s.sequences.splice(o, 0, 0)), s.sequences[o] = e.by;
};
Jt.prototype.addAlternate = function(t, e, r, n) {
  var i = this.getLookupTables(r, n, t, 3, true)[0], s = Tc(i, 1, {
    // lookup type 3 subtable, format 1, coverage format 1
    substFormat: 1,
    coverage: { format: 1, glyphs: [] },
    alternateSets: []
  });
  Se.assert(s.coverage.format === 1, "Alternate: unable to modify coverage table format " + s.coverage.format);
  var a = e.sub, o = this.binSearch(s.coverage.glyphs, a);
  o < 0 && (o = -1 - o, s.coverage.glyphs.splice(o, 0, a), s.alternateSets.splice(o, 0, 0)), s.alternateSets[o] = e.by;
};
Jt.prototype.addLigature = function(t, e, r, n) {
  var i = this.getLookupTables(r, n, t, 4, true)[0], s = i.subtables[0];
  s || (s = {
    // lookup type 4 subtable, format 1, coverage format 1
    substFormat: 1,
    coverage: { format: 1, glyphs: [] },
    ligatureSets: []
  }, i.subtables[0] = s), Se.assert(s.coverage.format === 1, "Ligature: unable to modify coverage table format " + s.coverage.format);
  var a = e.sub[0], o = e.sub.slice(1), l = {
    ligGlyph: e.by,
    components: o
  }, c = this.binSearch(s.coverage.glyphs, a);
  if (c >= 0) {
    for (var u = s.ligatureSets[c], h = 0; h < u.length; h++)
      if (V1(u[h].components, o))
        return;
    u.push(l);
  } else
    c = -1 - c, s.coverage.glyphs.splice(c, 0, a), s.ligatureSets.splice(c, 0, [l]);
};
Jt.prototype.getFeature = function(t, e, r) {
  if (/ss\d\d/.test(t))
    return this.getSingle(t, e, r);
  switch (t) {
    case "aalt":
    case "salt":
      return this.getSingle(t, e, r).concat(this.getAlternates(t, e, r));
    case "dlig":
    case "liga":
    case "rlig":
      return this.getLigatures(t, e, r);
    case "ccmp":
      return this.getMultiple(t, e, r).concat(this.getLigatures(t, e, r));
    case "stch":
      return this.getMultiple(t, e, r);
  }
};
Jt.prototype.add = function(t, e, r, n) {
  if (/ss\d\d/.test(t))
    return this.addSingle(t, e, r, n);
  switch (t) {
    case "aalt":
    case "salt":
      return typeof e.by == "number" ? this.addSingle(t, e, r, n) : this.addAlternate(t, e, r, n);
    case "dlig":
    case "liga":
    case "rlig":
      return this.addLigature(t, e, r, n);
    case "ccmp":
      return e.by instanceof Array ? this.addMultiple(t, e, r, n) : this.addLigature(t, e, r, n);
  }
};
var Wh, li;
function $1(t) {
  return t;
}
function Kh(t) {
  return Math.sign(t) * Math.round(Math.abs(t));
}
function Z1(t) {
  return Math.sign(t) * Math.round(Math.abs(t * 2)) / 2;
}
function J1(t) {
  return Math.sign(t) * (Math.round(Math.abs(t) + 0.5) - 0.5);
}
function ep(t) {
  return Math.sign(t) * Math.ceil(Math.abs(t));
}
function tp(t) {
  return Math.sign(t) * Math.floor(Math.abs(t));
}
var Xh = function(t) {
  var e = this.srPeriod, r = this.srPhase, n = this.srThreshold, i = 1;
  return t < 0 && (t = -t, i = -1), t += n - r, t = Math.trunc(t / e) * e, t += r, t < 0 ? r * i : t * i;
}, Nr = {
  x: 1,
  y: 0,
  axis: "x",
  // Gets the projected distance between two points.
  // o1/o2 ... if true, respective original position is used.
  distance: function(t, e, r, n) {
    return (r ? t.xo : t.x) - (n ? e.xo : e.x);
  },
  // Moves point p so the moved position has the same relative
  // position to the moved positions of rp1 and rp2 than the
  // original positions had.
  //
  // See APPENDIX on INTERPOLATE at the bottom of this file.
  interpolate: function(t, e, r, n) {
    var i, s, a, o, l, c, u;
    if (!n || n === this) {
      if (i = t.xo - e.xo, s = t.xo - r.xo, l = e.x - e.xo, c = r.x - r.xo, a = Math.abs(i), o = Math.abs(s), u = a + o, u === 0) {
        t.x = t.xo + (l + c) / 2;
        return;
      }
      t.x = t.xo + (l * o + c * a) / u;
      return;
    }
    if (i = n.distance(t, e, true, true), s = n.distance(t, r, true, true), l = n.distance(e, e, false, true), c = n.distance(r, r, false, true), a = Math.abs(i), o = Math.abs(s), u = a + o, u === 0) {
      Nr.setRelative(t, t, (l + c) / 2, n, true);
      return;
    }
    Nr.setRelative(t, t, (l * o + c * a) / u, n, true);
  },
  // Slope of line normal to this
  normalSlope: Number.NEGATIVE_INFINITY,
  // Sets the point 'p' relative to point 'rp'
  // by the distance 'd'.
  //
  // See APPENDIX on SETRELATIVE at the bottom of this file.
  //
  // p   ... point to set
  // rp  ... reference point
  // d   ... distance on projection vector
  // pv  ... projection vector (undefined = this)
  // org ... if true, uses the original position of rp as reference.
  setRelative: function(t, e, r, n, i) {
    if (!n || n === this) {
      t.x = (i ? e.xo : e.x) + r;
      return;
    }
    var s = i ? e.xo : e.x, a = i ? e.yo : e.y, o = s + r * n.x, l = a + r * n.y;
    t.x = o + (t.y - l) / n.normalSlope;
  },
  // Slope of vector line.
  slope: 0,
  // Touches the point p.
  touch: function(t) {
    t.xTouched = true;
  },
  // Tests if a point p is touched.
  touched: function(t) {
    return t.xTouched;
  },
  // Untouches the point p.
  untouch: function(t) {
    t.xTouched = false;
  }
}, nn = {
  x: 0,
  y: 1,
  axis: "y",
  // Gets the projected distance between two points.
  // o1/o2 ... if true, respective original position is used.
  distance: function(t, e, r, n) {
    return (r ? t.yo : t.y) - (n ? e.yo : e.y);
  },
  // Moves point p so the moved position has the same relative
  // position to the moved positions of rp1 and rp2 than the
  // original positions had.
  //
  // See APPENDIX on INTERPOLATE at the bottom of this file.
  interpolate: function(t, e, r, n) {
    var i, s, a, o, l, c, u;
    if (!n || n === this) {
      if (i = t.yo - e.yo, s = t.yo - r.yo, l = e.y - e.yo, c = r.y - r.yo, a = Math.abs(i), o = Math.abs(s), u = a + o, u === 0) {
        t.y = t.yo + (l + c) / 2;
        return;
      }
      t.y = t.yo + (l * o + c * a) / u;
      return;
    }
    if (i = n.distance(t, e, true, true), s = n.distance(t, r, true, true), l = n.distance(e, e, false, true), c = n.distance(r, r, false, true), a = Math.abs(i), o = Math.abs(s), u = a + o, u === 0) {
      nn.setRelative(t, t, (l + c) / 2, n, true);
      return;
    }
    nn.setRelative(t, t, (l * o + c * a) / u, n, true);
  },
  // Slope of line normal to this.
  normalSlope: 0,
  // Sets the point 'p' relative to point 'rp'
  // by the distance 'd'
  //
  // See APPENDIX on SETRELATIVE at the bottom of this file.
  //
  // p   ... point to set
  // rp  ... reference point
  // d   ... distance on projection vector
  // pv  ... projection vector (undefined = this)
  // org ... if true, uses the original position of rp as reference.
  setRelative: function(t, e, r, n, i) {
    if (!n || n === this) {
      t.y = (i ? e.yo : e.y) + r;
      return;
    }
    var s = i ? e.xo : e.x, a = i ? e.yo : e.y, o = s + r * n.x, l = a + r * n.y;
    t.y = l + n.normalSlope * (t.x - o);
  },
  // Slope of vector line.
  slope: Number.POSITIVE_INFINITY,
  // Touches the point p.
  touch: function(t) {
    t.yTouched = true;
  },
  // Tests if a point p is touched.
  touched: function(t) {
    return t.yTouched;
  },
  // Untouches the point p.
  untouch: function(t) {
    t.yTouched = false;
  }
};
Object.freeze(Nr);
Object.freeze(nn);
function Ms(t, e) {
  this.x = t, this.y = e, this.axis = void 0, this.slope = e / t, this.normalSlope = -t / e, Object.freeze(this);
}
Ms.prototype.distance = function(t, e, r, n) {
  return this.x * Nr.distance(t, e, r, n) + this.y * nn.distance(t, e, r, n);
};
Ms.prototype.interpolate = function(t, e, r, n) {
  var i, s, a, o, l, c, u;
  if (a = n.distance(t, e, true, true), o = n.distance(t, r, true, true), i = n.distance(e, e, false, true), s = n.distance(r, r, false, true), l = Math.abs(a), c = Math.abs(o), u = l + c, u === 0) {
    this.setRelative(t, t, (i + s) / 2, n, true);
    return;
  }
  this.setRelative(t, t, (i * c + s * l) / u, n, true);
};
Ms.prototype.setRelative = function(t, e, r, n, i) {
  n = n || this;
  var s = i ? e.xo : e.x, a = i ? e.yo : e.y, o = s + r * n.x, l = a + r * n.y, c = n.normalSlope, u = this.slope, h = t.x, A = t.y;
  t.x = (u * h - c * o + l - A) / (u - c), t.y = u * (t.x - h) + A;
};
Ms.prototype.touch = function(t) {
  t.xTouched = true, t.yTouched = true;
};
function Ds(t, e) {
  var r = Math.sqrt(t * t + e * e);
  return t /= r, e /= r, t === 1 && e === 0 ? Nr : t === 0 && e === 1 ? nn : new Ms(t, e);
}
function an(t, e, r, n) {
  this.x = this.xo = Math.round(t * 64) / 64, this.y = this.yo = Math.round(e * 64) / 64, this.lastPointOfContour = r, this.onCurve = n, this.prevPointOnContour = void 0, this.nextPointOnContour = void 0, this.xTouched = false, this.yTouched = false, Object.preventExtensions(this);
}
an.prototype.nextTouched = function(t) {
  for (var e = this.nextPointOnContour; !t.touched(e) && e !== this; )
    e = e.nextPointOnContour;
  return e;
};
an.prototype.prevTouched = function(t) {
  for (var e = this.prevPointOnContour; !t.touched(e) && e !== this; )
    e = e.prevPointOnContour;
  return e;
};
var ys = Object.freeze(new an(0, 0));
li = function(t) {
  var e = t.prog;
  if (e) {
    var r = e.length, n;
    for (t.ip = 0; t.ip < r; t.ip++) {
      if (exports.DEBUG && t.step++, n = Wh[e[t.ip]], !n)
        throw new Error(
          "unknown instruction: 0x" + Number(e[t.ip]).toString(16)
        );
      n(t);
    }
  }
};
function no(t) {
  for (var e = t.tZone = new Array(t.gZone.length), r = 0; r < e.length; r++)
    e[r] = new an(0, 0);
}
function $h(t, e) {
  var r = t.prog, n = t.ip, i = 1, s;
  do
    if (s = r[++n], s === 88)
      i++;
    else if (s === 89)
      i--;
    else if (s === 64)
      n += r[n + 1] + 1;
    else if (s === 65)
      n += 2 * r[n + 1] + 1;
    else if (s >= 176 && s <= 183)
      n += s - 176 + 1;
    else if (s >= 184 && s <= 191)
      n += (s - 184 + 1) * 2;
    else if (e && i === 1 && s === 27)
      break;
  while (i > 0);
  t.ip = n;
}
function R3(t, e) {
  exports.DEBUG && console.log(e.step, "SVTCA[" + t.axis + "]"), e.fv = e.pv = e.dpv = t;
}
function M3(t, e) {
  exports.DEBUG && console.log(e.step, "SPVTCA[" + t.axis + "]"), e.pv = e.dpv = t;
}
function D3(t, e) {
  exports.DEBUG && console.log(e.step, "SFVTCA[" + t.axis + "]"), e.fv = t;
}
function k3(t, e) {
  var r = e.stack, n = r.pop(), i = r.pop(), s = e.z2[n], a = e.z1[i];
  exports.DEBUG && console.log("SPVTL[" + t + "]", n, i);
  var o, l;
  t ? (o = s.y - a.y, l = a.x - s.x) : (o = a.x - s.x, l = a.y - s.y), e.pv = e.dpv = Ds(o, l);
}
function F3(t, e) {
  var r = e.stack, n = r.pop(), i = r.pop(), s = e.z2[n], a = e.z1[i];
  exports.DEBUG && console.log("SFVTL[" + t + "]", n, i);
  var o, l;
  t ? (o = s.y - a.y, l = a.x - s.x) : (o = a.x - s.x, l = a.y - s.y), e.fv = Ds(o, l);
}
function np(t) {
  var e = t.stack, r = e.pop(), n = e.pop();
  exports.DEBUG && console.log(t.step, "SPVFS[]", r, n), t.pv = t.dpv = Ds(n, r);
}
function ip(t) {
  var e = t.stack, r = e.pop(), n = e.pop();
  exports.DEBUG && console.log(t.step, "SPVFS[]", r, n), t.fv = Ds(n, r);
}
function sp(t) {
  var e = t.stack, r = t.pv;
  exports.DEBUG && console.log(t.step, "GPV[]"), e.push(r.x * 16384), e.push(r.y * 16384);
}
function ap(t) {
  var e = t.stack, r = t.fv;
  exports.DEBUG && console.log(t.step, "GFV[]"), e.push(r.x * 16384), e.push(r.y * 16384);
}
function op(t) {
  t.fv = t.pv, exports.DEBUG && console.log(t.step, "SFVTPV[]");
}
function lp(t) {
  var e = t.stack, r = e.pop(), n = e.pop(), i = e.pop(), s = e.pop(), a = e.pop(), o = t.z0, l = t.z1, c = o[r], u = o[n], h = l[i], A = l[s], f = t.z2[a];
  exports.DEBUG && console.log("ISECT[], ", r, n, i, s, a);
  var d = c.x, v = c.y, m = u.x, E = u.y, y = h.x, p = h.y, g = A.x, C = A.y, S = (d - m) * (p - C) - (v - E) * (y - g), x = d * E - v * m, T = y * C - p * g;
  f.x = (x * (y - g) - T * (d - m)) / S, f.y = (x * (p - C) - T * (v - E)) / S;
}
function cp(t) {
  t.rp0 = t.stack.pop(), exports.DEBUG && console.log(t.step, "SRP0[]", t.rp0);
}
function up(t) {
  t.rp1 = t.stack.pop(), exports.DEBUG && console.log(t.step, "SRP1[]", t.rp1);
}
function hp(t) {
  t.rp2 = t.stack.pop(), exports.DEBUG && console.log(t.step, "SRP2[]", t.rp2);
}
function Ap(t) {
  var e = t.stack.pop();
  switch (exports.DEBUG && console.log(t.step, "SZP0[]", e), t.zp0 = e, e) {
    case 0:
      t.tZone || no(t), t.z0 = t.tZone;
      break;
    case 1:
      t.z0 = t.gZone;
      break;
    default:
      throw new Error("Invalid zone pointer");
  }
}
function fp(t) {
  var e = t.stack.pop();
  switch (exports.DEBUG && console.log(t.step, "SZP1[]", e), t.zp1 = e, e) {
    case 0:
      t.tZone || no(t), t.z1 = t.tZone;
      break;
    case 1:
      t.z1 = t.gZone;
      break;
    default:
      throw new Error("Invalid zone pointer");
  }
}
function pp(t) {
  var e = t.stack.pop();
  switch (exports.DEBUG && console.log(t.step, "SZP2[]", e), t.zp2 = e, e) {
    case 0:
      t.tZone || no(t), t.z2 = t.tZone;
      break;
    case 1:
      t.z2 = t.gZone;
      break;
    default:
      throw new Error("Invalid zone pointer");
  }
}
function dp(t) {
  var e = t.stack.pop();
  switch (exports.DEBUG && console.log(t.step, "SZPS[]", e), t.zp0 = t.zp1 = t.zp2 = e, e) {
    case 0:
      t.tZone || no(t), t.z0 = t.z1 = t.z2 = t.tZone;
      break;
    case 1:
      t.z0 = t.z1 = t.z2 = t.gZone;
      break;
    default:
      throw new Error("Invalid zone pointer");
  }
}
function gp(t) {
  t.loop = t.stack.pop(), exports.DEBUG && console.log(t.step, "SLOOP[]", t.loop);
}
function mp(t) {
  exports.DEBUG && console.log(t.step, "RTG[]"), t.round = Kh;
}
function vp(t) {
  exports.DEBUG && console.log(t.step, "RTHG[]"), t.round = J1;
}
function yp(t) {
  var e = t.stack.pop();
  exports.DEBUG && console.log(t.step, "SMD[]", e), t.minDis = e / 64;
}
function Ep(t) {
  exports.DEBUG && console.log(t.step, "ELSE[]"), $h(t, false);
}
function Ip(t) {
  var e = t.stack.pop();
  exports.DEBUG && console.log(t.step, "JMPR[]", e), t.ip += e - 1;
}
function Cp(t) {
  var e = t.stack.pop();
  exports.DEBUG && console.log(t.step, "SCVTCI[]", e), t.cvCutIn = e / 64;
}
function xp(t) {
  var e = t.stack;
  exports.DEBUG && console.log(t.step, "DUP[]"), e.push(e[e.length - 1]);
}
function Ho(t) {
  exports.DEBUG && console.log(t.step, "POP[]"), t.stack.pop();
}
function Tp(t) {
  exports.DEBUG && console.log(t.step, "CLEAR[]"), t.stack.length = 0;
}
function Sp(t) {
  var e = t.stack, r = e.pop(), n = e.pop();
  exports.DEBUG && console.log(t.step, "SWAP[]"), e.push(r), e.push(n);
}
function wp(t) {
  var e = t.stack;
  exports.DEBUG && console.log(t.step, "DEPTH[]"), e.push(e.length);
}
function Bp(t) {
  var e = t.stack, r = e.pop(), n = e.pop();
  exports.DEBUG && console.log(t.step, "LOOPCALL[]", r, n);
  var i = t.ip, s = t.prog;
  t.prog = t.funcs[r];
  for (var a = 0; a < n; a++)
    li(t), exports.DEBUG && console.log(
      ++t.step,
      a + 1 < n ? "next loopcall" : "done loopcall",
      a
    );
  t.ip = i, t.prog = s;
}
function bp(t) {
  var e = t.stack.pop();
  exports.DEBUG && console.log(t.step, "CALL[]", e);
  var r = t.ip, n = t.prog;
  t.prog = t.funcs[e], li(t), t.ip = r, t.prog = n, exports.DEBUG && console.log(++t.step, "returning from", e);
}
function _p(t) {
  var e = t.stack, r = e.pop();
  exports.DEBUG && console.log(t.step, "CINDEX[]", r), e.push(e[e.length - r]);
}
function Rp(t) {
  var e = t.stack, r = e.pop();
  exports.DEBUG && console.log(t.step, "MINDEX[]", r), e.push(e.splice(e.length - r, 1)[0]);
}
function Mp(t) {
  if (t.env !== "fpgm")
    throw new Error("FDEF not allowed here");
  var e = t.stack, r = t.prog, n = t.ip, i = e.pop(), s = n;
  for (exports.DEBUG && console.log(t.step, "FDEF[]", i); r[++n] !== 45; )
    ;
  t.ip = n, t.funcs[i] = r.slice(s + 1, n);
}
function L3(t, e) {
  var r = e.stack.pop(), n = e.z0[r], i = e.fv, s = e.pv;
  exports.DEBUG && console.log(e.step, "MDAP[" + t + "]", r);
  var a = s.distance(n, ys);
  t && (a = e.round(a)), i.setRelative(n, ys, a, s), i.touch(n), e.rp0 = e.rp1 = r;
}
function O3(t, e) {
  var r = e.z2, n = r.length - 2, i, s, a;
  exports.DEBUG && console.log(e.step, "IUP[" + t.axis + "]");
  for (var o = 0; o < n; o++)
    i = r[o], !t.touched(i) && (s = i.prevTouched(t), s !== i && (a = i.nextTouched(t), s === a && t.setRelative(i, i, t.distance(s, s, false, true), t, true), t.interpolate(i, s, a, t)));
}
function P3(t, e) {
  for (var r = e.stack, n = t ? e.rp1 : e.rp2, i = (t ? e.z0 : e.z1)[n], s = e.fv, a = e.pv, o = e.loop, l = e.z2; o--; ) {
    var c = r.pop(), u = l[c], h = a.distance(i, i, false, true);
    s.setRelative(u, u, h, a), s.touch(u), exports.DEBUG && console.log(
      e.step,
      (e.loop > 1 ? "loop " + (e.loop - o) + ": " : "") + "SHP[" + (t ? "rp1" : "rp2") + "]",
      c
    );
  }
  e.loop = 1;
}
function Q3(t, e) {
  var r = e.stack, n = t ? e.rp1 : e.rp2, i = (t ? e.z0 : e.z1)[n], s = e.fv, a = e.pv, o = r.pop(), l = e.z2[e.contours[o]], c = l;
  exports.DEBUG && console.log(e.step, "SHC[" + t + "]", o);
  var u = a.distance(i, i, false, true);
  do
    c !== i && s.setRelative(c, c, u, a), c = c.nextPointOnContour;
  while (c !== l);
}
function N3(t, e) {
  var r = e.stack, n = t ? e.rp1 : e.rp2, i = (t ? e.z0 : e.z1)[n], s = e.fv, a = e.pv, o = r.pop();
  exports.DEBUG && console.log(e.step, "SHZ[" + t + "]", o);
  var l;
  switch (o) {
    case 0:
      l = e.tZone;
      break;
    case 1:
      l = e.gZone;
      break;
    default:
      throw new Error("Invalid zone");
  }
  for (var c, u = a.distance(i, i, false, true), h = l.length - 2, A = 0; A < h; A++)
    c = l[A], s.setRelative(c, c, u, a);
}
function Dp(t) {
  for (var e = t.stack, r = t.loop, n = t.fv, i = e.pop() / 64, s = t.z2; r--; ) {
    var a = e.pop(), o = s[a];
    exports.DEBUG && console.log(
      t.step,
      (t.loop > 1 ? "loop " + (t.loop - r) + ": " : "") + "SHPIX[]",
      a,
      i
    ), n.setRelative(o, o, i), n.touch(o);
  }
  t.loop = 1;
}
function kp(t) {
  for (var e = t.stack, r = t.rp1, n = t.rp2, i = t.loop, s = t.z0[r], a = t.z1[n], o = t.fv, l = t.dpv, c = t.z2; i--; ) {
    var u = e.pop(), h = c[u];
    exports.DEBUG && console.log(
      t.step,
      (t.loop > 1 ? "loop " + (t.loop - i) + ": " : "") + "IP[]",
      u,
      r,
      "<->",
      n
    ), o.interpolate(h, s, a, l), o.touch(h);
  }
  t.loop = 1;
}
function U3(t, e) {
  var r = e.stack, n = r.pop() / 64, i = r.pop(), s = e.z1[i], a = e.z0[e.rp0], o = e.fv, l = e.pv;
  o.setRelative(s, a, n, l), o.touch(s), exports.DEBUG && console.log(e.step, "MSIRP[" + t + "]", n, i), e.rp1 = e.rp0, e.rp2 = i, t && (e.rp0 = i);
}
function Fp(t) {
  for (var e = t.stack, r = t.rp0, n = t.z0[r], i = t.loop, s = t.fv, a = t.pv, o = t.z1; i--; ) {
    var l = e.pop(), c = o[l];
    exports.DEBUG && console.log(
      t.step,
      (t.loop > 1 ? "loop " + (t.loop - i) + ": " : "") + "ALIGNRP[]",
      l
    ), s.setRelative(c, n, 0, a), s.touch(c);
  }
  t.loop = 1;
}
function Lp(t) {
  exports.DEBUG && console.log(t.step, "RTDG[]"), t.round = Z1;
}
function G3(t, e) {
  var r = e.stack, n = r.pop(), i = r.pop(), s = e.z0[i], a = e.fv, o = e.pv, l = e.cvt[n];
  exports.DEBUG && console.log(
    e.step,
    "MIAP[" + t + "]",
    n,
    "(",
    l,
    ")",
    i
  );
  var c = o.distance(s, ys);
  t && (Math.abs(c - l) < e.cvCutIn && (c = l), c = e.round(c)), a.setRelative(s, ys, c, o), e.zp0 === 0 && (s.xo = s.x, s.yo = s.y), a.touch(s), e.rp0 = e.rp1 = i;
}
function Op(t) {
  var e = t.prog, r = t.ip, n = t.stack, i = e[++r];
  exports.DEBUG && console.log(t.step, "NPUSHB[]", i);
  for (var s = 0; s < i; s++)
    n.push(e[++r]);
  t.ip = r;
}
function Pp(t) {
  var e = t.ip, r = t.prog, n = t.stack, i = r[++e];
  exports.DEBUG && console.log(t.step, "NPUSHW[]", i);
  for (var s = 0; s < i; s++) {
    var a = r[++e] << 8 | r[++e];
    a & 32768 && (a = -((a ^ 65535) + 1)), n.push(a);
  }
  t.ip = e;
}
function Qp(t) {
  var e = t.stack, r = t.store;
  r || (r = t.store = []);
  var n = e.pop(), i = e.pop();
  exports.DEBUG && console.log(t.step, "WS", n, i), r[i] = n;
}
function Np(t) {
  var e = t.stack, r = t.store, n = e.pop();
  exports.DEBUG && console.log(t.step, "RS", n);
  var i = r && r[n] || 0;
  e.push(i);
}
function Up(t) {
  var e = t.stack, r = e.pop(), n = e.pop();
  exports.DEBUG && console.log(t.step, "WCVTP", r, n), t.cvt[n] = r / 64;
}
function Gp(t) {
  var e = t.stack, r = e.pop();
  exports.DEBUG && console.log(t.step, "RCVT", r), e.push(t.cvt[r] * 64);
}
function H3(t, e) {
  var r = e.stack, n = r.pop(), i = e.z2[n];
  exports.DEBUG && console.log(e.step, "GC[" + t + "]", n), r.push(e.dpv.distance(i, ys, t, false) * 64);
}
function V3(t, e) {
  var r = e.stack, n = r.pop(), i = r.pop(), s = e.z1[n], a = e.z0[i], o = e.dpv.distance(a, s, t, t);
  exports.DEBUG && console.log(e.step, "MD[" + t + "]", n, i, "->", o), e.stack.push(Math.round(o * 64));
}
function Hp(t) {
  exports.DEBUG && console.log(t.step, "MPPEM[]"), t.stack.push(t.ppem);
}
function Vp(t) {
  exports.DEBUG && console.log(t.step, "FLIPON[]"), t.autoFlip = true;
}
function zp(t) {
  var e = t.stack, r = e.pop(), n = e.pop();
  exports.DEBUG && console.log(t.step, "LT[]", r, n), e.push(n < r ? 1 : 0);
}
function Yp(t) {
  var e = t.stack, r = e.pop(), n = e.pop();
  exports.DEBUG && console.log(t.step, "LTEQ[]", r, n), e.push(n <= r ? 1 : 0);
}
function Wp(t) {
  var e = t.stack, r = e.pop(), n = e.pop();
  exports.DEBUG && console.log(t.step, "GT[]", r, n), e.push(n > r ? 1 : 0);
}
function jp(t) {
  var e = t.stack, r = e.pop(), n = e.pop();
  exports.DEBUG && console.log(t.step, "GTEQ[]", r, n), e.push(n >= r ? 1 : 0);
}
function qp(t) {
  var e = t.stack, r = e.pop(), n = e.pop();
  exports.DEBUG && console.log(t.step, "EQ[]", r, n), e.push(r === n ? 1 : 0);
}
function Kp(t) {
  var e = t.stack, r = e.pop(), n = e.pop();
  exports.DEBUG && console.log(t.step, "NEQ[]", r, n), e.push(r !== n ? 1 : 0);
}
function Xp(t) {
  var e = t.stack, r = e.pop();
  exports.DEBUG && console.log(t.step, "ODD[]", r), e.push(Math.trunc(r) % 2 ? 1 : 0);
}
function $p(t) {
  var e = t.stack, r = e.pop();
  exports.DEBUG && console.log(t.step, "EVEN[]", r), e.push(Math.trunc(r) % 2 ? 0 : 1);
}
function Zp(t) {
  var e = t.stack.pop();
  exports.DEBUG && console.log(t.step, "IF[]", e), e || ($h(t, true), exports.DEBUG && console.log(t.step, "EIF[]"));
}
function Jp(t) {
  exports.DEBUG && console.log(t.step, "EIF[]");
}
function ed(t) {
  var e = t.stack, r = e.pop(), n = e.pop();
  exports.DEBUG && console.log(t.step, "AND[]", r, n), e.push(r && n ? 1 : 0);
}
function td(t) {
  var e = t.stack, r = e.pop(), n = e.pop();
  exports.DEBUG && console.log(t.step, "OR[]", r, n), e.push(r || n ? 1 : 0);
}
function rd(t) {
  var e = t.stack, r = e.pop();
  exports.DEBUG && console.log(t.step, "NOT[]", r), e.push(r ? 0 : 1);
}
function Vo(t, e) {
  var r = e.stack, n = r.pop(), i = e.fv, s = e.pv, a = e.ppem, o = e.deltaBase + (t - 1) * 16, l = e.deltaShift, c = e.z0;
  exports.DEBUG && console.log(e.step, "DELTAP[" + t + "]", n, r);
  for (var u = 0; u < n; u++) {
    var h = r.pop(), A = r.pop(), f = o + ((A & 240) >> 4);
    if (f === a) {
      var d = (A & 15) - 8;
      d >= 0 && d++, exports.DEBUG && console.log(e.step, "DELTAPFIX", h, "by", d * l);
      var v = c[h];
      i.setRelative(v, v, d * l, s);
    }
  }
}
function nd(t) {
  var e = t.stack, r = e.pop();
  exports.DEBUG && console.log(t.step, "SDB[]", r), t.deltaBase = r;
}
function id(t) {
  var e = t.stack, r = e.pop();
  exports.DEBUG && console.log(t.step, "SDS[]", r), t.deltaShift = Math.pow(0.5, r);
}
function sd(t) {
  var e = t.stack, r = e.pop(), n = e.pop();
  exports.DEBUG && console.log(t.step, "ADD[]", r, n), e.push(n + r);
}
function ad(t) {
  var e = t.stack, r = e.pop(), n = e.pop();
  exports.DEBUG && console.log(t.step, "SUB[]", r, n), e.push(n - r);
}
function od(t) {
  var e = t.stack, r = e.pop(), n = e.pop();
  exports.DEBUG && console.log(t.step, "DIV[]", r, n), e.push(n * 64 / r);
}
function ld(t) {
  var e = t.stack, r = e.pop(), n = e.pop();
  exports.DEBUG && console.log(t.step, "MUL[]", r, n), e.push(n * r / 64);
}
function cd(t) {
  var e = t.stack, r = e.pop();
  exports.DEBUG && console.log(t.step, "ABS[]", r), e.push(Math.abs(r));
}
function ud(t) {
  var e = t.stack, r = e.pop();
  exports.DEBUG && console.log(t.step, "NEG[]", r), e.push(-r);
}
function hd(t) {
  var e = t.stack, r = e.pop();
  exports.DEBUG && console.log(t.step, "FLOOR[]", r), e.push(Math.floor(r / 64) * 64);
}
function Ad(t) {
  var e = t.stack, r = e.pop();
  exports.DEBUG && console.log(t.step, "CEILING[]", r), e.push(Math.ceil(r / 64) * 64);
}
function ta(t, e) {
  var r = e.stack, n = r.pop();
  exports.DEBUG && console.log(e.step, "ROUND[]"), r.push(e.round(n / 64) * 64);
}
function fd(t) {
  var e = t.stack, r = e.pop(), n = e.pop();
  exports.DEBUG && console.log(t.step, "WCVTF[]", r, n), t.cvt[n] = r * t.ppem / t.font.unitsPerEm;
}
function zo(t, e) {
  var r = e.stack, n = r.pop(), i = e.ppem, s = e.deltaBase + (t - 1) * 16, a = e.deltaShift;
  exports.DEBUG && console.log(e.step, "DELTAC[" + t + "]", n, r);
  for (var o = 0; o < n; o++) {
    var l = r.pop(), c = r.pop(), u = s + ((c & 240) >> 4);
    if (u === i) {
      var h = (c & 15) - 8;
      h >= 0 && h++;
      var A = h * a;
      exports.DEBUG && console.log(e.step, "DELTACFIX", l, "by", A), e.cvt[l] += A;
    }
  }
}
function pd(t) {
  var e = t.stack.pop();
  exports.DEBUG && console.log(t.step, "SROUND[]", e), t.round = Xh;
  var r;
  switch (e & 192) {
    case 0:
      r = 0.5;
      break;
    case 64:
      r = 1;
      break;
    case 128:
      r = 2;
      break;
    default:
      throw new Error("invalid SROUND value");
  }
  switch (t.srPeriod = r, e & 48) {
    case 0:
      t.srPhase = 0;
      break;
    case 16:
      t.srPhase = 0.25 * r;
      break;
    case 32:
      t.srPhase = 0.5 * r;
      break;
    case 48:
      t.srPhase = 0.75 * r;
      break;
    default:
      throw new Error("invalid SROUND value");
  }
  e &= 15, e === 0 ? t.srThreshold = 0 : t.srThreshold = (e / 8 - 0.5) * r;
}
function dd(t) {
  var e = t.stack.pop();
  exports.DEBUG && console.log(t.step, "S45ROUND[]", e), t.round = Xh;
  var r;
  switch (e & 192) {
    case 0:
      r = Math.sqrt(2) / 2;
      break;
    case 64:
      r = Math.sqrt(2);
      break;
    case 128:
      r = 2 * Math.sqrt(2);
      break;
    default:
      throw new Error("invalid S45ROUND value");
  }
  switch (t.srPeriod = r, e & 48) {
    case 0:
      t.srPhase = 0;
      break;
    case 16:
      t.srPhase = 0.25 * r;
      break;
    case 32:
      t.srPhase = 0.5 * r;
      break;
    case 48:
      t.srPhase = 0.75 * r;
      break;
    default:
      throw new Error("invalid S45ROUND value");
  }
  e &= 15, e === 0 ? t.srThreshold = 0 : t.srThreshold = (e / 8 - 0.5) * r;
}
function gd(t) {
  exports.DEBUG && console.log(t.step, "ROFF[]"), t.round = $1;
}
function md(t) {
  exports.DEBUG && console.log(t.step, "RUTG[]"), t.round = ep;
}
function vd(t) {
  exports.DEBUG && console.log(t.step, "RDTG[]"), t.round = tp;
}
function yd(t) {
  var e = t.stack.pop();
  exports.DEBUG && console.log(t.step, "SCANCTRL[]", e);
}
function z3(t, e) {
  var r = e.stack, n = r.pop(), i = r.pop(), s = e.z2[n], a = e.z1[i];
  exports.DEBUG && console.log(e.step, "SDPVTL[" + t + "]", n, i);
  var o, l;
  t ? (o = s.y - a.y, l = a.x - s.x) : (o = a.x - s.x, l = a.y - s.y), e.dpv = Ds(o, l);
}
function Ed(t) {
  var e = t.stack, r = e.pop(), n = 0;
  exports.DEBUG && console.log(t.step, "GETINFO[]", r), r & 1 && (n = 35), r & 32 && (n |= 4096), e.push(n);
}
function Id(t) {
  var e = t.stack, r = e.pop(), n = e.pop(), i = e.pop();
  exports.DEBUG && console.log(t.step, "ROLL[]"), e.push(n), e.push(r), e.push(i);
}
function Cd(t) {
  var e = t.stack, r = e.pop(), n = e.pop();
  exports.DEBUG && console.log(t.step, "MAX[]", r, n), e.push(Math.max(n, r));
}
function xd(t) {
  var e = t.stack, r = e.pop(), n = e.pop();
  exports.DEBUG && console.log(t.step, "MIN[]", r, n), e.push(Math.min(n, r));
}
function Td(t) {
  var e = t.stack.pop();
  exports.DEBUG && console.log(t.step, "SCANTYPE[]", e);
}
function Sd(t) {
  var e = t.stack.pop(), r = t.stack.pop();
  switch (exports.DEBUG && console.log(t.step, "INSTCTRL[]", e, r), e) {
    case 1:
      t.inhibitGridFit = !!r;
      return;
    case 2:
      t.ignoreCvt = !!r;
      return;
    default:
      throw new Error("invalid INSTCTRL[] selector");
  }
}
function En(t, e) {
  var r = e.stack, n = e.prog, i = e.ip;
  exports.DEBUG && console.log(e.step, "PUSHB[" + t + "]");
  for (var s = 0; s < t; s++)
    r.push(n[++i]);
  e.ip = i;
}
function In(t, e) {
  var r = e.ip, n = e.prog, i = e.stack;
  exports.DEBUG && console.log(e.ip, "PUSHW[" + t + "]");
  for (var s = 0; s < t; s++) {
    var a = n[++r] << 8 | n[++r];
    a & 32768 && (a = -((a ^ 65535) + 1)), i.push(a);
  }
  e.ip = r;
}
function ue(t, e, r, n, i, s) {
  var a = s.stack, o = t && a.pop(), l = a.pop(), c = s.rp0, u = s.z0[c], h = s.z1[l], A = s.minDis, f = s.fv, d = s.dpv, v, m, E, y;
  m = v = d.distance(h, u, true, true), E = m >= 0 ? 1 : -1, m = Math.abs(m), t && (y = s.cvt[o], n && Math.abs(m - y) < s.cvCutIn && (m = y)), r && m < A && (m = A), n && (m = s.round(m)), f.setRelative(h, u, E * m, d), f.touch(h), exports.DEBUG && console.log(
    s.step,
    (t ? "MIRP[" : "MDRP[") + (e ? "M" : "m") + (r ? ">" : "_") + (n ? "R" : "_") + (i === 0 ? "Gr" : i === 1 ? "Bl" : i === 2 ? "Wh" : "") + "]",
    t ? o + "(" + s.cvt[o] + "," + y + ")" : "",
    l,
    "(d =",
    v,
    "->",
    E * m,
    ")"
  ), s.rp1 = s.rp0, s.rp2 = l, e && (s.rp0 = l);
}
Wh = [
  /* 0x00 */
  R3.bind(void 0, nn),
  /* 0x01 */
  R3.bind(void 0, Nr),
  /* 0x02 */
  M3.bind(void 0, nn),
  /* 0x03 */
  M3.bind(void 0, Nr),
  /* 0x04 */
  D3.bind(void 0, nn),
  /* 0x05 */
  D3.bind(void 0, Nr),
  /* 0x06 */
  k3.bind(void 0, 0),
  /* 0x07 */
  k3.bind(void 0, 1),
  /* 0x08 */
  F3.bind(void 0, 0),
  /* 0x09 */
  F3.bind(void 0, 1),
  /* 0x0A */
  np,
  /* 0x0B */
  ip,
  /* 0x0C */
  sp,
  /* 0x0D */
  ap,
  /* 0x0E */
  op,
  /* 0x0F */
  lp,
  /* 0x10 */
  cp,
  /* 0x11 */
  up,
  /* 0x12 */
  hp,
  /* 0x13 */
  Ap,
  /* 0x14 */
  fp,
  /* 0x15 */
  pp,
  /* 0x16 */
  dp,
  /* 0x17 */
  gp,
  /* 0x18 */
  mp,
  /* 0x19 */
  vp,
  /* 0x1A */
  yp,
  /* 0x1B */
  Ep,
  /* 0x1C */
  Ip,
  /* 0x1D */
  Cp,
  /* 0x1E */
  void 0,
  // TODO SSWCI
  /* 0x1F */
  void 0,
  // TODO SSW
  /* 0x20 */
  xp,
  /* 0x21 */
  Ho,
  /* 0x22 */
  Tp,
  /* 0x23 */
  Sp,
  /* 0x24 */
  wp,
  /* 0x25 */
  _p,
  /* 0x26 */
  Rp,
  /* 0x27 */
  void 0,
  // TODO ALIGNPTS
  /* 0x28 */
  void 0,
  /* 0x29 */
  void 0,
  // TODO UTP
  /* 0x2A */
  Bp,
  /* 0x2B */
  bp,
  /* 0x2C */
  Mp,
  /* 0x2D */
  void 0,
  // ENDF (eaten by FDEF)
  /* 0x2E */
  L3.bind(void 0, 0),
  /* 0x2F */
  L3.bind(void 0, 1),
  /* 0x30 */
  O3.bind(void 0, nn),
  /* 0x31 */
  O3.bind(void 0, Nr),
  /* 0x32 */
  P3.bind(void 0, 0),
  /* 0x33 */
  P3.bind(void 0, 1),
  /* 0x34 */
  Q3.bind(void 0, 0),
  /* 0x35 */
  Q3.bind(void 0, 1),
  /* 0x36 */
  N3.bind(void 0, 0),
  /* 0x37 */
  N3.bind(void 0, 1),
  /* 0x38 */
  Dp,
  /* 0x39 */
  kp,
  /* 0x3A */
  U3.bind(void 0, 0),
  /* 0x3B */
  U3.bind(void 0, 1),
  /* 0x3C */
  Fp,
  /* 0x3D */
  Lp,
  /* 0x3E */
  G3.bind(void 0, 0),
  /* 0x3F */
  G3.bind(void 0, 1),
  /* 0x40 */
  Op,
  /* 0x41 */
  Pp,
  /* 0x42 */
  Qp,
  /* 0x43 */
  Np,
  /* 0x44 */
  Up,
  /* 0x45 */
  Gp,
  /* 0x46 */
  H3.bind(void 0, 0),
  /* 0x47 */
  H3.bind(void 0, 1),
  /* 0x48 */
  void 0,
  // TODO SCFS
  /* 0x49 */
  V3.bind(void 0, 0),
  /* 0x4A */
  V3.bind(void 0, 1),
  /* 0x4B */
  Hp,
  /* 0x4C */
  void 0,
  // TODO MPS
  /* 0x4D */
  Vp,
  /* 0x4E */
  void 0,
  // TODO FLIPOFF
  /* 0x4F */
  void 0,
  // TODO DEBUG
  /* 0x50 */
  zp,
  /* 0x51 */
  Yp,
  /* 0x52 */
  Wp,
  /* 0x53 */
  jp,
  /* 0x54 */
  qp,
  /* 0x55 */
  Kp,
  /* 0x56 */
  Xp,
  /* 0x57 */
  $p,
  /* 0x58 */
  Zp,
  /* 0x59 */
  Jp,
  /* 0x5A */
  ed,
  /* 0x5B */
  td,
  /* 0x5C */
  rd,
  /* 0x5D */
  Vo.bind(void 0, 1),
  /* 0x5E */
  nd,
  /* 0x5F */
  id,
  /* 0x60 */
  sd,
  /* 0x61 */
  ad,
  /* 0x62 */
  od,
  /* 0x63 */
  ld,
  /* 0x64 */
  cd,
  /* 0x65 */
  ud,
  /* 0x66 */
  hd,
  /* 0x67 */
  Ad,
  /* 0x68 */
  ta.bind(void 0, 0),
  /* 0x69 */
  ta.bind(void 0, 1),
  /* 0x6A */
  ta.bind(void 0, 2),
  /* 0x6B */
  ta.bind(void 0, 3),
  /* 0x6C */
  void 0,
  // TODO NROUND[ab]
  /* 0x6D */
  void 0,
  // TODO NROUND[ab]
  /* 0x6E */
  void 0,
  // TODO NROUND[ab]
  /* 0x6F */
  void 0,
  // TODO NROUND[ab]
  /* 0x70 */
  fd,
  /* 0x71 */
  Vo.bind(void 0, 2),
  /* 0x72 */
  Vo.bind(void 0, 3),
  /* 0x73 */
  zo.bind(void 0, 1),
  /* 0x74 */
  zo.bind(void 0, 2),
  /* 0x75 */
  zo.bind(void 0, 3),
  /* 0x76 */
  pd,
  /* 0x77 */
  dd,
  /* 0x78 */
  void 0,
  // TODO JROT[]
  /* 0x79 */
  void 0,
  // TODO JROF[]
  /* 0x7A */
  gd,
  /* 0x7B */
  void 0,
  /* 0x7C */
  md,
  /* 0x7D */
  vd,
  /* 0x7E */
  Ho,
  // actually SANGW, supposed to do only a pop though
  /* 0x7F */
  Ho,
  // actually AA, supposed to do only a pop though
  /* 0x80 */
  void 0,
  // TODO FLIPPT
  /* 0x81 */
  void 0,
  // TODO FLIPRGON
  /* 0x82 */
  void 0,
  // TODO FLIPRGOFF
  /* 0x83 */
  void 0,
  /* 0x84 */
  void 0,
  /* 0x85 */
  yd,
  /* 0x86 */
  z3.bind(void 0, 0),
  /* 0x87 */
  z3.bind(void 0, 1),
  /* 0x88 */
  Ed,
  /* 0x89 */
  void 0,
  // TODO IDEF
  /* 0x8A */
  Id,
  /* 0x8B */
  Cd,
  /* 0x8C */
  xd,
  /* 0x8D */
  Td,
  /* 0x8E */
  Sd,
  /* 0x8F */
  void 0,
  /* 0x90 */
  void 0,
  /* 0x91 */
  void 0,
  /* 0x92 */
  void 0,
  /* 0x93 */
  void 0,
  /* 0x94 */
  void 0,
  /* 0x95 */
  void 0,
  /* 0x96 */
  void 0,
  /* 0x97 */
  void 0,
  /* 0x98 */
  void 0,
  /* 0x99 */
  void 0,
  /* 0x9A */
  void 0,
  /* 0x9B */
  void 0,
  /* 0x9C */
  void 0,
  /* 0x9D */
  void 0,
  /* 0x9E */
  void 0,
  /* 0x9F */
  void 0,
  /* 0xA0 */
  void 0,
  /* 0xA1 */
  void 0,
  /* 0xA2 */
  void 0,
  /* 0xA3 */
  void 0,
  /* 0xA4 */
  void 0,
  /* 0xA5 */
  void 0,
  /* 0xA6 */
  void 0,
  /* 0xA7 */
  void 0,
  /* 0xA8 */
  void 0,
  /* 0xA9 */
  void 0,
  /* 0xAA */
  void 0,
  /* 0xAB */
  void 0,
  /* 0xAC */
  void 0,
  /* 0xAD */
  void 0,
  /* 0xAE */
  void 0,
  /* 0xAF */
  void 0,
  /* 0xB0 */
  En.bind(void 0, 1),
  /* 0xB1 */
  En.bind(void 0, 2),
  /* 0xB2 */
  En.bind(void 0, 3),
  /* 0xB3 */
  En.bind(void 0, 4),
  /* 0xB4 */
  En.bind(void 0, 5),
  /* 0xB5 */
  En.bind(void 0, 6),
  /* 0xB6 */
  En.bind(void 0, 7),
  /* 0xB7 */
  En.bind(void 0, 8),
  /* 0xB8 */
  In.bind(void 0, 1),
  /* 0xB9 */
  In.bind(void 0, 2),
  /* 0xBA */
  In.bind(void 0, 3),
  /* 0xBB */
  In.bind(void 0, 4),
  /* 0xBC */
  In.bind(void 0, 5),
  /* 0xBD */
  In.bind(void 0, 6),
  /* 0xBE */
  In.bind(void 0, 7),
  /* 0xBF */
  In.bind(void 0, 8),
  /* 0xC0 */
  ue.bind(void 0, 0, 0, 0, 0, 0),
  /* 0xC1 */
  ue.bind(void 0, 0, 0, 0, 0, 1),
  /* 0xC2 */
  ue.bind(void 0, 0, 0, 0, 0, 2),
  /* 0xC3 */
  ue.bind(void 0, 0, 0, 0, 0, 3),
  /* 0xC4 */
  ue.bind(void 0, 0, 0, 0, 1, 0),
  /* 0xC5 */
  ue.bind(void 0, 0, 0, 0, 1, 1),
  /* 0xC6 */
  ue.bind(void 0, 0, 0, 0, 1, 2),
  /* 0xC7 */
  ue.bind(void 0, 0, 0, 0, 1, 3),
  /* 0xC8 */
  ue.bind(void 0, 0, 0, 1, 0, 0),
  /* 0xC9 */
  ue.bind(void 0, 0, 0, 1, 0, 1),
  /* 0xCA */
  ue.bind(void 0, 0, 0, 1, 0, 2),
  /* 0xCB */
  ue.bind(void 0, 0, 0, 1, 0, 3),
  /* 0xCC */
  ue.bind(void 0, 0, 0, 1, 1, 0),
  /* 0xCD */
  ue.bind(void 0, 0, 0, 1, 1, 1),
  /* 0xCE */
  ue.bind(void 0, 0, 0, 1, 1, 2),
  /* 0xCF */
  ue.bind(void 0, 0, 0, 1, 1, 3),
  /* 0xD0 */
  ue.bind(void 0, 0, 1, 0, 0, 0),
  /* 0xD1 */
  ue.bind(void 0, 0, 1, 0, 0, 1),
  /* 0xD2 */
  ue.bind(void 0, 0, 1, 0, 0, 2),
  /* 0xD3 */
  ue.bind(void 0, 0, 1, 0, 0, 3),
  /* 0xD4 */
  ue.bind(void 0, 0, 1, 0, 1, 0),
  /* 0xD5 */
  ue.bind(void 0, 0, 1, 0, 1, 1),
  /* 0xD6 */
  ue.bind(void 0, 0, 1, 0, 1, 2),
  /* 0xD7 */
  ue.bind(void 0, 0, 1, 0, 1, 3),
  /* 0xD8 */
  ue.bind(void 0, 0, 1, 1, 0, 0),
  /* 0xD9 */
  ue.bind(void 0, 0, 1, 1, 0, 1),
  /* 0xDA */
  ue.bind(void 0, 0, 1, 1, 0, 2),
  /* 0xDB */
  ue.bind(void 0, 0, 1, 1, 0, 3),
  /* 0xDC */
  ue.bind(void 0, 0, 1, 1, 1, 0),
  /* 0xDD */
  ue.bind(void 0, 0, 1, 1, 1, 1),
  /* 0xDE */
  ue.bind(void 0, 0, 1, 1, 1, 2),
  /* 0xDF */
  ue.bind(void 0, 0, 1, 1, 1, 3),
  /* 0xE0 */
  ue.bind(void 0, 1, 0, 0, 0, 0),
  /* 0xE1 */
  ue.bind(void 0, 1, 0, 0, 0, 1),
  /* 0xE2 */
  ue.bind(void 0, 1, 0, 0, 0, 2),
  /* 0xE3 */
  ue.bind(void 0, 1, 0, 0, 0, 3),
  /* 0xE4 */
  ue.bind(void 0, 1, 0, 0, 1, 0),
  /* 0xE5 */
  ue.bind(void 0, 1, 0, 0, 1, 1),
  /* 0xE6 */
  ue.bind(void 0, 1, 0, 0, 1, 2),
  /* 0xE7 */
  ue.bind(void 0, 1, 0, 0, 1, 3),
  /* 0xE8 */
  ue.bind(void 0, 1, 0, 1, 0, 0),
  /* 0xE9 */
  ue.bind(void 0, 1, 0, 1, 0, 1),
  /* 0xEA */
  ue.bind(void 0, 1, 0, 1, 0, 2),
  /* 0xEB */
  ue.bind(void 0, 1, 0, 1, 0, 3),
  /* 0xEC */
  ue.bind(void 0, 1, 0, 1, 1, 0),
  /* 0xED */
  ue.bind(void 0, 1, 0, 1, 1, 1),
  /* 0xEE */
  ue.bind(void 0, 1, 0, 1, 1, 2),
  /* 0xEF */
  ue.bind(void 0, 1, 0, 1, 1, 3),
  /* 0xF0 */
  ue.bind(void 0, 1, 1, 0, 0, 0),
  /* 0xF1 */
  ue.bind(void 0, 1, 1, 0, 0, 1),
  /* 0xF2 */
  ue.bind(void 0, 1, 1, 0, 0, 2),
  /* 0xF3 */
  ue.bind(void 0, 1, 1, 0, 0, 3),
  /* 0xF4 */
  ue.bind(void 0, 1, 1, 0, 1, 0),
  /* 0xF5 */
  ue.bind(void 0, 1, 1, 0, 1, 1),
  /* 0xF6 */
  ue.bind(void 0, 1, 1, 0, 1, 2),
  /* 0xF7 */
  ue.bind(void 0, 1, 1, 0, 1, 3),
  /* 0xF8 */
  ue.bind(void 0, 1, 1, 1, 0, 0),
  /* 0xF9 */
  ue.bind(void 0, 1, 1, 1, 0, 1),
  /* 0xFA */
  ue.bind(void 0, 1, 1, 1, 0, 2),
  /* 0xFB */
  ue.bind(void 0, 1, 1, 1, 0, 3),
  /* 0xFC */
  ue.bind(void 0, 1, 1, 1, 1, 0),
  /* 0xFD */
  ue.bind(void 0, 1, 1, 1, 1, 1),
  /* 0xFE */
  ue.bind(void 0, 1, 1, 1, 1, 2),
  /* 0xFF */
  ue.bind(void 0, 1, 1, 1, 1, 3)
];
var An = new Array(10);
An[1] = function() {
  var e = this.offset + this.relativeOffset, r = this.parseUShort();
  if (r === 1)
    return {
      posFormat: 1,
      coverage: this.parsePointer(z.coverage),
      value: this.parseValueRecord()
    };
  if (r === 2)
    return {
      posFormat: 2,
      coverage: this.parsePointer(z.coverage),
      values: this.parseValueRecordList()
    };
  Se.assert(false, "0x" + e.toString(16) + ": GPOS lookup type 1 format must be 1 or 2.");
};
An[2] = function() {
  var e = this.offset + this.relativeOffset, r = this.parseUShort();
  Se.assert(r === 1 || r === 2, "0x" + e.toString(16) + ": GPOS lookup type 2 format must be 1 or 2.");
  var n = this.parsePointer(z.coverage), i = this.parseUShort(), s = this.parseUShort();
  if (r === 1)
    return {
      posFormat: r,
      coverage: n,
      valueFormat1: i,
      valueFormat2: s,
      pairSets: this.parseList(z.pointer(z.list(function() {
        return {
          // pairValueRecord
          secondGlyph: this.parseUShort(),
          value1: this.parseValueRecord(i),
          value2: this.parseValueRecord(s)
        };
      })))
    };
  if (r === 2) {
    var a = this.parsePointer(z.classDef), o = this.parsePointer(z.classDef), l = this.parseUShort(), c = this.parseUShort();
    return {
      // Class Pair Adjustment
      posFormat: r,
      coverage: n,
      valueFormat1: i,
      valueFormat2: s,
      classDef1: a,
      classDef2: o,
      class1Count: l,
      class2Count: c,
      classRecords: this.parseList(l, z.list(c, function() {
        return {
          value1: this.parseValueRecord(i),
          value2: this.parseValueRecord(s)
        };
      }))
    };
  }
};
An[3] = function() {
  return { error: "GPOS Lookup 3 not supported" };
};
An[4] = function() {
  return { error: "GPOS Lookup 4 not supported" };
};
An[5] = function() {
  return { error: "GPOS Lookup 5 not supported" };
};
An[6] = function() {
  return { error: "GPOS Lookup 6 not supported" };
};
An[7] = function() {
  return { error: "GPOS Lookup 7 not supported" };
};
An[8] = function() {
  return { error: "GPOS Lookup 8 not supported" };
};
An[9] = function() {
  return { error: "GPOS Lookup 9 not supported" };
};
new Array(10);
var n6 = Object.defineProperty, i6 = (t, e, r) => e in t ? n6(t, e, { enumerable: true, configurable: true, writable: true, value: r }) : t[e] = r, b = (t, e, r) => (i6(t, typeof e != "symbol" ? e + "" : e, r), r);
function q3(t, e) {
  if (e === TrianglesDrawMode)
    return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."), t;
  if (e === TriangleFanDrawMode || e === TriangleStripDrawMode) {
    let r = t.getIndex();
    if (r === null) {
      const a = [], o = t.getAttribute("position");
      if (o !== void 0) {
        for (let l = 0; l < o.count; l++)
          a.push(l);
        t.setIndex(a), r = t.getIndex();
      } else
        return console.error(
          "THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."
        ), t;
    }
    const n = r.count - 2, i = [];
    if (r)
      if (e === TriangleFanDrawMode)
        for (let a = 1; a <= n; a++)
          i.push(r.getX(0)), i.push(r.getX(a)), i.push(r.getX(a + 1));
      else
        for (let a = 0; a < n; a++)
          a % 2 === 0 ? (i.push(r.getX(a)), i.push(r.getX(a + 1)), i.push(r.getX(a + 2))) : (i.push(r.getX(a + 2)), i.push(r.getX(a + 1)), i.push(r.getX(a)));
    i.length / 3 !== n && console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");
    const s = t.clone();
    return s.setIndex(i), s.clearGroups(), s;
  } else
    return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:", e), t;
}
new Color();
const Jh = class {
  parse(t, e = {
    decodeSpeed: 5,
    encodeSpeed: 5,
    encoderMethod: Jh.MESH_EDGEBREAKER_ENCODING,
    quantization: [16, 8, 8, 8, 8],
    exportUvs: true,
    exportNormals: true,
    exportColor: false
  }) {
    if (t instanceof BufferGeometry && t.isBufferGeometry)
      throw new Error("DRACOExporter: The first parameter of parse() is now an instance of Mesh or Points.");
    if (DracoEncoderModule === void 0)
      throw new Error("THREE.DRACOExporter: required the draco_encoder to work.");
    const r = t.geometry, n = DracoEncoderModule(), i = new n.Encoder();
    let s, a;
    if (!r.isBufferGeometry)
      throw new Error("THREE.DRACOExporter.parse(geometry, options): geometry is not a THREE.BufferGeometry instance.");
    if (t instanceof Mesh && t.isMesh) {
      s = new n.MeshBuilder(), a = new n.Mesh();
      const A = r.getAttribute("position");
      s.AddFloatAttributeToMesh(
        a,
        n.POSITION,
        A.count,
        A.itemSize,
        A.array
      );
      const f = r.getIndex();
      if (f !== null)
        s.AddFacesToMesh(a, f.count / 3, f.array);
      else {
        const d = new (A.count > 65535 ? Uint32Array : Uint16Array)(A.count);
        for (let v = 0; v < d.length; v++)
          d[v] = v;
        s.AddFacesToMesh(a, A.count, d);
      }
      if (e.exportNormals) {
        const d = r.getAttribute("normal");
        d !== void 0 && s.AddFloatAttributeToMesh(
          a,
          n.NORMAL,
          d.count,
          d.itemSize,
          d.array
        );
      }
      if (e.exportUvs) {
        const d = r.getAttribute("uv");
        d !== void 0 && s.AddFloatAttributeToMesh(a, n.TEX_COORD, d.count, d.itemSize, d.array);
      }
      if (e.exportColor) {
        const d = r.getAttribute("color");
        d !== void 0 && s.AddFloatAttributeToMesh(a, n.COLOR, d.count, d.itemSize, d.array);
      }
    } else if (t instanceof Points && t.isPoints) {
      s = new n.PointCloudBuilder(), a = new n.PointCloud();
      const A = r.getAttribute("position");
      if (s.AddFloatAttribute(a, n.POSITION, A.count, A.itemSize, A.array), e.exportColor) {
        const f = r.getAttribute("color");
        f !== void 0 && s.AddFloatAttribute(a, n.COLOR, f.count, f.itemSize, f.array);
      }
    } else
      throw new Error("DRACOExporter: Unsupported object type.");
    const o = new n.DracoInt8Array(), l = e.encodeSpeed !== void 0 ? e.encodeSpeed : 5, c = e.decodeSpeed !== void 0 ? e.decodeSpeed : 5;
    if (i.SetSpeedOptions(l, c), e.encoderMethod !== void 0 && i.SetEncodingMethod(e.encoderMethod), e.quantization !== void 0)
      for (let A = 0; A < 5; A++)
        e.quantization[A] !== void 0 && i.SetAttributeQuantization(A, e.quantization[A]);
    let u;
    if (t instanceof Mesh && t.isMesh ? u = i.EncodeMeshToDracoBuffer(a, o) : u = i.EncodePointCloudToDracoBuffer(a, true, o), n.destroy(a), u === 0)
      throw new Error("THREE.DRACOExporter: Draco encoding failed.");
    const h = new Int8Array(new ArrayBuffer(u));
    for (let A = 0; A < u; A++)
      h[A] = o.GetValue(A);
    return n.destroy(o), n.destroy(i), n.destroy(s), h;
  }
};
let Yr = Jh;
b(Yr, "MESH_EDGEBREAKER_ENCODING", 1);
b(Yr, "MESH_SEQUENTIAL_ENCODING", 0);
b(Yr, "POINT_CLOUD", 0);
b(Yr, "TRIANGULAR_MESH", 1);
b(Yr, "INVALID", -1);
b(Yr, "POSITION", 0);
b(Yr, "NORMAL", 1);
b(Yr, "COLOR", 2);
b(Yr, "TEX_COORD", 3);
b(Yr, "GENERIC", 4);
const e2 = class extends Mesh {
  constructor(t, e = {}) {
    super(t), this.isReflector = true, this.type = "Reflector", this.camera = new PerspectiveCamera();
    const r = this, n = e.color !== void 0 ? new Color(e.color) : new Color(8355711), i = e.textureWidth || 512, s = e.textureHeight || 512, a = e.clipBias || 0, o = e.shader || e2.ReflectorShader, l = e.multisample !== void 0 ? e.multisample : 4, c = new Plane(), u = new Vector3(), h = new Vector3(), A = new Vector3(), f = new Matrix4(), d = new Vector3(0, 0, -1), v = new Vector4(), m = new Vector3(), E = new Vector3(), y = new Vector4(), p = new Matrix4(), g = this.camera, C = new WebGLRenderTarget(i, s, {
      samples: l,
      type: HalfFloatType
    }), S = new ShaderMaterial({
      uniforms: UniformsUtils.clone(o.uniforms),
      fragmentShader: o.fragmentShader,
      vertexShader: o.vertexShader
    });
    S.uniforms.tDiffuse.value = C.texture, S.uniforms.color.value = n, S.uniforms.textureMatrix.value = p, this.material = S, this.onBeforeRender = function(x, T, B) {
      if (h.setFromMatrixPosition(r.matrixWorld), A.setFromMatrixPosition(B.matrixWorld), f.extractRotation(r.matrixWorld), u.set(0, 0, 1), u.applyMatrix4(f), m.subVectors(h, A), m.dot(u) > 0)
        return;
      m.reflect(u).negate(), m.add(h), f.extractRotation(B.matrixWorld), d.set(0, 0, -1), d.applyMatrix4(f), d.add(A), E.subVectors(h, d), E.reflect(u).negate(), E.add(h), g.position.copy(m), g.up.set(0, 1, 0), g.up.applyMatrix4(f), g.up.reflect(u), g.lookAt(E), g.far = B.far, g.updateMatrixWorld(), g.projectionMatrix.copy(B.projectionMatrix), p.set(0.5, 0, 0, 0.5, 0, 0.5, 0, 0.5, 0, 0, 0.5, 0.5, 0, 0, 0, 1), p.multiply(g.projectionMatrix), p.multiply(g.matrixWorldInverse), p.multiply(r.matrixWorld), c.setFromNormalAndCoplanarPoint(u, h), c.applyMatrix4(g.matrixWorldInverse), v.set(c.normal.x, c.normal.y, c.normal.z, c.constant);
      const R = g.projectionMatrix;
      y.x = (Math.sign(v.x) + R.elements[8]) / R.elements[0], y.y = (Math.sign(v.y) + R.elements[9]) / R.elements[5], y.z = -1, y.w = (1 + R.elements[10]) / R.elements[14], v.multiplyScalar(2 / v.dot(y)), R.elements[2] = v.x, R.elements[6] = v.y, R.elements[10] = v.z + 1 - a, R.elements[14] = v.w, r.visible = false;
      const _ = x.getRenderTarget(), F = x.xr.enabled, U = x.shadowMap.autoUpdate, Y = x.toneMapping;
      let N = false;
      "outputColorSpace" in x ? N = x.outputColorSpace === "srgb" : N = x.outputEncoding === 3001, x.xr.enabled = false, x.shadowMap.autoUpdate = false, "outputColorSpace" in x ? x.outputColorSpace = "linear-srgb" : x.outputEncoding = 3e3, x.toneMapping = NoToneMapping, x.setRenderTarget(C), x.state.buffers.depth.setMask(true), x.autoClear === false && x.clear(), x.render(T, g), x.xr.enabled = F, x.shadowMap.autoUpdate = U, x.toneMapping = Y, "outputColorSpace" in x ? x.outputColorSpace = N ? "srgb" : "srgb-linear" : x.outputEncoding = N ? 3001 : 3e3, x.setRenderTarget(_);
      const Z = B.viewport;
      Z !== void 0 && x.state.viewport(Z), r.visible = true;
    }, this.getRenderTarget = function() {
      return C;
    }, this.dispose = function() {
      C.dispose(), r.material.dispose();
    };
  }
};
let Vl = e2;
b(Vl, "ReflectorShader", {
  uniforms: {
    color: {
      value: null
    },
    tDiffuse: {
      value: null
    },
    textureMatrix: {
      value: null
    }
  },
  vertexShader: (
    /* glsl */
    `
		uniform mat4 textureMatrix;
		varying vec4 vUv;

		#include <common>
		#include <logdepthbuf_pars_vertex>

		void main() {

			vUv = textureMatrix * vec4( position, 1.0 );

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

			#include <logdepthbuf_vertex>

		}`
  ),
  fragmentShader: (
    /* glsl */
    `
		uniform vec3 color;
		uniform sampler2D tDiffuse;
		varying vec4 vUv;

		#include <logdepthbuf_pars_fragment>

		float blendOverlay( float base, float blend ) {

			return( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );

		}

		vec3 blendOverlay( vec3 base, vec3 blend ) {

			return vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );

		}

		void main() {

			#include <logdepthbuf_fragment>

			vec4 base = texture2DProj( tDiffuse, vUv );
			gl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );

			#include <tonemapping_fragment>
			#include <${parseInt(REVISION.replace(/\D+/g, "")) >= 154 ? "colorspace_fragment" : "encodings_fragment"}>

		}`
  )
});
const t2 = class extends Mesh {
  constructor(t, e = {}) {
    super(t), this.isRefractor = true, this.type = "Refractor", this.camera = new PerspectiveCamera();
    const r = this, n = e.color !== void 0 ? new Color(e.color) : new Color(8355711), i = e.textureWidth || 512, s = e.textureHeight || 512, a = e.clipBias || 0, o = e.shader || t2.RefractorShader, l = e.multisample !== void 0 ? e.multisample : 4, c = this.camera;
    c.matrixAutoUpdate = false, c.userData.refractor = true;
    const u = new Plane(), h = new Matrix4(), A = new WebGLRenderTarget(i, s, {
      samples: l,
      type: HalfFloatType
    });
    this.material = new ShaderMaterial({
      uniforms: UniformsUtils.clone(o.uniforms),
      vertexShader: o.vertexShader,
      fragmentShader: o.fragmentShader,
      transparent: true
      // ensures, refractors are drawn from farthest to closest
    }), this.material.uniforms.color.value = n, this.material.uniforms.tDiffuse.value = A.texture, this.material.uniforms.textureMatrix.value = h;
    const f = function() {
      const y = new Vector3(), p = new Vector3(), g = new Matrix4(), C = new Vector3(), S = new Vector3();
      return function(T) {
        return y.setFromMatrixPosition(r.matrixWorld), p.setFromMatrixPosition(T.matrixWorld), C.subVectors(y, p), g.extractRotation(r.matrixWorld), S.set(0, 0, 1), S.applyMatrix4(g), C.dot(S) < 0;
      };
    }(), d = function() {
      const y = new Vector3(), p = new Vector3(), g = new Quaternion(), C = new Vector3();
      return function() {
        r.matrixWorld.decompose(p, g, C), y.set(0, 0, 1).applyQuaternion(g).normalize(), y.negate(), u.setFromNormalAndCoplanarPoint(y, p);
      };
    }(), v = function() {
      const y = new Plane(), p = new Vector4(), g = new Vector4();
      return function(S) {
        c.matrixWorld.copy(S.matrixWorld), c.matrixWorldInverse.copy(c.matrixWorld).invert(), c.projectionMatrix.copy(S.projectionMatrix), c.far = S.far, y.copy(u), y.applyMatrix4(c.matrixWorldInverse), p.set(y.normal.x, y.normal.y, y.normal.z, y.constant);
        const x = c.projectionMatrix;
        g.x = (Math.sign(p.x) + x.elements[8]) / x.elements[0], g.y = (Math.sign(p.y) + x.elements[9]) / x.elements[5], g.z = -1, g.w = (1 + x.elements[10]) / x.elements[14], p.multiplyScalar(2 / p.dot(g)), x.elements[2] = p.x, x.elements[6] = p.y, x.elements[10] = p.z + 1 - a, x.elements[14] = p.w;
      };
    }();
    function m(y) {
      h.set(0.5, 0, 0, 0.5, 0, 0.5, 0, 0.5, 0, 0, 0.5, 0.5, 0, 0, 0, 1), h.multiply(y.projectionMatrix), h.multiply(y.matrixWorldInverse), h.multiply(r.matrixWorld);
    }
    function E(y, p, g) {
      r.visible = false;
      const C = y.getRenderTarget(), S = y.xr.enabled, x = y.shadowMap.autoUpdate, T = y.toneMapping;
      let B = false;
      "outputColorSpace" in y ? B = y.outputColorSpace === "srgb" : B = y.outputEncoding === 3001, y.xr.enabled = false, y.shadowMap.autoUpdate = false, "outputColorSpace" in y ? y.outputColorSpace = "linear-srgb" : y.outputEncoding = 3e3, y.toneMapping = NoToneMapping, y.setRenderTarget(A), y.autoClear === false && y.clear(), y.render(p, c), y.xr.enabled = S, y.shadowMap.autoUpdate = x, y.toneMapping = T, y.setRenderTarget(C), "outputColorSpace" in y ? y.outputColorSpace = B ? "srgb" : "srgb-linear" : y.outputEncoding = B ? 3001 : 3e3;
      const R = g.viewport;
      R !== void 0 && y.state.viewport(R), r.visible = true;
    }
    this.onBeforeRender = function(y, p, g) {
      g.userData.refractor !== true && f(g) && (d(), m(g), v(g), E(y, p, g));
    }, this.getRenderTarget = function() {
      return A;
    }, this.dispose = function() {
      A.dispose(), r.material.dispose();
    };
  }
};
let zl = t2;
b(zl, "RefractorShader", {
  uniforms: {
    color: {
      value: null
    },
    tDiffuse: {
      value: null
    },
    textureMatrix: {
      value: null
    }
  },
  vertexShader: (
    /* glsl */
    `

		uniform mat4 textureMatrix;

		varying vec4 vUv;

		void main() {

			vUv = textureMatrix * vec4( position, 1.0 );
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`
  ),
  fragmentShader: (
    /* glsl */
    `

		uniform vec3 color;
		uniform sampler2D tDiffuse;

		varying vec4 vUv;

		float blendOverlay( float base, float blend ) {

			return( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );

		}

		vec3 blendOverlay( vec3 base, vec3 blend ) {

			return vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );

		}

		void main() {

			vec4 base = texture2DProj( tDiffuse, vUv );
			gl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );

			#include <tonemapping_fragment>
			#include <${parseInt(REVISION.replace(/\D+/g, "")) >= 154 ? "colorspace_fragment" : "encodings_fragment"}>

		}`
  )
});
const s6 = /* @__PURE__ */ new BufferGeometry(), Yl = class extends Mesh {
  constructor() {
    super(Yl.Geometry, new MeshBasicMaterial({ opacity: 0, transparent: true })), this.isLensflare = true, this.type = "Lensflare", this.frustumCulled = false, this.renderOrder = 1 / 0;
    const t = new Vector3(), e = new Vector3(), r = new DataTexture(new Uint8Array(16 * 16 * 3), 16, 16, RGBAFormat);
    r.minFilter = NearestFilter, r.magFilter = NearestFilter, r.wrapS = ClampToEdgeWrapping, r.wrapT = ClampToEdgeWrapping;
    const n = new DataTexture(new Uint8Array(16 * 16 * 3), 16, 16, RGBAFormat);
    n.minFilter = NearestFilter, n.magFilter = NearestFilter, n.wrapS = ClampToEdgeWrapping, n.wrapT = ClampToEdgeWrapping;
    const i = Yl.Geometry, s = new RawShaderMaterial({
      uniforms: {
        scale: { value: null },
        screenPosition: { value: null }
      },
      vertexShader: (
        /* glsl */
        `

				precision highp float;

				uniform vec3 screenPosition;
				uniform vec2 scale;

				attribute vec3 position;

				void main() {

					gl_Position = vec4( position.xy * scale + screenPosition.xy, screenPosition.z, 1.0 );

				}`
      ),
      fragmentShader: (
        /* glsl */
        `

				precision highp float;

				void main() {

					gl_FragColor = vec4( 1.0, 0.0, 1.0, 1.0 );

				}`
      ),
      depthTest: true,
      depthWrite: false,
      transparent: false
    }), a = new RawShaderMaterial({
      uniforms: {
        map: { value: r },
        scale: { value: null },
        screenPosition: { value: null }
      },
      vertexShader: (
        /* glsl */
        `

				precision highp float;

				uniform vec3 screenPosition;
				uniform vec2 scale;

				attribute vec3 position;
				attribute vec2 uv;

				varying vec2 vUV;

				void main() {

					vUV = uv;

					gl_Position = vec4( position.xy * scale + screenPosition.xy, screenPosition.z, 1.0 );

				}`
      ),
      fragmentShader: (
        /* glsl */
        `

				precision highp float;

				uniform sampler2D map;

				varying vec2 vUV;

				void main() {

					gl_FragColor = texture2D( map, vUV );

				}`
      ),
      depthTest: false,
      depthWrite: false,
      transparent: false
    }), o = new Mesh(i, s), l = [], c = r2.Shader, u = new RawShaderMaterial({
      uniforms: {
        map: { value: null },
        occlusionMap: { value: n },
        color: { value: new Color(16777215) },
        scale: { value: new Vector2() },
        screenPosition: { value: new Vector3() }
      },
      vertexShader: c.vertexShader,
      fragmentShader: c.fragmentShader,
      blending: AdditiveBlending,
      transparent: true,
      depthWrite: false
    }), h = new Mesh(i, u);
    this.addElement = function(m) {
      l.push(m);
    };
    const A = new Vector2(), f = new Vector2(), d = new Box2(), v = new Vector4();
    this.onBeforeRender = function(m, E, y) {
      m.getCurrentViewport(v);
      const p = v.w / v.z, g = v.z / 2, C = v.w / 2;
      let S = 16 / v.w;
      if (A.set(S * p, S), d.min.set(v.x, v.y), d.max.set(v.x + (v.z - 16), v.y + (v.w - 16)), e.setFromMatrixPosition(this.matrixWorld), e.applyMatrix4(y.matrixWorldInverse), !(e.z > 0) && (t.copy(e).applyMatrix4(y.projectionMatrix), f.x = v.x + t.x * g + g - 8, f.y = v.y + t.y * C + C - 8, d.containsPoint(f))) {
        m.copyFramebufferToTexture(f, r);
        let x = s.uniforms;
        x.scale.value = A, x.screenPosition.value = t, m.renderBufferDirect(y, null, i, s, o, null), m.copyFramebufferToTexture(f, n), x = a.uniforms, x.scale.value = A, x.screenPosition.value = t, m.renderBufferDirect(y, null, i, a, o, null);
        const T = -t.x * 2, B = -t.y * 2;
        for (let R = 0, _ = l.length; R < _; R++) {
          const F = l[R], U = u.uniforms;
          U.color.value.copy(F.color), U.map.value = F.texture, U.screenPosition.value.x = t.x + T * F.distance, U.screenPosition.value.y = t.y + B * F.distance, S = F.size / v.w;
          const Y = v.w / v.z;
          U.scale.value.set(S * Y, S), u.uniformsNeedUpdate = true, m.renderBufferDirect(y, null, i, u, h, null);
        }
      }
    }, this.dispose = function() {
      s.dispose(), a.dispose(), u.dispose(), r.dispose(), n.dispose();
      for (let m = 0, E = l.length; m < E; m++)
        l[m].texture.dispose();
    };
  }
};
let a6 = Yl;
b(a6, "Geometry", s6);
let r2 = class {
  constructor(e, r = 1, n = 0, i = new Color(16777215)) {
    this.texture = e, this.size = r, this.distance = n, this.color = i;
  }
};
b(r2, "Shader", {
  uniforms: {
    map: { value: null },
    occlusionMap: { value: null },
    color: { value: null },
    scale: { value: null },
    screenPosition: { value: null }
  },
  vertexShader: (
    /* glsl */
    `

		precision highp float;

		uniform vec3 screenPosition;
		uniform vec2 scale;

		uniform sampler2D occlusionMap;

		attribute vec3 position;
		attribute vec2 uv;

		varying vec2 vUV;
		varying float vVisibility;

		void main() {

			vUV = uv;

			vec2 pos = position.xy;

			vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );
			visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );
			visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );
			visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );
			visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );
			visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );
			visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );
			visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );
			visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );

			vVisibility =        visibility.r / 9.0;
			vVisibility *= 1.0 - visibility.g / 9.0;
			vVisibility *=       visibility.b / 9.0;

			gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );

		}`
  ),
  fragmentShader: (
    /* glsl */
    `

		precision highp float;

		uniform sampler2D map;
		uniform vec3 color;

		varying vec2 vUV;
		varying float vVisibility;

		void main() {

			vec4 texture = texture2D( map, vUV );
			texture.a *= vVisibility;
			gl_FragColor = texture;
			gl_FragColor.rgb *= color;

		}`
  )
});
class hs {
  /**
   * You can pass in a random number generator object if you like.
   * It is assumed to have a random() method.
   */
  constructor(e = Math) {
    b(this, "grad3", [
      [1, 1, 0],
      [-1, 1, 0],
      [1, -1, 0],
      [-1, -1, 0],
      [1, 0, 1],
      [-1, 0, 1],
      [1, 0, -1],
      [-1, 0, -1],
      [0, 1, 1],
      [0, -1, 1],
      [0, 1, -1],
      [0, -1, -1]
    ]), b(this, "grad4", [
      [0, 1, 1, 1],
      [0, 1, 1, -1],
      [0, 1, -1, 1],
      [0, 1, -1, -1],
      [0, -1, 1, 1],
      [0, -1, 1, -1],
      [0, -1, -1, 1],
      [0, -1, -1, -1],
      [1, 0, 1, 1],
      [1, 0, 1, -1],
      [1, 0, -1, 1],
      [1, 0, -1, -1],
      [-1, 0, 1, 1],
      [-1, 0, 1, -1],
      [-1, 0, -1, 1],
      [-1, 0, -1, -1],
      [1, 1, 0, 1],
      [1, 1, 0, -1],
      [1, -1, 0, 1],
      [1, -1, 0, -1],
      [-1, 1, 0, 1],
      [-1, 1, 0, -1],
      [-1, -1, 0, 1],
      [-1, -1, 0, -1],
      [1, 1, 1, 0],
      [1, 1, -1, 0],
      [1, -1, 1, 0],
      [1, -1, -1, 0],
      [-1, 1, 1, 0],
      [-1, 1, -1, 0],
      [-1, -1, 1, 0],
      [-1, -1, -1, 0]
    ]), b(this, "p", []), b(this, "perm", []), b(this, "simplex", [
      [0, 1, 2, 3],
      [0, 1, 3, 2],
      [0, 0, 0, 0],
      [0, 2, 3, 1],
      [0, 0, 0, 0],
      [0, 0, 0, 0],
      [0, 0, 0, 0],
      [1, 2, 3, 0],
      [0, 2, 1, 3],
      [0, 0, 0, 0],
      [0, 3, 1, 2],
      [0, 3, 2, 1],
      [0, 0, 0, 0],
      [0, 0, 0, 0],
      [0, 0, 0, 0],
      [1, 3, 2, 0],
      [0, 0, 0, 0],
      [0, 0, 0, 0],
      [0, 0, 0, 0],
      [0, 0, 0, 0],
      [0, 0, 0, 0],
      [0, 0, 0, 0],
      [0, 0, 0, 0],
      [0, 0, 0, 0],
      [1, 2, 0, 3],
      [0, 0, 0, 0],
      [1, 3, 0, 2],
      [0, 0, 0, 0],
      [0, 0, 0, 0],
      [0, 0, 0, 0],
      [2, 3, 0, 1],
      [2, 3, 1, 0],
      [1, 0, 2, 3],
      [1, 0, 3, 2],
      [0, 0, 0, 0],
      [0, 0, 0, 0],
      [0, 0, 0, 0],
      [2, 0, 3, 1],
      [0, 0, 0, 0],
      [2, 1, 3, 0],
      [0, 0, 0, 0],
      [0, 0, 0, 0],
      [0, 0, 0, 0],
      [0, 0, 0, 0],
      [0, 0, 0, 0],
      [0, 0, 0, 0],
      [0, 0, 0, 0],
      [0, 0, 0, 0],
      [2, 0, 1, 3],
      [0, 0, 0, 0],
      [0, 0, 0, 0],
      [0, 0, 0, 0],
      [3, 0, 1, 2],
      [3, 0, 2, 1],
      [0, 0, 0, 0],
      [3, 1, 2, 0],
      [2, 1, 0, 3],
      [0, 0, 0, 0],
      [0, 0, 0, 0],
      [0, 0, 0, 0],
      [3, 1, 0, 2],
      [0, 0, 0, 0],
      [3, 2, 0, 1],
      [3, 2, 1, 0]
    ]), b(this, "dot", (r, n, i) => r[0] * n + r[1] * i), b(this, "dot3", (r, n, i, s) => r[0] * n + r[1] * i + r[2] * s), b(this, "dot4", (r, n, i, s, a) => r[0] * n + r[1] * i + r[2] * s + r[3] * a), b(this, "noise", (r, n) => {
      let i, s, a;
      const o = 0.5 * (Math.sqrt(3) - 1), l = (r + n) * o, c = Math.floor(r + l), u = Math.floor(n + l), h = (3 - Math.sqrt(3)) / 6, A = (c + u) * h, f = c - A, d = u - A, v = r - f, m = n - d;
      let E = 0, y = 1;
      v > m && (E = 1, y = 0);
      const p = v - E + h, g = m - y + h, C = v - 1 + 2 * h, S = m - 1 + 2 * h, x = c & 255, T = u & 255, B = this.perm[x + this.perm[T]] % 12, R = this.perm[x + E + this.perm[T + y]] % 12, _ = this.perm[x + 1 + this.perm[T + 1]] % 12;
      let F = 0.5 - v * v - m * m;
      F < 0 ? i = 0 : (F *= F, i = F * F * this.dot(this.grad3[B], v, m));
      let U = 0.5 - p * p - g * g;
      U < 0 ? s = 0 : (U *= U, s = U * U * this.dot(this.grad3[R], p, g));
      let Y = 0.5 - C * C - S * S;
      return Y < 0 ? a = 0 : (Y *= Y, a = Y * Y * this.dot(this.grad3[_], C, S)), 70 * (i + s + a);
    }), b(this, "noise3d", (r, n, i) => {
      let s, a, o, l;
      const c = 0.3333333333333333, u = (r + n + i) * c, h = Math.floor(r + u), A = Math.floor(n + u), f = Math.floor(i + u), d = 1 / 6, v = (h + A + f) * d, m = h - v, E = A - v, y = f - v, p = r - m, g = n - E, C = i - y;
      let S, x, T, B, R, _;
      p >= g ? g >= C ? (S = 1, x = 0, T = 0, B = 1, R = 1, _ = 0) : p >= C ? (S = 1, x = 0, T = 0, B = 1, R = 0, _ = 1) : (S = 0, x = 0, T = 1, B = 1, R = 0, _ = 1) : g < C ? (S = 0, x = 0, T = 1, B = 0, R = 1, _ = 1) : p < C ? (S = 0, x = 1, T = 0, B = 0, R = 1, _ = 1) : (S = 0, x = 1, T = 0, B = 1, R = 1, _ = 0);
      const F = p - S + d, U = g - x + d, Y = C - T + d, N = p - B + 2 * d, Z = g - R + 2 * d, j = C - _ + 2 * d, Q = p - 1 + 3 * d, $ = g - 1 + 3 * d, X = C - 1 + 3 * d, K = h & 255, D = A & 255, L = f & 255, I = this.perm[K + this.perm[D + this.perm[L]]] % 12, O = this.perm[K + S + this.perm[D + x + this.perm[L + T]]] % 12, V = this.perm[K + B + this.perm[D + R + this.perm[L + _]]] % 12, k = this.perm[K + 1 + this.perm[D + 1 + this.perm[L + 1]]] % 12;
      let q = 0.6 - p * p - g * g - C * C;
      q < 0 ? s = 0 : (q *= q, s = q * q * this.dot3(this.grad3[I], p, g, C));
      let se = 0.6 - F * F - U * U - Y * Y;
      se < 0 ? a = 0 : (se *= se, a = se * se * this.dot3(this.grad3[O], F, U, Y));
      let re = 0.6 - N * N - Z * Z - j * j;
      re < 0 ? o = 0 : (re *= re, o = re * re * this.dot3(this.grad3[V], N, Z, j));
      let ne = 0.6 - Q * Q - $ * $ - X * X;
      return ne < 0 ? l = 0 : (ne *= ne, l = ne * ne * this.dot3(this.grad3[k], Q, $, X)), 32 * (s + a + o + l);
    }), b(this, "noise4d", (r, n, i, s) => {
      const a = this.grad4, o = this.simplex, l = this.perm, c = (Math.sqrt(5) - 1) / 4, u = (5 - Math.sqrt(5)) / 20;
      let h, A, f, d, v;
      const m = (r + n + i + s) * c, E = Math.floor(r + m), y = Math.floor(n + m), p = Math.floor(i + m), g = Math.floor(s + m), C = (E + y + p + g) * u, S = E - C, x = y - C, T = p - C, B = g - C, R = r - S, _ = n - x, F = i - T, U = s - B, Y = R > _ ? 32 : 0, N = R > F ? 16 : 0, Z = _ > F ? 8 : 0, j = R > U ? 4 : 0, Q = _ > U ? 2 : 0, $ = F > U ? 1 : 0, X = Y + N + Z + j + Q + $;
      let K, D, L, I, O, V, k, q, se, re, ne, te;
      K = o[X][0] >= 3 ? 1 : 0, D = o[X][1] >= 3 ? 1 : 0, L = o[X][2] >= 3 ? 1 : 0, I = o[X][3] >= 3 ? 1 : 0, O = o[X][0] >= 2 ? 1 : 0, V = o[X][1] >= 2 ? 1 : 0, k = o[X][2] >= 2 ? 1 : 0, q = o[X][3] >= 2 ? 1 : 0, se = o[X][0] >= 1 ? 1 : 0, re = o[X][1] >= 1 ? 1 : 0, ne = o[X][2] >= 1 ? 1 : 0, te = o[X][3] >= 1 ? 1 : 0;
      const ge = R - K + u, ee = _ - D + u, le = F - L + u, M = U - I + u, w = R - O + 2 * u, J = _ - V + 2 * u, he = F - k + 2 * u, pe = U - q + 2 * u, ke = R - se + 3 * u, Ve = _ - re + 3 * u, we = F - ne + 3 * u, Tt = U - te + 3 * u, It = R - 1 + 4 * u, Lt = _ - 1 + 4 * u, Wt = F - 1 + 4 * u, Dr = U - 1 + 4 * u, Ot = E & 255, fr = y & 255, jt = p & 255, P = g & 255, ie = l[Ot + l[fr + l[jt + l[P]]]] % 32, ye = l[Ot + K + l[fr + D + l[jt + L + l[P + I]]]] % 32, Pe = l[Ot + O + l[fr + V + l[jt + k + l[P + q]]]] % 32, ct = l[Ot + se + l[fr + re + l[jt + ne + l[P + te]]]] % 32, pr = l[Ot + 1 + l[fr + 1 + l[jt + 1 + l[P + 1]]]] % 32;
      let St = 0.6 - R * R - _ * _ - F * F - U * U;
      St < 0 ? h = 0 : (St *= St, h = St * St * this.dot4(a[ie], R, _, F, U));
      let Pt = 0.6 - ge * ge - ee * ee - le * le - M * M;
      Pt < 0 ? A = 0 : (Pt *= Pt, A = Pt * Pt * this.dot4(a[ye], ge, ee, le, M));
      let mn = 0.6 - w * w - J * J - he * he - pe * pe;
      mn < 0 ? f = 0 : (mn *= mn, f = mn * mn * this.dot4(a[Pe], w, J, he, pe));
      let bt = 0.6 - ke * ke - Ve * Ve - we * we - Tt * Tt;
      bt < 0 ? d = 0 : (bt *= bt, d = bt * bt * this.dot4(a[ct], ke, Ve, we, Tt));
      let _t = 0.6 - It * It - Lt * Lt - Wt * Wt - Dr * Dr;
      return _t < 0 ? v = 0 : (_t *= _t, v = _t * _t * this.dot4(a[pr], It, Lt, Wt, Dr)), 27 * (h + A + f + d + v);
    });
    for (let r = 0; r < 256; r++)
      this.p[r] = Math.floor(e.random() * 256);
    for (let r = 0; r < 512; r++)
      this.perm[r] = this.p[r & 255];
  }
}
const Mt = class extends BufferGeometry {
  constructor(t = {}) {
    super(), this.isLightningStrike = true, this.type = "LightningStrike", this.init(Mt.copyParameters(t, t)), this.createMesh();
  }
  static createRandomGenerator() {
    const e = [];
    for (let n = 0; n < 2053; n++)
      e.push(Math.random());
    const r = {
      currentSeed: 0,
      random: function() {
        const n = e[r.currentSeed];
        return r.currentSeed = (r.currentSeed + 1) % 2053, n;
      },
      getSeed: function() {
        return r.currentSeed / 2053;
      },
      setSeed: function(n) {
        r.currentSeed = Math.floor(n * 2053) % 2053;
      }
    };
    return r;
  }
  static copyParameters(t = {}, e = {}) {
    const r = function(n) {
      return e === t ? n : n.clone();
    };
    return t.sourceOffset = e.sourceOffset !== void 0 ? r(e.sourceOffset) : new Vector3(0, 100, 0), t.destOffset = e.destOffset !== void 0 ? r(e.destOffset) : new Vector3(0, 0, 0), t.timeScale = e.timeScale !== void 0 ? e.timeScale : 1, t.roughness = e.roughness !== void 0 ? e.roughness : 0.9, t.straightness = e.straightness !== void 0 ? e.straightness : 0.7, t.up0 = e.up0 !== void 0 ? r(e.up0) : new Vector3(0, 0, 1), t.up1 = e.up1 !== void 0 ? r(e.up1) : new Vector3(0, 0, 1), t.radius0 = e.radius0 !== void 0 ? e.radius0 : 1, t.radius1 = e.radius1 !== void 0 ? e.radius1 : 1, t.radius0Factor = e.radius0Factor !== void 0 ? e.radius0Factor : 0.5, t.radius1Factor = e.radius1Factor !== void 0 ? e.radius1Factor : 0.2, t.minRadius = e.minRadius !== void 0 ? e.minRadius : 0.2, // These parameters should not be changed after lightning creation. They can be changed but the ray will change its form abruptly:
    t.isEternal = e.isEternal !== void 0 ? e.isEternal : e.birthTime === void 0 || e.deathTime === void 0, t.birthTime = e.birthTime, t.deathTime = e.deathTime, t.propagationTimeFactor = e.propagationTimeFactor !== void 0 ? e.propagationTimeFactor : 0.1, t.vanishingTimeFactor = e.vanishingTimeFactor !== void 0 ? e.vanishingTimeFactor : 0.9, t.subrayPeriod = e.subrayPeriod !== void 0 ? e.subrayPeriod : 4, t.subrayDutyCycle = e.subrayDutyCycle !== void 0 ? e.subrayDutyCycle : 0.6, t.maxIterations = e.maxIterations !== void 0 ? e.maxIterations : 9, t.isStatic = e.isStatic !== void 0 ? e.isStatic : false, t.ramification = e.ramification !== void 0 ? e.ramification : 5, t.maxSubrayRecursion = e.maxSubrayRecursion !== void 0 ? e.maxSubrayRecursion : 3, t.recursionProbability = e.recursionProbability !== void 0 ? e.recursionProbability : 0.6, t.generateUVs = e.generateUVs !== void 0 ? e.generateUVs : false, t.randomGenerator = e.randomGenerator, t.noiseSeed = e.noiseSeed, t.onDecideSubrayCreation = e.onDecideSubrayCreation, t.onSubrayCreation = e.onSubrayCreation, t;
  }
  update(t) {
    this.isStatic || (this.rayParameters.isEternal || this.rayParameters.birthTime <= t && t <= this.rayParameters.deathTime ? (this.updateMesh(t), t < this.subrays[0].endPropagationTime ? this.state = Mt.RAY_PROPAGATING : t > this.subrays[0].beginVanishingTime ? this.state = Mt.RAY_VANISHING : this.state = Mt.RAY_STEADY, this.visible = true) : (this.visible = false, t < this.rayParameters.birthTime ? this.state = Mt.RAY_UNBORN : this.state = Mt.RAY_EXTINGUISHED));
  }
  init(t) {
    this.rayParameters = t, this.maxIterations = t.maxIterations !== void 0 ? Math.floor(t.maxIterations) : 9, t.maxIterations = this.maxIterations, this.isStatic = t.isStatic !== void 0 ? t.isStatic : false, t.isStatic = this.isStatic, this.ramification = t.ramification !== void 0 ? Math.floor(t.ramification) : 5, t.ramification = this.ramification, this.maxSubrayRecursion = t.maxSubrayRecursion !== void 0 ? Math.floor(t.maxSubrayRecursion) : 3, t.maxSubrayRecursion = this.maxSubrayRecursion, this.recursionProbability = t.recursionProbability !== void 0 ? t.recursionProbability : 0.6, t.recursionProbability = this.recursionProbability, this.generateUVs = t.generateUVs !== void 0 ? t.generateUVs : false, t.generateUVs = this.generateUVs, t.randomGenerator !== void 0 ? (this.randomGenerator = t.randomGenerator, this.seedGenerator = t.randomGenerator, t.noiseSeed !== void 0 && this.seedGenerator.setSeed(t.noiseSeed)) : (this.randomGenerator = Mt.createRandomGenerator(), this.seedGenerator = Math), t.onDecideSubrayCreation !== void 0 ? this.onDecideSubrayCreation = t.onDecideSubrayCreation : (this.createDefaultSubrayCreationCallbacks(), t.onSubrayCreation !== void 0 && (this.onSubrayCreation = t.onSubrayCreation)), this.state = Mt.RAY_INITIALIZED, this.maxSubrays = Math.ceil(1 + Math.pow(this.ramification, Math.max(0, this.maxSubrayRecursion - 1))), t.maxSubrays = this.maxSubrays, this.maxRaySegments = 2 * (1 << this.maxIterations), this.subrays = [];
    for (let e = 0; e < this.maxSubrays; e++)
      this.subrays.push(this.createSubray());
    this.raySegments = [];
    for (let e = 0; e < this.maxRaySegments; e++)
      this.raySegments.push(this.createSegment());
    this.time = 0, this.timeFraction = 0, this.currentSegmentCallback = null, this.currentCreateTriangleVertices = this.generateUVs ? this.createTriangleVerticesWithUVs : this.createTriangleVerticesWithoutUVs, this.numSubrays = 0, this.currentSubray = null, this.currentSegmentIndex = 0, this.isInitialSegment = false, this.subrayProbability = 0, this.currentVertex = 0, this.currentIndex = 0, this.currentCoordinate = 0, this.currentUVCoordinate = 0, this.vertices = null, this.uvs = null, this.indices = null, this.positionAttribute = null, this.uvsAttribute = null, this.simplexX = new hs(this.seedGenerator), this.simplexY = new hs(this.seedGenerator), this.simplexZ = new hs(this.seedGenerator), this.forwards = new Vector3(), this.forwardsFill = new Vector3(), this.side = new Vector3(), this.down = new Vector3(), this.middlePos = new Vector3(), this.middleLinPos = new Vector3(), this.newPos = new Vector3(), this.vPos = new Vector3(), this.cross1 = new Vector3();
  }
  createMesh() {
    const t = 1 << this.maxIterations, e = 3 * (t + 1) * this.maxSubrays, r = 18 * t * this.maxSubrays;
    this.vertices = new Float32Array(e * 3), this.indices = new Uint32Array(r), this.generateUVs && (this.uvs = new Float32Array(e * 2)), this.fillMesh(0), this.setIndex(new Uint32BufferAttribute(this.indices, 1)), this.positionAttribute = new Float32BufferAttribute(this.vertices, 3), this.setAttribute("position", this.positionAttribute), this.generateUVs && (this.uvsAttribute = new Float32BufferAttribute(new Float32Array(this.uvs), 2), this.setAttribute("uv", this.uvsAttribute)), this.isStatic || (this.index.usage = DynamicDrawUsage, this.positionAttribute.usage = DynamicDrawUsage, this.generateUVs && (this.uvsAttribute.usage = DynamicDrawUsage)), this.vertices = this.positionAttribute.array, this.indices = this.index.array, this.generateUVs && (this.uvs = this.uvsAttribute.array);
  }
  updateMesh(t) {
    this.fillMesh(t), this.drawRange.count = this.currentIndex, this.index.needsUpdate = true, this.positionAttribute.needsUpdate = true, this.generateUVs && (this.uvsAttribute.needsUpdate = true);
  }
  fillMesh(t) {
    const e = this;
    this.currentVertex = 0, this.currentIndex = 0, this.currentCoordinate = 0, this.currentUVCoordinate = 0, this.fractalRay(t, function(n) {
      const i = e.currentSubray;
      t < i.birthTime || (this.rayParameters.isEternal && e.currentSubray.recursion == 0 ? (e.createPrism(n), e.onDecideSubrayCreation(n, e)) : t < i.endPropagationTime ? e.timeFraction >= n.fraction0 * i.propagationTimeFactor && (e.createPrism(n), e.onDecideSubrayCreation(n, e)) : t < i.beginVanishingTime ? (e.createPrism(n), e.onDecideSubrayCreation(n, e)) : (e.timeFraction <= i.vanishingTimeFactor + n.fraction1 * (1 - i.vanishingTimeFactor) && e.createPrism(n), e.onDecideSubrayCreation(n, e)));
    });
  }
  addNewSubray() {
    return this.subrays[this.numSubrays++];
  }
  initSubray(t, e) {
    t.pos0.copy(e.sourceOffset), t.pos1.copy(e.destOffset), t.up0.copy(e.up0), t.up1.copy(e.up1), t.radius0 = e.radius0, t.radius1 = e.radius1, t.birthTime = e.birthTime, t.deathTime = e.deathTime, t.timeScale = e.timeScale, t.roughness = e.roughness, t.straightness = e.straightness, t.propagationTimeFactor = e.propagationTimeFactor, t.vanishingTimeFactor = e.vanishingTimeFactor, t.maxIterations = this.maxIterations, t.seed = e.noiseSeed !== void 0 ? e.noiseSeed : 0, t.recursion = 0;
  }
  fractalRay(t, e) {
    this.time = t, this.currentSegmentCallback = e, this.numSubrays = 0, this.initSubray(this.addNewSubray(), this.rayParameters);
    for (let r = 0; r < this.numSubrays; r++) {
      const n = this.subrays[r];
      this.currentSubray = n, this.randomGenerator.setSeed(n.seed), n.endPropagationTime = MathUtils.lerp(n.birthTime, n.deathTime, n.propagationTimeFactor), n.beginVanishingTime = MathUtils.lerp(n.deathTime, n.birthTime, 1 - n.vanishingTimeFactor);
      const i = this.randomGenerator.random;
      n.linPos0.set(i(), i(), i()).multiplyScalar(1e3), n.linPos1.set(i(), i(), i()).multiplyScalar(1e3), this.timeFraction = (t - n.birthTime) / (n.deathTime - n.birthTime), this.currentSegmentIndex = 0, this.isInitialSegment = true;
      const s = this.getNewSegment();
      s.iteration = 0, s.pos0.copy(n.pos0), s.pos1.copy(n.pos1), s.linPos0.copy(n.linPos0), s.linPos1.copy(n.linPos1), s.up0.copy(n.up0), s.up1.copy(n.up1), s.radius0 = n.radius0, s.radius1 = n.radius1, s.fraction0 = 0, s.fraction1 = 1, s.positionVariationFactor = 1 - n.straightness, this.subrayProbability = this.ramification * Math.pow(this.recursionProbability, n.recursion) / (1 << n.maxIterations), this.fractalRayRecursive(s);
    }
    this.currentSegmentCallback = null, this.currentSubray = null;
  }
  fractalRayRecursive(t) {
    if (t.iteration >= this.currentSubray.maxIterations) {
      this.currentSegmentCallback(t);
      return;
    }
    this.forwards.subVectors(t.pos1, t.pos0);
    let e = this.forwards.length();
    e < 1e-6 && (this.forwards.set(0, 0, 0.01), e = this.forwards.length());
    const r = (t.radius0 + t.radius1) * 0.5, n = (t.fraction0 + t.fraction1) * 0.5, i = this.time * this.currentSubray.timeScale * Math.pow(2, t.iteration);
    this.middlePos.lerpVectors(t.pos0, t.pos1, 0.5), this.middleLinPos.lerpVectors(t.linPos0, t.linPos1, 0.5);
    const s = this.middleLinPos;
    this.newPos.set(
      this.simplexX.noise4d(s.x, s.y, s.z, i),
      this.simplexY.noise4d(s.x, s.y, s.z, i),
      this.simplexZ.noise4d(s.x, s.y, s.z, i)
    ), this.newPos.multiplyScalar(t.positionVariationFactor * e), this.newPos.add(this.middlePos);
    const a = this.getNewSegment();
    a.pos0.copy(t.pos0), a.pos1.copy(this.newPos), a.linPos0.copy(t.linPos0), a.linPos1.copy(this.middleLinPos), a.up0.copy(t.up0), a.up1.copy(t.up1), a.radius0 = t.radius0, a.radius1 = r, a.fraction0 = t.fraction0, a.fraction1 = n, a.positionVariationFactor = t.positionVariationFactor * this.currentSubray.roughness, a.iteration = t.iteration + 1;
    const o = this.getNewSegment();
    o.pos0.copy(this.newPos), o.pos1.copy(t.pos1), o.linPos0.copy(this.middleLinPos), o.linPos1.copy(t.linPos1), this.cross1.crossVectors(t.up0, this.forwards.normalize()), o.up0.crossVectors(this.forwards, this.cross1).normalize(), o.up1.copy(t.up1), o.radius0 = r, o.radius1 = t.radius1, o.fraction0 = n, o.fraction1 = t.fraction1, o.positionVariationFactor = t.positionVariationFactor * this.currentSubray.roughness, o.iteration = t.iteration + 1, this.fractalRayRecursive(a), this.fractalRayRecursive(o);
  }
  createPrism(t) {
    this.forwardsFill.subVectors(t.pos1, t.pos0).normalize(), this.isInitialSegment && (this.currentCreateTriangleVertices(t.pos0, t.up0, this.forwardsFill, t.radius0, 0), this.isInitialSegment = false), this.currentCreateTriangleVertices(t.pos1, t.up0, this.forwardsFill, t.radius1, t.fraction1), this.createPrismFaces();
  }
  createTriangleVerticesWithoutUVs(t, e, r, n) {
    this.side.crossVectors(e, r).multiplyScalar(n * Mt.COS30DEG), this.down.copy(e).multiplyScalar(-n * Mt.SIN30DEG);
    const i = this.vPos, s = this.vertices;
    i.copy(t).sub(this.side).add(this.down), s[this.currentCoordinate++] = i.x, s[this.currentCoordinate++] = i.y, s[this.currentCoordinate++] = i.z, i.copy(t).add(this.side).add(this.down), s[this.currentCoordinate++] = i.x, s[this.currentCoordinate++] = i.y, s[this.currentCoordinate++] = i.z, i.copy(e).multiplyScalar(n).add(t), s[this.currentCoordinate++] = i.x, s[this.currentCoordinate++] = i.y, s[this.currentCoordinate++] = i.z, this.currentVertex += 3;
  }
  createTriangleVerticesWithUVs(t, e, r, n, i) {
    this.side.crossVectors(e, r).multiplyScalar(n * Mt.COS30DEG), this.down.copy(e).multiplyScalar(-n * Mt.SIN30DEG);
    const s = this.vPos, a = this.vertices, o = this.uvs;
    s.copy(t).sub(this.side).add(this.down), a[this.currentCoordinate++] = s.x, a[this.currentCoordinate++] = s.y, a[this.currentCoordinate++] = s.z, o[this.currentUVCoordinate++] = i, o[this.currentUVCoordinate++] = 0, s.copy(t).add(this.side).add(this.down), a[this.currentCoordinate++] = s.x, a[this.currentCoordinate++] = s.y, a[this.currentCoordinate++] = s.z, o[this.currentUVCoordinate++] = i, o[this.currentUVCoordinate++] = 0.5, s.copy(e).multiplyScalar(n).add(t), a[this.currentCoordinate++] = s.x, a[this.currentCoordinate++] = s.y, a[this.currentCoordinate++] = s.z, o[this.currentUVCoordinate++] = i, o[this.currentUVCoordinate++] = 1, this.currentVertex += 3;
  }
  createPrismFaces(t) {
    const e = this.indices;
    t = this.currentVertex - 6, e[this.currentIndex++] = t + 1, e[this.currentIndex++] = t + 2, e[this.currentIndex++] = t + 5, e[this.currentIndex++] = t + 1, e[this.currentIndex++] = t + 5, e[this.currentIndex++] = t + 4, e[this.currentIndex++] = t + 0, e[this.currentIndex++] = t + 1, e[this.currentIndex++] = t + 4, e[this.currentIndex++] = t + 0, e[this.currentIndex++] = t + 4, e[this.currentIndex++] = t + 3, e[this.currentIndex++] = t + 2, e[this.currentIndex++] = t + 0, e[this.currentIndex++] = t + 3, e[this.currentIndex++] = t + 2, e[this.currentIndex++] = t + 3, e[this.currentIndex++] = t + 5;
  }
  createDefaultSubrayCreationCallbacks() {
    const t = this.randomGenerator.random;
    this.onDecideSubrayCreation = function(s, a) {
      const o = a.currentSubray, l = a.rayParameters.subrayPeriod, c = a.rayParameters.subrayDutyCycle, u = a.rayParameters.isEternal && o.recursion == 0 ? -t() * l : MathUtils.lerp(o.birthTime, o.endPropagationTime, s.fraction0) - t() * l, h = a.time - u, A = Math.floor(h / l), f = t() * (A + 1), d = h % l <= c * l;
      let v = 0;
      if (d && (v = a.subrayProbability), o.recursion < a.maxSubrayRecursion && a.numSubrays < a.maxSubrays && t() < v) {
        const m = a.addNewSubray(), E = a.randomGenerator.getSeed();
        m.seed = f, a.randomGenerator.setSeed(f), m.recursion = o.recursion + 1, m.maxIterations = Math.max(1, o.maxIterations - 1), m.linPos0.set(t(), t(), t()).multiplyScalar(1e3), m.linPos1.set(t(), t(), t()).multiplyScalar(1e3), m.up0.copy(o.up0), m.up1.copy(o.up1), m.radius0 = s.radius0 * a.rayParameters.radius0Factor, m.radius1 = Math.min(
          a.rayParameters.minRadius,
          s.radius1 * a.rayParameters.radius1Factor
        ), m.birthTime = u + A * l, m.deathTime = m.birthTime + l * c, !a.rayParameters.isEternal && o.recursion == 0 && (m.birthTime = Math.max(m.birthTime, o.birthTime), m.deathTime = Math.min(m.deathTime, o.deathTime)), m.timeScale = o.timeScale * 2, m.roughness = o.roughness, m.straightness = o.straightness, m.propagationTimeFactor = o.propagationTimeFactor, m.vanishingTimeFactor = o.vanishingTimeFactor, a.onSubrayCreation(s, o, m, a), a.randomGenerator.setSeed(E);
      }
    };
    const e = new Vector3(), r = new Vector3(), n = new Vector3(), i = new Vector3();
    this.onSubrayCreation = function(s, a, o, l) {
      l.subrayCylinderPosition(s, a, o, 0.5, 0.6, 0.2);
    }, this.subrayConePosition = function(s, a, o, l, c, u) {
      o.pos0.copy(s.pos0), e.subVectors(a.pos1, a.pos0), r.copy(e).normalize(), e.multiplyScalar(s.fraction0 + (1 - s.fraction0) * (t() * l));
      const h = e.length();
      n.crossVectors(a.up0, r);
      const A = 2 * Math.PI * t();
      n.multiplyScalar(Math.cos(A)), i.copy(a.up0).multiplyScalar(Math.sin(A)), o.pos1.copy(n).add(i).multiplyScalar(h * c * (u + t() * (1 - u))).add(e).add(a.pos0);
    }, this.subrayCylinderPosition = function(s, a, o, l, c, u) {
      o.pos0.copy(s.pos0), e.subVectors(a.pos1, a.pos0), r.copy(e).normalize(), e.multiplyScalar(s.fraction0 + (1 - s.fraction0) * ((2 * t() - 1) * l));
      const h = e.length();
      n.crossVectors(a.up0, r);
      const A = 2 * Math.PI * t();
      n.multiplyScalar(Math.cos(A)), i.copy(a.up0).multiplyScalar(Math.sin(A)), o.pos1.copy(n).add(i).multiplyScalar(h * c * (u + t() * (1 - u))).add(e).add(a.pos0);
    };
  }
  createSubray() {
    return {
      seed: 0,
      maxIterations: 0,
      recursion: 0,
      pos0: new Vector3(),
      pos1: new Vector3(),
      linPos0: new Vector3(),
      linPos1: new Vector3(),
      up0: new Vector3(),
      up1: new Vector3(),
      radius0: 0,
      radius1: 0,
      birthTime: 0,
      deathTime: 0,
      timeScale: 0,
      roughness: 0,
      straightness: 0,
      propagationTimeFactor: 0,
      vanishingTimeFactor: 0,
      endPropagationTime: 0,
      beginVanishingTime: 0
    };
  }
  createSegment() {
    return {
      iteration: 0,
      pos0: new Vector3(),
      pos1: new Vector3(),
      linPos0: new Vector3(),
      linPos1: new Vector3(),
      up0: new Vector3(),
      up1: new Vector3(),
      radius0: 0,
      radius1: 0,
      fraction0: 0,
      fraction1: 0,
      positionVariationFactor: 0
    };
  }
  getNewSegment() {
    return this.raySegments[this.currentSegmentIndex++];
  }
  copy(t) {
    return super.copy(t), this.init(Mt.copyParameters({}, t.rayParameters)), this;
  }
  clone() {
    return new this.constructor(Mt.copyParameters({}, this.rayParameters));
  }
};
let zn = Mt;
b(zn, "RAY_INITIALIZED", 0);
b(zn, "RAY_UNBORN", 1);
b(zn, "RAY_PROPAGATING", 2);
b(zn, "RAY_STEADY", 3);
b(zn, "RAY_VANISHING", 4);
b(zn, "RAY_EXTINGUISHED", 5);
b(zn, "COS30DEG", Math.cos(30 * Math.PI / 180));
b(zn, "SIN30DEG", Math.sin(30 * Math.PI / 180));
const ei = class extends Mesh {
  constructor(t, e = {}) {
    super(t), this.isReflectorForSSRPass = true, this.type = "ReflectorForSSRPass";
    const r = this, n = e.color !== void 0 ? new Color(e.color) : new Color(8355711), i = e.textureWidth || 512, s = e.textureHeight || 512, a = e.clipBias || 0, o = e.shader || ei.ReflectorShader, l = e.useDepthTexture === true, c = new Vector3(0, 1, 0), u = new Vector3(), h = new Vector3();
    r.needsUpdate = false, r.maxDistance = ei.ReflectorShader.uniforms.maxDistance.value, r.opacity = ei.ReflectorShader.uniforms.opacity.value, r.color = n, r.resolution = e.resolution || new Vector2(window.innerWidth, window.innerHeight), r._distanceAttenuation = ei.ReflectorShader.defines.DISTANCE_ATTENUATION, Object.defineProperty(r, "distanceAttenuation", {
      get() {
        return r._distanceAttenuation;
      },
      set(_) {
        r._distanceAttenuation !== _ && (r._distanceAttenuation = _, r.material.defines.DISTANCE_ATTENUATION = _, r.material.needsUpdate = true);
      }
    }), r._fresnel = ei.ReflectorShader.defines.FRESNEL, Object.defineProperty(r, "fresnel", {
      get() {
        return r._fresnel;
      },
      set(_) {
        r._fresnel !== _ && (r._fresnel = _, r.material.defines.FRESNEL = _, r.material.needsUpdate = true);
      }
    });
    const A = new Vector3(), f = new Vector3(), d = new Vector3(), v = new Matrix4(), m = new Vector3(0, 0, -1), E = new Vector3(), y = new Vector3(), p = new Matrix4(), g = new PerspectiveCamera();
    let C;
    l && (C = new DepthTexture(), C.type = UnsignedShortType, C.minFilter = NearestFilter, C.magFilter = NearestFilter);
    const S = {
      depthTexture: l ? C : null,
      type: HalfFloatType
    }, x = new WebGLRenderTarget(i, s, S), T = new ShaderMaterial({
      transparent: l,
      defines: Object.assign({}, ei.ReflectorShader.defines, {
        useDepthTexture: l
      }),
      uniforms: UniformsUtils.clone(o.uniforms),
      fragmentShader: o.fragmentShader,
      vertexShader: o.vertexShader
    });
    T.uniforms.tDiffuse.value = x.texture, T.uniforms.color.value = r.color, T.uniforms.textureMatrix.value = p, l && (T.uniforms.tDepth.value = x.depthTexture), this.material = T;
    const R = [new Plane(new Vector3(0, 1, 0), a)];
    this.doRender = function(_, F, U) {
      if (T.uniforms.maxDistance.value = r.maxDistance, T.uniforms.color.value = r.color, T.uniforms.opacity.value = r.opacity, u.copy(U.position).normalize(), h.copy(u).reflect(c), T.uniforms.fresnelCoe.value = (u.dot(h) + 1) / 2, f.setFromMatrixPosition(r.matrixWorld), d.setFromMatrixPosition(U.matrixWorld), v.extractRotation(r.matrixWorld), A.set(0, 0, 1), A.applyMatrix4(v), E.subVectors(f, d), E.dot(A) > 0)
        return;
      E.reflect(A).negate(), E.add(f), v.extractRotation(U.matrixWorld), m.set(0, 0, -1), m.applyMatrix4(v), m.add(d), y.subVectors(f, m), y.reflect(A).negate(), y.add(f), g.position.copy(E), g.up.set(0, 1, 0), g.up.applyMatrix4(v), g.up.reflect(A), g.lookAt(y), g.far = U.far, g.updateMatrixWorld(), g.projectionMatrix.copy(U.projectionMatrix), T.uniforms.virtualCameraNear.value = U.near, T.uniforms.virtualCameraFar.value = U.far, T.uniforms.virtualCameraMatrixWorld.value = g.matrixWorld, T.uniforms.virtualCameraProjectionMatrix.value = U.projectionMatrix, T.uniforms.virtualCameraProjectionMatrixInverse.value = U.projectionMatrixInverse, T.uniforms.resolution.value = r.resolution, p.set(0.5, 0, 0, 0.5, 0, 0.5, 0, 0.5, 0, 0, 0.5, 0.5, 0, 0, 0, 1), p.multiply(g.projectionMatrix), p.multiply(g.matrixWorldInverse), p.multiply(r.matrixWorld);
      const Y = _.getRenderTarget(), N = _.xr.enabled, Z = _.shadowMap.autoUpdate, j = _.clippingPlanes;
      _.xr.enabled = false, _.shadowMap.autoUpdate = false, _.clippingPlanes = R, _.setRenderTarget(x), _.state.buffers.depth.setMask(true), _.autoClear === false && _.clear(), _.render(F, g), _.xr.enabled = N, _.shadowMap.autoUpdate = Z, _.clippingPlanes = j, _.setRenderTarget(Y);
      const Q = U.viewport;
      Q !== void 0 && _.state.viewport(Q);
    }, this.getRenderTarget = function() {
      return x;
    };
  }
};
let o6 = ei;
b(o6, "ReflectorShader", {
  defines: {
    DISTANCE_ATTENUATION: true,
    FRESNEL: true
  },
  uniforms: {
    color: { value: null },
    tDiffuse: { value: null },
    tDepth: { value: null },
    textureMatrix: { value: /* @__PURE__ */ new Matrix4() },
    maxDistance: { value: 180 },
    opacity: { value: 0.5 },
    fresnelCoe: { value: null },
    virtualCameraNear: { value: null },
    virtualCameraFar: { value: null },
    virtualCameraProjectionMatrix: { value: /* @__PURE__ */ new Matrix4() },
    virtualCameraMatrixWorld: { value: /* @__PURE__ */ new Matrix4() },
    virtualCameraProjectionMatrixInverse: { value: /* @__PURE__ */ new Matrix4() },
    resolution: { value: /* @__PURE__ */ new Vector2() }
  },
  vertexShader: (
    /* glsl */
    `
		uniform mat4 textureMatrix;
		varying vec4 vUv;

		void main() {

			vUv = textureMatrix * vec4( position, 1.0 );

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`
  ),
  fragmentShader: (
    /* glsl */
    `
		uniform vec3 color;
		uniform sampler2D tDiffuse;
		uniform sampler2D tDepth;
		uniform float maxDistance;
		uniform float opacity;
		uniform float fresnelCoe;
		uniform float virtualCameraNear;
		uniform float virtualCameraFar;
		uniform mat4 virtualCameraProjectionMatrix;
		uniform mat4 virtualCameraProjectionMatrixInverse;
		uniform mat4 virtualCameraMatrixWorld;
		uniform vec2 resolution;
		varying vec4 vUv;
		#include <packing>
		float blendOverlay( float base, float blend ) {
			return( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );
		}
		vec3 blendOverlay( vec3 base, vec3 blend ) {
			return vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );
		}
		float getDepth( const in vec2 uv ) {
			return texture2D( tDepth, uv ).x;
		}
		float getViewZ( const in float depth ) {
			return perspectiveDepthToViewZ( depth, virtualCameraNear, virtualCameraFar );
		}
		vec3 getViewPosition( const in vec2 uv, const in float depth/*clip space*/, const in float clipW ) {
			vec4 clipPosition = vec4( ( vec3( uv, depth ) - 0.5 ) * 2.0, 1.0 );//ndc
			clipPosition *= clipW; //clip
			return ( virtualCameraProjectionMatrixInverse * clipPosition ).xyz;//view
		}
		void main() {
			vec4 base = texture2DProj( tDiffuse, vUv );
			#ifdef useDepthTexture
				vec2 uv=(gl_FragCoord.xy-.5)/resolution.xy;
				uv.x=1.-uv.x;
				float depth = texture2DProj( tDepth, vUv ).r;
				float viewZ = getViewZ( depth );
				float clipW = virtualCameraProjectionMatrix[2][3] * viewZ+virtualCameraProjectionMatrix[3][3];
				vec3 viewPosition=getViewPosition( uv, depth, clipW );
				vec3 worldPosition=(virtualCameraMatrixWorld*vec4(viewPosition,1)).xyz;
				if(worldPosition.y>maxDistance) discard;
				float op=opacity;
				#ifdef DISTANCE_ATTENUATION
					float ratio=1.-(worldPosition.y/maxDistance);
					float attenuation=ratio*ratio;
					op=opacity*attenuation;
				#endif
				#ifdef FRESNEL
					op*=fresnelCoe;
				#endif
				gl_FragColor = vec4( blendOverlay( base.rgb, color ), op );
			#else
				gl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );
			#endif
		}
	`
  )
});
const Ea = {
  uniforms: {
    turbidity: { value: 2 },
    rayleigh: { value: 1 },
    mieCoefficient: { value: 5e-3 },
    mieDirectionalG: { value: 0.8 },
    sunPosition: { value: /* @__PURE__ */ new Vector3() },
    up: { value: /* @__PURE__ */ new Vector3(0, 1, 0) }
  },
  vertexShader: (
    /* glsl */
    `
      uniform vec3 sunPosition;
      uniform float rayleigh;
      uniform float turbidity;
      uniform float mieCoefficient;
      uniform vec3 up;

      varying vec3 vWorldPosition;
      varying vec3 vSunDirection;
      varying float vSunfade;
      varying vec3 vBetaR;
      varying vec3 vBetaM;
      varying float vSunE;

      // constants for atmospheric scattering
      const float e = 2.71828182845904523536028747135266249775724709369995957;
      const float pi = 3.141592653589793238462643383279502884197169;

      // wavelength of used primaries, according to preetham
      const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );
      // this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:
      // (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))
      const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );

      // mie stuff
      // K coefficient for the primaries
      const float v = 4.0;
      const vec3 K = vec3( 0.686, 0.678, 0.666 );
      // MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K
      const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );

      // earth shadow hack
      // cutoffAngle = pi / 1.95;
      const float cutoffAngle = 1.6110731556870734;
      const float steepness = 1.5;
      const float EE = 1000.0;

      float sunIntensity( float zenithAngleCos ) {
        zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );
        return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );
      }

      vec3 totalMie( float T ) {
        float c = ( 0.2 * T ) * 10E-18;
        return 0.434 * c * MieConst;
      }

      void main() {

        vec4 worldPosition = modelMatrix * vec4( position, 1.0 );
        vWorldPosition = worldPosition.xyz;

        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        gl_Position.z = gl_Position.w; // set z to camera.far

        vSunDirection = normalize( sunPosition );

        vSunE = sunIntensity( dot( vSunDirection, up ) );

        vSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );

        float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );

      // extinction (absorbtion + out scattering)
      // rayleigh coefficients
        vBetaR = totalRayleigh * rayleighCoefficient;

      // mie coefficients
        vBetaM = totalMie( turbidity ) * mieCoefficient;

      }
    `
  ),
  fragmentShader: (
    /* glsl */
    `
      varying vec3 vWorldPosition;
      varying vec3 vSunDirection;
      varying float vSunfade;
      varying vec3 vBetaR;
      varying vec3 vBetaM;
      varying float vSunE;

      uniform float mieDirectionalG;
      uniform vec3 up;

      const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );

      // constants for atmospheric scattering
      const float pi = 3.141592653589793238462643383279502884197169;

      const float n = 1.0003; // refractive index of air
      const float N = 2.545E25; // number of molecules per unit volume for air at 288.15K and 1013mb (sea level -45 celsius)

      // optical length at zenith for molecules
      const float rayleighZenithLength = 8.4E3;
      const float mieZenithLength = 1.25E3;
      // 66 arc seconds -> degrees, and the cosine of that
      const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;

      // 3.0 / ( 16.0 * pi )
      const float THREE_OVER_SIXTEENPI = 0.05968310365946075;
      // 1.0 / ( 4.0 * pi )
      const float ONE_OVER_FOURPI = 0.07957747154594767;

      float rayleighPhase( float cosTheta ) {
        return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );
      }

      float hgPhase( float cosTheta, float g ) {
        float g2 = pow( g, 2.0 );
        float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );
        return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );
      }

      void main() {

        vec3 direction = normalize( vWorldPosition - cameraPos );

      // optical length
      // cutoff angle at 90 to avoid singularity in next formula.
        float zenithAngle = acos( max( 0.0, dot( up, direction ) ) );
        float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );
        float sR = rayleighZenithLength * inverse;
        float sM = mieZenithLength * inverse;

      // combined extinction factor
        vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );

      // in scattering
        float cosTheta = dot( direction, vSunDirection );

        float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );
        vec3 betaRTheta = vBetaR * rPhase;

        float mPhase = hgPhase( cosTheta, mieDirectionalG );
        vec3 betaMTheta = vBetaM * mPhase;

        vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );
        Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );

      // nightsky
        float theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]
        float phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]
        vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );
        vec3 L0 = vec3( 0.1 ) * Fex;

      // composition + solar disc
        float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );
        L0 += ( vSunE * 19000.0 * Fex ) * sundisk;

        vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );

        vec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );

        gl_FragColor = vec4( retColor, 1.0 );

      #include <tonemapping_fragment>
      #include <${parseInt(REVISION.replace(/\D+/g, "")) >= 154 ? "colorspace_fragment" : "encodings_fragment"}>

      }
    `
  )
}, n2 = /* @__PURE__ */ new ShaderMaterial({
  name: "SkyShader",
  fragmentShader: Ea.fragmentShader,
  vertexShader: Ea.vertexShader,
  uniforms: /* @__PURE__ */ UniformsUtils.clone(Ea.uniforms),
  side: BackSide,
  depthWrite: false
});
class i2 extends Mesh {
  constructor() {
    super(new BoxGeometry(1, 1, 1), n2);
  }
}
b(i2, "SkyShader", Ea);
b(i2, "material", n2);
const s2 = class extends Mesh {
  constructor(t, e = {}) {
    super(t), this.isWater = true, this.type = "Water";
    const r = this, n = e.color !== void 0 ? new Color(e.color) : new Color(16777215), i = e.textureWidth || 512, s = e.textureHeight || 512, a = e.clipBias || 0, o = e.flowDirection || new Vector2(1, 0), l = e.flowSpeed || 0.03, c = e.reflectivity || 0.02, u = e.scale || 1, h = e.shader || s2.WaterShader, A = e.encoding !== void 0 ? e.encoding : 3e3, f = e.flowMap || void 0, d = e.normalMap0, v = e.normalMap1, m = 0.15, E = m * 0.5, y = new Matrix4(), p = new Clock();
    if (Vl === void 0) {
      console.error("THREE.Water: Required component Reflector not found.");
      return;
    }
    if (zl === void 0) {
      console.error("THREE.Water: Required component Refractor not found.");
      return;
    }
    const g = new Vl(t, {
      textureWidth: i,
      textureHeight: s,
      clipBias: a,
      encoding: A
    }), C = new zl(t, {
      textureWidth: i,
      textureHeight: s,
      clipBias: a,
      encoding: A
    });
    g.matrixAutoUpdate = false, C.matrixAutoUpdate = false, this.material = new ShaderMaterial({
      uniforms: UniformsUtils.merge([UniformsLib.fog, h.uniforms]),
      vertexShader: h.vertexShader,
      fragmentShader: h.fragmentShader,
      transparent: true,
      fog: true
    }), f !== void 0 ? (this.material.defines.USE_FLOWMAP = "", this.material.uniforms.tFlowMap = {
      type: "t",
      value: f
    }) : this.material.uniforms.flowDirection = {
      type: "v2",
      value: o
    }, d.wrapS = d.wrapT = RepeatWrapping, v.wrapS = v.wrapT = RepeatWrapping, this.material.uniforms.tReflectionMap.value = g.getRenderTarget().texture, this.material.uniforms.tRefractionMap.value = C.getRenderTarget().texture, this.material.uniforms.tNormalMap0.value = d, this.material.uniforms.tNormalMap1.value = v, this.material.uniforms.color.value = n, this.material.uniforms.reflectivity.value = c, this.material.uniforms.textureMatrix.value = y, this.material.uniforms.config.value.x = 0, this.material.uniforms.config.value.y = E, this.material.uniforms.config.value.z = E, this.material.uniforms.config.value.w = u;
    function S(T) {
      y.set(0.5, 0, 0, 0.5, 0, 0.5, 0, 0.5, 0, 0, 0.5, 0.5, 0, 0, 0, 1), y.multiply(T.projectionMatrix), y.multiply(T.matrixWorldInverse), y.multiply(r.matrixWorld);
    }
    function x() {
      const T = p.getDelta(), B = r.material.uniforms.config;
      B.value.x += l * T, B.value.y = B.value.x + E, B.value.x >= m ? (B.value.x = 0, B.value.y = E) : B.value.y >= m && (B.value.y = B.value.y - m);
    }
    this.onBeforeRender = function(T, B, R) {
      S(R), x(), r.visible = false, g.matrixWorld.copy(r.matrixWorld), C.matrixWorld.copy(r.matrixWorld), g.onBeforeRender(T, B, R), C.onBeforeRender(T, B, R), r.visible = true;
    };
  }
};
let l6 = s2;
b(l6, "WaterShader", {
  uniforms: {
    color: {
      value: null
    },
    reflectivity: {
      value: 0
    },
    tReflectionMap: {
      value: null
    },
    tRefractionMap: {
      value: null
    },
    tNormalMap0: {
      value: null
    },
    tNormalMap1: {
      value: null
    },
    textureMatrix: {
      value: null
    },
    config: {
      value: /* @__PURE__ */ new Vector4()
    }
  },
  vertexShader: (
    /* glsl */
    `

		#include <common>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>

		uniform mat4 textureMatrix;

		varying vec4 vCoord;
		varying vec2 vUv;
		varying vec3 vToEye;

		void main() {

			vUv = uv;
			vCoord = textureMatrix * vec4( position, 1.0 );

			vec4 worldPosition = modelMatrix * vec4( position, 1.0 );
			vToEye = cameraPosition - worldPosition.xyz;

			vec4 mvPosition =  viewMatrix * worldPosition; // used in fog_vertex
			gl_Position = projectionMatrix * mvPosition;

			#include <logdepthbuf_vertex>
			#include <fog_vertex>

		}`
  ),
  fragmentShader: (
    /* glsl */
    `

		#include <common>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>

		uniform sampler2D tReflectionMap;
		uniform sampler2D tRefractionMap;
		uniform sampler2D tNormalMap0;
		uniform sampler2D tNormalMap1;

		#ifdef USE_FLOWMAP
			uniform sampler2D tFlowMap;
		#else
			uniform vec2 flowDirection;
		#endif

		uniform vec3 color;
		uniform float reflectivity;
		uniform vec4 config;

		varying vec4 vCoord;
		varying vec2 vUv;
		varying vec3 vToEye;

		void main() {

			#include <logdepthbuf_fragment>

			float flowMapOffset0 = config.x;
			float flowMapOffset1 = config.y;
			float halfCycle = config.z;
			float scale = config.w;

			vec3 toEye = normalize( vToEye );

			// determine flow direction
			vec2 flow;
			#ifdef USE_FLOWMAP
				flow = texture2D( tFlowMap, vUv ).rg * 2.0 - 1.0;
			#else
				flow = flowDirection;
			#endif
			flow.x *= - 1.0;

			// sample normal maps (distort uvs with flowdata)
			vec4 normalColor0 = texture2D( tNormalMap0, ( vUv * scale ) + flow * flowMapOffset0 );
			vec4 normalColor1 = texture2D( tNormalMap1, ( vUv * scale ) + flow * flowMapOffset1 );

			// linear interpolate to get the final normal color
			float flowLerp = abs( halfCycle - flowMapOffset0 ) / halfCycle;
			vec4 normalColor = mix( normalColor0, normalColor1, flowLerp );

			// calculate normal vector
			vec3 normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );

			// calculate the fresnel term to blend reflection and refraction maps
			float theta = max( dot( toEye, normal ), 0.0 );
			float reflectance = reflectivity + ( 1.0 - reflectivity ) * pow( ( 1.0 - theta ), 5.0 );

			// calculate final uv coords
			vec3 coord = vCoord.xyz / vCoord.w;
			vec2 uv = coord.xy + coord.z * normal.xz * 0.05;

			vec4 reflectColor = texture2D( tReflectionMap, vec2( 1.0 - uv.x, uv.y ) );
			vec4 refractColor = texture2D( tRefractionMap, uv );

			// multiply water color with the mix of both textures
			gl_FragColor = vec4( color, 1.0 ) * mix( refractColor, reflectColor, reflectance );

			#include <tonemapping_fragment>
			#include <${parseInt(REVISION.replace(/\D+/g, "")) >= 154 ? "colorspace_fragment" : "encodings_fragment"}>
			#include <fog_fragment>

		}`
  )
});
const jo = {
  uniforms: {
    tDiffuse: { value: null },
    opacity: { value: 1 }
  },
  vertexShader: [
    "varying vec2 vUv;",
    "void main() {",
    "	vUv = uv;",
    "	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",
    "}"
  ].join(`
`),
  fragmentShader: [
    "uniform float opacity;",
    "uniform sampler2D tDiffuse;",
    "varying vec2 vUv;",
    "#include <packing>",
    "void main() {",
    "	float depth = 1.0 - unpackRGBAToDepth( texture2D( tDiffuse, vUv ) );",
    "	gl_FragColor = vec4( vec3( depth ), opacity );",
    "}"
  ].join(`
`)
};
class c6 extends Object3D {
  constructor(e, r) {
    super(), b(this, "isTransformControls", true), b(this, "visible", false), b(this, "domElement"), b(this, "raycaster", new Raycaster()), b(this, "gizmo"), b(this, "plane"), b(this, "tempVector", new Vector3()), b(this, "tempVector2", new Vector3()), b(this, "tempQuaternion", new Quaternion()), b(this, "unit", {
      X: new Vector3(1, 0, 0),
      Y: new Vector3(0, 1, 0),
      Z: new Vector3(0, 0, 1)
    }), b(this, "pointStart", new Vector3()), b(this, "pointEnd", new Vector3()), b(this, "offset", new Vector3()), b(this, "rotationAxis", new Vector3()), b(this, "startNorm", new Vector3()), b(this, "endNorm", new Vector3()), b(this, "rotationAngle", 0), b(this, "cameraPosition", new Vector3()), b(this, "cameraQuaternion", new Quaternion()), b(this, "cameraScale", new Vector3()), b(this, "parentPosition", new Vector3()), b(this, "parentQuaternion", new Quaternion()), b(this, "parentQuaternionInv", new Quaternion()), b(this, "parentScale", new Vector3()), b(this, "worldPositionStart", new Vector3()), b(this, "worldQuaternionStart", new Quaternion()), b(this, "worldScaleStart", new Vector3()), b(this, "worldPosition", new Vector3()), b(this, "worldQuaternion", new Quaternion()), b(this, "worldQuaternionInv", new Quaternion()), b(this, "worldScale", new Vector3()), b(this, "eye", new Vector3()), b(this, "positionStart", new Vector3()), b(this, "quaternionStart", new Quaternion()), b(this, "scaleStart", new Vector3()), b(this, "camera"), b(this, "object"), b(this, "enabled", true), b(this, "axis", null), b(this, "mode", "translate"), b(this, "translationSnap", null), b(this, "rotationSnap", null), b(this, "scaleSnap", null), b(this, "space", "world"), b(this, "size", 1), b(this, "dragging", false), b(this, "showX", true), b(this, "showY", true), b(this, "showZ", true), b(this, "changeEvent", { type: "change" }), b(this, "mouseDownEvent", { type: "mouseDown", mode: this.mode }), b(this, "mouseUpEvent", { type: "mouseUp", mode: this.mode }), b(this, "objectChangeEvent", { type: "objectChange" }), b(this, "intersectObjectWithRay", (i, s, a) => {
      const o = s.intersectObject(i, true);
      for (let l = 0; l < o.length; l++)
        if (o[l].object.visible || a)
          return o[l];
      return false;
    }), b(this, "attach", (i) => (this.object = i, this.visible = true, this)), b(this, "detach", () => (this.object = void 0, this.visible = false, this.axis = null, this)), b(this, "reset", () => this.enabled ? (this.dragging && this.object !== void 0 && (this.object.position.copy(this.positionStart), this.object.quaternion.copy(this.quaternionStart), this.object.scale.copy(this.scaleStart), this.dispatchEvent(this.changeEvent), this.dispatchEvent(this.objectChangeEvent), this.pointStart.copy(this.pointEnd)), this) : this), b(this, "updateMatrixWorld", () => {
      this.object !== void 0 && (this.object.updateMatrixWorld(), this.object.parent === null ? console.error("TransformControls: The attached 3D object must be a part of the scene graph.") : this.object.parent.matrixWorld.decompose(this.parentPosition, this.parentQuaternion, this.parentScale), this.object.matrixWorld.decompose(this.worldPosition, this.worldQuaternion, this.worldScale), this.parentQuaternionInv.copy(this.parentQuaternion).invert(), this.worldQuaternionInv.copy(this.worldQuaternion).invert()), this.camera.updateMatrixWorld(), this.camera.matrixWorld.decompose(this.cameraPosition, this.cameraQuaternion, this.cameraScale), this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize(), super.updateMatrixWorld();
    }), b(this, "pointerHover", (i) => {
      if (this.object === void 0 || this.dragging === true)
        return;
      this.raycaster.setFromCamera(i, this.camera);
      const s = this.intersectObjectWithRay(this.gizmo.picker[this.mode], this.raycaster);
      s ? this.axis = s.object.name : this.axis = null;
    }), b(this, "pointerDown", (i) => {
      if (!(this.object === void 0 || this.dragging === true || i.button !== 0) && this.axis !== null) {
        this.raycaster.setFromCamera(i, this.camera);
        const s = this.intersectObjectWithRay(this.plane, this.raycaster, true);
        if (s) {
          let a = this.space;
          if (this.mode === "scale" ? a = "local" : (this.axis === "E" || this.axis === "XYZE" || this.axis === "XYZ") && (a = "world"), a === "local" && this.mode === "rotate") {
            const o = this.rotationSnap;
            this.axis === "X" && o && (this.object.rotation.x = Math.round(this.object.rotation.x / o) * o), this.axis === "Y" && o && (this.object.rotation.y = Math.round(this.object.rotation.y / o) * o), this.axis === "Z" && o && (this.object.rotation.z = Math.round(this.object.rotation.z / o) * o);
          }
          this.object.updateMatrixWorld(), this.object.parent && this.object.parent.updateMatrixWorld(), this.positionStart.copy(this.object.position), this.quaternionStart.copy(this.object.quaternion), this.scaleStart.copy(this.object.scale), this.object.matrixWorld.decompose(this.worldPositionStart, this.worldQuaternionStart, this.worldScaleStart), this.pointStart.copy(s.point).sub(this.worldPositionStart);
        }
        this.dragging = true, this.mouseDownEvent.mode = this.mode, this.dispatchEvent(this.mouseDownEvent);
      }
    }), b(this, "pointerMove", (i) => {
      const s = this.axis, a = this.mode, o = this.object;
      let l = this.space;
      if (a === "scale" ? l = "local" : (s === "E" || s === "XYZE" || s === "XYZ") && (l = "world"), o === void 0 || s === null || this.dragging === false || i.button !== -1)
        return;
      this.raycaster.setFromCamera(i, this.camera);
      const c = this.intersectObjectWithRay(this.plane, this.raycaster, true);
      if (c) {
        if (this.pointEnd.copy(c.point).sub(this.worldPositionStart), a === "translate")
          this.offset.copy(this.pointEnd).sub(this.pointStart), l === "local" && s !== "XYZ" && this.offset.applyQuaternion(this.worldQuaternionInv), s.indexOf("X") === -1 && (this.offset.x = 0), s.indexOf("Y") === -1 && (this.offset.y = 0), s.indexOf("Z") === -1 && (this.offset.z = 0), l === "local" && s !== "XYZ" ? this.offset.applyQuaternion(this.quaternionStart).divide(this.parentScale) : this.offset.applyQuaternion(this.parentQuaternionInv).divide(this.parentScale), o.position.copy(this.offset).add(this.positionStart), this.translationSnap && (l === "local" && (o.position.applyQuaternion(this.tempQuaternion.copy(this.quaternionStart).invert()), s.search("X") !== -1 && (o.position.x = Math.round(o.position.x / this.translationSnap) * this.translationSnap), s.search("Y") !== -1 && (o.position.y = Math.round(o.position.y / this.translationSnap) * this.translationSnap), s.search("Z") !== -1 && (o.position.z = Math.round(o.position.z / this.translationSnap) * this.translationSnap), o.position.applyQuaternion(this.quaternionStart)), l === "world" && (o.parent && o.position.add(this.tempVector.setFromMatrixPosition(o.parent.matrixWorld)), s.search("X") !== -1 && (o.position.x = Math.round(o.position.x / this.translationSnap) * this.translationSnap), s.search("Y") !== -1 && (o.position.y = Math.round(o.position.y / this.translationSnap) * this.translationSnap), s.search("Z") !== -1 && (o.position.z = Math.round(o.position.z / this.translationSnap) * this.translationSnap), o.parent && o.position.sub(this.tempVector.setFromMatrixPosition(o.parent.matrixWorld))));
        else if (a === "scale") {
          if (s.search("XYZ") !== -1) {
            let u = this.pointEnd.length() / this.pointStart.length();
            this.pointEnd.dot(this.pointStart) < 0 && (u *= -1), this.tempVector2.set(u, u, u);
          } else
            this.tempVector.copy(this.pointStart), this.tempVector2.copy(this.pointEnd), this.tempVector.applyQuaternion(this.worldQuaternionInv), this.tempVector2.applyQuaternion(this.worldQuaternionInv), this.tempVector2.divide(this.tempVector), s.search("X") === -1 && (this.tempVector2.x = 1), s.search("Y") === -1 && (this.tempVector2.y = 1), s.search("Z") === -1 && (this.tempVector2.z = 1);
          o.scale.copy(this.scaleStart).multiply(this.tempVector2), this.scaleSnap && this.object && (s.search("X") !== -1 && (this.object.scale.x = Math.round(o.scale.x / this.scaleSnap) * this.scaleSnap || this.scaleSnap), s.search("Y") !== -1 && (o.scale.y = Math.round(o.scale.y / this.scaleSnap) * this.scaleSnap || this.scaleSnap), s.search("Z") !== -1 && (o.scale.z = Math.round(o.scale.z / this.scaleSnap) * this.scaleSnap || this.scaleSnap));
        } else if (a === "rotate") {
          this.offset.copy(this.pointEnd).sub(this.pointStart);
          const u = 20 / this.worldPosition.distanceTo(this.tempVector.setFromMatrixPosition(this.camera.matrixWorld));
          s === "E" ? (this.rotationAxis.copy(this.eye), this.rotationAngle = this.pointEnd.angleTo(this.pointStart), this.startNorm.copy(this.pointStart).normalize(), this.endNorm.copy(this.pointEnd).normalize(), this.rotationAngle *= this.endNorm.cross(this.startNorm).dot(this.eye) < 0 ? 1 : -1) : s === "XYZE" ? (this.rotationAxis.copy(this.offset).cross(this.eye).normalize(), this.rotationAngle = this.offset.dot(this.tempVector.copy(this.rotationAxis).cross(this.eye)) * u) : (s === "X" || s === "Y" || s === "Z") && (this.rotationAxis.copy(this.unit[s]), this.tempVector.copy(this.unit[s]), l === "local" && this.tempVector.applyQuaternion(this.worldQuaternion), this.rotationAngle = this.offset.dot(this.tempVector.cross(this.eye).normalize()) * u), this.rotationSnap && (this.rotationAngle = Math.round(this.rotationAngle / this.rotationSnap) * this.rotationSnap), l === "local" && s !== "E" && s !== "XYZE" ? (o.quaternion.copy(this.quaternionStart), o.quaternion.multiply(this.tempQuaternion.setFromAxisAngle(this.rotationAxis, this.rotationAngle)).normalize()) : (this.rotationAxis.applyQuaternion(this.parentQuaternionInv), o.quaternion.copy(this.tempQuaternion.setFromAxisAngle(this.rotationAxis, this.rotationAngle)), o.quaternion.multiply(this.quaternionStart).normalize());
        }
        this.dispatchEvent(this.changeEvent), this.dispatchEvent(this.objectChangeEvent);
      }
    }), b(this, "pointerUp", (i) => {
      i.button === 0 && (this.dragging && this.axis !== null && (this.mouseUpEvent.mode = this.mode, this.dispatchEvent(this.mouseUpEvent)), this.dragging = false, this.axis = null);
    }), b(this, "getPointer", (i) => {
      var s, a;
      if (this.domElement && ((s = this.domElement.ownerDocument) != null && s.pointerLockElement))
        return {
          x: 0,
          y: 0,
          button: i.button
        };
      {
        const o = i.changedTouches ? i.changedTouches[0] : i, l = (a = this.domElement) == null ? void 0 : a.getBoundingClientRect();
        return {
          x: (o.clientX - l.left) / l.width * 2 - 1,
          y: -(o.clientY - l.top) / l.height * 2 + 1,
          button: i.button
        };
      }
    }), b(this, "onPointerHover", (i) => {
      if (this.enabled)
        switch (i.pointerType) {
          case "mouse":
          case "pen":
            this.pointerHover(this.getPointer(i));
            break;
        }
    }), b(this, "onPointerDown", (i) => {
      !this.enabled || !this.domElement || (this.domElement.style.touchAction = "none", this.domElement.ownerDocument.addEventListener("pointermove", this.onPointerMove), this.pointerHover(this.getPointer(i)), this.pointerDown(this.getPointer(i)));
    }), b(this, "onPointerMove", (i) => {
      this.enabled && this.pointerMove(this.getPointer(i));
    }), b(this, "onPointerUp", (i) => {
      !this.enabled || !this.domElement || (this.domElement.style.touchAction = "", this.domElement.ownerDocument.removeEventListener("pointermove", this.onPointerMove), this.pointerUp(this.getPointer(i)));
    }), b(this, "getMode", () => this.mode), b(this, "setMode", (i) => {
      this.mode = i;
    }), b(this, "setTranslationSnap", (i) => {
      this.translationSnap = i;
    }), b(this, "setRotationSnap", (i) => {
      this.rotationSnap = i;
    }), b(this, "setScaleSnap", (i) => {
      this.scaleSnap = i;
    }), b(this, "setSize", (i) => {
      this.size = i;
    }), b(this, "setSpace", (i) => {
      this.space = i;
    }), b(this, "update", () => {
      console.warn(
        "THREE.TransformControls: update function has no more functionality and therefore has been deprecated."
      );
    }), b(this, "connect", (i) => {
      i === document && console.error(
        'THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'
      ), this.domElement = i, this.domElement.addEventListener("pointerdown", this.onPointerDown), this.domElement.addEventListener("pointermove", this.onPointerHover), this.domElement.ownerDocument.addEventListener("pointerup", this.onPointerUp);
    }), b(this, "dispose", () => {
      var i, s, a, o, l, c;
      (i = this.domElement) == null || i.removeEventListener("pointerdown", this.onPointerDown), (s = this.domElement) == null || s.removeEventListener("pointermove", this.onPointerHover), (o = (a = this.domElement) == null ? void 0 : a.ownerDocument) == null || o.removeEventListener("pointermove", this.onPointerMove), (c = (l = this.domElement) == null ? void 0 : l.ownerDocument) == null || c.removeEventListener("pointerup", this.onPointerUp), this.traverse((u) => {
        const h = u;
        h.geometry && h.geometry.dispose(), h.material && h.material.dispose();
      });
    }), this.domElement = r, this.camera = e, this.gizmo = new u6(), this.add(this.gizmo), this.plane = new h6(), this.add(this.plane);
    const n = (i, s) => {
      let a = s;
      Object.defineProperty(this, i, {
        get: function() {
          return a !== void 0 ? a : s;
        },
        set: function(o) {
          a !== o && (a = o, this.plane[i] = o, this.gizmo[i] = o, this.dispatchEvent({ type: i + "-changed", value: o }), this.dispatchEvent(this.changeEvent));
        }
      }), this[i] = s, this.plane[i] = s, this.gizmo[i] = s;
    };
    n("camera", this.camera), n("object", this.object), n("enabled", this.enabled), n("axis", this.axis), n("mode", this.mode), n("translationSnap", this.translationSnap), n("rotationSnap", this.rotationSnap), n("scaleSnap", this.scaleSnap), n("space", this.space), n("size", this.size), n("dragging", this.dragging), n("showX", this.showX), n("showY", this.showY), n("showZ", this.showZ), n("worldPosition", this.worldPosition), n("worldPositionStart", this.worldPositionStart), n("worldQuaternion", this.worldQuaternion), n("worldQuaternionStart", this.worldQuaternionStart), n("cameraPosition", this.cameraPosition), n("cameraQuaternion", this.cameraQuaternion), n("pointStart", this.pointStart), n("pointEnd", this.pointEnd), n("rotationAxis", this.rotationAxis), n("rotationAngle", this.rotationAngle), n("eye", this.eye), r !== void 0 && this.connect(r);
  }
}
class u6 extends Object3D {
  constructor() {
    super(), b(this, "isTransformControlsGizmo", true), b(this, "type", "TransformControlsGizmo"), b(this, "tempVector", new Vector3(0, 0, 0)), b(this, "tempEuler", new Euler()), b(this, "alignVector", new Vector3(0, 1, 0)), b(this, "zeroVector", new Vector3(0, 0, 0)), b(this, "lookAtMatrix", new Matrix4()), b(this, "tempQuaternion", new Quaternion()), b(this, "tempQuaternion2", new Quaternion()), b(this, "identityQuaternion", new Quaternion()), b(this, "unitX", new Vector3(1, 0, 0)), b(this, "unitY", new Vector3(0, 1, 0)), b(this, "unitZ", new Vector3(0, 0, 1)), b(this, "gizmo"), b(this, "picker"), b(this, "helper"), b(this, "rotationAxis", new Vector3()), b(this, "cameraPosition", new Vector3()), b(this, "worldPositionStart", new Vector3()), b(this, "worldQuaternionStart", new Quaternion()), b(this, "worldPosition", new Vector3()), b(this, "worldQuaternion", new Quaternion()), b(this, "eye", new Vector3()), b(this, "camera", null), b(this, "enabled", true), b(this, "axis", null), b(this, "mode", "translate"), b(this, "space", "world"), b(this, "size", 1), b(this, "dragging", false), b(this, "showX", true), b(this, "showY", true), b(this, "showZ", true), b(this, "updateMatrixWorld", () => {
      let X = this.space;
      this.mode === "scale" && (X = "local");
      const K = X === "local" ? this.worldQuaternion : this.identityQuaternion;
      this.gizmo.translate.visible = this.mode === "translate", this.gizmo.rotate.visible = this.mode === "rotate", this.gizmo.scale.visible = this.mode === "scale", this.helper.translate.visible = this.mode === "translate", this.helper.rotate.visible = this.mode === "rotate", this.helper.scale.visible = this.mode === "scale";
      let D = [];
      D = D.concat(this.picker[this.mode].children), D = D.concat(this.gizmo[this.mode].children), D = D.concat(this.helper[this.mode].children);
      for (let L = 0; L < D.length; L++) {
        const I = D[L];
        I.visible = true, I.rotation.set(0, 0, 0), I.position.copy(this.worldPosition);
        let O;
        if (this.camera.isOrthographicCamera ? O = (this.camera.top - this.camera.bottom) / this.camera.zoom : O = this.worldPosition.distanceTo(this.cameraPosition) * Math.min(1.9 * Math.tan(Math.PI * this.camera.fov / 360) / this.camera.zoom, 7), I.scale.set(1, 1, 1).multiplyScalar(O * this.size / 7), I.tag === "helper") {
          I.visible = false, I.name === "AXIS" ? (I.position.copy(this.worldPositionStart), I.visible = !!this.axis, this.axis === "X" && (this.tempQuaternion.setFromEuler(this.tempEuler.set(0, 0, 0)), I.quaternion.copy(K).multiply(this.tempQuaternion), Math.abs(this.alignVector.copy(this.unitX).applyQuaternion(K).dot(this.eye)) > 0.9 && (I.visible = false)), this.axis === "Y" && (this.tempQuaternion.setFromEuler(this.tempEuler.set(0, 0, Math.PI / 2)), I.quaternion.copy(K).multiply(this.tempQuaternion), Math.abs(this.alignVector.copy(this.unitY).applyQuaternion(K).dot(this.eye)) > 0.9 && (I.visible = false)), this.axis === "Z" && (this.tempQuaternion.setFromEuler(this.tempEuler.set(0, Math.PI / 2, 0)), I.quaternion.copy(K).multiply(this.tempQuaternion), Math.abs(this.alignVector.copy(this.unitZ).applyQuaternion(K).dot(this.eye)) > 0.9 && (I.visible = false)), this.axis === "XYZE" && (this.tempQuaternion.setFromEuler(this.tempEuler.set(0, Math.PI / 2, 0)), this.alignVector.copy(this.rotationAxis), I.quaternion.setFromRotationMatrix(
            this.lookAtMatrix.lookAt(this.zeroVector, this.alignVector, this.unitY)
          ), I.quaternion.multiply(this.tempQuaternion), I.visible = this.dragging), this.axis === "E" && (I.visible = false)) : I.name === "START" ? (I.position.copy(this.worldPositionStart), I.visible = this.dragging) : I.name === "END" ? (I.position.copy(this.worldPosition), I.visible = this.dragging) : I.name === "DELTA" ? (I.position.copy(this.worldPositionStart), I.quaternion.copy(this.worldQuaternionStart), this.tempVector.set(1e-10, 1e-10, 1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1), this.tempVector.applyQuaternion(this.worldQuaternionStart.clone().invert()), I.scale.copy(this.tempVector), I.visible = this.dragging) : (I.quaternion.copy(K), this.dragging ? I.position.copy(this.worldPositionStart) : I.position.copy(this.worldPosition), this.axis && (I.visible = this.axis.search(I.name) !== -1));
          continue;
        }
        I.quaternion.copy(K), this.mode === "translate" || this.mode === "scale" ? ((I.name === "X" || I.name === "XYZX") && Math.abs(this.alignVector.copy(this.unitX).applyQuaternion(K).dot(this.eye)) > 0.99 && (I.scale.set(1e-10, 1e-10, 1e-10), I.visible = false), (I.name === "Y" || I.name === "XYZY") && Math.abs(this.alignVector.copy(this.unitY).applyQuaternion(K).dot(this.eye)) > 0.99 && (I.scale.set(1e-10, 1e-10, 1e-10), I.visible = false), (I.name === "Z" || I.name === "XYZZ") && Math.abs(this.alignVector.copy(this.unitZ).applyQuaternion(K).dot(this.eye)) > 0.99 && (I.scale.set(1e-10, 1e-10, 1e-10), I.visible = false), I.name === "XY" && Math.abs(this.alignVector.copy(this.unitZ).applyQuaternion(K).dot(this.eye)) < 0.2 && (I.scale.set(1e-10, 1e-10, 1e-10), I.visible = false), I.name === "YZ" && Math.abs(this.alignVector.copy(this.unitX).applyQuaternion(K).dot(this.eye)) < 0.2 && (I.scale.set(1e-10, 1e-10, 1e-10), I.visible = false), I.name === "XZ" && Math.abs(this.alignVector.copy(this.unitY).applyQuaternion(K).dot(this.eye)) < 0.2 && (I.scale.set(1e-10, 1e-10, 1e-10), I.visible = false), I.name.search("X") !== -1 && (this.alignVector.copy(this.unitX).applyQuaternion(K).dot(this.eye) < 0 ? I.tag === "fwd" ? I.visible = false : I.scale.x *= -1 : I.tag === "bwd" && (I.visible = false)), I.name.search("Y") !== -1 && (this.alignVector.copy(this.unitY).applyQuaternion(K).dot(this.eye) < 0 ? I.tag === "fwd" ? I.visible = false : I.scale.y *= -1 : I.tag === "bwd" && (I.visible = false)), I.name.search("Z") !== -1 && (this.alignVector.copy(this.unitZ).applyQuaternion(K).dot(this.eye) < 0 ? I.tag === "fwd" ? I.visible = false : I.scale.z *= -1 : I.tag === "bwd" && (I.visible = false))) : this.mode === "rotate" && (this.tempQuaternion2.copy(K), this.alignVector.copy(this.eye).applyQuaternion(this.tempQuaternion.copy(K).invert()), I.name.search("E") !== -1 && I.quaternion.setFromRotationMatrix(this.lookAtMatrix.lookAt(this.eye, this.zeroVector, this.unitY)), I.name === "X" && (this.tempQuaternion.setFromAxisAngle(this.unitX, Math.atan2(-this.alignVector.y, this.alignVector.z)), this.tempQuaternion.multiplyQuaternions(this.tempQuaternion2, this.tempQuaternion), I.quaternion.copy(this.tempQuaternion)), I.name === "Y" && (this.tempQuaternion.setFromAxisAngle(this.unitY, Math.atan2(this.alignVector.x, this.alignVector.z)), this.tempQuaternion.multiplyQuaternions(this.tempQuaternion2, this.tempQuaternion), I.quaternion.copy(this.tempQuaternion)), I.name === "Z" && (this.tempQuaternion.setFromAxisAngle(this.unitZ, Math.atan2(this.alignVector.y, this.alignVector.x)), this.tempQuaternion.multiplyQuaternions(this.tempQuaternion2, this.tempQuaternion), I.quaternion.copy(this.tempQuaternion))), I.visible = I.visible && (I.name.indexOf("X") === -1 || this.showX), I.visible = I.visible && (I.name.indexOf("Y") === -1 || this.showY), I.visible = I.visible && (I.name.indexOf("Z") === -1 || this.showZ), I.visible = I.visible && (I.name.indexOf("E") === -1 || this.showX && this.showY && this.showZ), I.material.tempOpacity = I.material.tempOpacity || I.material.opacity, I.material.tempColor = I.material.tempColor || I.material.color.clone(), I.material.color.copy(I.material.tempColor), I.material.opacity = I.material.tempOpacity, this.enabled ? this.axis && (I.name === this.axis ? (I.material.opacity = 1, I.material.color.lerp(new Color(1, 1, 1), 0.5)) : this.axis.split("").some(function(V) {
          return I.name === V;
        }) ? (I.material.opacity = 1, I.material.color.lerp(new Color(1, 1, 1), 0.5)) : (I.material.opacity *= 0.25, I.material.color.lerp(new Color(1, 1, 1), 0.5))) : (I.material.opacity *= 0.5, I.material.color.lerp(new Color(1, 1, 1), 0.5));
      }
      super.updateMatrixWorld();
    });
    const e = new MeshBasicMaterial({
      depthTest: false,
      depthWrite: false,
      transparent: true,
      side: DoubleSide,
      fog: false,
      toneMapped: false
    }), r = new LineBasicMaterial({
      depthTest: false,
      depthWrite: false,
      transparent: true,
      linewidth: 1,
      fog: false,
      toneMapped: false
    }), n = e.clone();
    n.opacity = 0.15;
    const i = e.clone();
    i.opacity = 0.33;
    const s = e.clone();
    s.color.set(16711680);
    const a = e.clone();
    a.color.set(65280);
    const o = e.clone();
    o.color.set(255);
    const l = e.clone();
    l.opacity = 0.25;
    const c = l.clone();
    c.color.set(16776960);
    const u = l.clone();
    u.color.set(65535);
    const h = l.clone();
    h.color.set(16711935), e.clone().color.set(16776960);
    const f = r.clone();
    f.color.set(16711680);
    const d = r.clone();
    d.color.set(65280);
    const v = r.clone();
    v.color.set(255);
    const m = r.clone();
    m.color.set(65535);
    const E = r.clone();
    E.color.set(16711935);
    const y = r.clone();
    y.color.set(16776960);
    const p = r.clone();
    p.color.set(7895160);
    const g = y.clone();
    g.opacity = 0.25;
    const C = new CylinderGeometry(0, 0.05, 0.2, 12, 1, false), S = new BoxGeometry(0.125, 0.125, 0.125), x = new BufferGeometry();
    x.setAttribute("position", new Float32BufferAttribute([0, 0, 0, 1, 0, 0], 3));
    const T = (X, K) => {
      const D = new BufferGeometry(), L = [];
      for (let I = 0; I <= 64 * K; ++I)
        L.push(0, Math.cos(I / 32 * Math.PI) * X, Math.sin(I / 32 * Math.PI) * X);
      return D.setAttribute("position", new Float32BufferAttribute(L, 3)), D;
    }, B = () => {
      const X = new BufferGeometry();
      return X.setAttribute("position", new Float32BufferAttribute([0, 0, 0, 1, 1, 1], 3)), X;
    }, R = {
      X: [
        [new Mesh(C, s), [1, 0, 0], [0, 0, -Math.PI / 2], null, "fwd"],
        [new Mesh(C, s), [1, 0, 0], [0, 0, Math.PI / 2], null, "bwd"],
        [new Line(x, f)]
      ],
      Y: [
        [new Mesh(C, a), [0, 1, 0], null, null, "fwd"],
        [new Mesh(C, a), [0, 1, 0], [Math.PI, 0, 0], null, "bwd"],
        [new Line(x, d), null, [0, 0, Math.PI / 2]]
      ],
      Z: [
        [new Mesh(C, o), [0, 0, 1], [Math.PI / 2, 0, 0], null, "fwd"],
        [new Mesh(C, o), [0, 0, 1], [-Math.PI / 2, 0, 0], null, "bwd"],
        [new Line(x, v), null, [0, -Math.PI / 2, 0]]
      ],
      XYZ: [[new Mesh(new OctahedronGeometry(0.1, 0), l.clone()), [0, 0, 0], [0, 0, 0]]],
      XY: [
        [new Mesh(new PlaneGeometry(0.295, 0.295), c.clone()), [0.15, 0.15, 0]],
        [new Line(x, y), [0.18, 0.3, 0], null, [0.125, 1, 1]],
        [new Line(x, y), [0.3, 0.18, 0], [0, 0, Math.PI / 2], [0.125, 1, 1]]
      ],
      YZ: [
        [new Mesh(new PlaneGeometry(0.295, 0.295), u.clone()), [0, 0.15, 0.15], [0, Math.PI / 2, 0]],
        [new Line(x, m), [0, 0.18, 0.3], [0, 0, Math.PI / 2], [0.125, 1, 1]],
        [new Line(x, m), [0, 0.3, 0.18], [0, -Math.PI / 2, 0], [0.125, 1, 1]]
      ],
      XZ: [
        [
          new Mesh(new PlaneGeometry(0.295, 0.295), h.clone()),
          [0.15, 0, 0.15],
          [-Math.PI / 2, 0, 0]
        ],
        [new Line(x, E), [0.18, 0, 0.3], null, [0.125, 1, 1]],
        [new Line(x, E), [0.3, 0, 0.18], [0, -Math.PI / 2, 0], [0.125, 1, 1]]
      ]
    }, _ = {
      X: [[new Mesh(new CylinderGeometry(0.2, 0, 1, 4, 1, false), n), [0.6, 0, 0], [0, 0, -Math.PI / 2]]],
      Y: [[new Mesh(new CylinderGeometry(0.2, 0, 1, 4, 1, false), n), [0, 0.6, 0]]],
      Z: [[new Mesh(new CylinderGeometry(0.2, 0, 1, 4, 1, false), n), [0, 0, 0.6], [Math.PI / 2, 0, 0]]],
      XYZ: [[new Mesh(new OctahedronGeometry(0.2, 0), n)]],
      XY: [[new Mesh(new PlaneGeometry(0.4, 0.4), n), [0.2, 0.2, 0]]],
      YZ: [[new Mesh(new PlaneGeometry(0.4, 0.4), n), [0, 0.2, 0.2], [0, Math.PI / 2, 0]]],
      XZ: [[new Mesh(new PlaneGeometry(0.4, 0.4), n), [0.2, 0, 0.2], [-Math.PI / 2, 0, 0]]]
    }, F = {
      START: [[new Mesh(new OctahedronGeometry(0.01, 2), i), null, null, null, "helper"]],
      END: [[new Mesh(new OctahedronGeometry(0.01, 2), i), null, null, null, "helper"]],
      DELTA: [[new Line(B(), i), null, null, null, "helper"]],
      X: [[new Line(x, i.clone()), [-1e3, 0, 0], null, [1e6, 1, 1], "helper"]],
      Y: [[new Line(x, i.clone()), [0, -1e3, 0], [0, 0, Math.PI / 2], [1e6, 1, 1], "helper"]],
      Z: [[new Line(x, i.clone()), [0, 0, -1e3], [0, -Math.PI / 2, 0], [1e6, 1, 1], "helper"]]
    }, U = {
      X: [
        [new Line(T(1, 0.5), f)],
        [new Mesh(new OctahedronGeometry(0.04, 0), s), [0, 0, 0.99], null, [1, 3, 1]]
      ],
      Y: [
        [new Line(T(1, 0.5), d), null, [0, 0, -Math.PI / 2]],
        [new Mesh(new OctahedronGeometry(0.04, 0), a), [0, 0, 0.99], null, [3, 1, 1]]
      ],
      Z: [
        [new Line(T(1, 0.5), v), null, [0, Math.PI / 2, 0]],
        [new Mesh(new OctahedronGeometry(0.04, 0), o), [0.99, 0, 0], null, [1, 3, 1]]
      ],
      E: [
        [new Line(T(1.25, 1), g), null, [0, Math.PI / 2, 0]],
        [
          new Mesh(new CylinderGeometry(0.03, 0, 0.15, 4, 1, false), g),
          [1.17, 0, 0],
          [0, 0, -Math.PI / 2],
          [1, 1, 1e-3]
        ],
        [
          new Mesh(new CylinderGeometry(0.03, 0, 0.15, 4, 1, false), g),
          [-1.17, 0, 0],
          [0, 0, Math.PI / 2],
          [1, 1, 1e-3]
        ],
        [
          new Mesh(new CylinderGeometry(0.03, 0, 0.15, 4, 1, false), g),
          [0, -1.17, 0],
          [Math.PI, 0, 0],
          [1, 1, 1e-3]
        ],
        [
          new Mesh(new CylinderGeometry(0.03, 0, 0.15, 4, 1, false), g),
          [0, 1.17, 0],
          [0, 0, 0],
          [1, 1, 1e-3]
        ]
      ],
      XYZE: [[new Line(T(1, 1), p), null, [0, Math.PI / 2, 0]]]
    }, Y = {
      AXIS: [[new Line(x, i.clone()), [-1e3, 0, 0], null, [1e6, 1, 1], "helper"]]
    }, N = {
      X: [[new Mesh(new TorusGeometry(1, 0.1, 4, 24), n), [0, 0, 0], [0, -Math.PI / 2, -Math.PI / 2]]],
      Y: [[new Mesh(new TorusGeometry(1, 0.1, 4, 24), n), [0, 0, 0], [Math.PI / 2, 0, 0]]],
      Z: [[new Mesh(new TorusGeometry(1, 0.1, 4, 24), n), [0, 0, 0], [0, 0, -Math.PI / 2]]],
      E: [[new Mesh(new TorusGeometry(1.25, 0.1, 2, 24), n)]],
      XYZE: [[new Mesh(new SphereGeometry(0.7, 10, 8), n)]]
    }, Z = {
      X: [
        [new Mesh(S, s), [0.8, 0, 0], [0, 0, -Math.PI / 2]],
        [new Line(x, f), null, null, [0.8, 1, 1]]
      ],
      Y: [
        [new Mesh(S, a), [0, 0.8, 0]],
        [new Line(x, d), null, [0, 0, Math.PI / 2], [0.8, 1, 1]]
      ],
      Z: [
        [new Mesh(S, o), [0, 0, 0.8], [Math.PI / 2, 0, 0]],
        [new Line(x, v), null, [0, -Math.PI / 2, 0], [0.8, 1, 1]]
      ],
      XY: [
        [new Mesh(S, c), [0.85, 0.85, 0], null, [2, 2, 0.2]],
        [new Line(x, y), [0.855, 0.98, 0], null, [0.125, 1, 1]],
        [new Line(x, y), [0.98, 0.855, 0], [0, 0, Math.PI / 2], [0.125, 1, 1]]
      ],
      YZ: [
        [new Mesh(S, u), [0, 0.85, 0.85], null, [0.2, 2, 2]],
        [new Line(x, m), [0, 0.855, 0.98], [0, 0, Math.PI / 2], [0.125, 1, 1]],
        [new Line(x, m), [0, 0.98, 0.855], [0, -Math.PI / 2, 0], [0.125, 1, 1]]
      ],
      XZ: [
        [new Mesh(S, h), [0.85, 0, 0.85], null, [2, 0.2, 2]],
        [new Line(x, E), [0.855, 0, 0.98], null, [0.125, 1, 1]],
        [new Line(x, E), [0.98, 0, 0.855], [0, -Math.PI / 2, 0], [0.125, 1, 1]]
      ],
      XYZX: [[new Mesh(new BoxGeometry(0.125, 0.125, 0.125), l.clone()), [1.1, 0, 0]]],
      XYZY: [[new Mesh(new BoxGeometry(0.125, 0.125, 0.125), l.clone()), [0, 1.1, 0]]],
      XYZZ: [[new Mesh(new BoxGeometry(0.125, 0.125, 0.125), l.clone()), [0, 0, 1.1]]]
    }, j = {
      X: [[new Mesh(new CylinderGeometry(0.2, 0, 0.8, 4, 1, false), n), [0.5, 0, 0], [0, 0, -Math.PI / 2]]],
      Y: [[new Mesh(new CylinderGeometry(0.2, 0, 0.8, 4, 1, false), n), [0, 0.5, 0]]],
      Z: [[new Mesh(new CylinderGeometry(0.2, 0, 0.8, 4, 1, false), n), [0, 0, 0.5], [Math.PI / 2, 0, 0]]],
      XY: [[new Mesh(S, n), [0.85, 0.85, 0], null, [3, 3, 0.2]]],
      YZ: [[new Mesh(S, n), [0, 0.85, 0.85], null, [0.2, 3, 3]]],
      XZ: [[new Mesh(S, n), [0.85, 0, 0.85], null, [3, 0.2, 3]]],
      XYZX: [[new Mesh(new BoxGeometry(0.2, 0.2, 0.2), n), [1.1, 0, 0]]],
      XYZY: [[new Mesh(new BoxGeometry(0.2, 0.2, 0.2), n), [0, 1.1, 0]]],
      XYZZ: [[new Mesh(new BoxGeometry(0.2, 0.2, 0.2), n), [0, 0, 1.1]]]
    }, Q = {
      X: [[new Line(x, i.clone()), [-1e3, 0, 0], null, [1e6, 1, 1], "helper"]],
      Y: [[new Line(x, i.clone()), [0, -1e3, 0], [0, 0, Math.PI / 2], [1e6, 1, 1], "helper"]],
      Z: [[new Line(x, i.clone()), [0, 0, -1e3], [0, -Math.PI / 2, 0], [1e6, 1, 1], "helper"]]
    }, $ = (X) => {
      const K = new Object3D();
      for (let D in X)
        for (let L = X[D].length; L--; ) {
          const I = X[D][L][0].clone(), O = X[D][L][1], V = X[D][L][2], k = X[D][L][3], q = X[D][L][4];
          I.name = D, I.tag = q, O && I.position.set(O[0], O[1], O[2]), V && I.rotation.set(V[0], V[1], V[2]), k && I.scale.set(k[0], k[1], k[2]), I.updateMatrix();
          const se = I.geometry.clone();
          se.applyMatrix4(I.matrix), I.geometry = se, I.renderOrder = 1 / 0, I.position.set(0, 0, 0), I.rotation.set(0, 0, 0), I.scale.set(1, 1, 1), K.add(I);
        }
      return K;
    };
    this.gizmo = {}, this.picker = {}, this.helper = {}, this.add(this.gizmo.translate = $(R)), this.add(this.gizmo.rotate = $(U)), this.add(this.gizmo.scale = $(Z)), this.add(this.picker.translate = $(_)), this.add(this.picker.rotate = $(N)), this.add(this.picker.scale = $(j)), this.add(this.helper.translate = $(F)), this.add(this.helper.rotate = $(Y)), this.add(this.helper.scale = $(Q)), this.picker.translate.visible = false, this.picker.rotate.visible = false, this.picker.scale.visible = false;
  }
}
class h6 extends Mesh {
  constructor() {
    super(
      new PlaneGeometry(1e5, 1e5, 2, 2),
      new MeshBasicMaterial({
        visible: false,
        wireframe: true,
        side: DoubleSide,
        transparent: true,
        opacity: 0.1,
        toneMapped: false
      })
    ), b(this, "isTransformControlsPlane", true), b(this, "type", "TransformControlsPlane"), b(this, "unitX", new Vector3(1, 0, 0)), b(this, "unitY", new Vector3(0, 1, 0)), b(this, "unitZ", new Vector3(0, 0, 1)), b(this, "tempVector", new Vector3()), b(this, "dirVector", new Vector3()), b(this, "alignVector", new Vector3()), b(this, "tempMatrix", new Matrix4()), b(this, "identityQuaternion", new Quaternion()), b(this, "cameraQuaternion", new Quaternion()), b(this, "worldPosition", new Vector3()), b(this, "worldQuaternion", new Quaternion()), b(this, "eye", new Vector3()), b(this, "axis", null), b(this, "mode", "translate"), b(this, "space", "world"), b(this, "updateMatrixWorld", () => {
      let e = this.space;
      switch (this.position.copy(this.worldPosition), this.mode === "scale" && (e = "local"), this.unitX.set(1, 0, 0).applyQuaternion(e === "local" ? this.worldQuaternion : this.identityQuaternion), this.unitY.set(0, 1, 0).applyQuaternion(e === "local" ? this.worldQuaternion : this.identityQuaternion), this.unitZ.set(0, 0, 1).applyQuaternion(e === "local" ? this.worldQuaternion : this.identityQuaternion), this.alignVector.copy(this.unitY), this.mode) {
        case "translate":
        case "scale":
          switch (this.axis) {
            case "X":
              this.alignVector.copy(this.eye).cross(this.unitX), this.dirVector.copy(this.unitX).cross(this.alignVector);
              break;
            case "Y":
              this.alignVector.copy(this.eye).cross(this.unitY), this.dirVector.copy(this.unitY).cross(this.alignVector);
              break;
            case "Z":
              this.alignVector.copy(this.eye).cross(this.unitZ), this.dirVector.copy(this.unitZ).cross(this.alignVector);
              break;
            case "XY":
              this.dirVector.copy(this.unitZ);
              break;
            case "YZ":
              this.dirVector.copy(this.unitX);
              break;
            case "XZ":
              this.alignVector.copy(this.unitZ), this.dirVector.copy(this.unitY);
              break;
            case "XYZ":
            case "E":
              this.dirVector.set(0, 0, 0);
              break;
          }
          break;
        case "rotate":
        default:
          this.dirVector.set(0, 0, 0);
      }
      this.dirVector.length() === 0 ? this.quaternion.copy(this.cameraQuaternion) : (this.tempMatrix.lookAt(this.tempVector.set(0, 0, 0), this.dirVector, this.alignVector), this.quaternion.setFromRotationMatrix(this.tempMatrix)), super.updateMatrixWorld();
    });
  }
}
const X3 = (t, e) => (t % e + e) % e;
class a2 extends EventDispatcher {
  constructor(e, r) {
    super(), b(this, "object"), b(this, "domElement"), b(this, "enabled", true), b(this, "target", new Vector3()), b(this, "minDistance", 0), b(this, "maxDistance", 1 / 0), b(this, "minZoom", 0), b(this, "maxZoom", 1 / 0), b(this, "minPolarAngle", 0), b(this, "maxPolarAngle", Math.PI), b(this, "minAzimuthAngle", -1 / 0), b(this, "maxAzimuthAngle", 1 / 0), b(this, "enableDamping", false), b(this, "dampingFactor", 0.05), b(this, "enableZoom", true), b(this, "zoomSpeed", 1), b(this, "enableRotate", true), b(this, "rotateSpeed", 1), b(this, "enablePan", true), b(this, "panSpeed", 1), b(this, "screenSpacePanning", true), b(this, "keyPanSpeed", 7), b(this, "autoRotate", false), b(this, "autoRotateSpeed", 2), b(this, "reverseOrbit", false), b(this, "reverseHorizontalOrbit", false), b(this, "reverseVerticalOrbit", false), b(this, "keys", { LEFT: "ArrowLeft", UP: "ArrowUp", RIGHT: "ArrowRight", BOTTOM: "ArrowDown" }), b(this, "mouseButtons", {
      LEFT: MOUSE.ROTATE,
      MIDDLE: MOUSE.DOLLY,
      RIGHT: MOUSE.PAN
    }), b(this, "touches", { ONE: TOUCH.ROTATE, TWO: TOUCH.DOLLY_PAN }), b(this, "target0"), b(this, "position0"), b(this, "zoom0"), b(this, "_domElementKeyEvents", null), b(this, "getPolarAngle"), b(this, "getAzimuthalAngle"), b(this, "setPolarAngle"), b(this, "setAzimuthalAngle"), b(this, "getDistance"), b(this, "listenToKeyEvents"), b(this, "stopListenToKeyEvents"), b(this, "saveState"), b(this, "reset"), b(this, "update"), b(this, "connect"), b(this, "dispose"), this.object = e, this.domElement = r, this.target0 = this.target.clone(), this.position0 = this.object.position.clone(), this.zoom0 = this.object.zoom, this.getPolarAngle = () => u.phi, this.getAzimuthalAngle = () => u.theta, this.setPolarAngle = (P) => {
      let ie = X3(P, 2 * Math.PI), ye = u.phi;
      ye < 0 && (ye += 2 * Math.PI), ie < 0 && (ie += 2 * Math.PI);
      let Pe = Math.abs(ie - ye);
      2 * Math.PI - Pe < Pe && (ie < ye ? ie += 2 * Math.PI : ye += 2 * Math.PI), h.phi = ie - ye, n.update();
    }, this.setAzimuthalAngle = (P) => {
      let ie = X3(P, 2 * Math.PI), ye = u.theta;
      ye < 0 && (ye += 2 * Math.PI), ie < 0 && (ie += 2 * Math.PI);
      let Pe = Math.abs(ie - ye);
      2 * Math.PI - Pe < Pe && (ie < ye ? ie += 2 * Math.PI : ye += 2 * Math.PI), h.theta = ie - ye, n.update();
    }, this.getDistance = () => n.object.position.distanceTo(n.target), this.listenToKeyEvents = (P) => {
      P.addEventListener("keydown", Tt), this._domElementKeyEvents = P;
    }, this.stopListenToKeyEvents = () => {
      this._domElementKeyEvents.removeEventListener("keydown", Tt), this._domElementKeyEvents = null;
    }, this.saveState = () => {
      n.target0.copy(n.target), n.position0.copy(n.object.position), n.zoom0 = n.object.zoom;
    }, this.reset = () => {
      n.target.copy(n.target0), n.object.position.copy(n.position0), n.object.zoom = n.zoom0, n.object.updateProjectionMatrix(), n.dispatchEvent(i), n.update(), l = o.NONE;
    }, this.update = (() => {
      const P = new Vector3(), ie = new Vector3(0, 1, 0), ye = new Quaternion().setFromUnitVectors(e.up, ie), Pe = ye.clone().invert(), ct = new Vector3(), pr = new Quaternion(), St = 2 * Math.PI;
      return function() {
        const mn = n.object.position;
        ye.setFromUnitVectors(e.up, ie), Pe.copy(ye).invert(), P.copy(mn).sub(n.target), P.applyQuaternion(ye), u.setFromVector3(P), n.autoRotate && l === o.NONE && F(R()), n.enableDamping ? (u.theta += h.theta * n.dampingFactor, u.phi += h.phi * n.dampingFactor) : (u.theta += h.theta, u.phi += h.phi);
        let bt = n.minAzimuthAngle, _t = n.maxAzimuthAngle;
        return isFinite(bt) && isFinite(_t) && (bt < -Math.PI ? bt += St : bt > Math.PI && (bt -= St), _t < -Math.PI ? _t += St : _t > Math.PI && (_t -= St), bt <= _t ? u.theta = Math.max(bt, Math.min(_t, u.theta)) : u.theta = u.theta > (bt + _t) / 2 ? Math.max(bt, u.theta) : Math.min(_t, u.theta)), u.phi = Math.max(n.minPolarAngle, Math.min(n.maxPolarAngle, u.phi)), u.makeSafe(), u.radius *= A, u.radius = Math.max(n.minDistance, Math.min(n.maxDistance, u.radius)), n.enableDamping === true ? n.target.addScaledVector(f, n.dampingFactor) : n.target.add(f), P.setFromSpherical(u), P.applyQuaternion(Pe), mn.copy(n.target).add(P), n.object.lookAt(n.target), n.enableDamping === true ? (h.theta *= 1 - n.dampingFactor, h.phi *= 1 - n.dampingFactor, f.multiplyScalar(1 - n.dampingFactor)) : (h.set(0, 0, 0), f.set(0, 0, 0)), A = 1, d || ct.distanceToSquared(n.object.position) > c || 8 * (1 - pr.dot(n.object.quaternion)) > c ? (n.dispatchEvent(i), ct.copy(n.object.position), pr.copy(n.object.quaternion), d = false, true) : false;
      };
    })(), this.connect = (P) => {
      P === document && console.error(
        'THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'
      ), n.domElement = P, n.domElement.style.touchAction = "none", n.domElement.addEventListener("contextmenu", Wt), n.domElement.addEventListener("pointerdown", w), n.domElement.addEventListener("pointercancel", pe), n.domElement.addEventListener("wheel", we);
    }, this.dispose = () => {
      var P, ie, ye, Pe, ct, pr;
      (P = n.domElement) == null || P.removeEventListener("contextmenu", Wt), (ie = n.domElement) == null || ie.removeEventListener("pointerdown", w), (ye = n.domElement) == null || ye.removeEventListener("pointercancel", pe), (Pe = n.domElement) == null || Pe.removeEventListener("wheel", we), (ct = n.domElement) == null || ct.ownerDocument.removeEventListener("pointermove", J), (pr = n.domElement) == null || pr.ownerDocument.removeEventListener("pointerup", he), n._domElementKeyEvents !== null && n._domElementKeyEvents.removeEventListener("keydown", Tt);
    };
    const n = this, i = { type: "change" }, s = { type: "start" }, a = { type: "end" }, o = {
      NONE: -1,
      ROTATE: 0,
      DOLLY: 1,
      PAN: 2,
      TOUCH_ROTATE: 3,
      TOUCH_PAN: 4,
      TOUCH_DOLLY_PAN: 5,
      TOUCH_DOLLY_ROTATE: 6
    };
    let l = o.NONE;
    const c = 1e-6, u = new Spherical(), h = new Spherical();
    let A = 1;
    const f = new Vector3();
    let d = false;
    const v = new Vector2(), m = new Vector2(), E = new Vector2(), y = new Vector2(), p = new Vector2(), g = new Vector2(), C = new Vector2(), S = new Vector2(), x = new Vector2(), T = [], B = {};
    function R() {
      return 2 * Math.PI / 60 / 60 * n.autoRotateSpeed;
    }
    function _() {
      return Math.pow(0.95, n.zoomSpeed);
    }
    function F(P) {
      n.reverseOrbit || n.reverseHorizontalOrbit ? h.theta += P : h.theta -= P;
    }
    function U(P) {
      n.reverseOrbit || n.reverseVerticalOrbit ? h.phi += P : h.phi -= P;
    }
    const Y = (() => {
      const P = new Vector3();
      return function(ye, Pe) {
        P.setFromMatrixColumn(Pe, 0), P.multiplyScalar(-ye), f.add(P);
      };
    })(), N = (() => {
      const P = new Vector3();
      return function(ye, Pe) {
        n.screenSpacePanning === true ? P.setFromMatrixColumn(Pe, 1) : (P.setFromMatrixColumn(Pe, 0), P.crossVectors(n.object.up, P)), P.multiplyScalar(ye), f.add(P);
      };
    })(), Z = (() => {
      const P = new Vector3();
      return function(ye, Pe) {
        const ct = n.domElement;
        if (ct && n.object instanceof PerspectiveCamera && n.object.isPerspectiveCamera) {
          const pr = n.object.position;
          P.copy(pr).sub(n.target);
          let St = P.length();
          St *= Math.tan(n.object.fov / 2 * Math.PI / 180), Y(2 * ye * St / ct.clientHeight, n.object.matrix), N(2 * Pe * St / ct.clientHeight, n.object.matrix);
        } else
          ct && n.object instanceof OrthographicCamera && n.object.isOrthographicCamera ? (Y(
            ye * (n.object.right - n.object.left) / n.object.zoom / ct.clientWidth,
            n.object.matrix
          ), N(
            Pe * (n.object.top - n.object.bottom) / n.object.zoom / ct.clientHeight,
            n.object.matrix
          )) : (console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."), n.enablePan = false);
      };
    })();
    function j(P) {
      n.object instanceof PerspectiveCamera && n.object.isPerspectiveCamera ? A /= P : n.object instanceof OrthographicCamera && n.object.isOrthographicCamera ? (n.object.zoom = Math.max(n.minZoom, Math.min(n.maxZoom, n.object.zoom * P)), n.object.updateProjectionMatrix(), d = true) : (console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."), n.enableZoom = false);
    }
    function Q(P) {
      n.object instanceof PerspectiveCamera && n.object.isPerspectiveCamera ? A *= P : n.object instanceof OrthographicCamera && n.object.isOrthographicCamera ? (n.object.zoom = Math.max(n.minZoom, Math.min(n.maxZoom, n.object.zoom / P)), n.object.updateProjectionMatrix(), d = true) : (console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."), n.enableZoom = false);
    }
    function $(P) {
      v.set(P.clientX, P.clientY);
    }
    function X(P) {
      C.set(P.clientX, P.clientY);
    }
    function K(P) {
      y.set(P.clientX, P.clientY);
    }
    function D(P) {
      m.set(P.clientX, P.clientY), E.subVectors(m, v).multiplyScalar(n.rotateSpeed);
      const ie = n.domElement;
      ie && (F(2 * Math.PI * E.x / ie.clientHeight), U(2 * Math.PI * E.y / ie.clientHeight)), v.copy(m), n.update();
    }
    function L(P) {
      S.set(P.clientX, P.clientY), x.subVectors(S, C), x.y > 0 ? j(_()) : x.y < 0 && Q(_()), C.copy(S), n.update();
    }
    function I(P) {
      p.set(P.clientX, P.clientY), g.subVectors(p, y).multiplyScalar(n.panSpeed), Z(g.x, g.y), y.copy(p), n.update();
    }
    function O(P) {
      P.deltaY < 0 ? Q(_()) : P.deltaY > 0 && j(_()), n.update();
    }
    function V(P) {
      let ie = false;
      switch (P.code) {
        case n.keys.UP:
          Z(0, n.keyPanSpeed), ie = true;
          break;
        case n.keys.BOTTOM:
          Z(0, -n.keyPanSpeed), ie = true;
          break;
        case n.keys.LEFT:
          Z(n.keyPanSpeed, 0), ie = true;
          break;
        case n.keys.RIGHT:
          Z(-n.keyPanSpeed, 0), ie = true;
          break;
      }
      ie && (P.preventDefault(), n.update());
    }
    function k() {
      if (T.length == 1)
        v.set(T[0].pageX, T[0].pageY);
      else {
        const P = 0.5 * (T[0].pageX + T[1].pageX), ie = 0.5 * (T[0].pageY + T[1].pageY);
        v.set(P, ie);
      }
    }
    function q() {
      if (T.length == 1)
        y.set(T[0].pageX, T[0].pageY);
      else {
        const P = 0.5 * (T[0].pageX + T[1].pageX), ie = 0.5 * (T[0].pageY + T[1].pageY);
        y.set(P, ie);
      }
    }
    function se() {
      const P = T[0].pageX - T[1].pageX, ie = T[0].pageY - T[1].pageY, ye = Math.sqrt(P * P + ie * ie);
      C.set(0, ye);
    }
    function re() {
      n.enableZoom && se(), n.enablePan && q();
    }
    function ne() {
      n.enableZoom && se(), n.enableRotate && k();
    }
    function te(P) {
      if (T.length == 1)
        m.set(P.pageX, P.pageY);
      else {
        const ye = jt(P), Pe = 0.5 * (P.pageX + ye.x), ct = 0.5 * (P.pageY + ye.y);
        m.set(Pe, ct);
      }
      E.subVectors(m, v).multiplyScalar(n.rotateSpeed);
      const ie = n.domElement;
      ie && (F(2 * Math.PI * E.x / ie.clientHeight), U(2 * Math.PI * E.y / ie.clientHeight)), v.copy(m);
    }
    function ge(P) {
      if (T.length == 1)
        p.set(P.pageX, P.pageY);
      else {
        const ie = jt(P), ye = 0.5 * (P.pageX + ie.x), Pe = 0.5 * (P.pageY + ie.y);
        p.set(ye, Pe);
      }
      g.subVectors(p, y).multiplyScalar(n.panSpeed), Z(g.x, g.y), y.copy(p);
    }
    function ee(P) {
      const ie = jt(P), ye = P.pageX - ie.x, Pe = P.pageY - ie.y, ct = Math.sqrt(ye * ye + Pe * Pe);
      S.set(0, ct), x.set(0, Math.pow(S.y / C.y, n.zoomSpeed)), j(x.y), C.copy(S);
    }
    function le(P) {
      n.enableZoom && ee(P), n.enablePan && ge(P);
    }
    function M(P) {
      n.enableZoom && ee(P), n.enableRotate && te(P);
    }
    function w(P) {
      var ie, ye;
      n.enabled !== false && (T.length === 0 && ((ie = n.domElement) == null || ie.ownerDocument.addEventListener("pointermove", J), (ye = n.domElement) == null || ye.ownerDocument.addEventListener("pointerup", he)), Dr(P), P.pointerType === "touch" ? It(P) : ke(P));
    }
    function J(P) {
      n.enabled !== false && (P.pointerType === "touch" ? Lt(P) : Ve(P));
    }
    function he(P) {
      var ie, ye, Pe;
      Ot(P), T.length === 0 && ((ie = n.domElement) == null || ie.releasePointerCapture(P.pointerId), (ye = n.domElement) == null || ye.ownerDocument.removeEventListener("pointermove", J), (Pe = n.domElement) == null || Pe.ownerDocument.removeEventListener("pointerup", he)), n.dispatchEvent(a), l = o.NONE;
    }
    function pe(P) {
      Ot(P);
    }
    function ke(P) {
      let ie;
      switch (P.button) {
        case 0:
          ie = n.mouseButtons.LEFT;
          break;
        case 1:
          ie = n.mouseButtons.MIDDLE;
          break;
        case 2:
          ie = n.mouseButtons.RIGHT;
          break;
        default:
          ie = -1;
      }
      switch (ie) {
        case MOUSE.DOLLY:
          if (n.enableZoom === false)
            return;
          X(P), l = o.DOLLY;
          break;
        case MOUSE.ROTATE:
          if (P.ctrlKey || P.metaKey || P.shiftKey) {
            if (n.enablePan === false)
              return;
            K(P), l = o.PAN;
          } else {
            if (n.enableRotate === false)
              return;
            $(P), l = o.ROTATE;
          }
          break;
        case MOUSE.PAN:
          if (P.ctrlKey || P.metaKey || P.shiftKey) {
            if (n.enableRotate === false)
              return;
            $(P), l = o.ROTATE;
          } else {
            if (n.enablePan === false)
              return;
            K(P), l = o.PAN;
          }
          break;
        default:
          l = o.NONE;
      }
      l !== o.NONE && n.dispatchEvent(s);
    }
    function Ve(P) {
      if (n.enabled !== false)
        switch (l) {
          case o.ROTATE:
            if (n.enableRotate === false)
              return;
            D(P);
            break;
          case o.DOLLY:
            if (n.enableZoom === false)
              return;
            L(P);
            break;
          case o.PAN:
            if (n.enablePan === false)
              return;
            I(P);
            break;
        }
    }
    function we(P) {
      n.enabled === false || n.enableZoom === false || l !== o.NONE && l !== o.ROTATE || (P.preventDefault(), n.dispatchEvent(s), O(P), n.dispatchEvent(a));
    }
    function Tt(P) {
      n.enabled === false || n.enablePan === false || V(P);
    }
    function It(P) {
      switch (fr(P), T.length) {
        case 1:
          switch (n.touches.ONE) {
            case TOUCH.ROTATE:
              if (n.enableRotate === false)
                return;
              k(), l = o.TOUCH_ROTATE;
              break;
            case TOUCH.PAN:
              if (n.enablePan === false)
                return;
              q(), l = o.TOUCH_PAN;
              break;
            default:
              l = o.NONE;
          }
          break;
        case 2:
          switch (n.touches.TWO) {
            case TOUCH.DOLLY_PAN:
              if (n.enableZoom === false && n.enablePan === false)
                return;
              re(), l = o.TOUCH_DOLLY_PAN;
              break;
            case TOUCH.DOLLY_ROTATE:
              if (n.enableZoom === false && n.enableRotate === false)
                return;
              ne(), l = o.TOUCH_DOLLY_ROTATE;
              break;
            default:
              l = o.NONE;
          }
          break;
        default:
          l = o.NONE;
      }
      l !== o.NONE && n.dispatchEvent(s);
    }
    function Lt(P) {
      switch (fr(P), l) {
        case o.TOUCH_ROTATE:
          if (n.enableRotate === false)
            return;
          te(P), n.update();
          break;
        case o.TOUCH_PAN:
          if (n.enablePan === false)
            return;
          ge(P), n.update();
          break;
        case o.TOUCH_DOLLY_PAN:
          if (n.enableZoom === false && n.enablePan === false)
            return;
          le(P), n.update();
          break;
        case o.TOUCH_DOLLY_ROTATE:
          if (n.enableZoom === false && n.enableRotate === false)
            return;
          M(P), n.update();
          break;
        default:
          l = o.NONE;
      }
    }
    function Wt(P) {
      n.enabled !== false && P.preventDefault();
    }
    function Dr(P) {
      T.push(P);
    }
    function Ot(P) {
      delete B[P.pointerId];
      for (let ie = 0; ie < T.length; ie++)
        if (T[ie].pointerId == P.pointerId) {
          T.splice(ie, 1);
          return;
        }
    }
    function fr(P) {
      let ie = B[P.pointerId];
      ie === void 0 && (ie = new Vector2(), B[P.pointerId] = ie), ie.set(P.pageX, P.pageY);
    }
    function jt(P) {
      const ie = P.pointerId === T[0].pointerId ? T[1] : T[0];
      return B[ie.pointerId];
    }
    r !== void 0 && this.connect(r), this.update();
  }
}
class d6 extends a2 {
  constructor(e, r) {
    super(e, r), this.screenSpacePanning = false, this.mouseButtons.LEFT = MOUSE.PAN, this.mouseButtons.RIGHT = MOUSE.ROTATE, this.touches.ONE = TOUCH.PAN, this.touches.TWO = TOUCH.DOLLY_ROTATE;
  }
}
class so {
  constructor() {
    b(this, "enabled", true), b(this, "needsSwap", true), b(this, "clear", false), b(this, "renderToScreen", false);
  }
  setSize(e, r) {
  }
  render(e, r, n, i, s) {
    console.error("THREE.Pass: .render() must be implemented in derived pass.");
  }
}
class ao {
  constructor(e) {
    b(this, "camera", new OrthographicCamera(-1, 1, 1, -1, 0, 1)), b(this, "geometry", new PlaneGeometry(2, 2)), b(this, "mesh"), this.mesh = new Mesh(this.geometry, e);
  }
  get material() {
    return this.mesh.material;
  }
  set material(e) {
    this.mesh.material = e;
  }
  dispose() {
    this.mesh.geometry.dispose();
  }
  render(e) {
    e.render(this.mesh, this.camera);
  }
}
const Vr = {
  uniforms: {
    tDiffuse: { value: null },
    opacity: { value: 1 }
  },
  vertexShader: [
    "varying vec2 vUv;",
    "void main() {",
    "	vUv = uv;",
    "	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",
    "}"
  ].join(`
`),
  fragmentShader: [
    "uniform float opacity;",
    "uniform sampler2D tDiffuse;",
    "varying vec2 vUv;",
    "void main() {",
    "	vec4 texel = texture2D( tDiffuse, vUv );",
    "	gl_FragColor = opacity * texel;",
    "}"
  ].join(`
`)
}, Yi = {
  defines: {
    PERSPECTIVE_CAMERA: 1,
    KERNEL_SIZE: 32
  },
  uniforms: {
    tDiffuse: { value: null },
    tNormal: { value: null },
    tDepth: { value: null },
    tNoise: { value: null },
    kernel: { value: null },
    cameraNear: { value: null },
    cameraFar: { value: null },
    resolution: { value: /* @__PURE__ */ new Vector2() },
    cameraProjectionMatrix: { value: /* @__PURE__ */ new Matrix4() },
    cameraInverseProjectionMatrix: { value: /* @__PURE__ */ new Matrix4() },
    kernelRadius: { value: 8 },
    minDistance: { value: 5e-3 },
    maxDistance: { value: 0.05 }
  },
  vertexShader: [
    "varying vec2 vUv;",
    "void main() {",
    "	vUv = uv;",
    "	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",
    "}"
  ].join(`
`),
  fragmentShader: [
    "uniform sampler2D tDiffuse;",
    "uniform sampler2D tNormal;",
    "uniform sampler2D tDepth;",
    "uniform sampler2D tNoise;",
    "uniform vec3 kernel[ KERNEL_SIZE ];",
    "uniform vec2 resolution;",
    "uniform float cameraNear;",
    "uniform float cameraFar;",
    "uniform mat4 cameraProjectionMatrix;",
    "uniform mat4 cameraInverseProjectionMatrix;",
    "uniform float kernelRadius;",
    "uniform float minDistance;",
    // avoid artifacts caused by neighbour fragments with minimal depth difference
    "uniform float maxDistance;",
    // avoid the influence of fragments which are too far away
    "varying vec2 vUv;",
    "#include <packing>",
    "float getDepth( const in vec2 screenPosition ) {",
    "	return texture2D( tDepth, screenPosition ).x;",
    "}",
    "float getLinearDepth( const in vec2 screenPosition ) {",
    "	#if PERSPECTIVE_CAMERA == 1",
    "		float fragCoordZ = texture2D( tDepth, screenPosition ).x;",
    "		float viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );",
    "		return viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );",
    "	#else",
    "		return texture2D( tDepth, screenPosition ).x;",
    "	#endif",
    "}",
    "float getViewZ( const in float depth ) {",
    "	#if PERSPECTIVE_CAMERA == 1",
    "		return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );",
    "	#else",
    "		return orthographicDepthToViewZ( depth, cameraNear, cameraFar );",
    "	#endif",
    "}",
    "vec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {",
    "	float clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];",
    "	vec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );",
    "	clipPosition *= clipW; // unprojection.",
    "	return ( cameraInverseProjectionMatrix * clipPosition ).xyz;",
    "}",
    "vec3 getViewNormal( const in vec2 screenPosition ) {",
    "	return unpackRGBToNormal( texture2D( tNormal, screenPosition ).xyz );",
    "}",
    "void main() {",
    "	float depth = getDepth( vUv );",
    "	float viewZ = getViewZ( depth );",
    "	vec3 viewPosition = getViewPosition( vUv, depth, viewZ );",
    "	vec3 viewNormal = getViewNormal( vUv );",
    " vec2 noiseScale = vec2( resolution.x / 4.0, resolution.y / 4.0 );",
    "	vec3 random = texture2D( tNoise, vUv * noiseScale ).xyz;",
    // compute matrix used to reorient a kernel vector
    "	vec3 tangent = normalize( random - viewNormal * dot( random, viewNormal ) );",
    "	vec3 bitangent = cross( viewNormal, tangent );",
    "	mat3 kernelMatrix = mat3( tangent, bitangent, viewNormal );",
    " float occlusion = 0.0;",
    " for ( int i = 0; i < KERNEL_SIZE; i ++ ) {",
    "		vec3 sampleVector = kernelMatrix * kernel[ i ];",
    // reorient sample vector in view space
    "		vec3 samplePoint = viewPosition + ( sampleVector * kernelRadius );",
    // calculate sample point
    "		vec4 samplePointNDC = cameraProjectionMatrix * vec4( samplePoint, 1.0 );",
    // project point and calculate NDC
    "		samplePointNDC /= samplePointNDC.w;",
    "		vec2 samplePointUv = samplePointNDC.xy * 0.5 + 0.5;",
    // compute uv coordinates
    "		float realDepth = getLinearDepth( samplePointUv );",
    // get linear depth from depth texture
    "		float sampleDepth = viewZToOrthographicDepth( samplePoint.z, cameraNear, cameraFar );",
    // compute linear depth of the sample view Z value
    "		float delta = sampleDepth - realDepth;",
    "		if ( delta > minDistance && delta < maxDistance ) {",
    // if fragment is before sample point, increase occlusion
    "			occlusion += 1.0;",
    "		}",
    "	}",
    "	occlusion = clamp( occlusion / float( KERNEL_SIZE ), 0.0, 1.0 );",
    "	gl_FragColor = vec4( vec3( 1.0 - occlusion ), 1.0 );",
    "}"
  ].join(`
`)
}, ra = {
  defines: {
    PERSPECTIVE_CAMERA: 1
  },
  uniforms: {
    tDepth: { value: null },
    cameraNear: { value: null },
    cameraFar: { value: null }
  },
  vertexShader: [
    "varying vec2 vUv;",
    "void main() {",
    "	vUv = uv;",
    "	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",
    "}"
  ].join(`
`),
  fragmentShader: [
    "uniform sampler2D tDepth;",
    "uniform float cameraNear;",
    "uniform float cameraFar;",
    "varying vec2 vUv;",
    "#include <packing>",
    "float getLinearDepth( const in vec2 screenPosition ) {",
    "	#if PERSPECTIVE_CAMERA == 1",
    "		float fragCoordZ = texture2D( tDepth, screenPosition ).x;",
    "		float viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );",
    "		return viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );",
    "	#else",
    "		return texture2D( tDepth, screenPosition ).x;",
    "	#endif",
    "}",
    "void main() {",
    "	float depth = getLinearDepth( vUv );",
    "	gl_FragColor = vec4( vec3( 1.0 - depth ), 1.0 );",
    "}"
  ].join(`
`)
}, na = {
  uniforms: {
    tDiffuse: { value: null },
    resolution: { value: /* @__PURE__ */ new Vector2() }
  },
  vertexShader: [
    "varying vec2 vUv;",
    "void main() {",
    "	vUv = uv;",
    "	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",
    "}"
  ].join(`
`),
  fragmentShader: [
    "uniform sampler2D tDiffuse;",
    "uniform vec2 resolution;",
    "varying vec2 vUv;",
    "void main() {",
    "	vec2 texelSize = ( 1.0 / resolution );",
    "	float result = 0.0;",
    "	for ( int i = - 2; i <= 2; i ++ ) {",
    "		for ( int j = - 2; j <= 2; j ++ ) {",
    "			vec2 offset = ( vec2( float( i ), float( j ) ) ) * texelSize;",
    "			result += texture2D( tDiffuse, vUv + offset ).r;",
    "		}",
    "	}",
    "	gl_FragColor = vec4( vec3( result / ( 5.0 * 5.0 ) ), 1.0 );",
    "}"
  ].join(`
`)
}, ti = class extends so {
  constructor(t, e, r, n) {
    super(), this.width = r !== void 0 ? r : 512, this.height = n !== void 0 ? n : 512, this.clear = true, this.camera = e, this.scene = t, this.kernelRadius = 8, this.kernelSize = 32, this.kernel = [], this.noiseTexture = null, this.output = 0, this.minDistance = 5e-3, this.maxDistance = 0.1, this._visibilityCache = /* @__PURE__ */ new Map(), this.generateSampleKernel(), this.generateRandomKernelRotations();
    const i = new DepthTexture();
    i.format = DepthStencilFormat, i.type = UnsignedInt248Type, this.beautyRenderTarget = new WebGLRenderTarget(this.width, this.height), this.normalRenderTarget = new WebGLRenderTarget(this.width, this.height, {
      minFilter: NearestFilter,
      magFilter: NearestFilter,
      depthTexture: i
    }), this.ssaoRenderTarget = new WebGLRenderTarget(this.width, this.height), this.blurRenderTarget = this.ssaoRenderTarget.clone(), Yi === void 0 && console.error("THREE.SSAOPass: The pass relies on SSAOShader."), this.ssaoMaterial = new ShaderMaterial({
      defines: Object.assign({}, Yi.defines),
      uniforms: UniformsUtils.clone(Yi.uniforms),
      vertexShader: Yi.vertexShader,
      fragmentShader: Yi.fragmentShader,
      blending: NoBlending
    }), this.ssaoMaterial.uniforms.tDiffuse.value = this.beautyRenderTarget.texture, this.ssaoMaterial.uniforms.tNormal.value = this.normalRenderTarget.texture, this.ssaoMaterial.uniforms.tDepth.value = this.normalRenderTarget.depthTexture, this.ssaoMaterial.uniforms.tNoise.value = this.noiseTexture, this.ssaoMaterial.uniforms.kernel.value = this.kernel, this.ssaoMaterial.uniforms.cameraNear.value = this.camera.near, this.ssaoMaterial.uniforms.cameraFar.value = this.camera.far, this.ssaoMaterial.uniforms.resolution.value.set(this.width, this.height), this.ssaoMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix), this.ssaoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse), this.normalMaterial = new MeshNormalMaterial(), this.normalMaterial.blending = NoBlending, this.blurMaterial = new ShaderMaterial({
      defines: Object.assign({}, na.defines),
      uniforms: UniformsUtils.clone(na.uniforms),
      vertexShader: na.vertexShader,
      fragmentShader: na.fragmentShader
    }), this.blurMaterial.uniforms.tDiffuse.value = this.ssaoRenderTarget.texture, this.blurMaterial.uniforms.resolution.value.set(this.width, this.height), this.depthRenderMaterial = new ShaderMaterial({
      defines: Object.assign({}, ra.defines),
      uniforms: UniformsUtils.clone(ra.uniforms),
      vertexShader: ra.vertexShader,
      fragmentShader: ra.fragmentShader,
      blending: NoBlending
    }), this.depthRenderMaterial.uniforms.tDepth.value = this.normalRenderTarget.depthTexture, this.depthRenderMaterial.uniforms.cameraNear.value = this.camera.near, this.depthRenderMaterial.uniforms.cameraFar.value = this.camera.far, this.copyMaterial = new ShaderMaterial({
      uniforms: UniformsUtils.clone(Vr.uniforms),
      vertexShader: Vr.vertexShader,
      fragmentShader: Vr.fragmentShader,
      transparent: true,
      depthTest: false,
      depthWrite: false,
      blendSrc: DstColorFactor,
      blendDst: ZeroFactor,
      blendEquation: AddEquation,
      blendSrcAlpha: DstAlphaFactor,
      blendDstAlpha: ZeroFactor,
      blendEquationAlpha: AddEquation
    }), this.fsQuad = new ao(null), this.originalClearColor = new Color();
  }
  dispose() {
    this.beautyRenderTarget.dispose(), this.normalRenderTarget.dispose(), this.ssaoRenderTarget.dispose(), this.blurRenderTarget.dispose(), this.normalMaterial.dispose(), this.blurMaterial.dispose(), this.copyMaterial.dispose(), this.depthRenderMaterial.dispose(), this.fsQuad.dispose();
  }
  render(t, e) {
    switch (t.capabilities.isWebGL2 === false && (this.noiseTexture.format = LuminanceFormat), t.setRenderTarget(this.beautyRenderTarget), t.clear(), t.render(this.scene, this.camera), this.overrideVisibility(), this.renderOverride(t, this.normalMaterial, this.normalRenderTarget, 7829503, 1), this.restoreVisibility(), this.ssaoMaterial.uniforms.kernelRadius.value = this.kernelRadius, this.ssaoMaterial.uniforms.minDistance.value = this.minDistance, this.ssaoMaterial.uniforms.maxDistance.value = this.maxDistance, this.renderPass(t, this.ssaoMaterial, this.ssaoRenderTarget), this.renderPass(t, this.blurMaterial, this.blurRenderTarget), this.output) {
      case ti.OUTPUT.SSAO:
        this.copyMaterial.uniforms.tDiffuse.value = this.ssaoRenderTarget.texture, this.copyMaterial.blending = NoBlending, this.renderPass(t, this.copyMaterial, this.renderToScreen ? null : e);
        break;
      case ti.OUTPUT.Blur:
        this.copyMaterial.uniforms.tDiffuse.value = this.blurRenderTarget.texture, this.copyMaterial.blending = NoBlending, this.renderPass(t, this.copyMaterial, this.renderToScreen ? null : e);
        break;
      case ti.OUTPUT.Beauty:
        this.copyMaterial.uniforms.tDiffuse.value = this.beautyRenderTarget.texture, this.copyMaterial.blending = NoBlending, this.renderPass(t, this.copyMaterial, this.renderToScreen ? null : e);
        break;
      case ti.OUTPUT.Depth:
        this.renderPass(t, this.depthRenderMaterial, this.renderToScreen ? null : e);
        break;
      case ti.OUTPUT.Normal:
        this.copyMaterial.uniforms.tDiffuse.value = this.normalRenderTarget.texture, this.copyMaterial.blending = NoBlending, this.renderPass(t, this.copyMaterial, this.renderToScreen ? null : e);
        break;
      case ti.OUTPUT.Default:
        this.copyMaterial.uniforms.tDiffuse.value = this.beautyRenderTarget.texture, this.copyMaterial.blending = NoBlending, this.renderPass(t, this.copyMaterial, this.renderToScreen ? null : e), this.copyMaterial.uniforms.tDiffuse.value = this.blurRenderTarget.texture, this.copyMaterial.blending = CustomBlending, this.renderPass(t, this.copyMaterial, this.renderToScreen ? null : e);
        break;
      default:
        console.warn("THREE.SSAOPass: Unknown output type.");
    }
  }
  renderPass(t, e, r, n, i) {
    t.getClearColor(this.originalClearColor);
    const s = t.getClearAlpha(), a = t.autoClear;
    t.setRenderTarget(r), t.autoClear = false, n != null && (t.setClearColor(n), t.setClearAlpha(i || 0), t.clear()), this.fsQuad.material = e, this.fsQuad.render(t), t.autoClear = a, t.setClearColor(this.originalClearColor), t.setClearAlpha(s);
  }
  renderOverride(t, e, r, n, i) {
    t.getClearColor(this.originalClearColor);
    const s = t.getClearAlpha(), a = t.autoClear;
    t.setRenderTarget(r), t.autoClear = false, n = e.clearColor || n, i = e.clearAlpha || i, n != null && (t.setClearColor(n), t.setClearAlpha(i || 0), t.clear()), this.scene.overrideMaterial = e, t.render(this.scene, this.camera), this.scene.overrideMaterial = null, t.autoClear = a, t.setClearColor(this.originalClearColor), t.setClearAlpha(s);
  }
  setSize(t, e) {
    this.width = t, this.height = e, this.beautyRenderTarget.setSize(t, e), this.ssaoRenderTarget.setSize(t, e), this.normalRenderTarget.setSize(t, e), this.blurRenderTarget.setSize(t, e), this.ssaoMaterial.uniforms.resolution.value.set(t, e), this.ssaoMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix), this.ssaoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse), this.blurMaterial.uniforms.resolution.value.set(t, e);
  }
  generateSampleKernel() {
    const t = this.kernelSize, e = this.kernel;
    for (let r = 0; r < t; r++) {
      const n = new Vector3();
      n.x = Math.random() * 2 - 1, n.y = Math.random() * 2 - 1, n.z = Math.random(), n.normalize();
      let i = r / t;
      i = MathUtils.lerp(0.1, 1, i * i), n.multiplyScalar(i), e.push(n);
    }
  }
  generateRandomKernelRotations() {
    hs === void 0 && console.error("THREE.SSAOPass: The pass relies on SimplexNoise.");
    const r = new hs(), n = 4 * 4, i = new Float32Array(n);
    for (let s = 0; s < n; s++) {
      const a = Math.random() * 2 - 1, o = Math.random() * 2 - 1, l = 0;
      i[s] = r.noise3d(a, o, l);
    }
    this.noiseTexture = new DataTexture(i, 4, 4, RedFormat, FloatType), this.noiseTexture.wrapS = RepeatWrapping, this.noiseTexture.wrapT = RepeatWrapping, this.noiseTexture.needsUpdate = true;
  }
  overrideVisibility() {
    const t = this.scene, e = this._visibilityCache;
    t.traverse(function(r) {
      e.set(r, r.visible), (r.isPoints || r.isLine) && (r.visible = false);
    });
  }
  restoreVisibility() {
    const t = this.scene, e = this._visibilityCache;
    t.traverse(function(r) {
      const n = e.get(r);
      r.visible = n;
    }), e.clear();
  }
};
let g6 = ti;
b(g6, "OUTPUT", {
  Default: 0,
  SSAO: 1,
  Blur: 2,
  Beauty: 3,
  Depth: 4,
  Normal: 5
});
const m6 = {
  shaderID: "luminosityHighPass",
  uniforms: {
    tDiffuse: { value: null },
    luminosityThreshold: { value: 1 },
    smoothWidth: { value: 1 },
    defaultColor: { value: /* @__PURE__ */ new Color(0) },
    defaultOpacity: { value: 0 }
  },
  vertexShader: [
    "varying vec2 vUv;",
    "void main() {",
    "	vUv = uv;",
    "	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",
    "}"
  ].join(`
`),
  fragmentShader: [
    "uniform sampler2D tDiffuse;",
    "uniform vec3 defaultColor;",
    "uniform float defaultOpacity;",
    "uniform float luminosityThreshold;",
    "uniform float smoothWidth;",
    "varying vec2 vUv;",
    "void main() {",
    "	vec4 texel = texture2D( tDiffuse, vUv );",
    "	vec3 luma = vec3( 0.299, 0.587, 0.114 );",
    "	float v = dot( texel.xyz, luma );",
    "	vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );",
    "	float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );",
    "	gl_FragColor = mix( outputColor, texel, alpha );",
    "}"
  ].join(`
`)
}, jl = class extends so {
  constructor(t, e, r, n) {
    super(), this.strength = e !== void 0 ? e : 1, this.radius = r, this.threshold = n, this.resolution = t !== void 0 ? new Vector2(t.x, t.y) : new Vector2(256, 256), this.clearColor = new Color(0, 0, 0), this.renderTargetsHorizontal = [], this.renderTargetsVertical = [], this.nMips = 5;
    let i = Math.round(this.resolution.x / 2), s = Math.round(this.resolution.y / 2);
    this.renderTargetBright = new WebGLRenderTarget(i, s, { type: HalfFloatType }), this.renderTargetBright.texture.name = "UnrealBloomPass.bright", this.renderTargetBright.texture.generateMipmaps = false;
    for (let u = 0; u < this.nMips; u++) {
      const h = new WebGLRenderTarget(i, s, { type: HalfFloatType });
      h.texture.name = "UnrealBloomPass.h" + u, h.texture.generateMipmaps = false, this.renderTargetsHorizontal.push(h);
      const A = new WebGLRenderTarget(i, s, { type: HalfFloatType });
      A.texture.name = "UnrealBloomPass.v" + u, A.texture.generateMipmaps = false, this.renderTargetsVertical.push(A), i = Math.round(i / 2), s = Math.round(s / 2);
    }
    const a = m6;
    this.highPassUniforms = UniformsUtils.clone(a.uniforms), this.highPassUniforms.luminosityThreshold.value = n, this.highPassUniforms.smoothWidth.value = 0.01, this.materialHighPassFilter = new ShaderMaterial({
      uniforms: this.highPassUniforms,
      vertexShader: a.vertexShader,
      fragmentShader: a.fragmentShader,
      defines: {}
    }), this.separableBlurMaterials = [];
    const o = [3, 5, 7, 9, 11];
    i = Math.round(this.resolution.x / 2), s = Math.round(this.resolution.y / 2);
    for (let u = 0; u < this.nMips; u++)
      this.separableBlurMaterials.push(this.getSeperableBlurMaterial(o[u])), this.separableBlurMaterials[u].uniforms.texSize.value = new Vector2(i, s), i = Math.round(i / 2), s = Math.round(s / 2);
    this.compositeMaterial = this.getCompositeMaterial(this.nMips), this.compositeMaterial.uniforms.blurTexture1.value = this.renderTargetsVertical[0].texture, this.compositeMaterial.uniforms.blurTexture2.value = this.renderTargetsVertical[1].texture, this.compositeMaterial.uniforms.blurTexture3.value = this.renderTargetsVertical[2].texture, this.compositeMaterial.uniforms.blurTexture4.value = this.renderTargetsVertical[3].texture, this.compositeMaterial.uniforms.blurTexture5.value = this.renderTargetsVertical[4].texture, this.compositeMaterial.uniforms.bloomStrength.value = e, this.compositeMaterial.uniforms.bloomRadius.value = 0.1, this.compositeMaterial.needsUpdate = true;
    const l = [1, 0.8, 0.6, 0.4, 0.2];
    this.compositeMaterial.uniforms.bloomFactors.value = l, this.bloomTintColors = [
      new Vector3(1, 1, 1),
      new Vector3(1, 1, 1),
      new Vector3(1, 1, 1),
      new Vector3(1, 1, 1),
      new Vector3(1, 1, 1)
    ], this.compositeMaterial.uniforms.bloomTintColors.value = this.bloomTintColors;
    const c = Vr;
    this.copyUniforms = UniformsUtils.clone(c.uniforms), this.copyUniforms.opacity.value = 1, this.materialCopy = new ShaderMaterial({
      uniforms: this.copyUniforms,
      vertexShader: c.vertexShader,
      fragmentShader: c.fragmentShader,
      blending: AdditiveBlending,
      depthTest: false,
      depthWrite: false,
      transparent: true
    }), this.enabled = true, this.needsSwap = false, this._oldClearColor = new Color(), this.oldClearAlpha = 1, this.basic = new MeshBasicMaterial(), this.fsQuad = new ao(null);
  }
  dispose() {
    for (let t = 0; t < this.renderTargetsHorizontal.length; t++)
      this.renderTargetsHorizontal[t].dispose();
    for (let t = 0; t < this.renderTargetsVertical.length; t++)
      this.renderTargetsVertical[t].dispose();
    this.renderTargetBright.dispose();
    for (let t = 0; t < this.separableBlurMaterials.length; t++)
      this.separableBlurMaterials[t].dispose();
    this.compositeMaterial.dispose(), this.materialCopy.dispose(), this.basic.dispose(), this.fsQuad.dispose();
  }
  setSize(t, e) {
    let r = Math.round(t / 2), n = Math.round(e / 2);
    this.renderTargetBright.setSize(r, n);
    for (let i = 0; i < this.nMips; i++)
      this.renderTargetsHorizontal[i].setSize(r, n), this.renderTargetsVertical[i].setSize(r, n), this.separableBlurMaterials[i].uniforms.texSize.value = new Vector2(r, n), r = Math.round(r / 2), n = Math.round(n / 2);
  }
  render(t, e, r, n, i) {
    t.getClearColor(this._oldClearColor), this.oldClearAlpha = t.getClearAlpha();
    const s = t.autoClear;
    t.autoClear = false, t.setClearColor(this.clearColor, 0), i && t.state.buffers.stencil.setTest(false), this.renderToScreen && (this.fsQuad.material = this.basic, this.basic.map = r.texture, t.setRenderTarget(null), t.clear(), this.fsQuad.render(t)), this.highPassUniforms.tDiffuse.value = r.texture, this.highPassUniforms.luminosityThreshold.value = this.threshold, this.fsQuad.material = this.materialHighPassFilter, t.setRenderTarget(this.renderTargetBright), t.clear(), this.fsQuad.render(t);
    let a = this.renderTargetBright;
    for (let o = 0; o < this.nMips; o++)
      this.fsQuad.material = this.separableBlurMaterials[o], this.separableBlurMaterials[o].uniforms.colorTexture.value = a.texture, this.separableBlurMaterials[o].uniforms.direction.value = jl.BlurDirectionX, t.setRenderTarget(this.renderTargetsHorizontal[o]), t.clear(), this.fsQuad.render(t), this.separableBlurMaterials[o].uniforms.colorTexture.value = this.renderTargetsHorizontal[o].texture, this.separableBlurMaterials[o].uniforms.direction.value = jl.BlurDirectionY, t.setRenderTarget(this.renderTargetsVertical[o]), t.clear(), this.fsQuad.render(t), a = this.renderTargetsVertical[o];
    this.fsQuad.material = this.compositeMaterial, this.compositeMaterial.uniforms.bloomStrength.value = this.strength, this.compositeMaterial.uniforms.bloomRadius.value = this.radius, this.compositeMaterial.uniforms.bloomTintColors.value = this.bloomTintColors, t.setRenderTarget(this.renderTargetsHorizontal[0]), t.clear(), this.fsQuad.render(t), this.fsQuad.material = this.materialCopy, this.copyUniforms.tDiffuse.value = this.renderTargetsHorizontal[0].texture, i && t.state.buffers.stencil.setTest(true), this.renderToScreen ? (t.setRenderTarget(null), this.fsQuad.render(t)) : (t.setRenderTarget(r), this.fsQuad.render(t)), t.setClearColor(this._oldClearColor, this.oldClearAlpha), t.autoClear = s;
  }
  getSeperableBlurMaterial(t) {
    return new ShaderMaterial({
      defines: {
        KERNEL_RADIUS: t,
        SIGMA: t
      },
      uniforms: {
        colorTexture: { value: null },
        texSize: { value: new Vector2(0.5, 0.5) },
        direction: { value: new Vector2(0.5, 0.5) }
      },
      vertexShader: `varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,
      fragmentShader: `#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 texSize;
				uniform vec2 direction;

				float gaussianPdf(in float x, in float sigma) {
					return 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;
				}
				void main() {
					vec2 invSize = 1.0 / texSize;
					float fSigma = float(SIGMA);
					float weightSum = gaussianPdf(0.0, fSigma);
					vec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;
					for( int i = 1; i < KERNEL_RADIUS; i ++ ) {
						float x = float(i);
						float w = gaussianPdf(x, fSigma);
						vec2 uvOffset = direction * invSize * x;
						vec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;
						vec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;
						diffuseSum += (sample1 + sample2) * w;
						weightSum += 2.0 * w;
					}
					gl_FragColor = vec4(diffuseSum/weightSum, 1.0);
				}`
    });
  }
  getCompositeMaterial(t) {
    return new ShaderMaterial({
      defines: {
        NUM_MIPS: t
      },
      uniforms: {
        blurTexture1: { value: null },
        blurTexture2: { value: null },
        blurTexture3: { value: null },
        blurTexture4: { value: null },
        blurTexture5: { value: null },
        bloomStrength: { value: 1 },
        bloomFactors: { value: null },
        bloomTintColors: { value: null },
        bloomRadius: { value: 0 }
      },
      vertexShader: `varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,
      fragmentShader: `varying vec2 vUv;
				uniform sampler2D blurTexture1;
				uniform sampler2D blurTexture2;
				uniform sampler2D blurTexture3;
				uniform sampler2D blurTexture4;
				uniform sampler2D blurTexture5;
				uniform float bloomStrength;
				uniform float bloomRadius;
				uniform float bloomFactors[NUM_MIPS];
				uniform vec3 bloomTintColors[NUM_MIPS];

				float lerpBloomFactor(const in float factor) {
					float mirrorFactor = 1.2 - factor;
					return mix(factor, mirrorFactor, bloomRadius);
				}

				void main() {
					gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +
						lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +
						lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +
						lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +
						lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );
				}`
    });
  }
};
let o2 = jl;
b(o2, "BlurDirectionX", /* @__PURE__ */ new Vector2(1, 0));
b(o2, "BlurDirectionY", /* @__PURE__ */ new Vector2(0, 1));
const ia = {
  defines: {
    NUM_SAMPLES: 7,
    NUM_RINGS: 4,
    NORMAL_TEXTURE: 0,
    DIFFUSE_TEXTURE: 0,
    DEPTH_PACKING: 1,
    PERSPECTIVE_CAMERA: 1
  },
  uniforms: {
    tDepth: { value: null },
    tDiffuse: { value: null },
    tNormal: { value: null },
    size: { value: /* @__PURE__ */ new Vector2(512, 512) },
    cameraNear: { value: 1 },
    cameraFar: { value: 100 },
    cameraProjectionMatrix: { value: /* @__PURE__ */ new Matrix4() },
    cameraInverseProjectionMatrix: { value: /* @__PURE__ */ new Matrix4() },
    scale: { value: 1 },
    intensity: { value: 0.1 },
    bias: { value: 0.5 },
    minResolution: { value: 0 },
    kernelRadius: { value: 100 },
    randomSeed: { value: 0 }
  },
  vertexShader: [
    "varying vec2 vUv;",
    "void main() {",
    "	vUv = uv;",
    "	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",
    "}"
  ].join(`
`),
  fragmentShader: [
    "#include <common>",
    "varying vec2 vUv;",
    "#if DIFFUSE_TEXTURE == 1",
    "uniform sampler2D tDiffuse;",
    "#endif",
    "uniform sampler2D tDepth;",
    "#if NORMAL_TEXTURE == 1",
    "uniform sampler2D tNormal;",
    "#endif",
    "uniform float cameraNear;",
    "uniform float cameraFar;",
    "uniform mat4 cameraProjectionMatrix;",
    "uniform mat4 cameraInverseProjectionMatrix;",
    "uniform float scale;",
    "uniform float intensity;",
    "uniform float bias;",
    "uniform float kernelRadius;",
    "uniform float minResolution;",
    "uniform vec2 size;",
    "uniform float randomSeed;",
    "// RGBA depth",
    "#include <packing>",
    "vec4 getDefaultColor( const in vec2 screenPosition ) {",
    "	#if DIFFUSE_TEXTURE == 1",
    "	return texture2D( tDiffuse, vUv );",
    "	#else",
    "	return vec4( 1.0 );",
    "	#endif",
    "}",
    "float getDepth( const in vec2 screenPosition ) {",
    "	#if DEPTH_PACKING == 1",
    "	return unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );",
    "	#else",
    "	return texture2D( tDepth, screenPosition ).x;",
    "	#endif",
    "}",
    "float getViewZ( const in float depth ) {",
    "	#if PERSPECTIVE_CAMERA == 1",
    "	return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );",
    "	#else",
    "	return orthographicDepthToViewZ( depth, cameraNear, cameraFar );",
    "	#endif",
    "}",
    "vec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {",
    "	float clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];",
    "	vec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );",
    "	clipPosition *= clipW; // unprojection.",
    "	return ( cameraInverseProjectionMatrix * clipPosition ).xyz;",
    "}",
    "vec3 getViewNormal( const in vec3 viewPosition, const in vec2 screenPosition ) {",
    "	#if NORMAL_TEXTURE == 1",
    "	return unpackRGBToNormal( texture2D( tNormal, screenPosition ).xyz );",
    "	#else",
    "	return normalize( cross( dFdx( viewPosition ), dFdy( viewPosition ) ) );",
    "	#endif",
    "}",
    "float scaleDividedByCameraFar;",
    "float minResolutionMultipliedByCameraFar;",
    "float getOcclusion( const in vec3 centerViewPosition, const in vec3 centerViewNormal, const in vec3 sampleViewPosition ) {",
    "	vec3 viewDelta = sampleViewPosition - centerViewPosition;",
    "	float viewDistance = length( viewDelta );",
    "	float scaledScreenDistance = scaleDividedByCameraFar * viewDistance;",
    "	return max(0.0, (dot(centerViewNormal, viewDelta) - minResolutionMultipliedByCameraFar) / scaledScreenDistance - bias) / (1.0 + pow2( scaledScreenDistance ) );",
    "}",
    "// moving costly divides into consts",
    "const float ANGLE_STEP = PI2 * float( NUM_RINGS ) / float( NUM_SAMPLES );",
    "const float INV_NUM_SAMPLES = 1.0 / float( NUM_SAMPLES );",
    "float getAmbientOcclusion( const in vec3 centerViewPosition ) {",
    "	// precompute some variables require in getOcclusion.",
    "	scaleDividedByCameraFar = scale / cameraFar;",
    "	minResolutionMultipliedByCameraFar = minResolution * cameraFar;",
    "	vec3 centerViewNormal = getViewNormal( centerViewPosition, vUv );",
    "	// jsfiddle that shows sample pattern: https://jsfiddle.net/a16ff1p7/",
    "	float angle = rand( vUv + randomSeed ) * PI2;",
    "	vec2 radius = vec2( kernelRadius * INV_NUM_SAMPLES ) / size;",
    "	vec2 radiusStep = radius;",
    "	float occlusionSum = 0.0;",
    "	float weightSum = 0.0;",
    "	for( int i = 0; i < NUM_SAMPLES; i ++ ) {",
    "		vec2 sampleUv = vUv + vec2( cos( angle ), sin( angle ) ) * radius;",
    "		radius += radiusStep;",
    "		angle += ANGLE_STEP;",
    "		float sampleDepth = getDepth( sampleUv );",
    "		if( sampleDepth >= ( 1.0 - EPSILON ) ) {",
    "			continue;",
    "		}",
    "		float sampleViewZ = getViewZ( sampleDepth );",
    "		vec3 sampleViewPosition = getViewPosition( sampleUv, sampleDepth, sampleViewZ );",
    "		occlusionSum += getOcclusion( centerViewPosition, centerViewNormal, sampleViewPosition );",
    "		weightSum += 1.0;",
    "	}",
    "	if( weightSum == 0.0 ) discard;",
    "	return occlusionSum * ( intensity / weightSum );",
    "}",
    "void main() {",
    "	float centerDepth = getDepth( vUv );",
    "	if( centerDepth >= ( 1.0 - EPSILON ) ) {",
    "		discard;",
    "	}",
    "	float centerViewZ = getViewZ( centerDepth );",
    "	vec3 viewPosition = getViewPosition( vUv, centerDepth, centerViewZ );",
    "	float ambientOcclusion = getAmbientOcclusion( viewPosition );",
    "	gl_FragColor = getDefaultColor( vUv );",
    "	gl_FragColor.xyz *=  1.0 - ambientOcclusion;",
    "}"
  ].join(`
`)
}, Cn = {
  defines: {
    KERNEL_RADIUS: 4,
    DEPTH_PACKING: 1,
    PERSPECTIVE_CAMERA: 1
  },
  uniforms: {
    tDiffuse: { value: null },
    size: { value: /* @__PURE__ */ new Vector2(512, 512) },
    sampleUvOffsets: { value: [/* @__PURE__ */ new Vector2(0, 0)] },
    sampleWeights: { value: [1] },
    tDepth: { value: null },
    cameraNear: { value: 10 },
    cameraFar: { value: 1e3 },
    depthCutoff: { value: 10 }
  },
  vertexShader: [
    "#include <common>",
    "uniform vec2 size;",
    "varying vec2 vUv;",
    "varying vec2 vInvSize;",
    "void main() {",
    "	vUv = uv;",
    "	vInvSize = 1.0 / size;",
    "	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",
    "}"
  ].join(`
`),
  fragmentShader: [
    "#include <common>",
    "#include <packing>",
    "uniform sampler2D tDiffuse;",
    "uniform sampler2D tDepth;",
    "uniform float cameraNear;",
    "uniform float cameraFar;",
    "uniform float depthCutoff;",
    "uniform vec2 sampleUvOffsets[ KERNEL_RADIUS + 1 ];",
    "uniform float sampleWeights[ KERNEL_RADIUS + 1 ];",
    "varying vec2 vUv;",
    "varying vec2 vInvSize;",
    "float getDepth( const in vec2 screenPosition ) {",
    "	#if DEPTH_PACKING == 1",
    "	return unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );",
    "	#else",
    "	return texture2D( tDepth, screenPosition ).x;",
    "	#endif",
    "}",
    "float getViewZ( const in float depth ) {",
    "	#if PERSPECTIVE_CAMERA == 1",
    "	return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );",
    "	#else",
    "	return orthographicDepthToViewZ( depth, cameraNear, cameraFar );",
    "	#endif",
    "}",
    "void main() {",
    "	float depth = getDepth( vUv );",
    "	if( depth >= ( 1.0 - EPSILON ) ) {",
    "		discard;",
    "	}",
    "	float centerViewZ = -getViewZ( depth );",
    "	bool rBreak = false, lBreak = false;",
    "	float weightSum = sampleWeights[0];",
    "	vec4 diffuseSum = texture2D( tDiffuse, vUv ) * weightSum;",
    "	for( int i = 1; i <= KERNEL_RADIUS; i ++ ) {",
    "		float sampleWeight = sampleWeights[i];",
    "		vec2 sampleUvOffset = sampleUvOffsets[i] * vInvSize;",
    "		vec2 sampleUv = vUv + sampleUvOffset;",
    "		float viewZ = -getViewZ( getDepth( sampleUv ) );",
    "		if( abs( viewZ - centerViewZ ) > depthCutoff ) rBreak = true;",
    "		if( ! rBreak ) {",
    "			diffuseSum += texture2D( tDiffuse, sampleUv ) * sampleWeight;",
    "			weightSum += sampleWeight;",
    "		}",
    "		sampleUv = vUv - sampleUvOffset;",
    "		viewZ = -getViewZ( getDepth( sampleUv ) );",
    "		if( abs( viewZ - centerViewZ ) > depthCutoff ) lBreak = true;",
    "		if( ! lBreak ) {",
    "			diffuseSum += texture2D( tDiffuse, sampleUv ) * sampleWeight;",
    "			weightSum += sampleWeight;",
    "		}",
    "	}",
    "	gl_FragColor = diffuseSum / weightSum;",
    "}"
  ].join(`
`)
}, Qa = {
  createSampleWeights: (t, e) => {
    const r = (i, s) => Math.exp(-(i * i) / (2 * (s * s))) / (Math.sqrt(2 * Math.PI) * s), n = [];
    for (let i = 0; i <= t; i++)
      n.push(r(i, e));
    return n;
  },
  createSampleOffsets: (t, e) => {
    const r = [];
    for (let n = 0; n <= t; n++)
      r.push(e.clone().multiplyScalar(n));
    return r;
  },
  configure: (t, e, r, n) => {
    t.defines.KERNEL_RADIUS = e, t.uniforms.sampleUvOffsets.value = Qa.createSampleOffsets(e, n), t.uniforms.sampleWeights.value = Qa.createSampleWeights(e, r), t.needsUpdate = true;
  }
};
class v6 extends so {
  constructor(e, r, n = false, i = false, s = new Vector2(256, 256)) {
    super(), this.scene = e, this.camera = r, this.clear = true, this.needsSwap = false, this.supportsDepthTextureExtension = n, this.supportsNormalTexture = i, this.originalClearColor = new Color(), this._oldClearColor = new Color(), this.oldClearAlpha = 1, this.params = {
      output: 0,
      saoBias: 0.5,
      saoIntensity: 0.18,
      saoScale: 1,
      saoKernelRadius: 100,
      saoMinResolution: 0,
      saoBlur: true,
      saoBlurRadius: 8,
      saoBlurStdDev: 4,
      saoBlurDepthCutoff: 0.01
    }, this.resolution = new Vector2(s.x, s.y), this.saoRenderTarget = new WebGLRenderTarget(this.resolution.x, this.resolution.y, { type: HalfFloatType }), this.blurIntermediateRenderTarget = this.saoRenderTarget.clone(), this.beautyRenderTarget = this.saoRenderTarget.clone(), this.normalRenderTarget = new WebGLRenderTarget(this.resolution.x, this.resolution.y, {
      minFilter: NearestFilter,
      magFilter: NearestFilter,
      type: HalfFloatType
    }), this.depthRenderTarget = this.normalRenderTarget.clone();
    let a;
    this.supportsDepthTextureExtension && (a = new DepthTexture(), a.type = UnsignedShortType, this.beautyRenderTarget.depthTexture = a, this.beautyRenderTarget.depthBuffer = true), this.depthMaterial = new MeshDepthMaterial(), this.depthMaterial.depthPacking = RGBADepthPacking, this.depthMaterial.blending = NoBlending, this.normalMaterial = new MeshNormalMaterial(), this.normalMaterial.blending = NoBlending, this.saoMaterial = new ShaderMaterial({
      defines: Object.assign({}, ia.defines),
      fragmentShader: ia.fragmentShader,
      vertexShader: ia.vertexShader,
      uniforms: UniformsUtils.clone(ia.uniforms)
    }), this.saoMaterial.extensions.derivatives = true, this.saoMaterial.defines.DEPTH_PACKING = this.supportsDepthTextureExtension ? 0 : 1, this.saoMaterial.defines.NORMAL_TEXTURE = this.supportsNormalTexture ? 1 : 0, this.saoMaterial.defines.PERSPECTIVE_CAMERA = this.camera.isPerspectiveCamera ? 1 : 0, this.saoMaterial.uniforms.tDepth.value = this.supportsDepthTextureExtension ? a : this.depthRenderTarget.texture, this.saoMaterial.uniforms.tNormal.value = this.normalRenderTarget.texture, this.saoMaterial.uniforms.size.value.set(this.resolution.x, this.resolution.y), this.saoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse), this.saoMaterial.uniforms.cameraProjectionMatrix.value = this.camera.projectionMatrix, this.saoMaterial.blending = NoBlending, this.vBlurMaterial = new ShaderMaterial({
      uniforms: UniformsUtils.clone(Cn.uniforms),
      defines: Object.assign({}, Cn.defines),
      vertexShader: Cn.vertexShader,
      fragmentShader: Cn.fragmentShader
    }), this.vBlurMaterial.defines.DEPTH_PACKING = this.supportsDepthTextureExtension ? 0 : 1, this.vBlurMaterial.defines.PERSPECTIVE_CAMERA = this.camera.isPerspectiveCamera ? 1 : 0, this.vBlurMaterial.uniforms.tDiffuse.value = this.saoRenderTarget.texture, this.vBlurMaterial.uniforms.tDepth.value = this.supportsDepthTextureExtension ? a : this.depthRenderTarget.texture, this.vBlurMaterial.uniforms.size.value.set(this.resolution.x, this.resolution.y), this.vBlurMaterial.blending = NoBlending, this.hBlurMaterial = new ShaderMaterial({
      uniforms: UniformsUtils.clone(Cn.uniforms),
      defines: Object.assign({}, Cn.defines),
      vertexShader: Cn.vertexShader,
      fragmentShader: Cn.fragmentShader
    }), this.hBlurMaterial.defines.DEPTH_PACKING = this.supportsDepthTextureExtension ? 0 : 1, this.hBlurMaterial.defines.PERSPECTIVE_CAMERA = this.camera.isPerspectiveCamera ? 1 : 0, this.hBlurMaterial.uniforms.tDiffuse.value = this.blurIntermediateRenderTarget.texture, this.hBlurMaterial.uniforms.tDepth.value = this.supportsDepthTextureExtension ? a : this.depthRenderTarget.texture, this.hBlurMaterial.uniforms.size.value.set(this.resolution.x, this.resolution.y), this.hBlurMaterial.blending = NoBlending, this.materialCopy = new ShaderMaterial({
      uniforms: UniformsUtils.clone(Vr.uniforms),
      vertexShader: Vr.vertexShader,
      fragmentShader: Vr.fragmentShader,
      blending: NoBlending
    }), this.materialCopy.transparent = true, this.materialCopy.depthTest = false, this.materialCopy.depthWrite = false, this.materialCopy.blending = CustomBlending, this.materialCopy.blendSrc = DstColorFactor, this.materialCopy.blendDst = ZeroFactor, this.materialCopy.blendEquation = AddEquation, this.materialCopy.blendSrcAlpha = DstAlphaFactor, this.materialCopy.blendDstAlpha = ZeroFactor, this.materialCopy.blendEquationAlpha = AddEquation, this.depthCopy = new ShaderMaterial({
      uniforms: UniformsUtils.clone(jo.uniforms),
      vertexShader: jo.vertexShader,
      fragmentShader: jo.fragmentShader,
      blending: NoBlending
    }), this.fsQuad = new ao(null);
  }
  render(e, r, n) {
    if (this.renderToScreen && (this.materialCopy.blending = NoBlending, this.materialCopy.uniforms.tDiffuse.value = n.texture, this.materialCopy.needsUpdate = true, this.renderPass(e, this.materialCopy, null)), this.params.output === 1)
      return;
    e.getClearColor(this._oldClearColor), this.oldClearAlpha = e.getClearAlpha();
    const i = e.autoClear;
    e.autoClear = false, e.setRenderTarget(this.depthRenderTarget), e.clear(), this.saoMaterial.uniforms.bias.value = this.params.saoBias, this.saoMaterial.uniforms.intensity.value = this.params.saoIntensity, this.saoMaterial.uniforms.scale.value = this.params.saoScale, this.saoMaterial.uniforms.kernelRadius.value = this.params.saoKernelRadius, this.saoMaterial.uniforms.minResolution.value = this.params.saoMinResolution, this.saoMaterial.uniforms.cameraNear.value = this.camera.near, this.saoMaterial.uniforms.cameraFar.value = this.camera.far;
    const s = this.params.saoBlurDepthCutoff * (this.camera.far - this.camera.near);
    this.vBlurMaterial.uniforms.depthCutoff.value = s, this.hBlurMaterial.uniforms.depthCutoff.value = s, this.vBlurMaterial.uniforms.cameraNear.value = this.camera.near, this.vBlurMaterial.uniforms.cameraFar.value = this.camera.far, this.hBlurMaterial.uniforms.cameraNear.value = this.camera.near, this.hBlurMaterial.uniforms.cameraFar.value = this.camera.far, this.params.saoBlurRadius = Math.floor(this.params.saoBlurRadius), (this.prevStdDev !== this.params.saoBlurStdDev || this.prevNumSamples !== this.params.saoBlurRadius) && (Qa.configure(
      this.vBlurMaterial,
      this.params.saoBlurRadius,
      this.params.saoBlurStdDev,
      new Vector2(0, 1)
    ), Qa.configure(
      this.hBlurMaterial,
      this.params.saoBlurRadius,
      this.params.saoBlurStdDev,
      new Vector2(1, 0)
    ), this.prevStdDev = this.params.saoBlurStdDev, this.prevNumSamples = this.params.saoBlurRadius), e.setClearColor(0), e.setRenderTarget(this.beautyRenderTarget), e.clear(), e.render(this.scene, this.camera), this.supportsDepthTextureExtension || this.renderOverride(e, this.depthMaterial, this.depthRenderTarget, 0, 1), this.supportsNormalTexture && this.renderOverride(e, this.normalMaterial, this.normalRenderTarget, 7829503, 1), this.renderPass(e, this.saoMaterial, this.saoRenderTarget, 16777215, 1), this.params.saoBlur && (this.renderPass(e, this.vBlurMaterial, this.blurIntermediateRenderTarget, 16777215, 1), this.renderPass(e, this.hBlurMaterial, this.saoRenderTarget, 16777215, 1));
    let a = this.materialCopy;
    this.params.output === 3 ? this.supportsDepthTextureExtension ? (this.materialCopy.uniforms.tDiffuse.value = this.beautyRenderTarget.depthTexture, this.materialCopy.needsUpdate = true) : (this.depthCopy.uniforms.tDiffuse.value = this.depthRenderTarget.texture, this.depthCopy.needsUpdate = true, a = this.depthCopy) : this.params.output === 4 ? (this.materialCopy.uniforms.tDiffuse.value = this.normalRenderTarget.texture, this.materialCopy.needsUpdate = true) : (this.materialCopy.uniforms.tDiffuse.value = this.saoRenderTarget.texture, this.materialCopy.needsUpdate = true), this.params.output === 0 ? a.blending = CustomBlending : a.blending = NoBlending, this.renderPass(e, a, this.renderToScreen ? null : n), e.setClearColor(this._oldClearColor, this.oldClearAlpha), e.autoClear = i;
  }
  renderPass(e, r, n, i, s) {
    e.getClearColor(this.originalClearColor);
    const a = e.getClearAlpha(), o = e.autoClear;
    e.setRenderTarget(n), e.autoClear = false, i != null && (e.setClearColor(i), e.setClearAlpha(s || 0), e.clear()), this.fsQuad.material = r, this.fsQuad.render(e), e.autoClear = o, e.setClearColor(this.originalClearColor), e.setClearAlpha(a);
  }
  renderOverride(e, r, n, i, s) {
    e.getClearColor(this.originalClearColor);
    const a = e.getClearAlpha(), o = e.autoClear;
    e.setRenderTarget(n), e.autoClear = false, i = r.clearColor || i, s = r.clearAlpha || s, i != null && (e.setClearColor(i), e.setClearAlpha(s || 0), e.clear()), this.scene.overrideMaterial = r, e.render(this.scene, this.camera), this.scene.overrideMaterial = null, e.autoClear = o, e.setClearColor(this.originalClearColor), e.setClearAlpha(a);
  }
  setSize(e, r) {
    this.beautyRenderTarget.setSize(e, r), this.saoRenderTarget.setSize(e, r), this.blurIntermediateRenderTarget.setSize(e, r), this.normalRenderTarget.setSize(e, r), this.depthRenderTarget.setSize(e, r), this.saoMaterial.uniforms.size.value.set(e, r), this.saoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse), this.saoMaterial.uniforms.cameraProjectionMatrix.value = this.camera.projectionMatrix, this.saoMaterial.needsUpdate = true, this.vBlurMaterial.uniforms.size.value.set(e, r), this.vBlurMaterial.needsUpdate = true, this.hBlurMaterial.uniforms.size.value.set(e, r), this.hBlurMaterial.needsUpdate = true;
  }
  dispose() {
    this.saoRenderTarget.dispose(), this.blurIntermediateRenderTarget.dispose(), this.beautyRenderTarget.dispose(), this.normalRenderTarget.dispose(), this.depthRenderTarget.dispose(), this.depthMaterial.dispose(), this.normalMaterial.dispose(), this.saoMaterial.dispose(), this.vBlurMaterial.dispose(), this.hBlurMaterial.dispose(), this.materialCopy.dispose(), this.depthCopy.dispose(), this.fsQuad.dispose();
  }
}
b(v6, "OUTPUT", {
  Beauty: 1,
  Default: 0,
  SAO: 2,
  Depth: 3,
  Normal: 4
});
const kr = {
  defines: {
    MAX_STEP: 0,
    isPerspectiveCamera: true,
    isDistanceAttenuation: true,
    isFresnel: true,
    isInfiniteThick: false,
    isSelective: false
  },
  uniforms: {
    tDiffuse: { value: null },
    tNormal: { value: null },
    tMetalness: { value: null },
    tDepth: { value: null },
    cameraNear: { value: null },
    cameraFar: { value: null },
    resolution: { value: /* @__PURE__ */ new Vector2() },
    cameraProjectionMatrix: { value: /* @__PURE__ */ new Matrix4() },
    cameraInverseProjectionMatrix: { value: /* @__PURE__ */ new Matrix4() },
    opacity: { value: 0.5 },
    maxDistance: { value: 180 },
    cameraRange: { value: 0 },
    surfDist: { value: 7e-3 },
    thickTolerance: { value: 0.03 }
  },
  vertexShader: (
    /* glsl */
    `

    varying vec2 vUv;

    void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }

  `
  ),
  fragmentShader: (
    /* glsl */
    `
		// precision highp float;
		precision highp sampler2D;
		varying vec2 vUv;
		uniform sampler2D tDepth;
		uniform sampler2D tNormal;
		uniform sampler2D tMetalness;
		uniform sampler2D tDiffuse;
		uniform float cameraRange;
		uniform vec2 resolution;
		uniform float opacity;
		uniform float cameraNear;
		uniform float cameraFar;
		uniform float maxDistance;
		uniform float surfDist;
		uniform mat4 cameraProjectionMatrix;
		uniform mat4 cameraInverseProjectionMatrix;
		uniform float thickTolerance;
		#include <packing>
		float pointToLineDistance(vec3 x0, vec3 x1, vec3 x2) {
			//x0: point, x1: linePointA, x2: linePointB
			//https://mathworld.wolfram.com/Point-LineDistance3-Dimensional.html
			return length(cross(x0-x1,x0-x2))/length(x2-x1);
		}
		float pointPlaneDistance(vec3 point,vec3 planePoint,vec3 planeNormal){
			// https://mathworld.wolfram.com/Point-PlaneDistance.html
			//// https://en.wikipedia.org/wiki/Plane_(geometry)
			//// http://paulbourke.net/geometry/pointlineplane/
			float a=planeNormal.x,b=planeNormal.y,c=planeNormal.z;
			float x0=point.x,y0=point.y,z0=point.z;
			float x=planePoint.x,y=planePoint.y,z=planePoint.z;
			float d=-(a*x+b*y+c*z);
			float distance=(a*x0+b*y0+c*z0+d)/sqrt(a*a+b*b+c*c);
			return distance;
		}
		float getDepth( const in vec2 uv ) {
			return texture2D( tDepth, uv ).x;
		}
		float getViewZ( const in float depth ) {
			#ifdef isPerspectiveCamera
				return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );
			#else
				return orthographicDepthToViewZ( depth, cameraNear, cameraFar );
			#endif
		}
		vec3 getViewPosition( const in vec2 uv, const in float depth/*clip space*/, const in float clipW ) {
			vec4 clipPosition = vec4( ( vec3( uv, depth ) - 0.5 ) * 2.0, 1.0 );//ndc
			clipPosition *= clipW; //clip
			return ( cameraInverseProjectionMatrix * clipPosition ).xyz;//view
		}
		vec3 getViewNormal( const in vec2 uv ) {
			return unpackRGBToNormal( texture2D( tNormal, uv ).xyz );
		}
		vec2 viewPositionToXY(vec3 viewPosition){
			vec2 xy;
			vec4 clip=cameraProjectionMatrix*vec4(viewPosition,1);
			xy=clip.xy;//clip
			float clipW=clip.w;
			xy/=clipW;//NDC
			xy=(xy+1.)/2.;//uv
			xy*=resolution;//screen
			return xy;
		}
		void main(){
			#ifdef isSelective
				float metalness=texture2D(tMetalness,vUv).r;
				if(metalness==0.) return;
			#endif

			float depth = getDepth( vUv );
			float viewZ = getViewZ( depth );
			if(-viewZ>=cameraFar) return;

			float clipW = cameraProjectionMatrix[2][3] * viewZ+cameraProjectionMatrix[3][3];
			vec3 viewPosition=getViewPosition( vUv, depth, clipW );

			vec2 d0=gl_FragCoord.xy;
			vec2 d1;

			vec3 viewNormal=getViewNormal( vUv );

			#ifdef isPerspectiveCamera
				vec3 viewIncidenceDir=normalize(viewPosition);
				vec3 viewReflectDir=reflect(viewIncidenceDir,viewNormal);
			#else
				vec3 viewIncidenceDir=vec3(0,0,-1);
				vec3 viewReflectDir=reflect(viewIncidenceDir,viewNormal);
			#endif

			float maxReflectRayLen=maxDistance/dot(-viewIncidenceDir,viewNormal);
			// dot(a,b)==length(a)*length(b)*cos(theta) // https://www.mathsisfun.com/algebra/vectors-dot-product.html
			// if(a.isNormalized&&b.isNormalized) dot(a,b)==cos(theta)
			// maxDistance/maxReflectRayLen=cos(theta)
			// maxDistance/maxReflectRayLen==dot(a,b)
			// maxReflectRayLen==maxDistance/dot(a,b)

			vec3 d1viewPosition=viewPosition+viewReflectDir*maxReflectRayLen;
			#ifdef isPerspectiveCamera
				if(d1viewPosition.z>-cameraNear){
					//https://tutorial.math.lamar.edu/Classes/CalcIII/EqnsOfLines.aspx
					float t=(-cameraNear-viewPosition.z)/viewReflectDir.z;
					d1viewPosition=viewPosition+viewReflectDir*t;
				}
			#endif
			d1=viewPositionToXY(d1viewPosition);

			float totalLen=length(d1-d0);
			float xLen=d1.x-d0.x;
			float yLen=d1.y-d0.y;
			float totalStep=max(abs(xLen),abs(yLen));
			float xSpan=xLen/totalStep;
			float ySpan=yLen/totalStep;
			for(float i=0.;i<MAX_STEP;i++){
				if(i>=totalStep) break;
				vec2 xy=vec2(d0.x+i*xSpan,d0.y+i*ySpan);
				if(xy.x<0.||xy.x>resolution.x||xy.y<0.||xy.y>resolution.y) break;
				float s=length(xy-d0)/totalLen;
				vec2 uv=xy/resolution;

				float d = getDepth(uv);
				float vZ = getViewZ( d );
				if(-vZ>=cameraFar) continue;
				float cW = cameraProjectionMatrix[2][3] * vZ+cameraProjectionMatrix[3][3];
				vec3 vP=getViewPosition( uv, d, cW );

				#ifdef isPerspectiveCamera
					// https://www.comp.nus.edu.sg/~lowkl/publications/lowk_persp_interp_techrep.pdf
					float recipVPZ=1./viewPosition.z;
					float viewReflectRayZ=1./(recipVPZ+s*(1./d1viewPosition.z-recipVPZ));
					float sD=surfDist*cW;
				#else
					float viewReflectRayZ=viewPosition.z+s*(d1viewPosition.z-viewPosition.z);
					float sD=surfDist;
				#endif
				if(viewReflectRayZ-sD>vZ) continue;

				#ifdef isInfiniteThick
					if(viewReflectRayZ+thickTolerance*clipW<vP.z) break;
				#endif
				float away=pointToLineDistance(vP,viewPosition,d1viewPosition);

				float op=opacity;

				if(away<sD){
					vec3 vN=getViewNormal( uv );
					if(dot(viewReflectDir,vN)>=0.) continue;
					float distance=pointPlaneDistance(vP,viewPosition,viewNormal);
					if(distance>maxDistance) break;
					#ifdef isDistanceAttenuation
						float ratio=1.-(distance/maxDistance);
						float attenuation=ratio*ratio;
						op=opacity*attenuation;
					#endif
					#ifdef isFresnel
						float fresnel=(dot(viewIncidenceDir,viewReflectDir)+1.)/2.;
						op*=fresnel;
					#endif
					vec4 reflectColor=texture2D(tDiffuse,uv);
					gl_FragColor.xyz=reflectColor.xyz;
					gl_FragColor.a=op;
					break;
				}
			}
		}
	`
  )
}, sa = {
  defines: {
    PERSPECTIVE_CAMERA: 1
  },
  uniforms: {
    tDepth: { value: null },
    cameraNear: { value: null },
    cameraFar: { value: null }
  },
  vertexShader: (
    /* glsl */
    `

    varying vec2 vUv;

    void main() {

    	vUv = uv;
    	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }

  `
  ),
  fragmentShader: (
    /* glsl */
    `

    uniform sampler2D tDepth;

    uniform float cameraNear;
    uniform float cameraFar;

    varying vec2 vUv;

    #include <packing>

		float getLinearDepth( const in vec2 uv ) {

			#if PERSPECTIVE_CAMERA == 1

				float fragCoordZ = texture2D( tDepth, uv ).x;
				float viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );
				return viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );

			#else

				return texture2D( tDepth, uv ).x;

			#endif

		}

    void main() {

    	float depth = getLinearDepth( vUv );
			float d = 1.0 - depth;
			// d=(d-.999)*1000.;
    	gl_FragColor = vec4( vec3( d ), 1.0 );

    }

  `
  )
}, xn = {
  uniforms: {
    tDiffuse: { value: null },
    resolution: { value: /* @__PURE__ */ new Vector2() },
    opacity: { value: 0.5 }
  },
  vertexShader: (
    /* glsl */
    `

    varying vec2 vUv;

    void main() {

    	vUv = uv;
    	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }

  `
  ),
  fragmentShader: (
    /* glsl */
    `

    uniform sampler2D tDiffuse;
    uniform vec2 resolution;
    varying vec2 vUv;
    void main() {
			//reverse engineering from PhotoShop blur filter, then change coefficient

    	vec2 texelSize = ( 1.0 / resolution );

			vec4 c=texture2D(tDiffuse,vUv);

			vec2 offset;

			offset=(vec2(-1,0))*texelSize;
			vec4 cl=texture2D(tDiffuse,vUv+offset);

			offset=(vec2(1,0))*texelSize;
			vec4 cr=texture2D(tDiffuse,vUv+offset);

			offset=(vec2(0,-1))*texelSize;
			vec4 cb=texture2D(tDiffuse,vUv+offset);

			offset=(vec2(0,1))*texelSize;
			vec4 ct=texture2D(tDiffuse,vUv+offset);

			// float coeCenter=.5;
			// float coeSide=.125;
			float coeCenter=.2;
			float coeSide=.2;
			float a=c.a*coeCenter+cl.a*coeSide+cr.a*coeSide+cb.a*coeSide+ct.a*coeSide;
			vec3 rgb=(c.rgb*c.a*coeCenter+cl.rgb*cl.a*coeSide+cr.rgb*cr.a*coeSide+cb.rgb*cb.a*coeSide+ct.rgb*ct.a*coeSide)/a;
			gl_FragColor=vec4(rgb,a);

		}
	`
  )
}, ri = class extends so {
  constructor({ renderer: t, scene: e, camera: r, width: n, height: i, selects: s, bouncing: a = false, groundReflector: o }) {
    super(), this.width = n !== void 0 ? n : 512, this.height = i !== void 0 ? i : 512, this.clear = true, this.renderer = t, this.scene = e, this.camera = r, this.groundReflector = o, this.opacity = kr.uniforms.opacity.value, this.output = 0, this.maxDistance = kr.uniforms.maxDistance.value, this.thickness = kr.uniforms.thickness.value, this.tempColor = new Color(), this._selects = s, this.selective = Array.isArray(this._selects), Object.defineProperty(this, "selects", {
      get() {
        return this._selects;
      },
      set(c) {
        this._selects !== c && (this._selects = c, Array.isArray(c) ? (this.selective = true, this.ssrMaterial.defines.SELECTIVE = true, this.ssrMaterial.needsUpdate = true) : (this.selective = false, this.ssrMaterial.defines.SELECTIVE = false, this.ssrMaterial.needsUpdate = true));
      }
    }), this._bouncing = a, Object.defineProperty(this, "bouncing", {
      get() {
        return this._bouncing;
      },
      set(c) {
        this._bouncing !== c && (this._bouncing = c, c ? this.ssrMaterial.uniforms.tDiffuse.value = this.prevRenderTarget.texture : this.ssrMaterial.uniforms.tDiffuse.value = this.beautyRenderTarget.texture);
      }
    }), this.blur = true, this._distanceAttenuation = kr.defines.DISTANCE_ATTENUATION, Object.defineProperty(this, "distanceAttenuation", {
      get() {
        return this._distanceAttenuation;
      },
      set(c) {
        this._distanceAttenuation !== c && (this._distanceAttenuation = c, this.ssrMaterial.defines.DISTANCE_ATTENUATION = c, this.ssrMaterial.needsUpdate = true);
      }
    }), this._fresnel = kr.defines.FRESNEL, Object.defineProperty(this, "fresnel", {
      get() {
        return this._fresnel;
      },
      set(c) {
        this._fresnel !== c && (this._fresnel = c, this.ssrMaterial.defines.FRESNEL = c, this.ssrMaterial.needsUpdate = true);
      }
    }), this._infiniteThick = kr.defines.INFINITE_THICK, Object.defineProperty(this, "infiniteThick", {
      get() {
        return this._infiniteThick;
      },
      set(c) {
        this._infiniteThick !== c && (this._infiniteThick = c, this.ssrMaterial.defines.INFINITE_THICK = c, this.ssrMaterial.needsUpdate = true);
      }
    });
    const l = new DepthTexture();
    l.type = UnsignedShortType, l.minFilter = NearestFilter, l.magFilter = NearestFilter, this.beautyRenderTarget = new WebGLRenderTarget(this.width, this.height, {
      minFilter: NearestFilter,
      magFilter: NearestFilter,
      type: HalfFloatType,
      depthTexture: l,
      depthBuffer: true
    }), this.prevRenderTarget = new WebGLRenderTarget(this.width, this.height, {
      minFilter: NearestFilter,
      magFilter: NearestFilter
    }), this.normalRenderTarget = new WebGLRenderTarget(this.width, this.height, {
      minFilter: NearestFilter,
      magFilter: NearestFilter,
      type: HalfFloatType
    }), this.metalnessRenderTarget = new WebGLRenderTarget(this.width, this.height, {
      minFilter: NearestFilter,
      magFilter: NearestFilter,
      type: HalfFloatType
    }), this.ssrRenderTarget = new WebGLRenderTarget(this.width, this.height, {
      minFilter: NearestFilter,
      magFilter: NearestFilter
    }), this.blurRenderTarget = this.ssrRenderTarget.clone(), this.blurRenderTarget2 = this.ssrRenderTarget.clone(), this.ssrMaterial = new ShaderMaterial({
      defines: Object.assign({}, kr.defines, {
        MAX_STEP: Math.sqrt(this.width * this.width + this.height * this.height)
      }),
      uniforms: UniformsUtils.clone(kr.uniforms),
      vertexShader: kr.vertexShader,
      fragmentShader: kr.fragmentShader,
      blending: NoBlending
    }), this.ssrMaterial.uniforms.tDiffuse.value = this.beautyRenderTarget.texture, this.ssrMaterial.uniforms.tNormal.value = this.normalRenderTarget.texture, this.ssrMaterial.defines.SELECTIVE = this.selective, this.ssrMaterial.needsUpdate = true, this.ssrMaterial.uniforms.tMetalness.value = this.metalnessRenderTarget.texture, this.ssrMaterial.uniforms.tDepth.value = this.beautyRenderTarget.depthTexture, this.ssrMaterial.uniforms.cameraNear.value = this.camera.near, this.ssrMaterial.uniforms.cameraFar.value = this.camera.far, this.ssrMaterial.uniforms.thickness.value = this.thickness, this.ssrMaterial.uniforms.resolution.value.set(this.width, this.height), this.ssrMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix), this.ssrMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse), this.normalMaterial = new MeshNormalMaterial(), this.normalMaterial.blending = NoBlending, this.metalnessOnMaterial = new MeshBasicMaterial({
      color: "white"
    }), this.metalnessOffMaterial = new MeshBasicMaterial({
      color: "black"
    }), this.blurMaterial = new ShaderMaterial({
      defines: Object.assign({}, xn.defines),
      uniforms: UniformsUtils.clone(xn.uniforms),
      vertexShader: xn.vertexShader,
      fragmentShader: xn.fragmentShader
    }), this.blurMaterial.uniforms.tDiffuse.value = this.ssrRenderTarget.texture, this.blurMaterial.uniforms.resolution.value.set(this.width, this.height), this.blurMaterial2 = new ShaderMaterial({
      defines: Object.assign({}, xn.defines),
      uniforms: UniformsUtils.clone(xn.uniforms),
      vertexShader: xn.vertexShader,
      fragmentShader: xn.fragmentShader
    }), this.blurMaterial2.uniforms.tDiffuse.value = this.blurRenderTarget.texture, this.blurMaterial2.uniforms.resolution.value.set(this.width, this.height), this.depthRenderMaterial = new ShaderMaterial({
      defines: Object.assign({}, sa.defines),
      uniforms: UniformsUtils.clone(sa.uniforms),
      vertexShader: sa.vertexShader,
      fragmentShader: sa.fragmentShader,
      blending: NoBlending
    }), this.depthRenderMaterial.uniforms.tDepth.value = this.beautyRenderTarget.depthTexture, this.depthRenderMaterial.uniforms.cameraNear.value = this.camera.near, this.depthRenderMaterial.uniforms.cameraFar.value = this.camera.far, this.copyMaterial = new ShaderMaterial({
      uniforms: UniformsUtils.clone(Vr.uniforms),
      vertexShader: Vr.vertexShader,
      fragmentShader: Vr.fragmentShader,
      transparent: true,
      depthTest: false,
      depthWrite: false,
      blendSrc: SrcAlphaFactor,
      blendDst: OneMinusSrcAlphaFactor,
      blendEquation: AddEquation,
      blendSrcAlpha: SrcAlphaFactor,
      blendDstAlpha: OneMinusSrcAlphaFactor,
      blendEquationAlpha: AddEquation
      // premultipliedAlpha:true,
    }), this.fsQuad = new ao(null), this.originalClearColor = new Color();
  }
  dispose() {
    this.beautyRenderTarget.dispose(), this.prevRenderTarget.dispose(), this.normalRenderTarget.dispose(), this.metalnessRenderTarget.dispose(), this.ssrRenderTarget.dispose(), this.blurRenderTarget.dispose(), this.blurRenderTarget2.dispose(), this.normalMaterial.dispose(), this.metalnessOnMaterial.dispose(), this.metalnessOffMaterial.dispose(), this.blurMaterial.dispose(), this.blurMaterial2.dispose(), this.copyMaterial.dispose(), this.depthRenderMaterial.dispose(), this.fsQuad.dispose();
  }
  render(t, e) {
    switch (t.setRenderTarget(this.beautyRenderTarget), t.clear(), this.groundReflector && (this.groundReflector.visible = false, this.groundReflector.doRender(this.renderer, this.scene, this.camera), this.groundReflector.visible = true), t.render(this.scene, this.camera), this.groundReflector && (this.groundReflector.visible = false), this.renderOverride(t, this.normalMaterial, this.normalRenderTarget, 0, 0), this.selective && this.renderMetalness(t, this.metalnessOnMaterial, this.metalnessRenderTarget, 0, 0), this.ssrMaterial.uniforms.opacity.value = this.opacity, this.ssrMaterial.uniforms.maxDistance.value = this.maxDistance, this.ssrMaterial.uniforms.thickness.value = this.thickness, this.renderPass(t, this.ssrMaterial, this.ssrRenderTarget), this.blur && (this.renderPass(t, this.blurMaterial, this.blurRenderTarget), this.renderPass(t, this.blurMaterial2, this.blurRenderTarget2)), this.output) {
      case ri.OUTPUT.Default:
        this.bouncing ? (this.copyMaterial.uniforms.tDiffuse.value = this.beautyRenderTarget.texture, this.copyMaterial.blending = NoBlending, this.renderPass(t, this.copyMaterial, this.prevRenderTarget), this.blur ? this.copyMaterial.uniforms.tDiffuse.value = this.blurRenderTarget2.texture : this.copyMaterial.uniforms.tDiffuse.value = this.ssrRenderTarget.texture, this.copyMaterial.blending = NormalBlending, this.renderPass(t, this.copyMaterial, this.prevRenderTarget), this.copyMaterial.uniforms.tDiffuse.value = this.prevRenderTarget.texture, this.copyMaterial.blending = NoBlending, this.renderPass(t, this.copyMaterial, this.renderToScreen ? null : e)) : (this.copyMaterial.uniforms.tDiffuse.value = this.beautyRenderTarget.texture, this.copyMaterial.blending = NoBlending, this.renderPass(t, this.copyMaterial, this.renderToScreen ? null : e), this.blur ? this.copyMaterial.uniforms.tDiffuse.value = this.blurRenderTarget2.texture : this.copyMaterial.uniforms.tDiffuse.value = this.ssrRenderTarget.texture, this.copyMaterial.blending = NormalBlending, this.renderPass(t, this.copyMaterial, this.renderToScreen ? null : e));
        break;
      case ri.OUTPUT.SSR:
        this.blur ? this.copyMaterial.uniforms.tDiffuse.value = this.blurRenderTarget2.texture : this.copyMaterial.uniforms.tDiffuse.value = this.ssrRenderTarget.texture, this.copyMaterial.blending = NoBlending, this.renderPass(t, this.copyMaterial, this.renderToScreen ? null : e), this.bouncing && (this.blur ? this.copyMaterial.uniforms.tDiffuse.value = this.blurRenderTarget2.texture : this.copyMaterial.uniforms.tDiffuse.value = this.beautyRenderTarget.texture, this.copyMaterial.blending = NoBlending, this.renderPass(t, this.copyMaterial, this.prevRenderTarget), this.copyMaterial.uniforms.tDiffuse.value = this.ssrRenderTarget.texture, this.copyMaterial.blending = NormalBlending, this.renderPass(t, this.copyMaterial, this.prevRenderTarget));
        break;
      case ri.OUTPUT.Beauty:
        this.copyMaterial.uniforms.tDiffuse.value = this.beautyRenderTarget.texture, this.copyMaterial.blending = NoBlending, this.renderPass(t, this.copyMaterial, this.renderToScreen ? null : e);
        break;
      case ri.OUTPUT.Depth:
        this.renderPass(t, this.depthRenderMaterial, this.renderToScreen ? null : e);
        break;
      case ri.OUTPUT.Normal:
        this.copyMaterial.uniforms.tDiffuse.value = this.normalRenderTarget.texture, this.copyMaterial.blending = NoBlending, this.renderPass(t, this.copyMaterial, this.renderToScreen ? null : e);
        break;
      case ri.OUTPUT.Metalness:
        this.copyMaterial.uniforms.tDiffuse.value = this.metalnessRenderTarget.texture, this.copyMaterial.blending = NoBlending, this.renderPass(t, this.copyMaterial, this.renderToScreen ? null : e);
        break;
      default:
        console.warn("THREE.SSRPass: Unknown output type.");
    }
  }
  renderPass(t, e, r, n, i) {
    this.originalClearColor.copy(t.getClearColor(this.tempColor));
    const s = t.getClearAlpha(this.tempColor), a = t.autoClear;
    t.setRenderTarget(r), t.autoClear = false, n != null && (t.setClearColor(n), t.setClearAlpha(i || 0), t.clear()), this.fsQuad.material = e, this.fsQuad.render(t), t.autoClear = a, t.setClearColor(this.originalClearColor), t.setClearAlpha(s);
  }
  renderOverride(t, e, r, n, i) {
    this.originalClearColor.copy(t.getClearColor(this.tempColor));
    const s = t.getClearAlpha(this.tempColor), a = t.autoClear;
    t.setRenderTarget(r), t.autoClear = false, n = e.clearColor || n, i = e.clearAlpha || i, n != null && (t.setClearColor(n), t.setClearAlpha(i || 0), t.clear()), this.scene.overrideMaterial = e, t.render(this.scene, this.camera), this.scene.overrideMaterial = null, t.autoClear = a, t.setClearColor(this.originalClearColor), t.setClearAlpha(s);
  }
  renderMetalness(t, e, r, n, i) {
    this.originalClearColor.copy(t.getClearColor(this.tempColor));
    const s = t.getClearAlpha(this.tempColor), a = t.autoClear;
    t.setRenderTarget(r), t.autoClear = false, n = e.clearColor || n, i = e.clearAlpha || i, n != null && (t.setClearColor(n), t.setClearAlpha(i || 0), t.clear()), this.scene.traverseVisible((o) => {
      o._SSRPassBackupMaterial = o.material, this._selects.includes(o) ? o.material = this.metalnessOnMaterial : o.material = this.metalnessOffMaterial;
    }), t.render(this.scene, this.camera), this.scene.traverseVisible((o) => {
      o.material = o._SSRPassBackupMaterial;
    }), t.autoClear = a, t.setClearColor(this.originalClearColor), t.setClearAlpha(s);
  }
  setSize(t, e) {
    this.width = t, this.height = e, this.ssrMaterial.defines.MAX_STEP = Math.sqrt(t * t + e * e), this.ssrMaterial.needsUpdate = true, this.beautyRenderTarget.setSize(t, e), this.prevRenderTarget.setSize(t, e), this.ssrRenderTarget.setSize(t, e), this.normalRenderTarget.setSize(t, e), this.metalnessRenderTarget.setSize(t, e), this.blurRenderTarget.setSize(t, e), this.blurRenderTarget2.setSize(t, e), this.ssrMaterial.uniforms.resolution.value.set(t, e), this.ssrMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix), this.ssrMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse), this.blurMaterial.uniforms.resolution.value.set(t, e), this.blurMaterial2.uniforms.resolution.value.set(t, e);
  }
};
let y6 = ri;
b(y6, "OUTPUT", {
  Default: 0,
  SSR: 1,
  Beauty: 3,
  Depth: 4,
  Normal: 5,
  Metalness: 7
});
class E6 extends Loader {
  constructor(e) {
    super(e), this.dracoLoader = null, this.ktx2Loader = null, this.meshoptDecoder = null, this.pluginCallbacks = [], this.register(function(r) {
      return new S6(r);
    }), this.register(function(r) {
      return new k6(r);
    }), this.register(function(r) {
      return new F6(r);
    }), this.register(function(r) {
      return new L6(r);
    }), this.register(function(r) {
      return new B6(r);
    }), this.register(function(r) {
      return new b6(r);
    }), this.register(function(r) {
      return new _6(r);
    }), this.register(function(r) {
      return new R6(r);
    }), this.register(function(r) {
      return new T6(r);
    }), this.register(function(r) {
      return new M6(r);
    }), this.register(function(r) {
      return new w6(r);
    }), this.register(function(r) {
      return new D6(r);
    }), this.register(function(r) {
      return new C6(r);
    }), this.register(function(r) {
      return new O6(r);
    }), this.register(function(r) {
      return new P6(r);
    });
  }
  load(e, r, n, i) {
    const s = this;
    let a;
    this.resourcePath !== "" ? a = this.resourcePath : this.path !== "" ? a = this.path : a = LoaderUtils.extractUrlBase(e), this.manager.itemStart(e);
    const o = function(c) {
      i ? i(c) : console.error(c), s.manager.itemError(e), s.manager.itemEnd(e);
    }, l = new FileLoader(this.manager);
    l.setPath(this.path), l.setResponseType("arraybuffer"), l.setRequestHeader(this.requestHeader), l.setWithCredentials(this.withCredentials), l.load(
      e,
      function(c) {
        try {
          s.parse(
            c,
            a,
            function(u) {
              r(u), s.manager.itemEnd(e);
            },
            o
          );
        } catch (u) {
          o(u);
        }
      },
      n,
      o
    );
  }
  setDRACOLoader(e) {
    return this.dracoLoader = e, this;
  }
  setDDSLoader() {
    throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".');
  }
  setKTX2Loader(e) {
    return this.ktx2Loader = e, this;
  }
  setMeshoptDecoder(e) {
    return this.meshoptDecoder = e, this;
  }
  register(e) {
    return this.pluginCallbacks.indexOf(e) === -1 && this.pluginCallbacks.push(e), this;
  }
  unregister(e) {
    return this.pluginCallbacks.indexOf(e) !== -1 && this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e), 1), this;
  }
  parse(e, r, n, i) {
    let s;
    const a = {}, o = {};
    if (typeof e == "string")
      s = JSON.parse(e);
    else if (e instanceof ArrayBuffer)
      if (LoaderUtils.decodeText(new Uint8Array(e.slice(0, 4))) === l2) {
        try {
          a[Oe.KHR_BINARY_GLTF] = new Q6(e);
        } catch (u) {
          i && i(u);
          return;
        }
        s = JSON.parse(a[Oe.KHR_BINARY_GLTF].content);
      } else
        s = JSON.parse(LoaderUtils.decodeText(new Uint8Array(e)));
    else
      s = e;
    if (s.asset === void 0 || s.asset.version[0] < 2) {
      i && i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));
      return;
    }
    const l = new $6(s, {
      path: r || this.resourcePath || "",
      crossOrigin: this.crossOrigin,
      requestHeader: this.requestHeader,
      manager: this.manager,
      ktx2Loader: this.ktx2Loader,
      meshoptDecoder: this.meshoptDecoder
    });
    l.fileLoader.setRequestHeader(this.requestHeader);
    for (let c = 0; c < this.pluginCallbacks.length; c++) {
      const u = this.pluginCallbacks[c](l);
      o[u.name] = u, a[u.name] = true;
    }
    if (s.extensionsUsed)
      for (let c = 0; c < s.extensionsUsed.length; ++c) {
        const u = s.extensionsUsed[c], h = s.extensionsRequired || [];
        switch (u) {
          case Oe.KHR_MATERIALS_UNLIT:
            a[u] = new x6();
            break;
          case Oe.KHR_DRACO_MESH_COMPRESSION:
            a[u] = new N6(s, this.dracoLoader);
            break;
          case Oe.KHR_TEXTURE_TRANSFORM:
            a[u] = new U6();
            break;
          case Oe.KHR_MESH_QUANTIZATION:
            a[u] = new G6();
            break;
          default:
            h.indexOf(u) >= 0 && o[u] === void 0 && console.warn('THREE.GLTFLoader: Unknown extension "' + u + '".');
        }
      }
    l.setExtensions(a), l.setPlugins(o), l.parse(n, i);
  }
  parseAsync(e, r) {
    const n = this;
    return new Promise(function(i, s) {
      n.parse(e, r, i, s);
    });
  }
}
function I6() {
  let t = {};
  return {
    get: function(e) {
      return t[e];
    },
    add: function(e, r) {
      t[e] = r;
    },
    remove: function(e) {
      delete t[e];
    },
    removeAll: function() {
      t = {};
    }
  };
}
const Oe = {
  KHR_BINARY_GLTF: "KHR_binary_glTF",
  KHR_DRACO_MESH_COMPRESSION: "KHR_draco_mesh_compression",
  KHR_LIGHTS_PUNCTUAL: "KHR_lights_punctual",
  KHR_MATERIALS_CLEARCOAT: "KHR_materials_clearcoat",
  KHR_MATERIALS_IOR: "KHR_materials_ior",
  KHR_MATERIALS_SHEEN: "KHR_materials_sheen",
  KHR_MATERIALS_SPECULAR: "KHR_materials_specular",
  KHR_MATERIALS_TRANSMISSION: "KHR_materials_transmission",
  KHR_MATERIALS_IRIDESCENCE: "KHR_materials_iridescence",
  KHR_MATERIALS_ANISOTROPY: "KHR_materials_anisotropy",
  KHR_MATERIALS_UNLIT: "KHR_materials_unlit",
  KHR_MATERIALS_VOLUME: "KHR_materials_volume",
  KHR_TEXTURE_BASISU: "KHR_texture_basisu",
  KHR_TEXTURE_TRANSFORM: "KHR_texture_transform",
  KHR_MESH_QUANTIZATION: "KHR_mesh_quantization",
  KHR_MATERIALS_EMISSIVE_STRENGTH: "KHR_materials_emissive_strength",
  EXT_TEXTURE_WEBP: "EXT_texture_webp",
  EXT_TEXTURE_AVIF: "EXT_texture_avif",
  EXT_MESHOPT_COMPRESSION: "EXT_meshopt_compression",
  EXT_MESH_GPU_INSTANCING: "EXT_mesh_gpu_instancing"
};
class C6 {
  constructor(e) {
    this.parser = e, this.name = Oe.KHR_LIGHTS_PUNCTUAL, this.cache = { refs: {}, uses: {} };
  }
  _markDefs() {
    const e = this.parser, r = this.parser.json.nodes || [];
    for (let n = 0, i = r.length; n < i; n++) {
      const s = r[n];
      s.extensions && s.extensions[this.name] && s.extensions[this.name].light !== void 0 && e._addNodeRef(this.cache, s.extensions[this.name].light);
    }
  }
  _loadLight(e) {
    const r = this.parser, n = "light:" + e;
    let i = r.cache.get(n);
    if (i)
      return i;
    const s = r.json, l = ((s.extensions && s.extensions[this.name] || {}).lights || [])[e];
    let c;
    const u = new Color(16777215);
    l.color !== void 0 && u.fromArray(l.color);
    const h = l.range !== void 0 ? l.range : 0;
    switch (l.type) {
      case "directional":
        c = new DirectionalLight(u), c.target.position.set(0, 0, -1), c.add(c.target);
        break;
      case "point":
        c = new PointLight(u), c.distance = h;
        break;
      case "spot":
        c = new SpotLight(u), c.distance = h, l.spot = l.spot || {}, l.spot.innerConeAngle = l.spot.innerConeAngle !== void 0 ? l.spot.innerConeAngle : 0, l.spot.outerConeAngle = l.spot.outerConeAngle !== void 0 ? l.spot.outerConeAngle : Math.PI / 4, c.angle = l.spot.outerConeAngle, c.penumbra = 1 - l.spot.innerConeAngle / l.spot.outerConeAngle, c.target.position.set(0, 0, -1), c.add(c.target);
        break;
      default:
        throw new Error("THREE.GLTFLoader: Unexpected light type: " + l.type);
    }
    return c.position.set(0, 0, 0), c.decay = 2, Rn(c, l), l.intensity !== void 0 && (c.intensity = l.intensity), c.name = r.createUniqueName(l.name || "light_" + e), i = Promise.resolve(c), r.cache.add(n, i), i;
  }
  getDependency(e, r) {
    if (e === "light")
      return this._loadLight(r);
  }
  createNodeAttachment(e) {
    const r = this, n = this.parser, s = n.json.nodes[e], o = (s.extensions && s.extensions[this.name] || {}).light;
    return o === void 0 ? null : this._loadLight(o).then(function(l) {
      return n._getNodeRef(r.cache, o, l);
    });
  }
}
class x6 {
  constructor() {
    this.name = Oe.KHR_MATERIALS_UNLIT;
  }
  getMaterialType() {
    return MeshBasicMaterial;
  }
  extendParams(e, r, n) {
    const i = [];
    e.color = new Color(1, 1, 1), e.opacity = 1;
    const s = r.pbrMetallicRoughness;
    if (s) {
      if (Array.isArray(s.baseColorFactor)) {
        const a = s.baseColorFactor;
        e.color.fromArray(a), e.opacity = a[3];
      }
      s.baseColorTexture !== void 0 && i.push(n.assignTexture(e, "map", s.baseColorTexture, 3001));
    }
    return Promise.all(i);
  }
}
class T6 {
  constructor(e) {
    this.parser = e, this.name = Oe.KHR_MATERIALS_EMISSIVE_STRENGTH;
  }
  extendMaterialParams(e, r) {
    const i = this.parser.json.materials[e];
    if (!i.extensions || !i.extensions[this.name])
      return Promise.resolve();
    const s = i.extensions[this.name].emissiveStrength;
    return s !== void 0 && (r.emissiveIntensity = s), Promise.resolve();
  }
}
class S6 {
  constructor(e) {
    this.parser = e, this.name = Oe.KHR_MATERIALS_CLEARCOAT;
  }
  getMaterialType(e) {
    const n = this.parser.json.materials[e];
    return !n.extensions || !n.extensions[this.name] ? null : MeshPhysicalMaterial;
  }
  extendMaterialParams(e, r) {
    const n = this.parser, i = n.json.materials[e];
    if (!i.extensions || !i.extensions[this.name])
      return Promise.resolve();
    const s = [], a = i.extensions[this.name];
    if (a.clearcoatFactor !== void 0 && (r.clearcoat = a.clearcoatFactor), a.clearcoatTexture !== void 0 && s.push(n.assignTexture(r, "clearcoatMap", a.clearcoatTexture)), a.clearcoatRoughnessFactor !== void 0 && (r.clearcoatRoughness = a.clearcoatRoughnessFactor), a.clearcoatRoughnessTexture !== void 0 && s.push(n.assignTexture(r, "clearcoatRoughnessMap", a.clearcoatRoughnessTexture)), a.clearcoatNormalTexture !== void 0 && (s.push(n.assignTexture(r, "clearcoatNormalMap", a.clearcoatNormalTexture)), a.clearcoatNormalTexture.scale !== void 0)) {
      const o = a.clearcoatNormalTexture.scale;
      r.clearcoatNormalScale = new Vector2(o, o);
    }
    return Promise.all(s);
  }
}
class w6 {
  constructor(e) {
    this.parser = e, this.name = Oe.KHR_MATERIALS_IRIDESCENCE;
  }
  getMaterialType(e) {
    const n = this.parser.json.materials[e];
    return !n.extensions || !n.extensions[this.name] ? null : MeshPhysicalMaterial;
  }
  extendMaterialParams(e, r) {
    const n = this.parser, i = n.json.materials[e];
    if (!i.extensions || !i.extensions[this.name])
      return Promise.resolve();
    const s = [], a = i.extensions[this.name];
    return a.iridescenceFactor !== void 0 && (r.iridescence = a.iridescenceFactor), a.iridescenceTexture !== void 0 && s.push(n.assignTexture(r, "iridescenceMap", a.iridescenceTexture)), a.iridescenceIor !== void 0 && (r.iridescenceIOR = a.iridescenceIor), r.iridescenceThicknessRange === void 0 && (r.iridescenceThicknessRange = [100, 400]), a.iridescenceThicknessMinimum !== void 0 && (r.iridescenceThicknessRange[0] = a.iridescenceThicknessMinimum), a.iridescenceThicknessMaximum !== void 0 && (r.iridescenceThicknessRange[1] = a.iridescenceThicknessMaximum), a.iridescenceThicknessTexture !== void 0 && s.push(
      n.assignTexture(r, "iridescenceThicknessMap", a.iridescenceThicknessTexture)
    ), Promise.all(s);
  }
}
class B6 {
  constructor(e) {
    this.parser = e, this.name = Oe.KHR_MATERIALS_SHEEN;
  }
  getMaterialType(e) {
    const n = this.parser.json.materials[e];
    return !n.extensions || !n.extensions[this.name] ? null : MeshPhysicalMaterial;
  }
  extendMaterialParams(e, r) {
    const n = this.parser, i = n.json.materials[e];
    if (!i.extensions || !i.extensions[this.name])
      return Promise.resolve();
    const s = [];
    r.sheenColor = new Color(0, 0, 0), r.sheenRoughness = 0, r.sheen = 1;
    const a = i.extensions[this.name];
    return a.sheenColorFactor !== void 0 && r.sheenColor.fromArray(a.sheenColorFactor), a.sheenRoughnessFactor !== void 0 && (r.sheenRoughness = a.sheenRoughnessFactor), a.sheenColorTexture !== void 0 && s.push(n.assignTexture(r, "sheenColorMap", a.sheenColorTexture, 3001)), a.sheenRoughnessTexture !== void 0 && s.push(n.assignTexture(r, "sheenRoughnessMap", a.sheenRoughnessTexture)), Promise.all(s);
  }
}
class b6 {
  constructor(e) {
    this.parser = e, this.name = Oe.KHR_MATERIALS_TRANSMISSION;
  }
  getMaterialType(e) {
    const n = this.parser.json.materials[e];
    return !n.extensions || !n.extensions[this.name] ? null : MeshPhysicalMaterial;
  }
  extendMaterialParams(e, r) {
    const n = this.parser, i = n.json.materials[e];
    if (!i.extensions || !i.extensions[this.name])
      return Promise.resolve();
    const s = [], a = i.extensions[this.name];
    return a.transmissionFactor !== void 0 && (r.transmission = a.transmissionFactor), a.transmissionTexture !== void 0 && s.push(n.assignTexture(r, "transmissionMap", a.transmissionTexture)), Promise.all(s);
  }
}
class _6 {
  constructor(e) {
    this.parser = e, this.name = Oe.KHR_MATERIALS_VOLUME;
  }
  getMaterialType(e) {
    const n = this.parser.json.materials[e];
    return !n.extensions || !n.extensions[this.name] ? null : MeshPhysicalMaterial;
  }
  extendMaterialParams(e, r) {
    const n = this.parser, i = n.json.materials[e];
    if (!i.extensions || !i.extensions[this.name])
      return Promise.resolve();
    const s = [], a = i.extensions[this.name];
    r.thickness = a.thicknessFactor !== void 0 ? a.thicknessFactor : 0, a.thicknessTexture !== void 0 && s.push(n.assignTexture(r, "thicknessMap", a.thicknessTexture)), r.attenuationDistance = a.attenuationDistance || 1 / 0;
    const o = a.attenuationColor || [1, 1, 1];
    return r.attenuationColor = new Color(o[0], o[1], o[2]), Promise.all(s);
  }
}
class R6 {
  constructor(e) {
    this.parser = e, this.name = Oe.KHR_MATERIALS_IOR;
  }
  getMaterialType(e) {
    const n = this.parser.json.materials[e];
    return !n.extensions || !n.extensions[this.name] ? null : MeshPhysicalMaterial;
  }
  extendMaterialParams(e, r) {
    const i = this.parser.json.materials[e];
    if (!i.extensions || !i.extensions[this.name])
      return Promise.resolve();
    const s = i.extensions[this.name];
    return r.ior = s.ior !== void 0 ? s.ior : 1.5, Promise.resolve();
  }
}
class M6 {
  constructor(e) {
    this.parser = e, this.name = Oe.KHR_MATERIALS_SPECULAR;
  }
  getMaterialType(e) {
    const n = this.parser.json.materials[e];
    return !n.extensions || !n.extensions[this.name] ? null : MeshPhysicalMaterial;
  }
  extendMaterialParams(e, r) {
    const n = this.parser, i = n.json.materials[e];
    if (!i.extensions || !i.extensions[this.name])
      return Promise.resolve();
    const s = [], a = i.extensions[this.name];
    r.specularIntensity = a.specularFactor !== void 0 ? a.specularFactor : 1, a.specularTexture !== void 0 && s.push(n.assignTexture(r, "specularIntensityMap", a.specularTexture));
    const o = a.specularColorFactor || [1, 1, 1];
    return r.specularColor = new Color(o[0], o[1], o[2]), a.specularColorTexture !== void 0 && s.push(
      n.assignTexture(r, "specularColorMap", a.specularColorTexture, 3001)
      // sRGBEncoding
    ), Promise.all(s);
  }
}
class D6 {
  constructor(e) {
    this.parser = e, this.name = Oe.KHR_MATERIALS_ANISOTROPY;
  }
  getMaterialType(e) {
    const n = this.parser.json.materials[e];
    return !n.extensions || !n.extensions[this.name] ? null : MeshPhysicalMaterial;
  }
  extendMaterialParams(e, r) {
    const n = this.parser, i = n.json.materials[e];
    if (!i.extensions || !i.extensions[this.name])
      return Promise.resolve();
    const s = [], a = i.extensions[this.name];
    return a.anisotropyStrength !== void 0 && (r.anisotropy = a.anisotropyStrength), a.anisotropyRotation !== void 0 && (r.anisotropyRotation = a.anisotropyRotation), a.anisotropyTexture !== void 0 && s.push(n.assignTexture(r, "anisotropyMap", a.anisotropyTexture)), Promise.all(s);
  }
}
class k6 {
  constructor(e) {
    this.parser = e, this.name = Oe.KHR_TEXTURE_BASISU;
  }
  loadTexture(e) {
    const r = this.parser, n = r.json, i = n.textures[e];
    if (!i.extensions || !i.extensions[this.name])
      return null;
    const s = i.extensions[this.name], a = r.options.ktx2Loader;
    if (!a) {
      if (n.extensionsRequired && n.extensionsRequired.indexOf(this.name) >= 0)
        throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");
      return null;
    }
    return r.loadTextureImage(e, s.source, a);
  }
}
class F6 {
  constructor(e) {
    this.parser = e, this.name = Oe.EXT_TEXTURE_WEBP, this.isSupported = null;
  }
  loadTexture(e) {
    const r = this.name, n = this.parser, i = n.json, s = i.textures[e];
    if (!s.extensions || !s.extensions[r])
      return null;
    const a = s.extensions[r], o = i.images[a.source];
    let l = n.textureLoader;
    if (o.uri) {
      const c = n.options.manager.getHandler(o.uri);
      c !== null && (l = c);
    }
    return this.detectSupport().then(function(c) {
      if (c)
        return n.loadTextureImage(e, a.source, l);
      if (i.extensionsRequired && i.extensionsRequired.indexOf(r) >= 0)
        throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");
      return n.loadTexture(e);
    });
  }
  detectSupport() {
    return this.isSupported || (this.isSupported = new Promise(function(e) {
      const r = new Image();
      r.src = "data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA", r.onload = r.onerror = function() {
        e(r.height === 1);
      };
    })), this.isSupported;
  }
}
class L6 {
  constructor(e) {
    this.parser = e, this.name = Oe.EXT_TEXTURE_AVIF, this.isSupported = null;
  }
  loadTexture(e) {
    const r = this.name, n = this.parser, i = n.json, s = i.textures[e];
    if (!s.extensions || !s.extensions[r])
      return null;
    const a = s.extensions[r], o = i.images[a.source];
    let l = n.textureLoader;
    if (o.uri) {
      const c = n.options.manager.getHandler(o.uri);
      c !== null && (l = c);
    }
    return this.detectSupport().then(function(c) {
      if (c)
        return n.loadTextureImage(e, a.source, l);
      if (i.extensionsRequired && i.extensionsRequired.indexOf(r) >= 0)
        throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");
      return n.loadTexture(e);
    });
  }
  detectSupport() {
    return this.isSupported || (this.isSupported = new Promise(function(e) {
      const r = new Image();
      r.src = "data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=", r.onload = r.onerror = function() {
        e(r.height === 1);
      };
    })), this.isSupported;
  }
}
class O6 {
  constructor(e) {
    this.name = Oe.EXT_MESHOPT_COMPRESSION, this.parser = e;
  }
  loadBufferView(e) {
    const r = this.parser.json, n = r.bufferViews[e];
    if (n.extensions && n.extensions[this.name]) {
      const i = n.extensions[this.name], s = this.parser.getDependency("buffer", i.buffer), a = this.parser.options.meshoptDecoder;
      if (!a || !a.supported) {
        if (r.extensionsRequired && r.extensionsRequired.indexOf(this.name) >= 0)
          throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");
        return null;
      }
      return s.then(function(o) {
        const l = i.byteOffset || 0, c = i.byteLength || 0, u = i.count, h = i.byteStride, A = new Uint8Array(o, l, c);
        return a.decodeGltfBufferAsync ? a.decodeGltfBufferAsync(u, h, A, i.mode, i.filter).then(function(f) {
          return f.buffer;
        }) : a.ready.then(function() {
          const f = new ArrayBuffer(u * h);
          return a.decodeGltfBuffer(
            new Uint8Array(f),
            u,
            h,
            A,
            i.mode,
            i.filter
          ), f;
        });
      });
    } else
      return null;
  }
}
class P6 {
  constructor(e) {
    this.name = Oe.EXT_MESH_GPU_INSTANCING, this.parser = e;
  }
  createNodeMesh(e) {
    const r = this.parser.json, n = r.nodes[e];
    if (!n.extensions || !n.extensions[this.name] || n.mesh === void 0)
      return null;
    const i = r.meshes[n.mesh];
    for (const c of i.primitives)
      if (c.mode !== rr.TRIANGLES && c.mode !== rr.TRIANGLE_STRIP && c.mode !== rr.TRIANGLE_FAN && c.mode !== void 0)
        return null;
    const a = n.extensions[this.name].attributes, o = [], l = {};
    for (const c in a)
      o.push(
        this.parser.getDependency("accessor", a[c]).then((u) => (l[c] = u, l[c]))
      );
    return o.length < 1 ? null : (o.push(this.parser.createNodeMesh(e)), Promise.all(o).then((c) => {
      const u = c.pop(), h = u.isGroup ? u.children : [u], A = c[0].count, f = [];
      for (const d of h) {
        const v = new Matrix4(), m = new Vector3(), E = new Quaternion(), y = new Vector3(1, 1, 1), p = new InstancedMesh(d.geometry, d.material, A);
        for (let g = 0; g < A; g++)
          l.TRANSLATION && m.fromBufferAttribute(l.TRANSLATION, g), l.ROTATION && E.fromBufferAttribute(l.ROTATION, g), l.SCALE && y.fromBufferAttribute(l.SCALE, g), p.setMatrixAt(g, v.compose(m, E, y));
        for (const g in l)
          g !== "TRANSLATION" && g !== "ROTATION" && g !== "SCALE" && d.geometry.setAttribute(g, l[g]);
        Object3D.prototype.copy.call(p, d), this.parser.assignFinalMaterial(p), f.push(p);
      }
      return u.isGroup ? (u.clear(), u.add(...f), u) : f[0];
    }));
  }
}
const l2 = "glTF", Wi = 12, $3 = { JSON: 1313821514, BIN: 5130562 };
class Q6 {
  constructor(e) {
    this.name = Oe.KHR_BINARY_GLTF, this.content = null, this.body = null;
    const r = new DataView(e, 0, Wi);
    if (this.header = {
      magic: LoaderUtils.decodeText(new Uint8Array(e.slice(0, 4))),
      version: r.getUint32(4, true),
      length: r.getUint32(8, true)
    }, this.header.magic !== l2)
      throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");
    if (this.header.version < 2)
      throw new Error("THREE.GLTFLoader: Legacy binary file detected.");
    const n = this.header.length - Wi, i = new DataView(e, Wi);
    let s = 0;
    for (; s < n; ) {
      const a = i.getUint32(s, true);
      s += 4;
      const o = i.getUint32(s, true);
      if (s += 4, o === $3.JSON) {
        const l = new Uint8Array(e, Wi + s, a);
        this.content = LoaderUtils.decodeText(l);
      } else if (o === $3.BIN) {
        const l = Wi + s;
        this.body = e.slice(l, l + a);
      }
      s += a;
    }
    if (this.content === null)
      throw new Error("THREE.GLTFLoader: JSON content not found.");
  }
}
class N6 {
  constructor(e, r) {
    if (!r)
      throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");
    this.name = Oe.KHR_DRACO_MESH_COMPRESSION, this.json = e, this.dracoLoader = r, this.dracoLoader.preload();
  }
  decodePrimitive(e, r) {
    const n = this.json, i = this.dracoLoader, s = e.extensions[this.name].bufferView, a = e.extensions[this.name].attributes, o = {}, l = {}, c = {};
    for (const u in a) {
      const h = ql[u] || u.toLowerCase();
      o[h] = a[u];
    }
    for (const u in e.attributes) {
      const h = ql[u] || u.toLowerCase();
      if (a[u] !== void 0) {
        const A = n.accessors[e.attributes[u]], f = _i[A.componentType];
        c[h] = f.name, l[h] = A.normalized === true;
      }
    }
    return r.getDependency("bufferView", s).then(function(u) {
      return new Promise(function(h) {
        i.decodeDracoFile(
          u,
          function(A) {
            for (const f in A.attributes) {
              const d = A.attributes[f], v = l[f];
              v !== void 0 && (d.normalized = v);
            }
            h(A);
          },
          o,
          c
        );
      });
    });
  }
}
class U6 {
  constructor() {
    this.name = Oe.KHR_TEXTURE_TRANSFORM;
  }
  extendTexture(e, r) {
    return (r.texCoord === void 0 || r.texCoord === e.channel) && r.offset === void 0 && r.rotation === void 0 && r.scale === void 0 || (e = e.clone(), r.texCoord !== void 0 && (e.channel = r.texCoord), r.offset !== void 0 && e.offset.fromArray(r.offset), r.rotation !== void 0 && (e.rotation = r.rotation), r.scale !== void 0 && e.repeat.fromArray(r.scale), e.needsUpdate = true), e;
  }
}
class G6 {
  constructor() {
    this.name = Oe.KHR_MESH_QUANTIZATION;
  }
}
class c2 extends Interpolant {
  constructor(e, r, n, i) {
    super(e, r, n, i);
  }
  copySampleValue_(e) {
    const r = this.resultBuffer, n = this.sampleValues, i = this.valueSize, s = e * i * 3 + i;
    for (let a = 0; a !== i; a++)
      r[a] = n[s + a];
    return r;
  }
  interpolate_(e, r, n, i) {
    const s = this.resultBuffer, a = this.sampleValues, o = this.valueSize, l = o * 2, c = o * 3, u = i - r, h = (n - r) / u, A = h * h, f = A * h, d = e * c, v = d - c, m = -2 * f + 3 * A, E = f - A, y = 1 - m, p = E - A + h;
    for (let g = 0; g !== o; g++) {
      const C = a[v + g + o], S = a[v + g + l] * u, x = a[d + g + o], T = a[d + g] * u;
      s[g] = y * C + p * S + m * x + E * T;
    }
    return s;
  }
}
const H6 = /* @__PURE__ */ new Quaternion();
class V6 extends c2 {
  interpolate_(e, r, n, i) {
    const s = super.interpolate_(e, r, n, i);
    return H6.fromArray(s).normalize().toArray(s), s;
  }
}
const rr = {
  FLOAT: 5126,
  //FLOAT_MAT2: 35674,
  FLOAT_MAT3: 35675,
  FLOAT_MAT4: 35676,
  FLOAT_VEC2: 35664,
  FLOAT_VEC3: 35665,
  FLOAT_VEC4: 35666,
  LINEAR: 9729,
  REPEAT: 10497,
  SAMPLER_2D: 35678,
  POINTS: 0,
  LINES: 1,
  LINE_LOOP: 2,
  LINE_STRIP: 3,
  TRIANGLES: 4,
  TRIANGLE_STRIP: 5,
  TRIANGLE_FAN: 6,
  UNSIGNED_BYTE: 5121,
  UNSIGNED_SHORT: 5123
}, _i = {
  5120: Int8Array,
  5121: Uint8Array,
  5122: Int16Array,
  5123: Uint16Array,
  5125: Uint32Array,
  5126: Float32Array
}, Z3 = {
  9728: NearestFilter,
  9729: LinearFilter,
  9984: NearestMipmapNearestFilter,
  9985: LinearMipmapNearestFilter,
  9986: NearestMipmapLinearFilter,
  9987: LinearMipmapLinearFilter
}, J3 = {
  33071: ClampToEdgeWrapping,
  33648: MirroredRepeatWrapping,
  10497: RepeatWrapping
}, qo = {
  SCALAR: 1,
  VEC2: 2,
  VEC3: 3,
  VEC4: 4,
  MAT2: 4,
  MAT3: 9,
  MAT4: 16
}, ql = {
  POSITION: "position",
  NORMAL: "normal",
  TANGENT: "tangent",
  // uv => uv1, 4 uv channels
  // https://github.com/mrdoob/three.js/pull/25943
  // https://github.com/mrdoob/three.js/pull/25788
  ...REVISION.replace(/\D+/g, "") >= 152 ? {
    TEXCOORD_0: "uv",
    TEXCOORD_1: "uv1",
    TEXCOORD_2: "uv2",
    TEXCOORD_3: "uv3"
  } : {
    TEXCOORD_0: "uv",
    TEXCOORD_1: "uv2"
  },
  COLOR_0: "color",
  WEIGHTS_0: "skinWeight",
  JOINTS_0: "skinIndex"
}, Tn = {
  scale: "scale",
  translation: "position",
  rotation: "quaternion",
  weights: "morphTargetInfluences"
}, z6 = {
  CUBICSPLINE: void 0,
  // We use a custom interpolant (GLTFCubicSplineInterpolation) for CUBICSPLINE tracks. Each
  // keyframe track will be initialized with a default interpolation type, then modified.
  LINEAR: InterpolateLinear,
  STEP: InterpolateDiscrete
}, Ko = {
  OPAQUE: "OPAQUE",
  MASK: "MASK",
  BLEND: "BLEND"
};
function Y6(t) {
  return t.DefaultMaterial === void 0 && (t.DefaultMaterial = new MeshStandardMaterial({
    color: 16777215,
    emissive: 0,
    metalness: 1,
    roughness: 1,
    transparent: false,
    depthTest: true,
    side: FrontSide
  })), t.DefaultMaterial;
}
function Kn(t, e, r) {
  for (const n in r.extensions)
    t[n] === void 0 && (e.userData.gltfExtensions = e.userData.gltfExtensions || {}, e.userData.gltfExtensions[n] = r.extensions[n]);
}
function Rn(t, e) {
  e.extras !== void 0 && (typeof e.extras == "object" ? Object.assign(t.userData, e.extras) : console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, " + e.extras));
}
function W6(t, e, r) {
  let n = false, i = false, s = false;
  for (let c = 0, u = e.length; c < u; c++) {
    const h = e[c];
    if (h.POSITION !== void 0 && (n = true), h.NORMAL !== void 0 && (i = true), h.COLOR_0 !== void 0 && (s = true), n && i && s)
      break;
  }
  if (!n && !i && !s)
    return Promise.resolve(t);
  const a = [], o = [], l = [];
  for (let c = 0, u = e.length; c < u; c++) {
    const h = e[c];
    if (n) {
      const A = h.POSITION !== void 0 ? r.getDependency("accessor", h.POSITION) : t.attributes.position;
      a.push(A);
    }
    if (i) {
      const A = h.NORMAL !== void 0 ? r.getDependency("accessor", h.NORMAL) : t.attributes.normal;
      o.push(A);
    }
    if (s) {
      const A = h.COLOR_0 !== void 0 ? r.getDependency("accessor", h.COLOR_0) : t.attributes.color;
      l.push(A);
    }
  }
  return Promise.all([
    Promise.all(a),
    Promise.all(o),
    Promise.all(l)
  ]).then(function(c) {
    const u = c[0], h = c[1], A = c[2];
    return n && (t.morphAttributes.position = u), i && (t.morphAttributes.normal = h), s && (t.morphAttributes.color = A), t.morphTargetsRelative = true, t;
  });
}
function j6(t, e) {
  if (t.updateMorphTargets(), e.weights !== void 0)
    for (let r = 0, n = e.weights.length; r < n; r++)
      t.morphTargetInfluences[r] = e.weights[r];
  if (e.extras && Array.isArray(e.extras.targetNames)) {
    const r = e.extras.targetNames;
    if (t.morphTargetInfluences.length === r.length) {
      t.morphTargetDictionary = {};
      for (let n = 0, i = r.length; n < i; n++)
        t.morphTargetDictionary[r[n]] = n;
    } else
      console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.");
  }
}
function q6(t) {
  let e;
  const r = t.extensions && t.extensions[Oe.KHR_DRACO_MESH_COMPRESSION];
  if (r ? e = "draco:" + r.bufferView + ":" + r.indices + ":" + Xo(r.attributes) : e = t.indices + ":" + Xo(t.attributes) + ":" + t.mode, t.targets !== void 0)
    for (let n = 0, i = t.targets.length; n < i; n++)
      e += ":" + Xo(t.targets[n]);
  return e;
}
function Xo(t) {
  let e = "";
  const r = Object.keys(t).sort();
  for (let n = 0, i = r.length; n < i; n++)
    e += r[n] + ":" + t[r[n]] + ";";
  return e;
}
function Kl(t) {
  switch (t) {
    case Int8Array:
      return 1 / 127;
    case Uint8Array:
      return 1 / 255;
    case Int16Array:
      return 1 / 32767;
    case Uint16Array:
      return 1 / 65535;
    default:
      throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.");
  }
}
function K6(t) {
  return t.search(/\.jpe?g($|\?)/i) > 0 || t.search(/^data\:image\/jpeg/) === 0 ? "image/jpeg" : t.search(/\.webp($|\?)/i) > 0 || t.search(/^data\:image\/webp/) === 0 ? "image/webp" : "image/png";
}
const X6 = /* @__PURE__ */ new Matrix4();
class $6 {
  constructor(e = {}, r = {}) {
    this.json = e, this.extensions = {}, this.plugins = {}, this.options = r, this.cache = new I6(), this.associations = /* @__PURE__ */ new Map(), this.primitiveCache = {}, this.nodeCache = {}, this.meshCache = { refs: {}, uses: {} }, this.cameraCache = { refs: {}, uses: {} }, this.lightCache = { refs: {}, uses: {} }, this.sourceCache = {}, this.textureCache = {}, this.nodeNamesUsed = {};
    let n = false, i = false, s = -1;
    typeof navigator < "u" && typeof navigator.userAgent < "u" && (n = /^((?!chrome|android).)*safari/i.test(navigator.userAgent) === true, i = navigator.userAgent.indexOf("Firefox") > -1, s = i ? navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1] : -1), typeof createImageBitmap > "u" || n || i && s < 98 ? this.textureLoader = new TextureLoader(this.options.manager) : this.textureLoader = new ImageBitmapLoader(this.options.manager), this.textureLoader.setCrossOrigin(this.options.crossOrigin), this.textureLoader.setRequestHeader(this.options.requestHeader), this.fileLoader = new FileLoader(this.options.manager), this.fileLoader.setResponseType("arraybuffer"), this.options.crossOrigin === "use-credentials" && this.fileLoader.setWithCredentials(true);
  }
  setExtensions(e) {
    this.extensions = e;
  }
  setPlugins(e) {
    this.plugins = e;
  }
  parse(e, r) {
    const n = this, i = this.json, s = this.extensions;
    this.cache.removeAll(), this.nodeCache = {}, this._invokeAll(function(a) {
      return a._markDefs && a._markDefs();
    }), Promise.all(
      this._invokeAll(function(a) {
        return a.beforeRoot && a.beforeRoot();
      })
    ).then(function() {
      return Promise.all([
        n.getDependencies("scene"),
        n.getDependencies("animation"),
        n.getDependencies("camera")
      ]);
    }).then(function(a) {
      const o = {
        scene: a[0][i.scene || 0],
        scenes: a[0],
        animations: a[1],
        cameras: a[2],
        asset: i.asset,
        parser: n,
        userData: {}
      };
      Kn(s, o, i), Rn(o, i), Promise.all(
        n._invokeAll(function(l) {
          return l.afterRoot && l.afterRoot(o);
        })
      ).then(function() {
        e(o);
      });
    }).catch(r);
  }
  /**
   * Marks the special nodes/meshes in json for efficient parse.
   */
  _markDefs() {
    const e = this.json.nodes || [], r = this.json.skins || [], n = this.json.meshes || [];
    for (let i = 0, s = r.length; i < s; i++) {
      const a = r[i].joints;
      for (let o = 0, l = a.length; o < l; o++)
        e[a[o]].isBone = true;
    }
    for (let i = 0, s = e.length; i < s; i++) {
      const a = e[i];
      a.mesh !== void 0 && (this._addNodeRef(this.meshCache, a.mesh), a.skin !== void 0 && (n[a.mesh].isSkinnedMesh = true)), a.camera !== void 0 && this._addNodeRef(this.cameraCache, a.camera);
    }
  }
  /**
   * Counts references to shared node / Object3D resources. These resources
   * can be reused, or "instantiated", at multiple nodes in the scene
   * hierarchy. Mesh, Camera, and Light instances are instantiated and must
   * be marked. Non-scenegraph resources (like Materials, Geometries, and
   * Textures) can be reused directly and are not marked here.
   *
   * Example: CesiumMilkTruck sample model reuses "Wheel" meshes.
   */
  _addNodeRef(e, r) {
    r !== void 0 && (e.refs[r] === void 0 && (e.refs[r] = e.uses[r] = 0), e.refs[r]++);
  }
  /** Returns a reference to a shared resource, cloning it if necessary. */
  _getNodeRef(e, r, n) {
    if (e.refs[r] <= 1)
      return n;
    const i = n.clone(), s = (a, o) => {
      const l = this.associations.get(a);
      l != null && this.associations.set(o, l);
      for (const [c, u] of a.children.entries())
        s(u, o.children[c]);
    };
    return s(n, i), i.name += "_instance_" + e.uses[r]++, i;
  }
  _invokeOne(e) {
    const r = Object.values(this.plugins);
    r.push(this);
    for (let n = 0; n < r.length; n++) {
      const i = e(r[n]);
      if (i)
        return i;
    }
    return null;
  }
  _invokeAll(e) {
    const r = Object.values(this.plugins);
    r.unshift(this);
    const n = [];
    for (let i = 0; i < r.length; i++) {
      const s = e(r[i]);
      s && n.push(s);
    }
    return n;
  }
  /**
   * Requests the specified dependency asynchronously, with caching.
   * @param {string} type
   * @param {number} index
   * @return {Promise<Object3D|Material|THREE.Texture|AnimationClip|ArrayBuffer|Object>}
   */
  getDependency(e, r) {
    const n = e + ":" + r;
    let i = this.cache.get(n);
    if (!i) {
      switch (e) {
        case "scene":
          i = this.loadScene(r);
          break;
        case "node":
          i = this._invokeOne(function(s) {
            return s.loadNode && s.loadNode(r);
          });
          break;
        case "mesh":
          i = this._invokeOne(function(s) {
            return s.loadMesh && s.loadMesh(r);
          });
          break;
        case "accessor":
          i = this.loadAccessor(r);
          break;
        case "bufferView":
          i = this._invokeOne(function(s) {
            return s.loadBufferView && s.loadBufferView(r);
          });
          break;
        case "buffer":
          i = this.loadBuffer(r);
          break;
        case "material":
          i = this._invokeOne(function(s) {
            return s.loadMaterial && s.loadMaterial(r);
          });
          break;
        case "texture":
          i = this._invokeOne(function(s) {
            return s.loadTexture && s.loadTexture(r);
          });
          break;
        case "skin":
          i = this.loadSkin(r);
          break;
        case "animation":
          i = this._invokeOne(function(s) {
            return s.loadAnimation && s.loadAnimation(r);
          });
          break;
        case "camera":
          i = this.loadCamera(r);
          break;
        default:
          if (i = this._invokeOne(function(s) {
            return s != this && s.getDependency && s.getDependency(e, r);
          }), !i)
            throw new Error("Unknown type: " + e);
          break;
      }
      this.cache.add(n, i);
    }
    return i;
  }
  /**
   * Requests all dependencies of the specified type asynchronously, with caching.
   * @param {string} type
   * @return {Promise<Array<Object>>}
   */
  getDependencies(e) {
    let r = this.cache.get(e);
    if (!r) {
      const n = this, i = this.json[e + (e === "mesh" ? "es" : "s")] || [];
      r = Promise.all(
        i.map(function(s, a) {
          return n.getDependency(e, a);
        })
      ), this.cache.add(e, r);
    }
    return r;
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views
   * @param {number} bufferIndex
   * @return {Promise<ArrayBuffer>}
   */
  loadBuffer(e) {
    const r = this.json.buffers[e], n = this.fileLoader;
    if (r.type && r.type !== "arraybuffer")
      throw new Error("THREE.GLTFLoader: " + r.type + " buffer type is not supported.");
    if (r.uri === void 0 && e === 0)
      return Promise.resolve(this.extensions[Oe.KHR_BINARY_GLTF].body);
    const i = this.options;
    return new Promise(function(s, a) {
      n.load(LoaderUtils.resolveURL(r.uri, i.path), s, void 0, function() {
        a(new Error('THREE.GLTFLoader: Failed to load buffer "' + r.uri + '".'));
      });
    });
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views
   * @param {number} bufferViewIndex
   * @return {Promise<ArrayBuffer>}
   */
  loadBufferView(e) {
    const r = this.json.bufferViews[e];
    return this.getDependency("buffer", r.buffer).then(function(n) {
      const i = r.byteLength || 0, s = r.byteOffset || 0;
      return n.slice(s, s + i);
    });
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#accessors
   * @param {number} accessorIndex
   * @return {Promise<BufferAttribute|InterleavedBufferAttribute>}
   */
  loadAccessor(e) {
    const r = this, n = this.json, i = this.json.accessors[e];
    if (i.bufferView === void 0 && i.sparse === void 0) {
      const a = qo[i.type], o = _i[i.componentType], l = i.normalized === true, c = new o(i.count * a);
      return Promise.resolve(new BufferAttribute(c, a, l));
    }
    const s = [];
    return i.bufferView !== void 0 ? s.push(this.getDependency("bufferView", i.bufferView)) : s.push(null), i.sparse !== void 0 && (s.push(this.getDependency("bufferView", i.sparse.indices.bufferView)), s.push(this.getDependency("bufferView", i.sparse.values.bufferView))), Promise.all(s).then(function(a) {
      const o = a[0], l = qo[i.type], c = _i[i.componentType], u = c.BYTES_PER_ELEMENT, h = u * l, A = i.byteOffset || 0, f = i.bufferView !== void 0 ? n.bufferViews[i.bufferView].byteStride : void 0, d = i.normalized === true;
      let v, m;
      if (f && f !== h) {
        const E = Math.floor(A / f), y = "InterleavedBuffer:" + i.bufferView + ":" + i.componentType + ":" + E + ":" + i.count;
        let p = r.cache.get(y);
        p || (v = new c(o, E * f, i.count * f / u), p = new InterleavedBuffer(v, f / u), r.cache.add(y, p)), m = new InterleavedBufferAttribute(
          p,
          l,
          A % f / u,
          d
        );
      } else
        o === null ? v = new c(i.count * l) : v = new c(o, A, i.count * l), m = new BufferAttribute(v, l, d);
      if (i.sparse !== void 0) {
        const E = qo.SCALAR, y = _i[i.sparse.indices.componentType], p = i.sparse.indices.byteOffset || 0, g = i.sparse.values.byteOffset || 0, C = new y(
          a[1],
          p,
          i.sparse.count * E
        ), S = new c(a[2], g, i.sparse.count * l);
        o !== null && (m = new BufferAttribute(
          m.array.slice(),
          m.itemSize,
          m.normalized
        ));
        for (let x = 0, T = C.length; x < T; x++) {
          const B = C[x];
          if (m.setX(B, S[x * l]), l >= 2 && m.setY(B, S[x * l + 1]), l >= 3 && m.setZ(B, S[x * l + 2]), l >= 4 && m.setW(B, S[x * l + 3]), l >= 5)
            throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.");
        }
      }
      return m;
    });
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#textures
   * @param {number} textureIndex
   * @return {Promise<THREE.Texture|null>}
   */
  loadTexture(e) {
    const r = this.json, n = this.options, s = r.textures[e].source, a = r.images[s];
    let o = this.textureLoader;
    if (a.uri) {
      const l = n.manager.getHandler(a.uri);
      l !== null && (o = l);
    }
    return this.loadTextureImage(e, s, o);
  }
  loadTextureImage(e, r, n) {
    const i = this, s = this.json, a = s.textures[e], o = s.images[r], l = (o.uri || o.bufferView) + ":" + a.sampler;
    if (this.textureCache[l])
      return this.textureCache[l];
    const c = this.loadImageSource(r, n).then(function(u) {
      u.flipY = false, u.name = a.name || o.name || "", u.name === "" && typeof o.uri == "string" && o.uri.startsWith("data:image/") === false && (u.name = o.uri);
      const A = (s.samplers || {})[a.sampler] || {};
      return u.magFilter = Z3[A.magFilter] || LinearFilter, u.minFilter = Z3[A.minFilter] || LinearMipmapLinearFilter, u.wrapS = J3[A.wrapS] || RepeatWrapping, u.wrapT = J3[A.wrapT] || RepeatWrapping, i.associations.set(u, { textures: e }), u;
    }).catch(function() {
      return null;
    });
    return this.textureCache[l] = c, c;
  }
  loadImageSource(e, r) {
    const n = this, i = this.json, s = this.options;
    if (this.sourceCache[e] !== void 0)
      return this.sourceCache[e].then((h) => h.clone());
    const a = i.images[e], o = self.URL || self.webkitURL;
    let l = a.uri || "", c = false;
    if (a.bufferView !== void 0)
      l = n.getDependency("bufferView", a.bufferView).then(function(h) {
        c = true;
        const A = new Blob([h], { type: a.mimeType });
        return l = o.createObjectURL(A), l;
      });
    else if (a.uri === void 0)
      throw new Error("THREE.GLTFLoader: Image " + e + " is missing URI and bufferView");
    const u = Promise.resolve(l).then(function(h) {
      return new Promise(function(A, f) {
        let d = A;
        r.isImageBitmapLoader === true && (d = function(v) {
          const m = new Texture(v);
          m.needsUpdate = true, A(m);
        }), r.load(LoaderUtils.resolveURL(h, s.path), d, void 0, f);
      });
    }).then(function(h) {
      return c === true && o.revokeObjectURL(l), h.userData.mimeType = a.mimeType || K6(a.uri), h;
    }).catch(function(h) {
      throw console.error("THREE.GLTFLoader: Couldn't load texture", l), h;
    });
    return this.sourceCache[e] = u, u;
  }
  /**
   * Asynchronously assigns a texture to the given material parameters.
   * @param {Object} materialParams
   * @param {string} mapName
   * @param {Object} mapDef
   * @return {Promise<Texture>}
   */
  assignTexture(e, r, n, i) {
    const s = this;
    return this.getDependency("texture", n.index).then(function(a) {
      if (!a)
        return null;
      if (n.texCoord !== void 0 && n.texCoord > 0 && (a = a.clone(), a.channel = n.texCoord), s.extensions[Oe.KHR_TEXTURE_TRANSFORM]) {
        const o = n.extensions !== void 0 ? n.extensions[Oe.KHR_TEXTURE_TRANSFORM] : void 0;
        if (o) {
          const l = s.associations.get(a);
          a = s.extensions[Oe.KHR_TEXTURE_TRANSFORM].extendTexture(a, o), s.associations.set(a, l);
        }
      }
      return i !== void 0 && ("colorSpace" in a ? a.colorSpace = i === 3001 ? "srgb" : "srgb-linear" : a.encoding = i), e[r] = a, a;
    });
  }
  /**
   * Assigns final material to a Mesh, Line, or Points instance. The instance
   * already has a material (generated from the glTF material options alone)
   * but reuse of the same glTF material may require multiple threejs materials
   * to accommodate different primitive types, defines, etc. New materials will
   * be created if necessary, and reused from a cache.
   * @param  {Object3D} mesh Mesh, Line, or Points instance.
   */
  assignFinalMaterial(e) {
    const r = e.geometry;
    let n = e.material;
    const i = r.attributes.tangent === void 0, s = r.attributes.color !== void 0, a = r.attributes.normal === void 0;
    if (e.isPoints) {
      const o = "PointsMaterial:" + n.uuid;
      let l = this.cache.get(o);
      l || (l = new PointsMaterial(), Material.prototype.copy.call(l, n), l.color.copy(n.color), l.map = n.map, l.sizeAttenuation = false, this.cache.add(o, l)), n = l;
    } else if (e.isLine) {
      const o = "LineBasicMaterial:" + n.uuid;
      let l = this.cache.get(o);
      l || (l = new LineBasicMaterial(), Material.prototype.copy.call(l, n), l.color.copy(n.color), l.map = n.map, this.cache.add(o, l)), n = l;
    }
    if (i || s || a) {
      let o = "ClonedMaterial:" + n.uuid + ":";
      i && (o += "derivative-tangents:"), s && (o += "vertex-colors:"), a && (o += "flat-shading:");
      let l = this.cache.get(o);
      l || (l = n.clone(), s && (l.vertexColors = true), a && (l.flatShading = true), i && (l.normalScale && (l.normalScale.y *= -1), l.clearcoatNormalScale && (l.clearcoatNormalScale.y *= -1)), this.cache.add(o, l), this.associations.set(l, this.associations.get(n))), n = l;
    }
    e.material = n;
  }
  getMaterialType() {
    return MeshStandardMaterial;
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#materials
   * @param {number} materialIndex
   * @return {Promise<Material>}
   */
  loadMaterial(e) {
    const r = this, n = this.json, i = this.extensions, s = n.materials[e];
    let a;
    const o = {}, l = s.extensions || {}, c = [];
    if (l[Oe.KHR_MATERIALS_UNLIT]) {
      const h = i[Oe.KHR_MATERIALS_UNLIT];
      a = h.getMaterialType(), c.push(h.extendParams(o, s, r));
    } else {
      const h = s.pbrMetallicRoughness || {};
      if (o.color = new Color(1, 1, 1), o.opacity = 1, Array.isArray(h.baseColorFactor)) {
        const A = h.baseColorFactor;
        o.color.fromArray(A), o.opacity = A[3];
      }
      h.baseColorTexture !== void 0 && c.push(r.assignTexture(o, "map", h.baseColorTexture, 3001)), o.metalness = h.metallicFactor !== void 0 ? h.metallicFactor : 1, o.roughness = h.roughnessFactor !== void 0 ? h.roughnessFactor : 1, h.metallicRoughnessTexture !== void 0 && (c.push(r.assignTexture(o, "metalnessMap", h.metallicRoughnessTexture)), c.push(r.assignTexture(o, "roughnessMap", h.metallicRoughnessTexture))), a = this._invokeOne(function(A) {
        return A.getMaterialType && A.getMaterialType(e);
      }), c.push(
        Promise.all(
          this._invokeAll(function(A) {
            return A.extendMaterialParams && A.extendMaterialParams(e, o);
          })
        )
      );
    }
    s.doubleSided === true && (o.side = DoubleSide);
    const u = s.alphaMode || Ko.OPAQUE;
    if (u === Ko.BLEND ? (o.transparent = true, o.depthWrite = false) : (o.transparent = false, u === Ko.MASK && (o.alphaTest = s.alphaCutoff !== void 0 ? s.alphaCutoff : 0.5)), s.normalTexture !== void 0 && a !== MeshBasicMaterial && (c.push(r.assignTexture(o, "normalMap", s.normalTexture)), o.normalScale = new Vector2(1, 1), s.normalTexture.scale !== void 0)) {
      const h = s.normalTexture.scale;
      o.normalScale.set(h, h);
    }
    return s.occlusionTexture !== void 0 && a !== MeshBasicMaterial && (c.push(r.assignTexture(o, "aoMap", s.occlusionTexture)), s.occlusionTexture.strength !== void 0 && (o.aoMapIntensity = s.occlusionTexture.strength)), s.emissiveFactor !== void 0 && a !== MeshBasicMaterial && (o.emissive = new Color().fromArray(s.emissiveFactor)), s.emissiveTexture !== void 0 && a !== MeshBasicMaterial && c.push(r.assignTexture(o, "emissiveMap", s.emissiveTexture, 3001)), Promise.all(c).then(function() {
      const h = new a(o);
      return s.name && (h.name = s.name), Rn(h, s), r.associations.set(h, { materials: e }), s.extensions && Kn(i, h, s), h;
    });
  }
  /** When Object3D instances are targeted by animation, they need unique names. */
  createUniqueName(e) {
    const r = PropertyBinding.sanitizeNodeName(e || "");
    return r in this.nodeNamesUsed ? r + "_" + ++this.nodeNamesUsed[r] : (this.nodeNamesUsed[r] = 0, r);
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#geometry
   *
   * Creates BufferGeometries from primitives.
   *
   * @param {Array<GLTF.Primitive>} primitives
   * @return {Promise<Array<BufferGeometry>>}
   */
  loadGeometries(e) {
    const r = this, n = this.extensions, i = this.primitiveCache;
    function s(o) {
      return n[Oe.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(o, r).then(function(l) {
        return e0(l, o, r);
      });
    }
    const a = [];
    for (let o = 0, l = e.length; o < l; o++) {
      const c = e[o], u = q6(c), h = i[u];
      if (h)
        a.push(h.promise);
      else {
        let A;
        c.extensions && c.extensions[Oe.KHR_DRACO_MESH_COMPRESSION] ? A = s(c) : A = e0(new BufferGeometry(), c, r), i[u] = { primitive: c, promise: A }, a.push(A);
      }
    }
    return Promise.all(a);
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#meshes
   * @param {number} meshIndex
   * @return {Promise<Group|Mesh|SkinnedMesh>}
   */
  loadMesh(e) {
    const r = this, n = this.json, i = this.extensions, s = n.meshes[e], a = s.primitives, o = [];
    for (let l = 0, c = a.length; l < c; l++) {
      const u = a[l].material === void 0 ? Y6(this.cache) : this.getDependency("material", a[l].material);
      o.push(u);
    }
    return o.push(r.loadGeometries(a)), Promise.all(o).then(function(l) {
      const c = l.slice(0, l.length - 1), u = l[l.length - 1], h = [];
      for (let f = 0, d = u.length; f < d; f++) {
        const v = u[f], m = a[f];
        let E;
        const y = c[f];
        if (m.mode === rr.TRIANGLES || m.mode === rr.TRIANGLE_STRIP || m.mode === rr.TRIANGLE_FAN || m.mode === void 0)
          E = s.isSkinnedMesh === true ? new SkinnedMesh(v, y) : new Mesh(v, y), E.isSkinnedMesh === true && E.normalizeSkinWeights(), m.mode === rr.TRIANGLE_STRIP ? E.geometry = q3(E.geometry, TriangleStripDrawMode) : m.mode === rr.TRIANGLE_FAN && (E.geometry = q3(E.geometry, TriangleFanDrawMode));
        else if (m.mode === rr.LINES)
          E = new LineSegments(v, y);
        else if (m.mode === rr.LINE_STRIP)
          E = new Line(v, y);
        else if (m.mode === rr.LINE_LOOP)
          E = new LineLoop(v, y);
        else if (m.mode === rr.POINTS)
          E = new Points(v, y);
        else
          throw new Error("THREE.GLTFLoader: Primitive mode unsupported: " + m.mode);
        Object.keys(E.geometry.morphAttributes).length > 0 && j6(E, s), E.name = r.createUniqueName(s.name || "mesh_" + e), Rn(E, s), m.extensions && Kn(i, E, m), r.assignFinalMaterial(E), h.push(E);
      }
      for (let f = 0, d = h.length; f < d; f++)
        r.associations.set(h[f], {
          meshes: e,
          primitives: f
        });
      if (h.length === 1)
        return s.extensions && Kn(i, h[0], s), h[0];
      const A = new Group();
      s.extensions && Kn(i, A, s), r.associations.set(A, { meshes: e });
      for (let f = 0, d = h.length; f < d; f++)
        A.add(h[f]);
      return A;
    });
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#cameras
   * @param {number} cameraIndex
   * @return {Promise<THREE.Camera>}
   */
  loadCamera(e) {
    let r;
    const n = this.json.cameras[e], i = n[n.type];
    if (!i) {
      console.warn("THREE.GLTFLoader: Missing camera parameters.");
      return;
    }
    return n.type === "perspective" ? r = new PerspectiveCamera(
      MathUtils.radToDeg(i.yfov),
      i.aspectRatio || 1,
      i.znear || 1,
      i.zfar || 2e6
    ) : n.type === "orthographic" && (r = new OrthographicCamera(-i.xmag, i.xmag, i.ymag, -i.ymag, i.znear, i.zfar)), n.name && (r.name = this.createUniqueName(n.name)), Rn(r, n), Promise.resolve(r);
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#skins
   * @param {number} skinIndex
   * @return {Promise<Skeleton>}
   */
  loadSkin(e) {
    const r = this.json.skins[e], n = [];
    for (let i = 0, s = r.joints.length; i < s; i++)
      n.push(this._loadNodeShallow(r.joints[i]));
    return r.inverseBindMatrices !== void 0 ? n.push(this.getDependency("accessor", r.inverseBindMatrices)) : n.push(null), Promise.all(n).then(function(i) {
      const s = i.pop(), a = i, o = [], l = [];
      for (let c = 0, u = a.length; c < u; c++) {
        const h = a[c];
        if (h) {
          o.push(h);
          const A = new Matrix4();
          s !== null && A.fromArray(s.array, c * 16), l.push(A);
        } else
          console.warn('THREE.GLTFLoader: Joint "%s" could not be found.', r.joints[c]);
      }
      return new Skeleton(o, l);
    });
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#animations
   * @param {number} animationIndex
   * @return {Promise<AnimationClip>}
   */
  loadAnimation(e) {
    const n = this.json.animations[e], i = n.name ? n.name : "animation_" + e, s = [], a = [], o = [], l = [], c = [];
    for (let u = 0, h = n.channels.length; u < h; u++) {
      const A = n.channels[u], f = n.samplers[A.sampler], d = A.target, v = d.node, m = n.parameters !== void 0 ? n.parameters[f.input] : f.input, E = n.parameters !== void 0 ? n.parameters[f.output] : f.output;
      d.node !== void 0 && (s.push(this.getDependency("node", v)), a.push(this.getDependency("accessor", m)), o.push(this.getDependency("accessor", E)), l.push(f), c.push(d));
    }
    return Promise.all([
      Promise.all(s),
      Promise.all(a),
      Promise.all(o),
      Promise.all(l),
      Promise.all(c)
    ]).then(function(u) {
      const h = u[0], A = u[1], f = u[2], d = u[3], v = u[4], m = [];
      for (let E = 0, y = h.length; E < y; E++) {
        const p = h[E], g = A[E], C = f[E], S = d[E], x = v[E];
        if (p === void 0)
          continue;
        p.updateMatrix();
        let T;
        switch (Tn[x.path]) {
          case Tn.weights:
            T = NumberKeyframeTrack;
            break;
          case Tn.rotation:
            T = QuaternionKeyframeTrack;
            break;
          case Tn.position:
          case Tn.scale:
          default:
            T = VectorKeyframeTrack;
            break;
        }
        const B = p.name ? p.name : p.uuid, R = S.interpolation !== void 0 ? z6[S.interpolation] : InterpolateLinear, _ = [];
        Tn[x.path] === Tn.weights ? p.traverse(function(U) {
          U.morphTargetInfluences && _.push(U.name ? U.name : U.uuid);
        }) : _.push(B);
        let F = C.array;
        if (C.normalized) {
          const U = Kl(F.constructor), Y = new Float32Array(F.length);
          for (let N = 0, Z = F.length; N < Z; N++)
            Y[N] = F[N] * U;
          F = Y;
        }
        for (let U = 0, Y = _.length; U < Y; U++) {
          const N = new T(
            _[U] + "." + Tn[x.path],
            g.array,
            F,
            R
          );
          S.interpolation === "CUBICSPLINE" && (N.createInterpolant = function(j) {
            const Q = this instanceof QuaternionKeyframeTrack ? V6 : c2;
            return new Q(this.times, this.values, this.getValueSize() / 3, j);
          }, N.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline = true), m.push(N);
        }
      }
      return new AnimationClip(i, void 0, m);
    });
  }
  createNodeMesh(e) {
    const r = this.json, n = this, i = r.nodes[e];
    return i.mesh === void 0 ? null : n.getDependency("mesh", i.mesh).then(function(s) {
      const a = n._getNodeRef(n.meshCache, i.mesh, s);
      return i.weights !== void 0 && a.traverse(function(o) {
        if (o.isMesh)
          for (let l = 0, c = i.weights.length; l < c; l++)
            o.morphTargetInfluences[l] = i.weights[l];
      }), a;
    });
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#nodes-and-hierarchy
   * @param {number} nodeIndex
   * @return {Promise<Object3D>}
   */
  loadNode(e) {
    const r = this.json, n = this, i = r.nodes[e], s = n._loadNodeShallow(e), a = [], o = i.children || [];
    for (let c = 0, u = o.length; c < u; c++)
      a.push(n.getDependency("node", o[c]));
    const l = i.skin === void 0 ? Promise.resolve(null) : n.getDependency("skin", i.skin);
    return Promise.all([s, Promise.all(a), l]).then(function(c) {
      const u = c[0], h = c[1], A = c[2];
      A !== null && u.traverse(function(f) {
        f.isSkinnedMesh && f.bind(A, X6);
      });
      for (let f = 0, d = h.length; f < d; f++)
        u.add(h[f]);
      return u;
    });
  }
  // ._loadNodeShallow() parses a single node.
  // skin and child nodes are created and added in .loadNode() (no '_' prefix).
  _loadNodeShallow(e) {
    const r = this.json, n = this.extensions, i = this;
    if (this.nodeCache[e] !== void 0)
      return this.nodeCache[e];
    const s = r.nodes[e], a = s.name ? i.createUniqueName(s.name) : "", o = [], l = i._invokeOne(function(c) {
      return c.createNodeMesh && c.createNodeMesh(e);
    });
    return l && o.push(l), s.camera !== void 0 && o.push(
      i.getDependency("camera", s.camera).then(function(c) {
        return i._getNodeRef(i.cameraCache, s.camera, c);
      })
    ), i._invokeAll(function(c) {
      return c.createNodeAttachment && c.createNodeAttachment(e);
    }).forEach(function(c) {
      o.push(c);
    }), this.nodeCache[e] = Promise.all(o).then(function(c) {
      let u;
      if (s.isBone === true ? u = new Bone() : c.length > 1 ? u = new Group() : c.length === 1 ? u = c[0] : u = new Object3D(), u !== c[0])
        for (let h = 0, A = c.length; h < A; h++)
          u.add(c[h]);
      if (s.name && (u.userData.name = s.name, u.name = a), Rn(u, s), s.extensions && Kn(n, u, s), s.matrix !== void 0) {
        const h = new Matrix4();
        h.fromArray(s.matrix), u.applyMatrix4(h);
      } else
        s.translation !== void 0 && u.position.fromArray(s.translation), s.rotation !== void 0 && u.quaternion.fromArray(s.rotation), s.scale !== void 0 && u.scale.fromArray(s.scale);
      return i.associations.has(u) || i.associations.set(u, {}), i.associations.get(u).nodes = e, u;
    }), this.nodeCache[e];
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#scenes
   * @param {number} sceneIndex
   * @return {Promise<Group>}
   */
  loadScene(e) {
    const r = this.extensions, n = this.json.scenes[e], i = this, s = new Group();
    n.name && (s.name = i.createUniqueName(n.name)), Rn(s, n), n.extensions && Kn(r, s, n);
    const a = n.nodes || [], o = [];
    for (let l = 0, c = a.length; l < c; l++)
      o.push(i.getDependency("node", a[l]));
    return Promise.all(o).then(function(l) {
      for (let u = 0, h = l.length; u < h; u++)
        s.add(l[u]);
      const c = (u) => {
        const h = /* @__PURE__ */ new Map();
        for (const [A, f] of i.associations)
          (A instanceof Material || A instanceof Texture) && h.set(A, f);
        return u.traverse((A) => {
          const f = i.associations.get(A);
          f != null && h.set(A, f);
        }), h;
      };
      return i.associations = c(s), s;
    });
  }
}
function Z6(t, e, r) {
  const n = e.attributes, i = new Box3();
  if (n.POSITION !== void 0) {
    const o = r.json.accessors[n.POSITION], l = o.min, c = o.max;
    if (l !== void 0 && c !== void 0) {
      if (i.set(new Vector3(l[0], l[1], l[2]), new Vector3(c[0], c[1], c[2])), o.normalized) {
        const u = Kl(_i[o.componentType]);
        i.min.multiplyScalar(u), i.max.multiplyScalar(u);
      }
    } else {
      console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");
      return;
    }
  } else
    return;
  const s = e.targets;
  if (s !== void 0) {
    const o = new Vector3(), l = new Vector3();
    for (let c = 0, u = s.length; c < u; c++) {
      const h = s[c];
      if (h.POSITION !== void 0) {
        const A = r.json.accessors[h.POSITION], f = A.min, d = A.max;
        if (f !== void 0 && d !== void 0) {
          if (l.setX(Math.max(Math.abs(f[0]), Math.abs(d[0]))), l.setY(Math.max(Math.abs(f[1]), Math.abs(d[1]))), l.setZ(Math.max(Math.abs(f[2]), Math.abs(d[2]))), A.normalized) {
            const v = Kl(_i[A.componentType]);
            l.multiplyScalar(v);
          }
          o.max(l);
        } else
          console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");
      }
    }
    i.expandByVector(o);
  }
  t.boundingBox = i;
  const a = new Sphere();
  i.getCenter(a.center), a.radius = i.min.distanceTo(i.max) / 2, t.boundingSphere = a;
}
function e0(t, e, r) {
  const n = e.attributes, i = [];
  function s(a, o) {
    return r.getDependency("accessor", a).then(function(l) {
      t.setAttribute(o, l);
    });
  }
  for (const a in n) {
    const o = ql[a] || a.toLowerCase();
    o in t.attributes || i.push(s(n[a], o));
  }
  if (e.indices !== void 0 && !t.index) {
    const a = r.getDependency("accessor", e.indices).then(function(o) {
      t.setIndex(o);
    });
    i.push(a);
  }
  return Rn(t, e), Z6(t, e, r), Promise.all(i).then(function() {
    return e.targets !== void 0 ? W6(t, e.targets, r) : t;
  });
}
const Xl = class {
  static createButton(t, e = {}) {
    const r = document.createElement("button");
    function n() {
      let o = null;
      async function l(u) {
        u.addEventListener("end", c), await t.xr.setSession(u), r.textContent = "EXIT VR", o = u;
      }
      function c() {
        o.removeEventListener("end", c), r.textContent = "ENTER VR", o = null;
      }
      r.style.display = "", r.style.cursor = "pointer", r.style.left = "calc(50% - 50px)", r.style.width = "100px", r.textContent = "ENTER VR", r.onmouseenter = () => {
        r.style.opacity = "1.0";
      }, r.onmouseleave = () => {
        r.style.opacity = "0.5";
      }, r.onclick = () => {
        var u;
        if (o === null) {
          const h = [e.optionalFeatures, "local-floor", "bounded-floor", "hand-tracking"].flat().filter(Boolean);
          (u = navigator.xr) == null || u.requestSession("immersive-vr", { ...e, optionalFeatures: h }).then(l);
        } else
          o.end();
      };
    }
    function i() {
      r.style.display = "", r.style.cursor = "auto", r.style.left = "calc(50% - 75px)", r.style.width = "150px", r.onmouseenter = null, r.onmouseleave = null, r.onclick = null;
    }
    function s() {
      i(), r.textContent = "VR NOT SUPPORTED";
    }
    function a(o) {
      o.style.position = "absolute", o.style.bottom = "20px", o.style.padding = "12px 6px", o.style.border = "1px solid #fff", o.style.borderRadius = "4px", o.style.background = "rgba(0,0,0,0.1)", o.style.color = "#fff", o.style.font = "normal 13px sans-serif", o.style.textAlign = "center", o.style.opacity = "0.5", o.style.outline = "none", o.style.zIndex = "999";
    }
    if ("xr" in navigator)
      return a(r), r.id = "VRButton", r.style.display = "none", navigator.xr.isSessionSupported("immersive-vr").then((o) => {
        o ? n() : s(), o && Xl.xrSessionIsGranted && r.click();
      }), r;
    {
      const o = document.createElement("a");
      return window.isSecureContext === false ? (o.href = document.location.href.replace(/^http:/, "https:"), o.innerHTML = "WEBXR NEEDS HTTPS") : (o.href = "https://immersiveweb.dev/", o.innerHTML = "WEBXR NOT AVAILABLE"), o.style.left = "calc(50% - 90px)", o.style.width = "180px", o.style.textDecoration = "none", a(o), o;
    }
  }
  static registerSessionGrantedListener() {
    "xr" in navigator && navigator.xr.addEventListener("sessiongranted", () => {
      Xl.xrSessionIsGranted = true;
    });
  }
};
let J6 = Xl;
b(J6, "xrSessionIsGranted", false);
class t0 extends ExtrudeGeometry {
  constructor(e, r = {}) {
    const {
      bevelEnabled: n = false,
      bevelSize: i = 8,
      bevelThickness: s = 10,
      font: a,
      height: o = 50,
      size: l = 100,
      lineHeight: c = 1,
      letterSpacing: u = 0,
      ...h
    } = r;
    if (a === void 0)
      super();
    else {
      const A = a.generateShapes(e, l, { lineHeight: c, letterSpacing: u });
      super(A, { ...h, bevelEnabled: n, bevelSize: i, bevelThickness: s, depth: o });
    }
    this.type = "TextGeometry";
  }
}
const e8 = {
  uniforms: {
    tDiffuse: { value: null },
    h: { value: 1 / 512 }
  },
  vertexShader: (
    /* glsl */
    `
      varying vec2 vUv;

      void main() {

        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

      }
  `
  ),
  fragmentShader: (
    /* glsl */
    `
    uniform sampler2D tDiffuse;
    uniform float h;

    varying vec2 vUv;

    void main() {

    	vec4 sum = vec4( 0.0 );

    	sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

    	gl_FragColor = sum;

    }
  `
  )
}, t8 = {
  uniforms: {
    tDiffuse: { value: null },
    v: { value: 1 / 512 }
  },
  vertexShader: (
    /* glsl */
    `
    varying vec2 vUv;

    void main() {

      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }
  `
  ),
  fragmentShader: (
    /* glsl */
    `

  uniform sampler2D tDiffuse;
  uniform float v;

  varying vec2 vUv;

  void main() {

    vec4 sum = vec4( 0.0 );

    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

    gl_FragColor = sum;

  }
  `
  )
};
function u2(t, e, r) {
  const n = r.length - t - 1;
  if (e >= r[n])
    return n - 1;
  if (e <= r[t])
    return t;
  let i = t, s = n, a = Math.floor((i + s) / 2);
  for (; e < r[a] || e >= r[a + 1]; )
    e < r[a] ? s = a : i = a, a = Math.floor((i + s) / 2);
  return a;
}
function r8(t, e, r, n) {
  const i = [], s = [], a = [];
  i[0] = 1;
  for (let o = 1; o <= r; ++o) {
    s[o] = e - n[t + 1 - o], a[o] = n[t + o] - e;
    let l = 0;
    for (let c = 0; c < o; ++c) {
      const u = a[c + 1], h = s[o - c], A = i[c] / (u + h);
      i[c] = l + u * A, l = h * A;
    }
    i[o] = l;
  }
  return i;
}
function n8(t, e, r, n) {
  const i = u2(t, n, e), s = r8(i, n, t, e), a = new Vector4(0, 0, 0, 0);
  for (let o = 0; o <= t; ++o) {
    const l = r[i - t + o], c = s[o], u = l.w * c;
    a.x += l.x * u, a.y += l.y * u, a.z += l.z * u, a.w += l.w * c;
  }
  return a;
}
function i8(t, e, r, n, i) {
  const s = [];
  for (let h = 0; h <= r; ++h)
    s[h] = 0;
  const a = [];
  for (let h = 0; h <= n; ++h)
    a[h] = s.slice(0);
  const o = [];
  for (let h = 0; h <= r; ++h)
    o[h] = s.slice(0);
  o[0][0] = 1;
  const l = s.slice(0), c = s.slice(0);
  for (let h = 1; h <= r; ++h) {
    l[h] = e - i[t + 1 - h], c[h] = i[t + h] - e;
    let A = 0;
    for (let f = 0; f < h; ++f) {
      const d = c[f + 1], v = l[h - f];
      o[h][f] = d + v;
      const m = o[f][h - 1] / o[h][f];
      o[f][h] = A + d * m, A = v * m;
    }
    o[h][h] = A;
  }
  for (let h = 0; h <= r; ++h)
    a[0][h] = o[h][r];
  for (let h = 0; h <= r; ++h) {
    let A = 0, f = 1;
    const d = [];
    for (let v = 0; v <= r; ++v)
      d[v] = s.slice(0);
    d[0][0] = 1;
    for (let v = 1; v <= n; ++v) {
      let m = 0;
      const E = h - v, y = r - v;
      h >= v && (d[f][0] = d[A][0] / o[y + 1][E], m = d[f][0] * o[E][y]);
      const p = E >= -1 ? 1 : -E, g = h - 1 <= y ? v - 1 : r - h;
      for (let S = p; S <= g; ++S)
        d[f][S] = (d[A][S] - d[A][S - 1]) / o[y + 1][E + S], m += d[f][S] * o[E + S][y];
      h <= y && (d[f][v] = -d[A][v - 1] / o[y + 1][h], m += d[f][v] * o[h][y]), a[v][h] = m;
      const C = A;
      A = f, f = C;
    }
  }
  let u = r;
  for (let h = 1; h <= n; ++h) {
    for (let A = 0; A <= r; ++A)
      a[h][A] *= u;
    u *= r - h;
  }
  return a;
}
function s8(t, e, r, n, i) {
  const s = i < t ? i : t, a = [], o = u2(t, n, e), l = i8(o, n, t, s, e), c = [];
  for (let u = 0; u < r.length; ++u) {
    const h = r[u].clone(), A = h.w;
    h.x *= A, h.y *= A, h.z *= A, c[u] = h;
  }
  for (let u = 0; u <= s; ++u) {
    const h = c[o - t].clone().multiplyScalar(l[u][0]);
    for (let A = 1; A <= t; ++A)
      h.add(c[o - t + A].clone().multiplyScalar(l[u][A]));
    a[u] = h;
  }
  for (let u = s + 1; u <= i + 1; ++u)
    a[u] = new Vector4(0, 0, 0);
  return a;
}
function a8(t, e) {
  let r = 1;
  for (let i = 2; i <= t; ++i)
    r *= i;
  let n = 1;
  for (let i = 2; i <= e; ++i)
    n *= i;
  for (let i = 2; i <= t - e; ++i)
    n *= i;
  return r / n;
}
function o8(t) {
  const e = t.length, r = [], n = [];
  for (let s = 0; s < e; ++s) {
    const a = t[s];
    r[s] = new Vector3(a.x, a.y, a.z), n[s] = a.w;
  }
  const i = [];
  for (let s = 0; s < e; ++s) {
    const a = r[s].clone();
    for (let o = 1; o <= s; ++o)
      a.sub(i[s - o].clone().multiplyScalar(a8(s, o) * n[o]));
    i[s] = a.divideScalar(n[0]);
  }
  return i;
}
function l8(t, e, r, n, i) {
  const s = s8(t, e, r, n, i);
  return o8(s);
}
class r0 extends Curve {
  constructor(e, r, n, i, s) {
    super(), this.degree = e, this.knots = r, this.controlPoints = [], this.startKnot = i || 0, this.endKnot = s || this.knots.length - 1;
    for (let a = 0; a < n.length; ++a) {
      const o = n[a];
      this.controlPoints[a] = new Vector4(o.x, o.y, o.z, o.w);
    }
  }
  getPoint(e, r) {
    const n = r || new Vector3(), i = this.knots[this.startKnot] + e * (this.knots[this.endKnot] - this.knots[this.startKnot]), s = n8(this.degree, this.knots, this.controlPoints, i);
    return s.w != 1 && s.divideScalar(s.w), n.set(s.x, s.y, s.z);
  }
  getTangent(e, r) {
    const n = r || new Vector3(), i = this.knots[0] + e * (this.knots[this.knots.length - 1] - this.knots[0]), s = l8(this.degree, this.knots, this.controlPoints, i, 1);
    return n.copy(s[1]).normalize(), n;
  }
}
let Fe, at, Nt;
class c8 extends Loader {
  constructor(e) {
    super(e);
  }
  load(e, r, n, i) {
    const s = this, a = s.path === "" ? LoaderUtils.extractUrlBase(e) : s.path, o = new FileLoader(this.manager);
    o.setPath(s.path), o.setResponseType("arraybuffer"), o.setRequestHeader(s.requestHeader), o.setWithCredentials(s.withCredentials), o.load(
      e,
      function(l) {
        try {
          r(s.parse(l, a));
        } catch (c) {
          i ? i(c) : console.error(c), s.manager.itemError(e);
        }
      },
      n,
      i
    );
  }
  parse(e, r) {
    if (d8(e))
      Fe = new p8().parse(e);
    else {
      const i = p2(e);
      if (!g8(i))
        throw new Error("THREE.FBXLoader: Unknown format.");
      if (i0(i) < 7e3)
        throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: " + i0(i));
      Fe = new f8().parse(i);
    }
    const n = new TextureLoader(this.manager).setPath(this.resourcePath || r).setCrossOrigin(this.crossOrigin);
    return new u8(n, this.manager).parse(Fe);
  }
}
class u8 {
  constructor(e, r) {
    this.textureLoader = e, this.manager = r;
  }
  parse() {
    at = this.parseConnections();
    const e = this.parseImages(), r = this.parseTextures(e), n = this.parseMaterials(r), i = this.parseDeformers(), s = new h8().parse(i);
    return this.parseScene(i, s, n), Nt;
  }
  // Parses FBXTree.Connections which holds parent-child connections between objects (e.g. material -> texture, model->geometry )
  // and details the connection type
  parseConnections() {
    const e = /* @__PURE__ */ new Map();
    return "Connections" in Fe && Fe.Connections.connections.forEach(function(n) {
      const i = n[0], s = n[1], a = n[2];
      e.has(i) || e.set(i, {
        parents: [],
        children: []
      });
      const o = { ID: s, relationship: a };
      e.get(i).parents.push(o), e.has(s) || e.set(s, {
        parents: [],
        children: []
      });
      const l = { ID: i, relationship: a };
      e.get(s).children.push(l);
    }), e;
  }
  // Parse FBXTree.Objects.Video for embedded image data
  // These images are connected to textures in FBXTree.Objects.Textures
  // via FBXTree.Connections.
  parseImages() {
    const e = {}, r = {};
    if ("Video" in Fe.Objects) {
      const n = Fe.Objects.Video;
      for (const i in n) {
        const s = n[i], a = parseInt(i);
        if (e[a] = s.RelativeFilename || s.Filename, "Content" in s) {
          const o = s.Content instanceof ArrayBuffer && s.Content.byteLength > 0, l = typeof s.Content == "string" && s.Content !== "";
          if (o || l) {
            const c = this.parseImage(n[i]);
            r[s.RelativeFilename || s.Filename] = c;
          }
        }
      }
    }
    for (const n in e) {
      const i = e[n];
      r[i] !== void 0 ? e[n] = r[i] : e[n] = e[n].split("\\").pop();
    }
    return e;
  }
  // Parse embedded image data in FBXTree.Video.Content
  parseImage(e) {
    const r = e.Content, n = e.RelativeFilename || e.Filename, i = n.slice(n.lastIndexOf(".") + 1).toLowerCase();
    let s;
    switch (i) {
      case "bmp":
        s = "image/bmp";
        break;
      case "jpg":
      case "jpeg":
        s = "image/jpeg";
        break;
      case "png":
        s = "image/png";
        break;
      case "tif":
        s = "image/tiff";
        break;
      case "tga":
        this.manager.getHandler(".tga") === null && console.warn("FBXLoader: TGA loader not found, skipping ", n), s = "image/tga";
        break;
      default:
        console.warn('FBXLoader: Image type "' + i + '" is not supported.');
        return;
    }
    if (typeof r == "string")
      return "data:" + s + ";base64," + r;
    {
      const a = new Uint8Array(r);
      return window.URL.createObjectURL(new Blob([a], { type: s }));
    }
  }
  // Parse nodes in FBXTree.Objects.Texture
  // These contain details such as UV scaling, cropping, rotation etc and are connected
  // to images in FBXTree.Objects.Video
  parseTextures(e) {
    const r = /* @__PURE__ */ new Map();
    if ("Texture" in Fe.Objects) {
      const n = Fe.Objects.Texture;
      for (const i in n) {
        const s = this.parseTexture(n[i], e);
        r.set(parseInt(i), s);
      }
    }
    return r;
  }
  // Parse individual node in FBXTree.Objects.Texture
  parseTexture(e, r) {
    const n = this.loadTexture(e, r);
    n.ID = e.id, n.name = e.attrName;
    const i = e.WrapModeU, s = e.WrapModeV, a = i !== void 0 ? i.value : 0, o = s !== void 0 ? s.value : 0;
    if (n.wrapS = a === 0 ? RepeatWrapping : ClampToEdgeWrapping, n.wrapT = o === 0 ? RepeatWrapping : ClampToEdgeWrapping, "Scaling" in e) {
      const l = e.Scaling.value;
      n.repeat.x = l[0], n.repeat.y = l[1];
    }
    return n;
  }
  // load a texture specified as a blob or data URI, or via an external URL using TextureLoader
  loadTexture(e, r) {
    let n;
    const i = this.textureLoader.path, s = at.get(e.id).children;
    s !== void 0 && s.length > 0 && r[s[0].ID] !== void 0 && (n = r[s[0].ID], (n.indexOf("blob:") === 0 || n.indexOf("data:") === 0) && this.textureLoader.setPath(void 0));
    let a;
    const o = e.FileName.slice(-3).toLowerCase();
    if (o === "tga") {
      const l = this.manager.getHandler(".tga");
      l === null ? (console.warn("FBXLoader: TGA loader not found, creating placeholder texture for", e.RelativeFilename), a = new Texture()) : (l.setPath(this.textureLoader.path), a = l.load(n));
    } else
      o === "psd" ? (console.warn(
        "FBXLoader: PSD textures are not supported, creating placeholder texture for",
        e.RelativeFilename
      ), a = new Texture()) : a = this.textureLoader.load(n);
    return this.textureLoader.setPath(i), a;
  }
  // Parse nodes in FBXTree.Objects.Material
  parseMaterials(e) {
    const r = /* @__PURE__ */ new Map();
    if ("Material" in Fe.Objects) {
      const n = Fe.Objects.Material;
      for (const i in n) {
        const s = this.parseMaterial(n[i], e);
        s !== null && r.set(parseInt(i), s);
      }
    }
    return r;
  }
  // Parse single node in FBXTree.Objects.Material
  // Materials are connected to texture maps in FBXTree.Objects.Textures
  // FBX format currently only supports Lambert and Phong shading models
  parseMaterial(e, r) {
    const n = e.id, i = e.attrName;
    let s = e.ShadingModel;
    if (typeof s == "object" && (s = s.value), !at.has(n))
      return null;
    const a = this.parseParameters(e, r, n);
    let o;
    switch (s.toLowerCase()) {
      case "phong":
        o = new MeshPhongMaterial();
        break;
      case "lambert":
        o = new MeshLambertMaterial();
        break;
      default:
        console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.', s), o = new MeshPhongMaterial();
        break;
    }
    return o.setValues(a), o.name = i, o;
  }
  // Parse FBX material and return parameters suitable for a three.js material
  // Also parse the texture map and return any textures associated with the material
  parseParameters(e, r, n) {
    const i = {};
    e.BumpFactor && (i.bumpScale = e.BumpFactor.value), e.Diffuse ? i.color = new Color().fromArray(e.Diffuse.value) : e.DiffuseColor && (e.DiffuseColor.type === "Color" || e.DiffuseColor.type === "ColorRGB") && (i.color = new Color().fromArray(e.DiffuseColor.value)), e.DisplacementFactor && (i.displacementScale = e.DisplacementFactor.value), e.Emissive ? i.emissive = new Color().fromArray(e.Emissive.value) : e.EmissiveColor && (e.EmissiveColor.type === "Color" || e.EmissiveColor.type === "ColorRGB") && (i.emissive = new Color().fromArray(e.EmissiveColor.value)), e.EmissiveFactor && (i.emissiveIntensity = parseFloat(e.EmissiveFactor.value)), e.Opacity && (i.opacity = parseFloat(e.Opacity.value)), i.opacity < 1 && (i.transparent = true), e.ReflectionFactor && (i.reflectivity = e.ReflectionFactor.value), e.Shininess && (i.shininess = e.Shininess.value), e.Specular ? i.specular = new Color().fromArray(e.Specular.value) : e.SpecularColor && e.SpecularColor.type === "Color" && (i.specular = new Color().fromArray(e.SpecularColor.value));
    const s = this;
    return at.get(n).children.forEach(function(a) {
      const o = a.relationship;
      switch (o) {
        case "Bump":
          i.bumpMap = s.getTexture(r, a.ID);
          break;
        case "Maya|TEX_ao_map":
          i.aoMap = s.getTexture(r, a.ID);
          break;
        case "DiffuseColor":
        case "Maya|TEX_color_map":
          i.map = s.getTexture(r, a.ID), i.map !== void 0 && ("colorSpace" in i.map ? i.map.colorSpace = "srgb" : i.map.encoding = 3001);
          break;
        case "DisplacementColor":
          i.displacementMap = s.getTexture(r, a.ID);
          break;
        case "EmissiveColor":
          i.emissiveMap = s.getTexture(r, a.ID), i.emissiveMap !== void 0 && ("colorSpace" in i.emissiveMap ? i.emissiveMap.colorSpace = "srgb" : i.emissiveMap.encoding = 3001);
          break;
        case "NormalMap":
        case "Maya|TEX_normal_map":
          i.normalMap = s.getTexture(r, a.ID);
          break;
        case "ReflectionColor":
          i.envMap = s.getTexture(r, a.ID), i.envMap !== void 0 && (i.envMap.mapping = EquirectangularReflectionMapping, "colorSpace" in i.envMap ? i.envMap.colorSpace = "srgb" : i.envMap.encoding = 3001);
          break;
        case "SpecularColor":
          i.specularMap = s.getTexture(r, a.ID), i.specularMap !== void 0 && ("colorSpace" in i.specularMap ? i.specularMap.colorSpace = "srgb" : i.specularMap.encoding = 3001);
          break;
        case "TransparentColor":
        case "TransparencyFactor":
          i.alphaMap = s.getTexture(r, a.ID), i.transparent = true;
          break;
        case "AmbientColor":
        case "ShininessExponent":
        case "SpecularFactor":
        case "VectorDisplacementColor":
        default:
          console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.", o);
          break;
      }
    }), i;
  }
  // get a texture from the textureMap for use by a material.
  getTexture(e, r) {
    return "LayeredTexture" in Fe.Objects && r in Fe.Objects.LayeredTexture && (console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."), r = at.get(r).children[0].ID), e.get(r);
  }
  // Parse nodes in FBXTree.Objects.Deformer
  // Deformer node can contain skinning or Vertex Cache animation data, however only skinning is supported here
  // Generates map of Skeleton-like objects for use later when generating and binding skeletons.
  parseDeformers() {
    const e = {}, r = {};
    if ("Deformer" in Fe.Objects) {
      const n = Fe.Objects.Deformer;
      for (const i in n) {
        const s = n[i], a = at.get(parseInt(i));
        if (s.attrType === "Skin") {
          const o = this.parseSkeleton(a, n);
          o.ID = i, a.parents.length > 1 && console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."), o.geometryID = a.parents[0].ID, e[i] = o;
        } else if (s.attrType === "BlendShape") {
          const o = {
            id: i
          };
          o.rawTargets = this.parseMorphTargets(a, n), o.id = i, a.parents.length > 1 && console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."), r[i] = o;
        }
      }
    }
    return {
      skeletons: e,
      morphTargets: r
    };
  }
  // Parse single nodes in FBXTree.Objects.Deformer
  // The top level skeleton node has type 'Skin' and sub nodes have type 'Cluster'
  // Each skin node represents a skeleton and each cluster node represents a bone
  parseSkeleton(e, r) {
    const n = [];
    return e.children.forEach(function(i) {
      const s = r[i.ID];
      if (s.attrType !== "Cluster")
        return;
      const a = {
        ID: i.ID,
        indices: [],
        weights: [],
        transformLink: new Matrix4().fromArray(s.TransformLink.a)
        // transform: new Matrix4().fromArray( boneNode.Transform.a ),
        // linkMode: boneNode.Mode,
      };
      "Indexes" in s && (a.indices = s.Indexes.a, a.weights = s.Weights.a), n.push(a);
    }), {
      rawBones: n,
      bones: []
    };
  }
  // The top level morph deformer node has type "BlendShape" and sub nodes have type "BlendShapeChannel"
  parseMorphTargets(e, r) {
    const n = [];
    for (let i = 0; i < e.children.length; i++) {
      const s = e.children[i], a = r[s.ID], o = {
        name: a.attrName,
        initialWeight: a.DeformPercent,
        id: a.id,
        fullWeights: a.FullWeights.a
      };
      if (a.attrType !== "BlendShapeChannel")
        return;
      o.geoID = at.get(parseInt(s.ID)).children.filter(function(l) {
        return l.relationship === void 0;
      })[0].ID, n.push(o);
    }
    return n;
  }
  // create the main Group() to be returned by the loader
  parseScene(e, r, n) {
    Nt = new Group();
    const i = this.parseModels(e.skeletons, r, n), s = Fe.Objects.Model, a = this;
    i.forEach(function(l) {
      const c = s[l.ID];
      a.setLookAtProperties(l, c), at.get(l.ID).parents.forEach(function(h) {
        const A = i.get(h.ID);
        A !== void 0 && A.add(l);
      }), l.parent === null && Nt.add(l);
    }), this.bindSkeleton(e.skeletons, r, i), this.createAmbientLight(), Nt.traverse(function(l) {
      if (l.userData.transformData) {
        l.parent && (l.userData.transformData.parentMatrix = l.parent.matrix, l.userData.transformData.parentMatrixWorld = l.parent.matrixWorld);
        const c = A2(l.userData.transformData);
        l.applyMatrix4(c), l.updateWorldMatrix();
      }
    });
    const o = new A8().parse();
    Nt.children.length === 1 && Nt.children[0].isGroup && (Nt.children[0].animations = o, Nt = Nt.children[0]), Nt.animations = o;
  }
  // parse nodes in FBXTree.Objects.Model
  parseModels(e, r, n) {
    const i = /* @__PURE__ */ new Map(), s = Fe.Objects.Model;
    for (const a in s) {
      const o = parseInt(a), l = s[a], c = at.get(o);
      let u = this.buildSkeleton(c, e, o, l.attrName);
      if (!u) {
        switch (l.attrType) {
          case "Camera":
            u = this.createCamera(c);
            break;
          case "Light":
            u = this.createLight(c);
            break;
          case "Mesh":
            u = this.createMesh(c, r, n);
            break;
          case "NurbsCurve":
            u = this.createCurve(c, r);
            break;
          case "LimbNode":
          case "Root":
            u = new Bone();
            break;
          case "Null":
          default:
            u = new Group();
            break;
        }
        u.name = l.attrName ? PropertyBinding.sanitizeNodeName(l.attrName) : "", u.ID = o;
      }
      this.getTransformData(u, l), i.set(o, u);
    }
    return i;
  }
  buildSkeleton(e, r, n, i) {
    let s = null;
    return e.parents.forEach(function(a) {
      for (const o in r) {
        const l = r[o];
        l.rawBones.forEach(function(c, u) {
          if (c.ID === a.ID) {
            const h = s;
            s = new Bone(), s.matrixWorld.copy(c.transformLink), s.name = i ? PropertyBinding.sanitizeNodeName(i) : "", s.ID = n, l.bones[u] = s, h !== null && s.add(h);
          }
        });
      }
    }), s;
  }
  // create a PerspectiveCamera or OrthographicCamera
  createCamera(e) {
    let r, n;
    if (e.children.forEach(function(i) {
      const s = Fe.Objects.NodeAttribute[i.ID];
      s !== void 0 && (n = s);
    }), n === void 0)
      r = new Object3D();
    else {
      let i = 0;
      n.CameraProjectionType !== void 0 && n.CameraProjectionType.value === 1 && (i = 1);
      let s = 1;
      n.NearPlane !== void 0 && (s = n.NearPlane.value / 1e3);
      let a = 1e3;
      n.FarPlane !== void 0 && (a = n.FarPlane.value / 1e3);
      let o = window.innerWidth, l = window.innerHeight;
      n.AspectWidth !== void 0 && n.AspectHeight !== void 0 && (o = n.AspectWidth.value, l = n.AspectHeight.value);
      const c = o / l;
      let u = 45;
      n.FieldOfView !== void 0 && (u = n.FieldOfView.value);
      const h = n.FocalLength ? n.FocalLength.value : null;
      switch (i) {
        case 0:
          r = new PerspectiveCamera(u, c, s, a), h !== null && r.setFocalLength(h);
          break;
        case 1:
          r = new OrthographicCamera(
            -o / 2,
            o / 2,
            l / 2,
            -l / 2,
            s,
            a
          );
          break;
        default:
          console.warn("THREE.FBXLoader: Unknown camera type " + i + "."), r = new Object3D();
          break;
      }
    }
    return r;
  }
  // Create a DirectionalLight, PointLight or SpotLight
  createLight(e) {
    let r, n;
    if (e.children.forEach(function(i) {
      const s = Fe.Objects.NodeAttribute[i.ID];
      s !== void 0 && (n = s);
    }), n === void 0)
      r = new Object3D();
    else {
      let i;
      n.LightType === void 0 ? i = 0 : i = n.LightType.value;
      let s = 16777215;
      n.Color !== void 0 && (s = new Color().fromArray(n.Color.value));
      let a = n.Intensity === void 0 ? 1 : n.Intensity.value / 100;
      n.CastLightOnObject !== void 0 && n.CastLightOnObject.value === 0 && (a = 0);
      let o = 0;
      n.FarAttenuationEnd !== void 0 && (n.EnableFarAttenuation !== void 0 && n.EnableFarAttenuation.value === 0 ? o = 0 : o = n.FarAttenuationEnd.value);
      const l = 1;
      switch (i) {
        case 0:
          r = new PointLight(s, a, o, l);
          break;
        case 1:
          r = new DirectionalLight(s, a);
          break;
        case 2:
          let c = Math.PI / 3;
          n.InnerAngle !== void 0 && (c = MathUtils.degToRad(n.InnerAngle.value));
          let u = 0;
          n.OuterAngle !== void 0 && (u = MathUtils.degToRad(n.OuterAngle.value), u = Math.max(u, 1)), r = new SpotLight(s, a, o, c, u, l);
          break;
        default:
          console.warn(
            "THREE.FBXLoader: Unknown light type " + n.LightType.value + ", defaulting to a PointLight."
          ), r = new PointLight(s, a);
          break;
      }
      n.CastShadows !== void 0 && n.CastShadows.value === 1 && (r.castShadow = true);
    }
    return r;
  }
  createMesh(e, r, n) {
    let i, s = null, a = null;
    const o = [];
    return e.children.forEach(function(l) {
      r.has(l.ID) && (s = r.get(l.ID)), n.has(l.ID) && o.push(n.get(l.ID));
    }), o.length > 1 ? a = o : o.length > 0 ? a = o[0] : (a = new MeshPhongMaterial({ color: 13421772 }), o.push(a)), "color" in s.attributes && o.forEach(function(l) {
      l.vertexColors = true;
    }), s.FBX_Deformer ? (i = new SkinnedMesh(s, a), i.normalizeSkinWeights()) : i = new Mesh(s, a), i;
  }
  createCurve(e, r) {
    const n = e.children.reduce(function(s, a) {
      return r.has(a.ID) && (s = r.get(a.ID)), s;
    }, null), i = new LineBasicMaterial({ color: 3342591, linewidth: 1 });
    return new Line(n, i);
  }
  // parse the model node for transform data
  getTransformData(e, r) {
    const n = {};
    "InheritType" in r && (n.inheritType = parseInt(r.InheritType.value)), "RotationOrder" in r ? n.eulerOrder = f2(r.RotationOrder.value) : n.eulerOrder = "ZYX", "Lcl_Translation" in r && (n.translation = r.Lcl_Translation.value), "PreRotation" in r && (n.preRotation = r.PreRotation.value), "Lcl_Rotation" in r && (n.rotation = r.Lcl_Rotation.value), "PostRotation" in r && (n.postRotation = r.PostRotation.value), "Lcl_Scaling" in r && (n.scale = r.Lcl_Scaling.value), "ScalingOffset" in r && (n.scalingOffset = r.ScalingOffset.value), "ScalingPivot" in r && (n.scalingPivot = r.ScalingPivot.value), "RotationOffset" in r && (n.rotationOffset = r.RotationOffset.value), "RotationPivot" in r && (n.rotationPivot = r.RotationPivot.value), e.userData.transformData = n;
  }
  setLookAtProperties(e, r) {
    "LookAtProperty" in r && at.get(e.ID).children.forEach(function(i) {
      if (i.relationship === "LookAtProperty") {
        const s = Fe.Objects.Model[i.ID];
        if ("Lcl_Translation" in s) {
          const a = s.Lcl_Translation.value;
          e.target !== void 0 ? (e.target.position.fromArray(a), Nt.add(e.target)) : e.lookAt(new Vector3().fromArray(a));
        }
      }
    });
  }
  bindSkeleton(e, r, n) {
    const i = this.parsePoseNodes();
    for (const s in e) {
      const a = e[s];
      at.get(parseInt(a.ID)).parents.forEach(function(l) {
        if (r.has(l.ID)) {
          const c = l.ID;
          at.get(c).parents.forEach(function(h) {
            n.has(h.ID) && n.get(h.ID).bind(new Skeleton(a.bones), i[h.ID]);
          });
        }
      });
    }
  }
  parsePoseNodes() {
    const e = {};
    if ("Pose" in Fe.Objects) {
      const r = Fe.Objects.Pose;
      for (const n in r)
        if (r[n].attrType === "BindPose" && r[n].NbPoseNodes > 0) {
          const i = r[n].PoseNode;
          Array.isArray(i) ? i.forEach(function(s) {
            e[s.Node] = new Matrix4().fromArray(s.Matrix.a);
          }) : e[i.Node] = new Matrix4().fromArray(i.Matrix.a);
        }
    }
    return e;
  }
  // Parse ambient color in FBXTree.GlobalSettings - if it's not set to black (default), create an ambient light
  createAmbientLight() {
    if ("GlobalSettings" in Fe && "AmbientColor" in Fe.GlobalSettings) {
      const e = Fe.GlobalSettings.AmbientColor.value, r = e[0], n = e[1], i = e[2];
      if (r !== 0 || n !== 0 || i !== 0) {
        const s = new Color(r, n, i);
        Nt.add(new AmbientLight(s, 1));
      }
    }
  }
}
let h8 = class {
  // Parse nodes in FBXTree.Objects.Geometry
  parse(e) {
    const r = /* @__PURE__ */ new Map();
    if ("Geometry" in Fe.Objects) {
      const n = Fe.Objects.Geometry;
      for (const i in n) {
        const s = at.get(parseInt(i)), a = this.parseGeometry(s, n[i], e);
        r.set(parseInt(i), a);
      }
    }
    return r;
  }
  // Parse single node in FBXTree.Objects.Geometry
  parseGeometry(e, r, n) {
    switch (r.attrType) {
      case "Mesh":
        return this.parseMeshGeometry(e, r, n);
      case "NurbsCurve":
        return this.parseNurbsGeometry(r);
    }
  }
  // Parse single node mesh geometry in FBXTree.Objects.Geometry
  parseMeshGeometry(e, r, n) {
    const i = n.skeletons, s = [], a = e.parents.map(function(h) {
      return Fe.Objects.Model[h.ID];
    });
    if (a.length === 0)
      return;
    const o = e.children.reduce(function(h, A) {
      return i[A.ID] !== void 0 && (h = i[A.ID]), h;
    }, null);
    e.children.forEach(function(h) {
      n.morphTargets[h.ID] !== void 0 && s.push(n.morphTargets[h.ID]);
    });
    const l = a[0], c = {};
    "RotationOrder" in l && (c.eulerOrder = f2(l.RotationOrder.value)), "InheritType" in l && (c.inheritType = parseInt(l.InheritType.value)), "GeometricTranslation" in l && (c.translation = l.GeometricTranslation.value), "GeometricRotation" in l && (c.rotation = l.GeometricRotation.value), "GeometricScaling" in l && (c.scale = l.GeometricScaling.value);
    const u = A2(c);
    return this.genGeometry(r, o, s, u);
  }
  // Generate a BufferGeometry from a node in FBXTree.Objects.Geometry
  genGeometry(e, r, n, i) {
    const s = new BufferGeometry();
    e.attrName && (s.name = e.attrName);
    const a = this.parseGeoNode(e, r), o = this.genBuffers(a), l = new Float32BufferAttribute(o.vertex, 3);
    if (l.applyMatrix4(i), s.setAttribute("position", l), o.colors.length > 0 && s.setAttribute("color", new Float32BufferAttribute(o.colors, 3)), r && (s.setAttribute("skinIndex", new Uint16BufferAttribute(o.weightsIndices, 4)), s.setAttribute("skinWeight", new Float32BufferAttribute(o.vertexWeights, 4)), s.FBX_Deformer = r), o.normal.length > 0) {
      const c = new Matrix3().getNormalMatrix(i), u = new Float32BufferAttribute(o.normal, 3);
      u.applyNormalMatrix(c), s.setAttribute("normal", u);
    }
    if (o.uvs.forEach(function(c, u) {
      let h = "uv" + (u + 1).toString();
      u === 0 && (h = "uv"), s.setAttribute(h, new Float32BufferAttribute(o.uvs[u], 2));
    }), a.material && a.material.mappingType !== "AllSame") {
      let c = o.materialIndex[0], u = 0;
      if (o.materialIndex.forEach(function(h, A) {
        h !== c && (s.addGroup(u, A - u, c), c = h, u = A);
      }), s.groups.length > 0) {
        const h = s.groups[s.groups.length - 1], A = h.start + h.count;
        A !== o.materialIndex.length && s.addGroup(A, o.materialIndex.length - A, c);
      }
      s.groups.length === 0 && s.addGroup(0, o.materialIndex.length, o.materialIndex[0]);
    }
    return this.addMorphTargets(s, e, n, i), s;
  }
  parseGeoNode(e, r) {
    const n = {};
    if (n.vertexPositions = e.Vertices !== void 0 ? e.Vertices.a : [], n.vertexIndices = e.PolygonVertexIndex !== void 0 ? e.PolygonVertexIndex.a : [], e.LayerElementColor && (n.color = this.parseVertexColors(e.LayerElementColor[0])), e.LayerElementMaterial && (n.material = this.parseMaterialIndices(e.LayerElementMaterial[0])), e.LayerElementNormal && (n.normal = this.parseNormals(e.LayerElementNormal[0])), e.LayerElementUV) {
      n.uv = [];
      let i = 0;
      for (; e.LayerElementUV[i]; )
        e.LayerElementUV[i].UV && n.uv.push(this.parseUVs(e.LayerElementUV[i])), i++;
    }
    return n.weightTable = {}, r !== null && (n.skeleton = r, r.rawBones.forEach(function(i, s) {
      i.indices.forEach(function(a, o) {
        n.weightTable[a] === void 0 && (n.weightTable[a] = []), n.weightTable[a].push({
          id: s,
          weight: i.weights[o]
        });
      });
    })), n;
  }
  genBuffers(e) {
    const r = {
      vertex: [],
      normal: [],
      colors: [],
      uvs: [],
      materialIndex: [],
      vertexWeights: [],
      weightsIndices: []
    };
    let n = 0, i = 0, s = false, a = [], o = [], l = [], c = [], u = [], h = [];
    const A = this;
    return e.vertexIndices.forEach(function(f, d) {
      let v, m = false;
      f < 0 && (f = f ^ -1, m = true);
      let E = [], y = [];
      if (a.push(f * 3, f * 3 + 1, f * 3 + 2), e.color) {
        const p = aa(d, n, f, e.color);
        l.push(p[0], p[1], p[2]);
      }
      if (e.skeleton) {
        if (e.weightTable[f] !== void 0 && e.weightTable[f].forEach(function(p) {
          y.push(p.weight), E.push(p.id);
        }), y.length > 4) {
          s || (console.warn(
            "THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."
          ), s = true);
          const p = [0, 0, 0, 0], g = [0, 0, 0, 0];
          y.forEach(function(C, S) {
            let x = C, T = E[S];
            g.forEach(function(B, R, _) {
              if (x > B) {
                _[R] = x, x = B;
                const F = p[R];
                p[R] = T, T = F;
              }
            });
          }), E = p, y = g;
        }
        for (; y.length < 4; )
          y.push(0), E.push(0);
        for (let p = 0; p < 4; ++p)
          u.push(y[p]), h.push(E[p]);
      }
      if (e.normal) {
        const p = aa(d, n, f, e.normal);
        o.push(p[0], p[1], p[2]);
      }
      e.material && e.material.mappingType !== "AllSame" && (v = aa(d, n, f, e.material)[0]), e.uv && e.uv.forEach(function(p, g) {
        const C = aa(d, n, f, p);
        c[g] === void 0 && (c[g] = []), c[g].push(C[0]), c[g].push(C[1]);
      }), i++, m && (A.genFace(
        r,
        e,
        a,
        v,
        o,
        l,
        c,
        u,
        h,
        i
      ), n++, i = 0, a = [], o = [], l = [], c = [], u = [], h = []);
    }), r;
  }
  // Generate data for a single face in a geometry. If the face is a quad then split it into 2 tris
  genFace(e, r, n, i, s, a, o, l, c, u) {
    for (let h = 2; h < u; h++)
      e.vertex.push(r.vertexPositions[n[0]]), e.vertex.push(r.vertexPositions[n[1]]), e.vertex.push(r.vertexPositions[n[2]]), e.vertex.push(r.vertexPositions[n[(h - 1) * 3]]), e.vertex.push(r.vertexPositions[n[(h - 1) * 3 + 1]]), e.vertex.push(r.vertexPositions[n[(h - 1) * 3 + 2]]), e.vertex.push(r.vertexPositions[n[h * 3]]), e.vertex.push(r.vertexPositions[n[h * 3 + 1]]), e.vertex.push(r.vertexPositions[n[h * 3 + 2]]), r.skeleton && (e.vertexWeights.push(l[0]), e.vertexWeights.push(l[1]), e.vertexWeights.push(l[2]), e.vertexWeights.push(l[3]), e.vertexWeights.push(l[(h - 1) * 4]), e.vertexWeights.push(l[(h - 1) * 4 + 1]), e.vertexWeights.push(l[(h - 1) * 4 + 2]), e.vertexWeights.push(l[(h - 1) * 4 + 3]), e.vertexWeights.push(l[h * 4]), e.vertexWeights.push(l[h * 4 + 1]), e.vertexWeights.push(l[h * 4 + 2]), e.vertexWeights.push(l[h * 4 + 3]), e.weightsIndices.push(c[0]), e.weightsIndices.push(c[1]), e.weightsIndices.push(c[2]), e.weightsIndices.push(c[3]), e.weightsIndices.push(c[(h - 1) * 4]), e.weightsIndices.push(c[(h - 1) * 4 + 1]), e.weightsIndices.push(c[(h - 1) * 4 + 2]), e.weightsIndices.push(c[(h - 1) * 4 + 3]), e.weightsIndices.push(c[h * 4]), e.weightsIndices.push(c[h * 4 + 1]), e.weightsIndices.push(c[h * 4 + 2]), e.weightsIndices.push(c[h * 4 + 3])), r.color && (e.colors.push(a[0]), e.colors.push(a[1]), e.colors.push(a[2]), e.colors.push(a[(h - 1) * 3]), e.colors.push(a[(h - 1) * 3 + 1]), e.colors.push(a[(h - 1) * 3 + 2]), e.colors.push(a[h * 3]), e.colors.push(a[h * 3 + 1]), e.colors.push(a[h * 3 + 2])), r.material && r.material.mappingType !== "AllSame" && (e.materialIndex.push(i), e.materialIndex.push(i), e.materialIndex.push(i)), r.normal && (e.normal.push(s[0]), e.normal.push(s[1]), e.normal.push(s[2]), e.normal.push(s[(h - 1) * 3]), e.normal.push(s[(h - 1) * 3 + 1]), e.normal.push(s[(h - 1) * 3 + 2]), e.normal.push(s[h * 3]), e.normal.push(s[h * 3 + 1]), e.normal.push(s[h * 3 + 2])), r.uv && r.uv.forEach(function(A, f) {
        e.uvs[f] === void 0 && (e.uvs[f] = []), e.uvs[f].push(o[f][0]), e.uvs[f].push(o[f][1]), e.uvs[f].push(o[f][(h - 1) * 2]), e.uvs[f].push(o[f][(h - 1) * 2 + 1]), e.uvs[f].push(o[f][h * 2]), e.uvs[f].push(o[f][h * 2 + 1]);
      });
  }
  addMorphTargets(e, r, n, i) {
    if (n.length === 0)
      return;
    e.morphTargetsRelative = true, e.morphAttributes.position = [];
    const s = this;
    n.forEach(function(a) {
      a.rawTargets.forEach(function(o) {
        const l = Fe.Objects.Geometry[o.geoID];
        l !== void 0 && s.genMorphGeometry(e, r, l, i, o.name);
      });
    });
  }
  // a morph geometry node is similar to a standard  node, and the node is also contained
  // in FBXTree.Objects.Geometry, however it can only have attributes for position, normal
  // and a special attribute Index defining which vertices of the original geometry are affected
  // Normal and position attributes only have data for the vertices that are affected by the morph
  genMorphGeometry(e, r, n, i, s) {
    const a = r.PolygonVertexIndex !== void 0 ? r.PolygonVertexIndex.a : [], o = n.Vertices !== void 0 ? n.Vertices.a : [], l = n.Indexes !== void 0 ? n.Indexes.a : [], c = e.attributes.position.count * 3, u = new Float32Array(c);
    for (let d = 0; d < l.length; d++) {
      const v = l[d] * 3;
      u[v] = o[d * 3], u[v + 1] = o[d * 3 + 1], u[v + 2] = o[d * 3 + 2];
    }
    const h = {
      vertexIndices: a,
      vertexPositions: u
    }, A = this.genBuffers(h), f = new Float32BufferAttribute(A.vertex, 3);
    f.name = s || n.attrName, f.applyMatrix4(i), e.morphAttributes.position.push(f);
  }
  // Parse normal from FBXTree.Objects.Geometry.LayerElementNormal if it exists
  parseNormals(e) {
    const r = e.MappingInformationType, n = e.ReferenceInformationType, i = e.Normals.a;
    let s = [];
    return n === "IndexToDirect" && ("NormalIndex" in e ? s = e.NormalIndex.a : "NormalsIndex" in e && (s = e.NormalsIndex.a)), {
      dataSize: 3,
      buffer: i,
      indices: s,
      mappingType: r,
      referenceType: n
    };
  }
  // Parse UVs from FBXTree.Objects.Geometry.LayerElementUV if it exists
  parseUVs(e) {
    const r = e.MappingInformationType, n = e.ReferenceInformationType, i = e.UV.a;
    let s = [];
    return n === "IndexToDirect" && (s = e.UVIndex.a), {
      dataSize: 2,
      buffer: i,
      indices: s,
      mappingType: r,
      referenceType: n
    };
  }
  // Parse Vertex Colors from FBXTree.Objects.Geometry.LayerElementColor if it exists
  parseVertexColors(e) {
    const r = e.MappingInformationType, n = e.ReferenceInformationType, i = e.Colors.a;
    let s = [];
    return n === "IndexToDirect" && (s = e.ColorIndex.a), {
      dataSize: 4,
      buffer: i,
      indices: s,
      mappingType: r,
      referenceType: n
    };
  }
  // Parse mapping and material data in FBXTree.Objects.Geometry.LayerElementMaterial if it exists
  parseMaterialIndices(e) {
    const r = e.MappingInformationType, n = e.ReferenceInformationType;
    if (r === "NoMappingInformation")
      return {
        dataSize: 1,
        buffer: [0],
        indices: [0],
        mappingType: "AllSame",
        referenceType: n
      };
    const i = e.Materials.a, s = [];
    for (let a = 0; a < i.length; ++a)
      s.push(a);
    return {
      dataSize: 1,
      buffer: i,
      indices: s,
      mappingType: r,
      referenceType: n
    };
  }
  // Generate a NurbGeometry from a node in FBXTree.Objects.Geometry
  parseNurbsGeometry(e) {
    if (r0 === void 0)
      return console.error(
        "THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."
      ), new BufferGeometry();
    const r = parseInt(e.Order);
    if (isNaN(r))
      return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s", e.Order, e.id), new BufferGeometry();
    const n = r - 1, i = e.KnotVector.a, s = [], a = e.Points.a;
    for (let h = 0, A = a.length; h < A; h += 4)
      s.push(new Vector4().fromArray(a, h));
    let o, l;
    if (e.Form === "Closed")
      s.push(s[0]);
    else if (e.Form === "Periodic") {
      o = n, l = i.length - 1 - o;
      for (let h = 0; h < n; ++h)
        s.push(s[h]);
    }
    const u = new r0(n, i, s, o, l).getPoints(s.length * 12);
    return new BufferGeometry().setFromPoints(u);
  }
};
class A8 {
  // take raw animation clips and turn them into three.js animation clips
  parse() {
    const e = [], r = this.parseClips();
    if (r !== void 0)
      for (const n in r) {
        const i = r[n], s = this.addClip(i);
        e.push(s);
      }
    return e;
  }
  parseClips() {
    if (Fe.Objects.AnimationCurve === void 0)
      return;
    const e = this.parseAnimationCurveNodes();
    this.parseAnimationCurves(e);
    const r = this.parseAnimationLayers(e);
    return this.parseAnimStacks(r);
  }
  // parse nodes in FBXTree.Objects.AnimationCurveNode
  // each AnimationCurveNode holds data for an animation transform for a model (e.g. left arm rotation )
  // and is referenced by an AnimationLayer
  parseAnimationCurveNodes() {
    const e = Fe.Objects.AnimationCurveNode, r = /* @__PURE__ */ new Map();
    for (const n in e) {
      const i = e[n];
      if (i.attrName.match(/S|R|T|DeformPercent/) !== null) {
        const s = {
          id: i.id,
          attr: i.attrName,
          curves: {}
        };
        r.set(s.id, s);
      }
    }
    return r;
  }
  // parse nodes in FBXTree.Objects.AnimationCurve and connect them up to
  // previously parsed AnimationCurveNodes. Each AnimationCurve holds data for a single animated
  // axis ( e.g. times and values of x rotation)
  parseAnimationCurves(e) {
    const r = Fe.Objects.AnimationCurve;
    for (const n in r) {
      const i = {
        id: r[n].id,
        times: r[n].KeyTime.a.map(m8),
        values: r[n].KeyValueFloat.a
      }, s = at.get(i.id);
      if (s !== void 0) {
        const a = s.parents[0].ID, o = s.parents[0].relationship;
        o.match(/X/) ? e.get(a).curves.x = i : o.match(/Y/) ? e.get(a).curves.y = i : o.match(/Z/) ? e.get(a).curves.z = i : o.match(/d|DeformPercent/) && e.has(a) && (e.get(a).curves.morph = i);
      }
    }
  }
  // parse nodes in FBXTree.Objects.AnimationLayer. Each layers holds references
  // to various AnimationCurveNodes and is referenced by an AnimationStack node
  // note: theoretically a stack can have multiple layers, however in practice there always seems to be one per stack
  parseAnimationLayers(e) {
    const r = Fe.Objects.AnimationLayer, n = /* @__PURE__ */ new Map();
    for (const i in r) {
      const s = [], a = at.get(parseInt(i));
      a !== void 0 && (a.children.forEach(function(l, c) {
        if (e.has(l.ID)) {
          const u = e.get(l.ID);
          if (u.curves.x !== void 0 || u.curves.y !== void 0 || u.curves.z !== void 0) {
            if (s[c] === void 0) {
              const h = at.get(l.ID).parents.filter(function(A) {
                return A.relationship !== void 0;
              })[0].ID;
              if (h !== void 0) {
                const A = Fe.Objects.Model[h.toString()];
                if (A === void 0) {
                  console.warn("THREE.FBXLoader: Encountered a unused curve.", l);
                  return;
                }
                const f = {
                  modelName: A.attrName ? PropertyBinding.sanitizeNodeName(A.attrName) : "",
                  ID: A.id,
                  initialPosition: [0, 0, 0],
                  initialRotation: [0, 0, 0],
                  initialScale: [1, 1, 1]
                };
                Nt.traverse(function(d) {
                  d.ID === A.id && (f.transform = d.matrix, d.userData.transformData && (f.eulerOrder = d.userData.transformData.eulerOrder));
                }), f.transform || (f.transform = new Matrix4()), "PreRotation" in A && (f.preRotation = A.PreRotation.value), "PostRotation" in A && (f.postRotation = A.PostRotation.value), s[c] = f;
              }
            }
            s[c] && (s[c][u.attr] = u);
          } else if (u.curves.morph !== void 0) {
            if (s[c] === void 0) {
              const h = at.get(l.ID).parents.filter(function(E) {
                return E.relationship !== void 0;
              })[0].ID, A = at.get(h).parents[0].ID, f = at.get(A).parents[0].ID, d = at.get(f).parents[0].ID, v = Fe.Objects.Model[d], m = {
                modelName: v.attrName ? PropertyBinding.sanitizeNodeName(v.attrName) : "",
                morphName: Fe.Objects.Deformer[h].attrName
              };
              s[c] = m;
            }
            s[c][u.attr] = u;
          }
        }
      }), n.set(parseInt(i), s));
    }
    return n;
  }
  // parse nodes in FBXTree.Objects.AnimationStack. These are the top level node in the animation
  // hierarchy. Each Stack node will be used to create a AnimationClip
  parseAnimStacks(e) {
    const r = Fe.Objects.AnimationStack, n = {};
    for (const i in r) {
      const s = at.get(parseInt(i)).children;
      s.length > 1 && console.warn(
        "THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers."
      );
      const a = e.get(s[0].ID);
      n[i] = {
        name: r[i].attrName,
        layer: a
      };
    }
    return n;
  }
  addClip(e) {
    let r = [];
    const n = this;
    return e.layer.forEach(function(i) {
      r = r.concat(n.generateTracks(i));
    }), new AnimationClip(e.name, -1, r);
  }
  generateTracks(e) {
    const r = [];
    let n = new Vector3(), i = new Quaternion(), s = new Vector3();
    if (e.transform && e.transform.decompose(n, i, s), n = n.toArray(), i = new Euler().setFromQuaternion(i, e.eulerOrder).toArray(), s = s.toArray(), e.T !== void 0 && Object.keys(e.T.curves).length > 0) {
      const a = this.generateVectorTrack(
        e.modelName,
        e.T.curves,
        n,
        "position"
      );
      a !== void 0 && r.push(a);
    }
    if (e.R !== void 0 && Object.keys(e.R.curves).length > 0) {
      const a = this.generateRotationTrack(
        e.modelName,
        e.R.curves,
        i,
        e.preRotation,
        e.postRotation,
        e.eulerOrder
      );
      a !== void 0 && r.push(a);
    }
    if (e.S !== void 0 && Object.keys(e.S.curves).length > 0) {
      const a = this.generateVectorTrack(e.modelName, e.S.curves, s, "scale");
      a !== void 0 && r.push(a);
    }
    if (e.DeformPercent !== void 0) {
      const a = this.generateMorphTrack(e);
      a !== void 0 && r.push(a);
    }
    return r;
  }
  generateVectorTrack(e, r, n, i) {
    const s = this.getTimesForAllAxes(r), a = this.getKeyframeTrackValues(s, r, n);
    return new VectorKeyframeTrack(e + "." + i, s, a);
  }
  generateRotationTrack(e, r, n, i, s, a) {
    r.x !== void 0 && (this.interpolateRotations(r.x), r.x.values = r.x.values.map(MathUtils.degToRad)), r.y !== void 0 && (this.interpolateRotations(r.y), r.y.values = r.y.values.map(MathUtils.degToRad)), r.z !== void 0 && (this.interpolateRotations(r.z), r.z.values = r.z.values.map(MathUtils.degToRad));
    const o = this.getTimesForAllAxes(r), l = this.getKeyframeTrackValues(o, r, n);
    i !== void 0 && (i = i.map(MathUtils.degToRad), i.push(a), i = new Euler().fromArray(i), i = new Quaternion().setFromEuler(i)), s !== void 0 && (s = s.map(MathUtils.degToRad), s.push(a), s = new Euler().fromArray(s), s = new Quaternion().setFromEuler(s).invert());
    const c = new Quaternion(), u = new Euler(), h = [];
    for (let A = 0; A < l.length; A += 3)
      u.set(l[A], l[A + 1], l[A + 2], a), c.setFromEuler(u), i !== void 0 && c.premultiply(i), s !== void 0 && c.multiply(s), c.toArray(h, A / 3 * 4);
    return new QuaternionKeyframeTrack(e + ".quaternion", o, h);
  }
  generateMorphTrack(e) {
    const r = e.DeformPercent.curves.morph, n = r.values.map(function(s) {
      return s / 100;
    }), i = Nt.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];
    return new NumberKeyframeTrack(
      e.modelName + ".morphTargetInfluences[" + i + "]",
      r.times,
      n
    );
  }
  // For all animated objects, times are defined separately for each axis
  // Here we'll combine the times into one sorted array without duplicates
  getTimesForAllAxes(e) {
    let r = [];
    if (e.x !== void 0 && (r = r.concat(e.x.times)), e.y !== void 0 && (r = r.concat(e.y.times)), e.z !== void 0 && (r = r.concat(e.z.times)), r = r.sort(function(n, i) {
      return n - i;
    }), r.length > 1) {
      let n = 1, i = r[0];
      for (let s = 1; s < r.length; s++) {
        const a = r[s];
        a !== i && (r[n] = a, i = a, n++);
      }
      r = r.slice(0, n);
    }
    return r;
  }
  getKeyframeTrackValues(e, r, n) {
    const i = n, s = [];
    let a = -1, o = -1, l = -1;
    return e.forEach(function(c) {
      if (r.x && (a = r.x.times.indexOf(c)), r.y && (o = r.y.times.indexOf(c)), r.z && (l = r.z.times.indexOf(c)), a !== -1) {
        const u = r.x.values[a];
        s.push(u), i[0] = u;
      } else
        s.push(i[0]);
      if (o !== -1) {
        const u = r.y.values[o];
        s.push(u), i[1] = u;
      } else
        s.push(i[1]);
      if (l !== -1) {
        const u = r.z.values[l];
        s.push(u), i[2] = u;
      } else
        s.push(i[2]);
    }), s;
  }
  // Rotations are defined as Euler angles which can have values  of any size
  // These will be converted to quaternions which don't support values greater than
  // PI, so we'll interpolate large rotations
  interpolateRotations(e) {
    for (let r = 1; r < e.values.length; r++) {
      const n = e.values[r - 1], i = e.values[r] - n, s = Math.abs(i);
      if (s >= 180) {
        const a = s / 180, o = i / a;
        let l = n + o;
        const c = e.times[r - 1], h = (e.times[r] - c) / a;
        let A = c + h;
        const f = [], d = [];
        for (; A < e.times[r]; )
          f.push(A), A += h, d.push(l), l += o;
        e.times = s0(e.times, r, f), e.values = s0(e.values, r, d);
      }
    }
  }
}
class f8 {
  getPrevNode() {
    return this.nodeStack[this.currentIndent - 2];
  }
  getCurrentNode() {
    return this.nodeStack[this.currentIndent - 1];
  }
  getCurrentProp() {
    return this.currentProp;
  }
  pushStack(e) {
    this.nodeStack.push(e), this.currentIndent += 1;
  }
  popStack() {
    this.nodeStack.pop(), this.currentIndent -= 1;
  }
  setCurrentProp(e, r) {
    this.currentProp = e, this.currentPropName = r;
  }
  parse(e) {
    this.currentIndent = 0, this.allNodes = new h2(), this.nodeStack = [], this.currentProp = [], this.currentPropName = "";
    const r = this, n = e.split(/[\r\n]+/);
    return n.forEach(function(i, s) {
      const a = i.match(/^[\s\t]*;/), o = i.match(/^[\s\t]*$/);
      if (a || o)
        return;
      const l = i.match("^\\t{" + r.currentIndent + "}(\\w+):(.*){", ""), c = i.match("^\\t{" + r.currentIndent + "}(\\w+):[\\s\\t\\r\\n](.*)"), u = i.match("^\\t{" + (r.currentIndent - 1) + "}}");
      l ? r.parseNodeBegin(i, l) : c ? r.parseNodeProperty(i, c, n[++s]) : u ? r.popStack() : i.match(/^[^\s\t}]/) && r.parseNodePropertyContinued(i);
    }), this.allNodes;
  }
  parseNodeBegin(e, r) {
    const n = r[1].trim().replace(/^"/, "").replace(/"$/, ""), i = r[2].split(",").map(function(l) {
      return l.trim().replace(/^"/, "").replace(/"$/, "");
    }), s = { name: n }, a = this.parseNodeAttr(i), o = this.getCurrentNode();
    this.currentIndent === 0 ? this.allNodes.add(n, s) : n in o ? (n === "PoseNode" ? o.PoseNode.push(s) : o[n].id !== void 0 && (o[n] = {}, o[n][o[n].id] = o[n]), a.id !== "" && (o[n][a.id] = s)) : typeof a.id == "number" ? (o[n] = {}, o[n][a.id] = s) : n !== "Properties70" && (n === "PoseNode" ? o[n] = [s] : o[n] = s), typeof a.id == "number" && (s.id = a.id), a.name !== "" && (s.attrName = a.name), a.type !== "" && (s.attrType = a.type), this.pushStack(s);
  }
  parseNodeAttr(e) {
    let r = e[0];
    e[0] !== "" && (r = parseInt(e[0]), isNaN(r) && (r = e[0]));
    let n = "", i = "";
    return e.length > 1 && (n = e[1].replace(/^(\w+)::/, ""), i = e[2]), { id: r, name: n, type: i };
  }
  parseNodeProperty(e, r, n) {
    let i = r[1].replace(/^"/, "").replace(/"$/, "").trim(), s = r[2].replace(/^"/, "").replace(/"$/, "").trim();
    i === "Content" && s === "," && (s = n.replace(/"/g, "").replace(/,$/, "").trim());
    const a = this.getCurrentNode();
    if (a.name === "Properties70") {
      this.parseNodeSpecialProperty(e, i, s);
      return;
    }
    if (i === "C") {
      const l = s.split(",").slice(1), c = parseInt(l[0]), u = parseInt(l[1]);
      let h = s.split(",").slice(3);
      h = h.map(function(A) {
        return A.trim().replace(/^"/, "");
      }), i = "connections", s = [c, u], y8(s, h), a[i] === void 0 && (a[i] = []);
    }
    i === "Node" && (a.id = s), i in a && Array.isArray(a[i]) ? a[i].push(s) : i !== "a" ? a[i] = s : a.a = s, this.setCurrentProp(a, i), i === "a" && s.slice(-1) !== "," && (a.a = Zo(s));
  }
  parseNodePropertyContinued(e) {
    const r = this.getCurrentNode();
    r.a += e, e.slice(-1) !== "," && (r.a = Zo(r.a));
  }
  // parse "Property70"
  parseNodeSpecialProperty(e, r, n) {
    const i = n.split('",').map(function(u) {
      return u.trim().replace(/^\"/, "").replace(/\s/, "_");
    }), s = i[0], a = i[1], o = i[2], l = i[3];
    let c = i[4];
    switch (a) {
      case "int":
      case "enum":
      case "bool":
      case "ULongLong":
      case "double":
      case "Number":
      case "FieldOfView":
        c = parseFloat(c);
        break;
      case "Color":
      case "ColorRGB":
      case "Vector3D":
      case "Lcl_Translation":
      case "Lcl_Rotation":
      case "Lcl_Scaling":
        c = Zo(c);
        break;
    }
    this.getPrevNode()[s] = {
      type: a,
      type2: o,
      flag: l,
      value: c
    }, this.setCurrentProp(this.getPrevNode(), s);
  }
}
class p8 {
  parse(e) {
    const r = new n0(e);
    r.skip(23);
    const n = r.getUint32();
    if (n < 6400)
      throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: " + n);
    const i = new h2();
    for (; !this.endOfContent(r); ) {
      const s = this.parseNode(r, n);
      s !== null && i.add(s.name, s);
    }
    return i;
  }
  // Check if reader has reached the end of content.
  endOfContent(e) {
    return e.size() % 16 === 0 ? (e.getOffset() + 160 + 16 & -16) >= e.size() : e.getOffset() + 160 + 16 >= e.size();
  }
  // recursively parse nodes until the end of the file is reached
  parseNode(e, r) {
    const n = {}, i = r >= 7500 ? e.getUint64() : e.getUint32(), s = r >= 7500 ? e.getUint64() : e.getUint32();
    r >= 7500 ? e.getUint64() : e.getUint32();
    const a = e.getUint8(), o = e.getString(a);
    if (i === 0)
      return null;
    const l = [];
    for (let A = 0; A < s; A++)
      l.push(this.parseProperty(e));
    const c = l.length > 0 ? l[0] : "", u = l.length > 1 ? l[1] : "", h = l.length > 2 ? l[2] : "";
    for (n.singleProperty = s === 1 && e.getOffset() === i; i > e.getOffset(); ) {
      const A = this.parseNode(e, r);
      A !== null && this.parseSubNode(o, n, A);
    }
    return n.propertyList = l, typeof c == "number" && (n.id = c), u !== "" && (n.attrName = u), h !== "" && (n.attrType = h), o !== "" && (n.name = o), n;
  }
  parseSubNode(e, r, n) {
    if (n.singleProperty === true) {
      const i = n.propertyList[0];
      Array.isArray(i) ? (r[n.name] = n, n.a = i) : r[n.name] = i;
    } else if (e === "Connections" && n.name === "C") {
      const i = [];
      n.propertyList.forEach(function(s, a) {
        a !== 0 && i.push(s);
      }), r.connections === void 0 && (r.connections = []), r.connections.push(i);
    } else if (n.name === "Properties70")
      Object.keys(n).forEach(function(s) {
        r[s] = n[s];
      });
    else if (e === "Properties70" && n.name === "P") {
      let i = n.propertyList[0], s = n.propertyList[1];
      const a = n.propertyList[2], o = n.propertyList[3];
      let l;
      i.indexOf("Lcl ") === 0 && (i = i.replace("Lcl ", "Lcl_")), s.indexOf("Lcl ") === 0 && (s = s.replace("Lcl ", "Lcl_")), s === "Color" || s === "ColorRGB" || s === "Vector" || s === "Vector3D" || s.indexOf("Lcl_") === 0 ? l = [n.propertyList[4], n.propertyList[5], n.propertyList[6]] : l = n.propertyList[4], r[i] = {
        type: s,
        type2: a,
        flag: o,
        value: l
      };
    } else
      r[n.name] === void 0 ? typeof n.id == "number" ? (r[n.name] = {}, r[n.name][n.id] = n) : r[n.name] = n : n.name === "PoseNode" ? (Array.isArray(r[n.name]) || (r[n.name] = [r[n.name]]), r[n.name].push(n)) : r[n.name][n.id] === void 0 && (r[n.name][n.id] = n);
  }
  parseProperty(e) {
    const r = e.getString(1);
    let n;
    switch (r) {
      case "C":
        return e.getBoolean();
      case "D":
        return e.getFloat64();
      case "F":
        return e.getFloat32();
      case "I":
        return e.getInt32();
      case "L":
        return e.getInt64();
      case "R":
        return n = e.getUint32(), e.getArrayBuffer(n);
      case "S":
        return n = e.getUint32(), e.getString(n);
      case "Y":
        return e.getInt16();
      case "b":
      case "c":
      case "d":
      case "f":
      case "i":
      case "l":
        const i = e.getUint32(), s = e.getUint32(), a = e.getUint32();
        if (s === 0)
          switch (r) {
            case "b":
            case "c":
              return e.getBooleanArray(i);
            case "d":
              return e.getFloat64Array(i);
            case "f":
              return e.getFloat32Array(i);
            case "i":
              return e.getInt32Array(i);
            case "l":
              return e.getInt64Array(i);
          }
        const o = Y5(new Uint8Array(e.getArrayBuffer(a))), l = new n0(o.buffer);
        switch (r) {
          case "b":
          case "c":
            return l.getBooleanArray(i);
          case "d":
            return l.getFloat64Array(i);
          case "f":
            return l.getFloat32Array(i);
          case "i":
            return l.getInt32Array(i);
          case "l":
            return l.getInt64Array(i);
        }
      default:
        throw new Error("THREE.FBXLoader: Unknown property type " + r);
    }
  }
}
class n0 {
  constructor(e, r) {
    this.dv = new DataView(e), this.offset = 0, this.littleEndian = r !== void 0 ? r : true;
  }
  getOffset() {
    return this.offset;
  }
  size() {
    return this.dv.buffer.byteLength;
  }
  skip(e) {
    this.offset += e;
  }
  // seems like true/false representation depends on exporter.
  // true: 1 or 'Y'(=0x59), false: 0 or 'T'(=0x54)
  // then sees LSB.
  getBoolean() {
    return (this.getUint8() & 1) === 1;
  }
  getBooleanArray(e) {
    const r = [];
    for (let n = 0; n < e; n++)
      r.push(this.getBoolean());
    return r;
  }
  getUint8() {
    const e = this.dv.getUint8(this.offset);
    return this.offset += 1, e;
  }
  getInt16() {
    const e = this.dv.getInt16(this.offset, this.littleEndian);
    return this.offset += 2, e;
  }
  getInt32() {
    const e = this.dv.getInt32(this.offset, this.littleEndian);
    return this.offset += 4, e;
  }
  getInt32Array(e) {
    const r = [];
    for (let n = 0; n < e; n++)
      r.push(this.getInt32());
    return r;
  }
  getUint32() {
    const e = this.dv.getUint32(this.offset, this.littleEndian);
    return this.offset += 4, e;
  }
  // JavaScript doesn't support 64-bit integer so calculate this here
  // 1 << 32 will return 1 so using multiply operation instead here.
  // There's a possibility that this method returns wrong value if the value
  // is out of the range between Number.MAX_SAFE_INTEGER and Number.MIN_SAFE_INTEGER.
  // TODO: safely handle 64-bit integer
  getInt64() {
    let e, r;
    return this.littleEndian ? (e = this.getUint32(), r = this.getUint32()) : (r = this.getUint32(), e = this.getUint32()), r & 2147483648 ? (r = ~r & 4294967295, e = ~e & 4294967295, e === 4294967295 && (r = r + 1 & 4294967295), e = e + 1 & 4294967295, -(r * 4294967296 + e)) : r * 4294967296 + e;
  }
  getInt64Array(e) {
    const r = [];
    for (let n = 0; n < e; n++)
      r.push(this.getInt64());
    return r;
  }
  // Note: see getInt64() comment
  getUint64() {
    let e, r;
    return this.littleEndian ? (e = this.getUint32(), r = this.getUint32()) : (r = this.getUint32(), e = this.getUint32()), r * 4294967296 + e;
  }
  getFloat32() {
    const e = this.dv.getFloat32(this.offset, this.littleEndian);
    return this.offset += 4, e;
  }
  getFloat32Array(e) {
    const r = [];
    for (let n = 0; n < e; n++)
      r.push(this.getFloat32());
    return r;
  }
  getFloat64() {
    const e = this.dv.getFloat64(this.offset, this.littleEndian);
    return this.offset += 8, e;
  }
  getFloat64Array(e) {
    const r = [];
    for (let n = 0; n < e; n++)
      r.push(this.getFloat64());
    return r;
  }
  getArrayBuffer(e) {
    const r = this.dv.buffer.slice(this.offset, this.offset + e);
    return this.offset += e, r;
  }
  getString(e) {
    let r = [];
    for (let i = 0; i < e; i++)
      r[i] = this.getUint8();
    const n = r.indexOf(0);
    return n >= 0 && (r = r.slice(0, n)), LoaderUtils.decodeText(new Uint8Array(r));
  }
}
class h2 {
  add(e, r) {
    this[e] = r;
  }
}
function d8(t) {
  const e = "Kaydara FBX Binary  \0";
  return t.byteLength >= e.length && e === p2(t, 0, e.length);
}
function g8(t) {
  const e = [
    "K",
    "a",
    "y",
    "d",
    "a",
    "r",
    "a",
    "\\",
    "F",
    "B",
    "X",
    "\\",
    "B",
    "i",
    "n",
    "a",
    "r",
    "y",
    "\\",
    "\\"
  ];
  let r = 0;
  function n(i) {
    const s = t[i - 1];
    return t = t.slice(r + i), r++, s;
  }
  for (let i = 0; i < e.length; ++i)
    if (n(1) === e[i])
      return false;
  return true;
}
function i0(t) {
  const e = /FBXVersion: (\d+)/, r = t.match(e);
  if (r)
    return parseInt(r[1]);
  throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.");
}
function m8(t) {
  return t / 46186158e3;
}
const v8 = [];
function aa(t, e, r, n) {
  let i;
  switch (n.mappingType) {
    case "ByPolygonVertex":
      i = t;
      break;
    case "ByPolygon":
      i = e;
      break;
    case "ByVertice":
      i = r;
      break;
    case "AllSame":
      i = n.indices[0];
      break;
    default:
      console.warn("THREE.FBXLoader: unknown attribute mapping type " + n.mappingType);
  }
  n.referenceType === "IndexToDirect" && (i = n.indices[i]);
  const s = i * n.dataSize, a = s + n.dataSize;
  return E8(v8, n.buffer, s, a);
}
const $o = /* @__PURE__ */ new Euler(), Ii = /* @__PURE__ */ new Vector3();
function A2(t) {
  const e = new Matrix4(), r = new Matrix4(), n = new Matrix4(), i = new Matrix4(), s = new Matrix4(), a = new Matrix4(), o = new Matrix4(), l = new Matrix4(), c = new Matrix4(), u = new Matrix4(), h = new Matrix4(), A = new Matrix4(), f = t.inheritType ? t.inheritType : 0;
  if (t.translation && e.setPosition(Ii.fromArray(t.translation)), t.preRotation) {
    const R = t.preRotation.map(MathUtils.degToRad);
    R.push(t.eulerOrder), r.makeRotationFromEuler($o.fromArray(R));
  }
  if (t.rotation) {
    const R = t.rotation.map(MathUtils.degToRad);
    R.push(t.eulerOrder), n.makeRotationFromEuler($o.fromArray(R));
  }
  if (t.postRotation) {
    const R = t.postRotation.map(MathUtils.degToRad);
    R.push(t.eulerOrder), i.makeRotationFromEuler($o.fromArray(R)), i.invert();
  }
  t.scale && s.scale(Ii.fromArray(t.scale)), t.scalingOffset && o.setPosition(Ii.fromArray(t.scalingOffset)), t.scalingPivot && a.setPosition(Ii.fromArray(t.scalingPivot)), t.rotationOffset && l.setPosition(Ii.fromArray(t.rotationOffset)), t.rotationPivot && c.setPosition(Ii.fromArray(t.rotationPivot)), t.parentMatrixWorld && (h.copy(t.parentMatrix), u.copy(t.parentMatrixWorld));
  const d = r.clone().multiply(n).multiply(i), v = new Matrix4();
  v.extractRotation(u);
  const m = new Matrix4();
  m.copyPosition(u);
  const E = m.clone().invert().multiply(u), y = v.clone().invert().multiply(E), p = s, g = new Matrix4();
  if (f === 0)
    g.copy(v).multiply(d).multiply(y).multiply(p);
  else if (f === 1)
    g.copy(v).multiply(y).multiply(d).multiply(p);
  else {
    const _ = new Matrix4().scale(new Vector3().setFromMatrixScale(h)).clone().invert(), F = y.clone().multiply(_);
    g.copy(v).multiply(d).multiply(F).multiply(p);
  }
  const C = c.clone().invert(), S = a.clone().invert();
  let x = e.clone().multiply(l).multiply(c).multiply(r).multiply(n).multiply(i).multiply(C).multiply(o).multiply(a).multiply(s).multiply(S);
  const T = new Matrix4().copyPosition(x), B = u.clone().multiply(T);
  return A.copyPosition(B), x = A.clone().multiply(g), x.premultiply(u.invert()), x;
}
function f2(t) {
  t = t || 0;
  const e = [
    "ZYX",
    // -> XYZ extrinsic
    "YZX",
    // -> XZY extrinsic
    "XZY",
    // -> YZX extrinsic
    "ZXY",
    // -> YXZ extrinsic
    "YXZ",
    // -> ZXY extrinsic
    "XYZ"
    // -> ZYX extrinsic
    //'SphericXYZ', // not possible to support
  ];
  return t === 6 ? (console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."), e[0]) : e[t];
}
function Zo(t) {
  return t.split(",").map(function(r) {
    return parseFloat(r);
  });
}
function p2(t, e, r) {
  return e === void 0 && (e = 0), r === void 0 && (r = t.byteLength), LoaderUtils.decodeText(new Uint8Array(t, e, r));
}
function y8(t, e) {
  for (let r = 0, n = t.length, i = e.length; r < i; r++, n++)
    t[n] = e[r];
}
function E8(t, e, r, n) {
  for (let i = r, s = 0; i < n; i++, s++)
    t[s] = e[i];
  return t;
}
function s0(t, e, r) {
  return t.slice(0, e).concat(r).concat(t.slice(e));
}
class I8 extends Loader {
  constructor(e) {
    super(e);
  }
  load(e, r, n, i) {
    const s = new FileLoader(this.manager);
    s.setPath(this.path), s.setRequestHeader(this.requestHeader), s.setWithCredentials(this.withCredentials), s.load(
      e,
      (a) => {
        if (typeof a != "string")
          throw new Error("unsupported data type");
        const o = JSON.parse(a), l = this.parse(o);
        r && r(l);
      },
      n,
      i
    );
  }
  loadAsync(e, r) {
    return super.loadAsync(e, r);
  }
  parse(e) {
    return new bc(e);
  }
}
class bc {
  constructor(e) {
    b(this, "data"), this.data = e;
  }
  generateShapes(e, r = 100, n) {
    const i = [], s = { letterSpacing: 0, lineHeight: 1, ...n }, a = C8(e, r, this.data, s);
    for (let o = 0, l = a.length; o < l; o++)
      Array.prototype.push.apply(i, a[o].toShapes(false));
    return i;
  }
}
b(bc, "isFont");
b(bc, "type");
function C8(t, e, r, n) {
  const i = Array.from(t), s = e / r.resolution, a = (r.boundingBox.yMax - r.boundingBox.yMin + r.underlineThickness) * s, o = [];
  let l = 0, c = 0;
  for (let u = 0; u < i.length; u++) {
    const h = i[u];
    if (h === `
`)
      l = 0, c -= a * n.lineHeight;
    else {
      const A = x8(h, s, l, c, r);
      A && (l += A.offsetX + n.letterSpacing, o.push(A.path));
    }
  }
  return o;
}
function x8(t, e, r, n, i) {
  const s = i.glyphs[t] || i.glyphs["?"];
  if (!s) {
    console.error('THREE.Font: character "' + t + '" does not exists in font family ' + i.familyName + ".");
    return;
  }
  const a = new ShapePath();
  let o, l, c, u, h, A, f, d;
  if (s.o) {
    const v = s._cachedOutline || (s._cachedOutline = s.o.split(" "));
    for (let m = 0, E = v.length; m < E; )
      switch (v[m++]) {
        case "m":
          o = parseInt(v[m++]) * e + r, l = parseInt(v[m++]) * e + n, a.moveTo(o, l);
          break;
        case "l":
          o = parseInt(v[m++]) * e + r, l = parseInt(v[m++]) * e + n, a.lineTo(o, l);
          break;
        case "q":
          c = parseInt(v[m++]) * e + r, u = parseInt(v[m++]) * e + n, h = parseInt(v[m++]) * e + r, A = parseInt(v[m++]) * e + n, a.quadraticCurveTo(h, A, c, u);
          break;
        case "b":
          c = parseInt(v[m++]) * e + r, u = parseInt(v[m++]) * e + n, h = parseInt(v[m++]) * e + r, A = parseInt(v[m++]) * e + n, f = parseInt(v[m++]) * e + r, d = parseInt(v[m++]) * e + n, a.bezierCurveTo(h, A, f, d, c, u);
          break;
      }
  }
  return { offsetX: s.ha * e, path: a };
}
class T8 extends Texture {
  constructor(e = null, r = 1, n = 1, i = 1) {
    super(null), this.isData3DTexture = true, this.image = { data: e, width: r, height: n, depth: i }, this.magFilter = NearestFilter, this.minFilter = NearestFilter, this.wrapR = ClampToEdgeWrapping, this.generateMipmaps = false, this.flipY = false, this.unpackAlignment = 1;
  }
}
var S8 = typeof global == "object" && global && global.Object === Object && global;
const d2 = S8;
var w8 = typeof self == "object" && self && self.Object === Object && self, B8 = d2 || w8 || Function("return this")();
const Wr = B8;
var b8 = Wr.Symbol;
const cr = b8;
var g2 = Object.prototype, _8 = g2.hasOwnProperty, R8 = g2.toString, ji = cr ? cr.toStringTag : void 0;
function M8(t) {
  var e = _8.call(t, ji), r = t[ji];
  try {
    t[ji] = void 0;
    var n = true;
  } catch {
  }
  var i = R8.call(t);
  return n && (e ? t[ji] = r : delete t[ji]), i;
}
var D8 = Object.prototype, k8 = D8.toString;
function F8(t) {
  return k8.call(t);
}
var L8 = "[object Null]", O8 = "[object Undefined]", a0 = cr ? cr.toStringTag : void 0;
function Yn(t) {
  return t == null ? t === void 0 ? O8 : L8 : a0 && a0 in Object(t) ? M8(t) : F8(t);
}
function Sr(t) {
  return t != null && typeof t == "object";
}
var P8 = "[object Symbol]";
function oo(t) {
  return typeof t == "symbol" || Sr(t) && Yn(t) == P8;
}
function Fs(t, e) {
  for (var r = -1, n = t == null ? 0 : t.length, i = Array(n); ++r < n; )
    i[r] = e(t[r], r, t);
  return i;
}
var Q8 = Array.isArray;
const Ne = Q8;
var N8 = 1 / 0, o0 = cr ? cr.prototype : void 0, l0 = o0 ? o0.toString : void 0;
function m2(t) {
  if (typeof t == "string")
    return t;
  if (Ne(t))
    return Fs(t, m2) + "";
  if (oo(t))
    return l0 ? l0.call(t) : "";
  var e = t + "";
  return e == "0" && 1 / t == -N8 ? "-0" : e;
}
var U8 = /\s/;
function G8(t) {
  for (var e = t.length; e-- && U8.test(t.charAt(e)); )
    ;
  return e;
}
var H8 = /^\s+/;
function V8(t) {
  return t && t.slice(0, G8(t) + 1).replace(H8, "");
}
function ur(t) {
  var e = typeof t;
  return t != null && (e == "object" || e == "function");
}
var c0 = 0 / 0, z8 = /^[-+]0x[0-9a-f]+$/i, Y8 = /^0b[01]+$/i, W8 = /^0o[0-7]+$/i, j8 = parseInt;
function q8(t) {
  if (typeof t == "number")
    return t;
  if (oo(t))
    return c0;
  if (ur(t)) {
    var e = typeof t.valueOf == "function" ? t.valueOf() : t;
    t = ur(e) ? e + "" : e;
  }
  if (typeof t != "string")
    return t === 0 ? t : +t;
  t = V8(t);
  var r = Y8.test(t);
  return r || W8.test(t) ? j8(t.slice(2), r ? 2 : 8) : z8.test(t) ? c0 : +t;
}
var u0 = 1 / 0, K8 = 17976931348623157e292;
function X8(t) {
  if (!t)
    return t === 0 ? t : 0;
  if (t = q8(t), t === u0 || t === -u0) {
    var e = t < 0 ? -1 : 1;
    return e * K8;
  }
  return t === t ? t : 0;
}
function Ls(t) {
  var e = X8(t), r = e % 1;
  return e === e ? r ? e - r : e : 0;
}
function Fi(t) {
  return t;
}
var $8 = "[object AsyncFunction]", Z8 = "[object Function]", J8 = "[object GeneratorFunction]", eg = "[object Proxy]";
function fn(t) {
  if (!ur(t))
    return false;
  var e = Yn(t);
  return e == Z8 || e == J8 || e == $8 || e == eg;
}
var tg = Wr["__core-js_shared__"];
const Jo = tg;
var h0 = function() {
  var t = /[^.]+$/.exec(Jo && Jo.keys && Jo.keys.IE_PROTO || "");
  return t ? "Symbol(src)_1." + t : "";
}();
function rg(t) {
  return !!h0 && h0 in t;
}
var ng = Function.prototype, ig = ng.toString;
function pi(t) {
  if (t != null) {
    try {
      return ig.call(t);
    } catch {
    }
    try {
      return t + "";
    } catch {
    }
  }
  return "";
}
var sg = /[\\^$.*+?()[\]{}|]/g, ag = /^\[object .+?Constructor\]$/, og = Function.prototype, lg = Object.prototype, cg = og.toString, ug = lg.hasOwnProperty, hg = RegExp(
  "^" + cg.call(ug).replace(sg, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"
);
function Ag(t) {
  if (!ur(t) || rg(t))
    return false;
  var e = fn(t) ? hg : ag;
  return e.test(pi(t));
}
function fg(t, e) {
  return t == null ? void 0 : t[e];
}
function di(t, e) {
  var r = fg(t, e);
  return Ag(r) ? r : void 0;
}
var pg = di(Wr, "WeakMap");
const $l = pg;
var A0 = Object.create, dg = function() {
  function t() {
  }
  return function(e) {
    if (!ur(e))
      return {};
    if (A0)
      return A0(e);
    t.prototype = e;
    var r = new t();
    return t.prototype = void 0, r;
  };
}();
const gg = dg;
function mg(t, e, r) {
  switch (r.length) {
    case 0:
      return t.call(e);
    case 1:
      return t.call(e, r[0]);
    case 2:
      return t.call(e, r[0], r[1]);
    case 3:
      return t.call(e, r[0], r[1], r[2]);
  }
  return t.apply(e, r);
}
function At() {
}
function vg(t, e) {
  var r = -1, n = t.length;
  for (e || (e = Array(n)); ++r < n; )
    e[r] = t[r];
  return e;
}
var yg = 800, Eg = 16, Ig = Date.now;
function Cg(t) {
  var e = 0, r = 0;
  return function() {
    var n = Ig(), i = Eg - (n - r);
    if (r = n, i > 0) {
      if (++e >= yg)
        return arguments[0];
    } else
      e = 0;
    return t.apply(void 0, arguments);
  };
}
function xg(t) {
  return function() {
    return t;
  };
}
var Tg = function() {
  try {
    var t = di(Object, "defineProperty");
    return t({}, "", {}), t;
  } catch {
  }
}();
const Na = Tg;
var Sg = Na ? function(t, e) {
  return Na(t, "toString", {
    configurable: true,
    enumerable: false,
    value: xg(e),
    writable: true
  });
} : Fi;
const wg = Sg;
var Bg = Cg(wg);
const bg = Bg;
function v2(t, e) {
  for (var r = -1, n = t == null ? 0 : t.length; ++r < n && e(t[r], r, t) !== false; )
    ;
  return t;
}
function y2(t, e, r, n) {
  for (var i = t.length, s = r + (n ? 1 : -1); n ? s-- : ++s < i; )
    if (e(t[s], s, t))
      return s;
  return -1;
}
function _g(t) {
  return t !== t;
}
function Rg(t, e, r) {
  for (var n = r - 1, i = t.length; ++n < i; )
    if (t[n] === e)
      return n;
  return -1;
}
function _c(t, e, r) {
  return e === e ? Rg(t, e, r) : y2(t, _g, r);
}
function E2(t, e) {
  var r = t == null ? 0 : t.length;
  return !!r && _c(t, e, 0) > -1;
}
var Mg = 9007199254740991, Dg = /^(?:0|[1-9]\d*)$/;
function lo(t, e) {
  var r = typeof t;
  return e = e ?? Mg, !!e && (r == "number" || r != "symbol" && Dg.test(t)) && t > -1 && t % 1 == 0 && t < e;
}
function Rc(t, e, r) {
  e == "__proto__" && Na ? Na(t, e, {
    configurable: true,
    enumerable: true,
    value: r,
    writable: true
  }) : t[e] = r;
}
function Os(t, e) {
  return t === e || t !== t && e !== e;
}
var kg = Object.prototype, Fg = kg.hasOwnProperty;
function co(t, e, r) {
  var n = t[e];
  (!(Fg.call(t, e) && Os(n, r)) || r === void 0 && !(e in t)) && Rc(t, e, r);
}
function Ps(t, e, r, n) {
  var i = !r;
  r || (r = {});
  for (var s = -1, a = e.length; ++s < a; ) {
    var o = e[s], l = n ? n(r[o], t[o], o, r, t) : void 0;
    l === void 0 && (l = t[o]), i ? Rc(r, o, l) : co(r, o, l);
  }
  return r;
}
var f0 = Math.max;
function Lg(t, e, r) {
  return e = f0(e === void 0 ? t.length - 1 : e, 0), function() {
    for (var n = arguments, i = -1, s = f0(n.length - e, 0), a = Array(s); ++i < s; )
      a[i] = n[e + i];
    i = -1;
    for (var o = Array(e + 1); ++i < e; )
      o[i] = n[i];
    return o[e] = r(a), mg(t, this, o);
  };
}
function Mc(t, e) {
  return bg(Lg(t, e, Fi), t + "");
}
var Og = 9007199254740991;
function Dc(t) {
  return typeof t == "number" && t > -1 && t % 1 == 0 && t <= Og;
}
function jr(t) {
  return t != null && Dc(t.length) && !fn(t);
}
function uo(t, e, r) {
  if (!ur(r))
    return false;
  var n = typeof e;
  return (n == "number" ? jr(r) && lo(e, r.length) : n == "string" && e in r) ? Os(r[e], t) : false;
}
function Pg(t) {
  return Mc(function(e, r) {
    var n = -1, i = r.length, s = i > 1 ? r[i - 1] : void 0, a = i > 2 ? r[2] : void 0;
    for (s = t.length > 3 && typeof s == "function" ? (i--, s) : void 0, a && uo(r[0], r[1], a) && (s = i < 3 ? void 0 : s, i = 1), e = Object(e); ++n < i; ) {
      var o = r[n];
      o && t(e, o, n, s);
    }
    return e;
  });
}
var Qg = Object.prototype;
function Qs(t) {
  var e = t && t.constructor, r = typeof e == "function" && e.prototype || Qg;
  return t === r;
}
function Ng(t, e) {
  for (var r = -1, n = Array(t); ++r < t; )
    n[r] = e(r);
  return n;
}
var Ug = "[object Arguments]";
function p0(t) {
  return Sr(t) && Yn(t) == Ug;
}
var I2 = Object.prototype, Gg = I2.hasOwnProperty, Hg = I2.propertyIsEnumerable, Vg = p0(function() {
  return arguments;
}()) ? p0 : function(t) {
  return Sr(t) && Gg.call(t, "callee") && !Hg.call(t, "callee");
};
const ho = Vg;
function zg() {
  return false;
}
var C2 = typeof exports == "object" && exports && !exports.nodeType && exports, d0 = C2 && typeof module == "object" && module && !module.nodeType && module, Yg = d0 && d0.exports === C2, g0 = Yg ? Wr.Buffer : void 0, Wg = g0 ? g0.isBuffer : void 0, jg = Wg || zg;
const Es = jg;
var qg = "[object Arguments]", Kg = "[object Array]", Xg = "[object Boolean]", $g = "[object Date]", Zg = "[object Error]", Jg = "[object Function]", e4 = "[object Map]", t4 = "[object Number]", r4 = "[object Object]", n4 = "[object RegExp]", i4 = "[object Set]", s4 = "[object String]", a4 = "[object WeakMap]", o4 = "[object ArrayBuffer]", l4 = "[object DataView]", c4 = "[object Float32Array]", u4 = "[object Float64Array]", h4 = "[object Int8Array]", A4 = "[object Int16Array]", f4 = "[object Int32Array]", p4 = "[object Uint8Array]", d4 = "[object Uint8ClampedArray]", g4 = "[object Uint16Array]", m4 = "[object Uint32Array]", $e = {};
$e[c4] = $e[u4] = $e[h4] = $e[A4] = $e[f4] = $e[p4] = $e[d4] = $e[g4] = $e[m4] = true;
$e[qg] = $e[Kg] = $e[o4] = $e[Xg] = $e[l4] = $e[$g] = $e[Zg] = $e[Jg] = $e[e4] = $e[t4] = $e[r4] = $e[n4] = $e[i4] = $e[s4] = $e[a4] = false;
function v4(t) {
  return Sr(t) && Dc(t.length) && !!$e[Yn(t)];
}
function Ns(t) {
  return function(e) {
    return t(e);
  };
}
var x2 = typeof exports == "object" && exports && !exports.nodeType && exports, As = x2 && typeof module == "object" && module && !module.nodeType && module, y4 = As && As.exports === x2, el = y4 && d2.process, E4 = function() {
  try {
    var t = As && As.require && As.require("util").types;
    return t || el && el.binding && el.binding("util");
  } catch {
  }
}();
const Nn = E4;
var m0 = Nn && Nn.isTypedArray, I4 = m0 ? Ns(m0) : v4;
const kc = I4;
var C4 = Object.prototype, x4 = C4.hasOwnProperty;
function T2(t, e) {
  var r = Ne(t), n = !r && ho(t), i = !r && !n && Es(t), s = !r && !n && !i && kc(t), a = r || n || i || s, o = a ? Ng(t.length, String) : [], l = o.length;
  for (var c in t)
    (e || x4.call(t, c)) && !(a && // Safari 9 has enumerable `arguments.length` in strict mode.
    (c == "length" || // Node.js 0.10 has enumerable non-index properties on buffers.
    i && (c == "offset" || c == "parent") || // PhantomJS 2 has enumerable non-index properties on typed arrays.
    s && (c == "buffer" || c == "byteLength" || c == "byteOffset") || // Skip index properties.
    lo(c, l))) && o.push(c);
  return o;
}
function S2(t, e) {
  return function(r) {
    return t(e(r));
  };
}
var T4 = S2(Object.keys, Object);
const S4 = T4;
var w4 = Object.prototype, B4 = w4.hasOwnProperty;
function w2(t) {
  if (!Qs(t))
    return S4(t);
  var e = [];
  for (var r in Object(t))
    B4.call(t, r) && r != "constructor" && e.push(r);
  return e;
}
function Kt(t) {
  return jr(t) ? T2(t) : w2(t);
}
var b4 = Object.prototype, _4 = b4.hasOwnProperty, R4 = Pg(function(t, e) {
  if (Qs(e) || jr(e)) {
    Ps(e, Kt(e), t);
    return;
  }
  for (var r in e)
    _4.call(e, r) && co(t, r, e[r]);
});
const Xt = R4;
function M4(t) {
  var e = [];
  if (t != null)
    for (var r in Object(t))
      e.push(r);
  return e;
}
var D4 = Object.prototype, k4 = D4.hasOwnProperty;
function F4(t) {
  if (!ur(t))
    return M4(t);
  var e = Qs(t), r = [];
  for (var n in t)
    n == "constructor" && (e || !k4.call(t, n)) || r.push(n);
  return r;
}
function Ao(t) {
  return jr(t) ? T2(t, true) : F4(t);
}
var L4 = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/, O4 = /^\w*$/;
function Fc(t, e) {
  if (Ne(t))
    return false;
  var r = typeof t;
  return r == "number" || r == "symbol" || r == "boolean" || t == null || oo(t) ? true : O4.test(t) || !L4.test(t) || e != null && t in Object(e);
}
var P4 = di(Object, "create");
const Is = P4;
function Q4() {
  this.__data__ = Is ? Is(null) : {}, this.size = 0;
}
function N4(t) {
  var e = this.has(t) && delete this.__data__[t];
  return this.size -= e ? 1 : 0, e;
}
var U4 = "__lodash_hash_undefined__", G4 = Object.prototype, H4 = G4.hasOwnProperty;
function V4(t) {
  var e = this.__data__;
  if (Is) {
    var r = e[t];
    return r === U4 ? void 0 : r;
  }
  return H4.call(e, t) ? e[t] : void 0;
}
var z4 = Object.prototype, Y4 = z4.hasOwnProperty;
function W4(t) {
  var e = this.__data__;
  return Is ? e[t] !== void 0 : Y4.call(e, t);
}
var j4 = "__lodash_hash_undefined__";
function q4(t, e) {
  var r = this.__data__;
  return this.size += this.has(t) ? 0 : 1, r[t] = Is && e === void 0 ? j4 : e, this;
}
function ci(t) {
  var e = -1, r = t == null ? 0 : t.length;
  for (this.clear(); ++e < r; ) {
    var n = t[e];
    this.set(n[0], n[1]);
  }
}
ci.prototype.clear = Q4;
ci.prototype.delete = N4;
ci.prototype.get = V4;
ci.prototype.has = W4;
ci.prototype.set = q4;
function K4() {
  this.__data__ = [], this.size = 0;
}
function fo(t, e) {
  for (var r = t.length; r--; )
    if (Os(t[r][0], e))
      return r;
  return -1;
}
var X4 = Array.prototype, $4 = X4.splice;
function Z4(t) {
  var e = this.__data__, r = fo(e, t);
  if (r < 0)
    return false;
  var n = e.length - 1;
  return r == n ? e.pop() : $4.call(e, r, 1), --this.size, true;
}
function J4(t) {
  var e = this.__data__, r = fo(e, t);
  return r < 0 ? void 0 : e[r][1];
}
function em(t) {
  return fo(this.__data__, t) > -1;
}
function tm(t, e) {
  var r = this.__data__, n = fo(r, t);
  return n < 0 ? (++this.size, r.push([t, e])) : r[n][1] = e, this;
}
function pn(t) {
  var e = -1, r = t == null ? 0 : t.length;
  for (this.clear(); ++e < r; ) {
    var n = t[e];
    this.set(n[0], n[1]);
  }
}
pn.prototype.clear = K4;
pn.prototype.delete = Z4;
pn.prototype.get = J4;
pn.prototype.has = em;
pn.prototype.set = tm;
var rm = di(Wr, "Map");
const Cs = rm;
function nm() {
  this.size = 0, this.__data__ = {
    hash: new ci(),
    map: new (Cs || pn)(),
    string: new ci()
  };
}
function im(t) {
  var e = typeof t;
  return e == "string" || e == "number" || e == "symbol" || e == "boolean" ? t !== "__proto__" : t === null;
}
function po(t, e) {
  var r = t.__data__;
  return im(e) ? r[typeof e == "string" ? "string" : "hash"] : r.map;
}
function sm(t) {
  var e = po(this, t).delete(t);
  return this.size -= e ? 1 : 0, e;
}
function am(t) {
  return po(this, t).get(t);
}
function om(t) {
  return po(this, t).has(t);
}
function lm(t, e) {
  var r = po(this, t), n = r.size;
  return r.set(t, e), this.size += r.size == n ? 0 : 1, this;
}
function dn(t) {
  var e = -1, r = t == null ? 0 : t.length;
  for (this.clear(); ++e < r; ) {
    var n = t[e];
    this.set(n[0], n[1]);
  }
}
dn.prototype.clear = nm;
dn.prototype.delete = sm;
dn.prototype.get = am;
dn.prototype.has = om;
dn.prototype.set = lm;
var cm = "Expected a function";
function Lc(t, e) {
  if (typeof t != "function" || e != null && typeof e != "function")
    throw new TypeError(cm);
  var r = function() {
    var n = arguments, i = e ? e.apply(this, n) : n[0], s = r.cache;
    if (s.has(i))
      return s.get(i);
    var a = t.apply(this, n);
    return r.cache = s.set(i, a) || s, a;
  };
  return r.cache = new (Lc.Cache || dn)(), r;
}
Lc.Cache = dn;
var um = 500;
function hm(t) {
  var e = Lc(t, function(n) {
    return r.size === um && r.clear(), n;
  }), r = e.cache;
  return e;
}
var Am = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g, fm = /\\(\\)?/g, pm = hm(function(t) {
  var e = [];
  return t.charCodeAt(0) === 46 && e.push(""), t.replace(Am, function(r, n, i, s) {
    e.push(i ? s.replace(fm, "$1") : n || r);
  }), e;
});
const dm = pm;
function gm(t) {
  return t == null ? "" : m2(t);
}
function go(t, e) {
  return Ne(t) ? t : Fc(t, e) ? [t] : dm(gm(t));
}
var mm = 1 / 0;
function Us(t) {
  if (typeof t == "string" || oo(t))
    return t;
  var e = t + "";
  return e == "0" && 1 / t == -mm ? "-0" : e;
}
function Oc(t, e) {
  e = go(e, t);
  for (var r = 0, n = e.length; t != null && r < n; )
    t = t[Us(e[r++])];
  return r && r == n ? t : void 0;
}
function vm(t, e, r) {
  var n = t == null ? void 0 : Oc(t, e);
  return n === void 0 ? r : n;
}
function Pc(t, e) {
  for (var r = -1, n = e.length, i = t.length; ++r < n; )
    t[i + r] = e[r];
  return t;
}
var v0 = cr ? cr.isConcatSpreadable : void 0;
function ym(t) {
  return Ne(t) || ho(t) || !!(v0 && t && t[v0]);
}
function mo(t, e, r, n, i) {
  var s = -1, a = t.length;
  for (r || (r = ym), i || (i = []); ++s < a; ) {
    var o = t[s];
    e > 0 && r(o) ? e > 1 ? mo(o, e - 1, r, n, i) : Pc(i, o) : n || (i[i.length] = o);
  }
  return i;
}
function Er(t) {
  var e = t == null ? 0 : t.length;
  return e ? mo(t, 1) : [];
}
var Em = S2(Object.getPrototypeOf, Object);
const B2 = Em;
function b2(t, e, r) {
  var n = -1, i = t.length;
  e < 0 && (e = -e > i ? 0 : i + e), r = r > i ? i : r, r < 0 && (r += i), i = e > r ? 0 : r - e >>> 0, e >>>= 0;
  for (var s = Array(i); ++n < i; )
    s[n] = t[n + e];
  return s;
}
function Im(t, e, r, n) {
  var i = -1, s = t == null ? 0 : t.length;
  for (n && s && (r = t[++i]); ++i < s; )
    r = e(r, t[i], i, t);
  return r;
}
function Cm() {
  this.__data__ = new pn(), this.size = 0;
}
function xm(t) {
  var e = this.__data__, r = e.delete(t);
  return this.size = e.size, r;
}
function Tm(t) {
  return this.__data__.get(t);
}
function Sm(t) {
  return this.__data__.has(t);
}
var wm = 200;
function Bm(t, e) {
  var r = this.__data__;
  if (r instanceof pn) {
    var n = r.__data__;
    if (!Cs || n.length < wm - 1)
      return n.push([t, e]), this.size = ++r.size, this;
    r = this.__data__ = new dn(n);
  }
  return r.set(t, e), this.size = r.size, this;
}
function zr(t) {
  var e = this.__data__ = new pn(t);
  this.size = e.size;
}
zr.prototype.clear = Cm;
zr.prototype.delete = xm;
zr.prototype.get = Tm;
zr.prototype.has = Sm;
zr.prototype.set = Bm;
function bm(t, e) {
  return t && Ps(e, Kt(e), t);
}
function _m(t, e) {
  return t && Ps(e, Ao(e), t);
}
var _2 = typeof exports == "object" && exports && !exports.nodeType && exports, y0 = _2 && typeof module == "object" && module && !module.nodeType && module, Rm = y0 && y0.exports === _2, E0 = Rm ? Wr.Buffer : void 0, I0 = E0 ? E0.allocUnsafe : void 0;
function Mm(t, e) {
  if (e)
    return t.slice();
  var r = t.length, n = I0 ? I0(r) : new t.constructor(r);
  return t.copy(n), n;
}
function Qc(t, e) {
  for (var r = -1, n = t == null ? 0 : t.length, i = 0, s = []; ++r < n; ) {
    var a = t[r];
    e(a, r, t) && (s[i++] = a);
  }
  return s;
}
function R2() {
  return [];
}
var Dm = Object.prototype, km = Dm.propertyIsEnumerable, C0 = Object.getOwnPropertySymbols, Fm = C0 ? function(t) {
  return t == null ? [] : (t = Object(t), Qc(C0(t), function(e) {
    return km.call(t, e);
  }));
} : R2;
const Nc = Fm;
function Lm(t, e) {
  return Ps(t, Nc(t), e);
}
var Om = Object.getOwnPropertySymbols, Pm = Om ? function(t) {
  for (var e = []; t; )
    Pc(e, Nc(t)), t = B2(t);
  return e;
} : R2;
const M2 = Pm;
function Qm(t, e) {
  return Ps(t, M2(t), e);
}
function D2(t, e, r) {
  var n = e(t);
  return Ne(t) ? n : Pc(n, r(t));
}
function Zl(t) {
  return D2(t, Kt, Nc);
}
function k2(t) {
  return D2(t, Ao, M2);
}
var Nm = di(Wr, "DataView");
const Jl = Nm;
var Um = di(Wr, "Promise");
const ec = Um;
var Gm = di(Wr, "Set");
const Ri = Gm;
var x0 = "[object Map]", Hm = "[object Object]", T0 = "[object Promise]", S0 = "[object Set]", w0 = "[object WeakMap]", B0 = "[object DataView]", Vm = pi(Jl), zm = pi(Cs), Ym = pi(ec), Wm = pi(Ri), jm = pi($l), ni = Yn;
(Jl && ni(new Jl(new ArrayBuffer(1))) != B0 || Cs && ni(new Cs()) != x0 || ec && ni(ec.resolve()) != T0 || Ri && ni(new Ri()) != S0 || $l && ni(new $l()) != w0) && (ni = function(t) {
  var e = Yn(t), r = e == Hm ? t.constructor : void 0, n = r ? pi(r) : "";
  if (n)
    switch (n) {
      case Vm:
        return B0;
      case zm:
        return x0;
      case Ym:
        return T0;
      case Wm:
        return S0;
      case jm:
        return w0;
    }
  return e;
});
const Li = ni;
var qm = Object.prototype, Km = qm.hasOwnProperty;
function Xm(t) {
  var e = t.length, r = new t.constructor(e);
  return e && typeof t[0] == "string" && Km.call(t, "index") && (r.index = t.index, r.input = t.input), r;
}
var $m = Wr.Uint8Array;
const Ua = $m;
function Uc(t) {
  var e = new t.constructor(t.byteLength);
  return new Ua(e).set(new Ua(t)), e;
}
function Zm(t, e) {
  var r = e ? Uc(t.buffer) : t.buffer;
  return new t.constructor(r, t.byteOffset, t.byteLength);
}
var Jm = /\w*$/;
function e7(t) {
  var e = new t.constructor(t.source, Jm.exec(t));
  return e.lastIndex = t.lastIndex, e;
}
var b0 = cr ? cr.prototype : void 0, _0 = b0 ? b0.valueOf : void 0;
function t7(t) {
  return _0 ? Object(_0.call(t)) : {};
}
function r7(t, e) {
  var r = e ? Uc(t.buffer) : t.buffer;
  return new t.constructor(r, t.byteOffset, t.length);
}
var n7 = "[object Boolean]", i7 = "[object Date]", s7 = "[object Map]", a7 = "[object Number]", o7 = "[object RegExp]", l7 = "[object Set]", c7 = "[object String]", u7 = "[object Symbol]", h7 = "[object ArrayBuffer]", A7 = "[object DataView]", f7 = "[object Float32Array]", p7 = "[object Float64Array]", d7 = "[object Int8Array]", g7 = "[object Int16Array]", m7 = "[object Int32Array]", v7 = "[object Uint8Array]", y7 = "[object Uint8ClampedArray]", E7 = "[object Uint16Array]", I7 = "[object Uint32Array]";
function C7(t, e, r) {
  var n = t.constructor;
  switch (e) {
    case h7:
      return Uc(t);
    case n7:
    case i7:
      return new n(+t);
    case A7:
      return Zm(t, r);
    case f7:
    case p7:
    case d7:
    case g7:
    case m7:
    case v7:
    case y7:
    case E7:
    case I7:
      return r7(t, r);
    case s7:
      return new n();
    case a7:
    case c7:
      return new n(t);
    case o7:
      return e7(t);
    case l7:
      return new n();
    case u7:
      return t7(t);
  }
}
function x7(t) {
  return typeof t.constructor == "function" && !Qs(t) ? gg(B2(t)) : {};
}
var T7 = "[object Map]";
function S7(t) {
  return Sr(t) && Li(t) == T7;
}
var R0 = Nn && Nn.isMap, w7 = R0 ? Ns(R0) : S7;
const B7 = w7;
var b7 = "[object Set]";
function _7(t) {
  return Sr(t) && Li(t) == b7;
}
var M0 = Nn && Nn.isSet, R7 = M0 ? Ns(M0) : _7;
const M7 = R7;
var D7 = 1, k7 = 2, F7 = 4, F2 = "[object Arguments]", L7 = "[object Array]", O7 = "[object Boolean]", P7 = "[object Date]", Q7 = "[object Error]", L2 = "[object Function]", N7 = "[object GeneratorFunction]", U7 = "[object Map]", G7 = "[object Number]", O2 = "[object Object]", H7 = "[object RegExp]", V7 = "[object Set]", z7 = "[object String]", Y7 = "[object Symbol]", W7 = "[object WeakMap]", j7 = "[object ArrayBuffer]", q7 = "[object DataView]", K7 = "[object Float32Array]", X7 = "[object Float64Array]", $7 = "[object Int8Array]", Z7 = "[object Int16Array]", J7 = "[object Int32Array]", e9 = "[object Uint8Array]", t9 = "[object Uint8ClampedArray]", r9 = "[object Uint16Array]", n9 = "[object Uint32Array]", We = {};
We[F2] = We[L7] = We[j7] = We[q7] = We[O7] = We[P7] = We[K7] = We[X7] = We[$7] = We[Z7] = We[J7] = We[U7] = We[G7] = We[O2] = We[H7] = We[V7] = We[z7] = We[Y7] = We[e9] = We[t9] = We[r9] = We[n9] = true;
We[Q7] = We[L2] = We[W7] = false;
function Ia(t, e, r, n, i, s) {
  var a, o = e & D7, l = e & k7, c = e & F7;
  if (r && (a = i ? r(t, n, i, s) : r(t)), a !== void 0)
    return a;
  if (!ur(t))
    return t;
  var u = Ne(t);
  if (u) {
    if (a = Xm(t), !o)
      return vg(t, a);
  } else {
    var h = Li(t), A = h == L2 || h == N7;
    if (Es(t))
      return Mm(t, o);
    if (h == O2 || h == F2 || A && !i) {
      if (a = l || A ? {} : x7(t), !o)
        return l ? Qm(t, _m(a, t)) : Lm(t, bm(a, t));
    } else {
      if (!We[h])
        return i ? t : {};
      a = C7(t, h, o);
    }
  }
  s || (s = new zr());
  var f = s.get(t);
  if (f)
    return f;
  s.set(t, a), M7(t) ? t.forEach(function(m) {
    a.add(Ia(m, e, r, m, t, s));
  }) : B7(t) && t.forEach(function(m, E) {
    a.set(E, Ia(m, e, r, E, t, s));
  });
  var d = c ? l ? k2 : Zl : l ? Ao : Kt, v = u ? void 0 : d(t);
  return v2(v || t, function(m, E) {
    v && (E = m, m = t[E]), co(a, E, Ia(m, e, r, E, t, s));
  }), a;
}
var i9 = 4;
function Bt(t) {
  return Ia(t, i9);
}
function Gs(t) {
  for (var e = -1, r = t == null ? 0 : t.length, n = 0, i = []; ++e < r; ) {
    var s = t[e];
    s && (i[n++] = s);
  }
  return i;
}
var s9 = "__lodash_hash_undefined__";
function a9(t) {
  return this.__data__.set(t, s9), this;
}
function o9(t) {
  return this.__data__.has(t);
}
function Oi(t) {
  var e = -1, r = t == null ? 0 : t.length;
  for (this.__data__ = new dn(); ++e < r; )
    this.add(t[e]);
}
Oi.prototype.add = Oi.prototype.push = a9;
Oi.prototype.has = o9;
function P2(t, e) {
  for (var r = -1, n = t == null ? 0 : t.length; ++r < n; )
    if (e(t[r], r, t))
      return true;
  return false;
}
function Gc(t, e) {
  return t.has(e);
}
var l9 = 1, c9 = 2;
function Q2(t, e, r, n, i, s) {
  var a = r & l9, o = t.length, l = e.length;
  if (o != l && !(a && l > o))
    return false;
  var c = s.get(t), u = s.get(e);
  if (c && u)
    return c == e && u == t;
  var h = -1, A = true, f = r & c9 ? new Oi() : void 0;
  for (s.set(t, e), s.set(e, t); ++h < o; ) {
    var d = t[h], v = e[h];
    if (n)
      var m = a ? n(v, d, h, e, t, s) : n(d, v, h, t, e, s);
    if (m !== void 0) {
      if (m)
        continue;
      A = false;
      break;
    }
    if (f) {
      if (!P2(e, function(E, y) {
        if (!Gc(f, y) && (d === E || i(d, E, r, n, s)))
          return f.push(y);
      })) {
        A = false;
        break;
      }
    } else if (!(d === v || i(d, v, r, n, s))) {
      A = false;
      break;
    }
  }
  return s.delete(t), s.delete(e), A;
}
function u9(t) {
  var e = -1, r = Array(t.size);
  return t.forEach(function(n, i) {
    r[++e] = [i, n];
  }), r;
}
function Hc(t) {
  var e = -1, r = Array(t.size);
  return t.forEach(function(n) {
    r[++e] = n;
  }), r;
}
var h9 = 1, A9 = 2, f9 = "[object Boolean]", p9 = "[object Date]", d9 = "[object Error]", g9 = "[object Map]", m9 = "[object Number]", v9 = "[object RegExp]", y9 = "[object Set]", E9 = "[object String]", I9 = "[object Symbol]", C9 = "[object ArrayBuffer]", x9 = "[object DataView]", D0 = cr ? cr.prototype : void 0, tl = D0 ? D0.valueOf : void 0;
function T9(t, e, r, n, i, s, a) {
  switch (r) {
    case x9:
      if (t.byteLength != e.byteLength || t.byteOffset != e.byteOffset)
        return false;
      t = t.buffer, e = e.buffer;
    case C9:
      return !(t.byteLength != e.byteLength || !s(new Ua(t), new Ua(e)));
    case f9:
    case p9:
    case m9:
      return Os(+t, +e);
    case d9:
      return t.name == e.name && t.message == e.message;
    case v9:
    case E9:
      return t == e + "";
    case g9:
      var o = u9;
    case y9:
      var l = n & h9;
      if (o || (o = Hc), t.size != e.size && !l)
        return false;
      var c = a.get(t);
      if (c)
        return c == e;
      n |= A9, a.set(t, e);
      var u = Q2(o(t), o(e), n, i, s, a);
      return a.delete(t), u;
    case I9:
      if (tl)
        return tl.call(t) == tl.call(e);
  }
  return false;
}
var S9 = 1, w9 = Object.prototype, B9 = w9.hasOwnProperty;
function b9(t, e, r, n, i, s) {
  var a = r & S9, o = Zl(t), l = o.length, c = Zl(e), u = c.length;
  if (l != u && !a)
    return false;
  for (var h = l; h--; ) {
    var A = o[h];
    if (!(a ? A in e : B9.call(e, A)))
      return false;
  }
  var f = s.get(t), d = s.get(e);
  if (f && d)
    return f == e && d == t;
  var v = true;
  s.set(t, e), s.set(e, t);
  for (var m = a; ++h < l; ) {
    A = o[h];
    var E = t[A], y = e[A];
    if (n)
      var p = a ? n(y, E, A, e, t, s) : n(E, y, A, t, e, s);
    if (!(p === void 0 ? E === y || i(E, y, r, n, s) : p)) {
      v = false;
      break;
    }
    m || (m = A == "constructor");
  }
  if (v && !m) {
    var g = t.constructor, C = e.constructor;
    g != C && "constructor" in t && "constructor" in e && !(typeof g == "function" && g instanceof g && typeof C == "function" && C instanceof C) && (v = false);
  }
  return s.delete(t), s.delete(e), v;
}
var _9 = 1, k0 = "[object Arguments]", F0 = "[object Array]", oa = "[object Object]", R9 = Object.prototype, L0 = R9.hasOwnProperty;
function M9(t, e, r, n, i, s) {
  var a = Ne(t), o = Ne(e), l = a ? F0 : Li(t), c = o ? F0 : Li(e);
  l = l == k0 ? oa : l, c = c == k0 ? oa : c;
  var u = l == oa, h = c == oa, A = l == c;
  if (A && Es(t)) {
    if (!Es(e))
      return false;
    a = true, u = false;
  }
  if (A && !u)
    return s || (s = new zr()), a || kc(t) ? Q2(t, e, r, n, i, s) : T9(t, e, l, r, n, i, s);
  if (!(r & _9)) {
    var f = u && L0.call(t, "__wrapped__"), d = h && L0.call(e, "__wrapped__");
    if (f || d) {
      var v = f ? t.value() : t, m = d ? e.value() : e;
      return s || (s = new zr()), i(v, m, r, n, s);
    }
  }
  return A ? (s || (s = new zr()), b9(t, e, r, n, i, s)) : false;
}
function Vc(t, e, r, n, i) {
  return t === e ? true : t == null || e == null || !Sr(t) && !Sr(e) ? t !== t && e !== e : M9(t, e, r, n, Vc, i);
}
var D9 = 1, k9 = 2;
function F9(t, e, r, n) {
  var i = r.length, s = i, a = !n;
  if (t == null)
    return !s;
  for (t = Object(t); i--; ) {
    var o = r[i];
    if (a && o[2] ? o[1] !== t[o[0]] : !(o[0] in t))
      return false;
  }
  for (; ++i < s; ) {
    o = r[i];
    var l = o[0], c = t[l], u = o[1];
    if (a && o[2]) {
      if (c === void 0 && !(l in t))
        return false;
    } else {
      var h = new zr();
      if (n)
        var A = n(c, u, l, t, e, h);
      if (!(A === void 0 ? Vc(u, c, D9 | k9, n, h) : A))
        return false;
    }
  }
  return true;
}
function N2(t) {
  return t === t && !ur(t);
}
function L9(t) {
  for (var e = Kt(t), r = e.length; r--; ) {
    var n = e[r], i = t[n];
    e[r] = [n, i, N2(i)];
  }
  return e;
}
function U2(t, e) {
  return function(r) {
    return r == null ? false : r[t] === e && (e !== void 0 || t in Object(r));
  };
}
function O9(t) {
  var e = L9(t);
  return e.length == 1 && e[0][2] ? U2(e[0][0], e[0][1]) : function(r) {
    return r === t || F9(r, t, e);
  };
}
function P9(t, e) {
  return t != null && e in Object(t);
}
function G2(t, e, r) {
  e = go(e, t);
  for (var n = -1, i = e.length, s = false; ++n < i; ) {
    var a = Us(e[n]);
    if (!(s = t != null && r(t, a)))
      break;
    t = t[a];
  }
  return s || ++n != i ? s : (i = t == null ? 0 : t.length, !!i && Dc(i) && lo(a, i) && (Ne(t) || ho(t)));
}
function Q9(t, e) {
  return t != null && G2(t, e, P9);
}
var N9 = 1, U9 = 2;
function G9(t, e) {
  return Fc(t) && N2(e) ? U2(Us(t), e) : function(r) {
    var n = vm(r, t);
    return n === void 0 && n === e ? Q9(r, t) : Vc(e, n, N9 | U9);
  };
}
function H9(t) {
  return function(e) {
    return e == null ? void 0 : e[t];
  };
}
function V9(t) {
  return function(e) {
    return Oc(e, t);
  };
}
function z9(t) {
  return Fc(t) ? H9(Us(t)) : V9(t);
}
function qr(t) {
  return typeof t == "function" ? t : t == null ? Fi : typeof t == "object" ? Ne(t) ? G9(t[0], t[1]) : O9(t) : z9(t);
}
function Y9(t, e, r, n) {
  for (var i = -1, s = t == null ? 0 : t.length; ++i < s; ) {
    var a = t[i];
    e(n, a, r(a), t);
  }
  return n;
}
function W9(t) {
  return function(e, r, n) {
    for (var i = -1, s = Object(e), a = n(e), o = a.length; o--; ) {
      var l = a[t ? o : ++i];
      if (r(s[l], l, s) === false)
        break;
    }
    return e;
  };
}
var j9 = W9();
const q9 = j9;
function K9(t, e) {
  return t && q9(t, e, Kt);
}
function X9(t, e) {
  return function(r, n) {
    if (r == null)
      return r;
    if (!jr(r))
      return t(r, n);
    for (var i = r.length, s = e ? i : -1, a = Object(r); (e ? s-- : ++s < i) && n(a[s], s, a) !== false; )
      ;
    return r;
  };
}
var $9 = X9(K9);
const gi = $9;
function Z9(t, e, r, n) {
  return gi(t, function(i, s, a) {
    e(n, i, r(i), a);
  }), n;
}
function J9(t, e) {
  return function(r, n) {
    var i = Ne(r) ? Y9 : Z9, s = e ? e() : {};
    return i(r, t, qr(n), s);
  };
}
var H2 = Object.prototype, ev = H2.hasOwnProperty, tv = Mc(function(t, e) {
  t = Object(t);
  var r = -1, n = e.length, i = n > 2 ? e[2] : void 0;
  for (i && uo(e[0], e[1], i) && (n = 1); ++r < n; )
    for (var s = e[r], a = Ao(s), o = -1, l = a.length; ++o < l; ) {
      var c = a[o], u = t[c];
      (u === void 0 || Os(u, H2[c]) && !ev.call(t, c)) && (t[c] = s[c]);
    }
  return t;
});
const zc = tv;
function O0(t) {
  return Sr(t) && jr(t);
}
function V2(t, e, r) {
  for (var n = -1, i = t == null ? 0 : t.length; ++n < i; )
    if (r(e, t[n]))
      return true;
  return false;
}
var rv = 200;
function nv(t, e, r, n) {
  var i = -1, s = E2, a = true, o = t.length, l = [], c = e.length;
  if (!o)
    return l;
  r && (e = Fs(e, Ns(r))), n ? (s = V2, a = false) : e.length >= rv && (s = Gc, a = false, e = new Oi(e));
  e:
    for (; ++i < o; ) {
      var u = t[i], h = r == null ? u : r(u);
      if (u = n || u !== 0 ? u : 0, a && h === h) {
        for (var A = c; A--; )
          if (e[A] === h)
            continue e;
        l.push(u);
      } else
        s(e, h, n) || l.push(u);
    }
  return l;
}
var iv = Mc(function(t, e) {
  return O0(t) ? nv(t, mo(e, 1, O0, true)) : [];
});
const vo = iv;
function Pi(t) {
  var e = t == null ? 0 : t.length;
  return e ? t[e - 1] : void 0;
}
function Ct(t, e, r) {
  var n = t == null ? 0 : t.length;
  return n ? (e = r || e === void 0 ? 1 : Ls(e), b2(t, e < 0 ? 0 : e, n)) : [];
}
function xs(t, e, r) {
  var n = t == null ? 0 : t.length;
  return n ? (e = r || e === void 0 ? 1 : Ls(e), e = n - e, b2(t, 0, e < 0 ? 0 : e)) : [];
}
function sv(t) {
  return typeof t == "function" ? t : Fi;
}
function ve(t, e) {
  var r = Ne(t) ? v2 : gi;
  return r(t, sv(e));
}
function av(t, e) {
  for (var r = -1, n = t == null ? 0 : t.length; ++r < n; )
    if (!e(t[r], r, t))
      return false;
  return true;
}
function ov(t, e) {
  var r = true;
  return gi(t, function(n, i, s) {
    return r = !!e(n, i, s), r;
  }), r;
}
function Ir(t, e, r) {
  var n = Ne(t) ? av : ov;
  return r && uo(t, e, r) && (e = void 0), n(t, qr(e));
}
function z2(t, e) {
  var r = [];
  return gi(t, function(n, i, s) {
    e(n, i, s) && r.push(n);
  }), r;
}
function Ar(t, e) {
  var r = Ne(t) ? Qc : z2;
  return r(t, qr(e));
}
function lv(t) {
  return function(e, r, n) {
    var i = Object(e);
    if (!jr(e)) {
      var s = qr(r);
      e = Kt(e), r = function(o) {
        return s(i[o], o, i);
      };
    }
    var a = t(e, r, n);
    return a > -1 ? i[s ? e[a] : a] : void 0;
  };
}
var cv = Math.max;
function uv(t, e, r) {
  var n = t == null ? 0 : t.length;
  if (!n)
    return -1;
  var i = r == null ? 0 : Ls(r);
  return i < 0 && (i = cv(n + i, 0)), y2(t, qr(e), i);
}
var hv = lv(uv);
const Qi = hv;
function wr(t) {
  return t && t.length ? t[0] : void 0;
}
function Av(t, e) {
  var r = -1, n = jr(t) ? Array(t.length) : [];
  return gi(t, function(i, s, a) {
    n[++r] = e(i, s, a);
  }), n;
}
function fe(t, e) {
  var r = Ne(t) ? Fs : Av;
  return r(t, qr(e));
}
function ar(t, e) {
  return mo(fe(t, e), 1);
}
var fv = Object.prototype, pv = fv.hasOwnProperty, dv = J9(function(t, e, r) {
  pv.call(t, r) ? t[r].push(e) : Rc(t, r, [e]);
});
const gv = dv;
var mv = Object.prototype, vv = mv.hasOwnProperty;
function yv(t, e) {
  return t != null && vv.call(t, e);
}
function de(t, e) {
  return t != null && G2(t, e, yv);
}
var Ev = "[object String]";
function Vt(t) {
  return typeof t == "string" || !Ne(t) && Sr(t) && Yn(t) == Ev;
}
function Iv(t, e) {
  return Fs(e, function(r) {
    return t[r];
  });
}
function ft(t) {
  return t == null ? [] : Iv(t, Kt(t));
}
var Cv = Math.max;
function Ft(t, e, r, n) {
  t = jr(t) ? t : ft(t), r = r && !n ? Ls(r) : 0;
  var i = t.length;
  return r < 0 && (r = Cv(i + r, 0)), Vt(t) ? r <= i && t.indexOf(e, r) > -1 : !!i && _c(t, e, r) > -1;
}
var xv = Math.max;
function P0(t, e, r) {
  var n = t == null ? 0 : t.length;
  if (!n)
    return -1;
  var i = r == null ? 0 : Ls(r);
  return i < 0 && (i = xv(n + i, 0)), _c(t, e, i);
}
var Tv = "[object Map]", Sv = "[object Set]", wv = Object.prototype, Bv = wv.hasOwnProperty;
function Ke(t) {
  if (t == null)
    return true;
  if (jr(t) && (Ne(t) || typeof t == "string" || typeof t.splice == "function" || Es(t) || kc(t) || ho(t)))
    return !t.length;
  var e = Li(t);
  if (e == Tv || e == Sv)
    return !t.size;
  if (Qs(t))
    return !w2(t).length;
  for (var r in t)
    if (Bv.call(t, r))
      return false;
  return true;
}
var bv = "[object RegExp]";
function _v(t) {
  return Sr(t) && Yn(t) == bv;
}
var Q0 = Nn && Nn.isRegExp, Rv = Q0 ? Ns(Q0) : _v;
const cn = Rv;
function un(t) {
  return t === void 0;
}
var Mv = "Expected a function";
function Dv(t) {
  if (typeof t != "function")
    throw new TypeError(Mv);
  return function() {
    var e = arguments;
    switch (e.length) {
      case 0:
        return !t.call(this);
      case 1:
        return !t.call(this, e[0]);
      case 2:
        return !t.call(this, e[0], e[1]);
      case 3:
        return !t.call(this, e[0], e[1], e[2]);
    }
    return !t.apply(this, e);
  };
}
function kv(t, e, r, n) {
  if (!ur(t))
    return t;
  e = go(e, t);
  for (var i = -1, s = e.length, a = s - 1, o = t; o != null && ++i < s; ) {
    var l = Us(e[i]), c = r;
    if (l === "__proto__" || l === "constructor" || l === "prototype")
      return t;
    if (i != a) {
      var u = o[l];
      c = n ? n(u, l, o) : void 0, c === void 0 && (c = ur(u) ? u : lo(e[i + 1]) ? [] : {});
    }
    co(o, l, c), o = o[l];
  }
  return t;
}
function Fv(t, e, r) {
  for (var n = -1, i = e.length, s = {}; ++n < i; ) {
    var a = e[n], o = Oc(t, a);
    r(o, a) && kv(s, go(a, t), o);
  }
  return s;
}
function _r(t, e) {
  if (t == null)
    return {};
  var r = Fs(k2(t), function(n) {
    return [n];
  });
  return e = qr(e), Fv(t, r, function(n, i) {
    return e(n, i[0]);
  });
}
function Lv(t, e, r, n, i) {
  return i(t, function(s, a, o) {
    r = n ? (n = false, s) : e(r, s, a, o);
  }), r;
}
function $t(t, e, r) {
  var n = Ne(t) ? Im : Lv, i = arguments.length < 3;
  return n(t, qr(e), r, i, gi);
}
function yo(t, e) {
  var r = Ne(t) ? Qc : z2;
  return r(t, Dv(qr(e)));
}
function Ov(t, e) {
  var r;
  return gi(t, function(n, i, s) {
    return r = e(n, i, s), !r;
  }), !!r;
}
function Y2(t, e, r) {
  var n = Ne(t) ? P2 : Ov;
  return r && uo(t, e, r) && (e = void 0), n(t, qr(e));
}
var Pv = 1 / 0, Qv = Ri && 1 / Hc(new Ri([, -0]))[1] == Pv ? function(t) {
  return new Ri(t);
} : At;
const Nv = Qv;
var Uv = 200;
function Gv(t, e, r) {
  var n = -1, i = E2, s = t.length, a = true, o = [], l = o;
  if (r)
    a = false, i = V2;
  else if (s >= Uv) {
    var c = e ? null : Nv(t);
    if (c)
      return Hc(c);
    a = false, i = Gc, l = new Oi();
  } else
    l = e ? [] : o;
  e:
    for (; ++n < s; ) {
      var u = t[n], h = e ? e(u) : u;
      if (u = r || u !== 0 ? u : 0, a && h === h) {
        for (var A = l.length; A--; )
          if (l[A] === h)
            continue e;
        e && l.push(h), o.push(u);
      } else
        i(l, h, r) || (l !== o && l.push(h), o.push(u));
    }
  return o;
}
function Yc(t) {
  return t && t.length ? Gv(t) : [];
}
function tc(t) {
  console && console.error && console.error(`Error: ${t}`);
}
function W2(t) {
  console && console.warn && console.warn(`Warning: ${t}`);
}
function j2(t) {
  const e = (/* @__PURE__ */ new Date()).getTime(), r = t();
  return { time: (/* @__PURE__ */ new Date()).getTime() - e, value: r };
}
function q2(t) {
  function e() {
  }
  e.prototype = t;
  const r = new e();
  function n() {
    return typeof r.bar;
  }
  return n(), n(), t;
}
function Hv(t) {
  return Vv(t) ? t.LABEL : t.name;
}
function Vv(t) {
  return Vt(t.LABEL) && t.LABEL !== "";
}
class Kr {
  get definition() {
    return this._definition;
  }
  set definition(e) {
    this._definition = e;
  }
  constructor(e) {
    this._definition = e;
  }
  accept(e) {
    e.visit(this), ve(this.definition, (r) => {
      r.accept(e);
    });
  }
}
class Zt extends Kr {
  constructor(e) {
    super([]), this.idx = 1, Xt(this, _r(e, (r) => r !== void 0));
  }
  set definition(e) {
  }
  get definition() {
    return this.referencedRule !== void 0 ? this.referencedRule.definition : [];
  }
  accept(e) {
    e.visit(this);
  }
}
class Gi extends Kr {
  constructor(e) {
    super(e.definition), this.orgText = "", Xt(this, _r(e, (r) => r !== void 0));
  }
}
class zt extends Kr {
  constructor(e) {
    super(e.definition), this.ignoreAmbiguities = false, Xt(this, _r(e, (r) => r !== void 0));
  }
}
class Ht extends Kr {
  constructor(e) {
    super(e.definition), this.idx = 1, Xt(this, _r(e, (r) => r !== void 0));
  }
}
class Xr extends Kr {
  constructor(e) {
    super(e.definition), this.idx = 1, Xt(this, _r(e, (r) => r !== void 0));
  }
}
class $r extends Kr {
  constructor(e) {
    super(e.definition), this.idx = 1, Xt(this, _r(e, (r) => r !== void 0));
  }
}
class dt extends Kr {
  constructor(e) {
    super(e.definition), this.idx = 1, Xt(this, _r(e, (r) => r !== void 0));
  }
}
class Rr extends Kr {
  constructor(e) {
    super(e.definition), this.idx = 1, Xt(this, _r(e, (r) => r !== void 0));
  }
}
class Mr extends Kr {
  get definition() {
    return this._definition;
  }
  set definition(e) {
    this._definition = e;
  }
  constructor(e) {
    super(e.definition), this.idx = 1, this.ignoreAmbiguities = false, this.hasPredicates = false, Xt(this, _r(e, (r) => r !== void 0));
  }
}
class rt {
  constructor(e) {
    this.idx = 1, Xt(this, _r(e, (r) => r !== void 0));
  }
  accept(e) {
    e.visit(this);
  }
}
function zv(t) {
  return fe(t, Ca);
}
function Ca(t) {
  function e(r) {
    return fe(r, Ca);
  }
  if (t instanceof Zt) {
    const r = {
      type: "NonTerminal",
      name: t.nonTerminalName,
      idx: t.idx
    };
    return Vt(t.label) && (r.label = t.label), r;
  } else {
    if (t instanceof zt)
      return {
        type: "Alternative",
        definition: e(t.definition)
      };
    if (t instanceof Ht)
      return {
        type: "Option",
        idx: t.idx,
        definition: e(t.definition)
      };
    if (t instanceof Xr)
      return {
        type: "RepetitionMandatory",
        idx: t.idx,
        definition: e(t.definition)
      };
    if (t instanceof $r)
      return {
        type: "RepetitionMandatoryWithSeparator",
        idx: t.idx,
        separator: Ca(new rt({ terminalType: t.separator })),
        definition: e(t.definition)
      };
    if (t instanceof Rr)
      return {
        type: "RepetitionWithSeparator",
        idx: t.idx,
        separator: Ca(new rt({ terminalType: t.separator })),
        definition: e(t.definition)
      };
    if (t instanceof dt)
      return {
        type: "Repetition",
        idx: t.idx,
        definition: e(t.definition)
      };
    if (t instanceof Mr)
      return {
        type: "Alternation",
        idx: t.idx,
        definition: e(t.definition)
      };
    if (t instanceof rt) {
      const r = {
        type: "Terminal",
        name: t.terminalType.name,
        label: Hv(t.terminalType),
        idx: t.idx
      };
      Vt(t.label) && (r.terminalLabel = t.label);
      const n = t.terminalType.PATTERN;
      return t.terminalType.PATTERN && (r.pattern = cn(n) ? n.source : n), r;
    } else {
      if (t instanceof Gi)
        return {
          type: "Rule",
          name: t.name,
          orgText: t.orgText,
          definition: e(t.definition)
        };
      throw Error("non exhaustive match");
    }
  }
}
class Hi {
  visit(e) {
    const r = e;
    switch (r.constructor) {
      case Zt:
        return this.visitNonTerminal(r);
      case zt:
        return this.visitAlternative(r);
      case Ht:
        return this.visitOption(r);
      case Xr:
        return this.visitRepetitionMandatory(r);
      case $r:
        return this.visitRepetitionMandatoryWithSeparator(r);
      case Rr:
        return this.visitRepetitionWithSeparator(r);
      case dt:
        return this.visitRepetition(r);
      case Mr:
        return this.visitAlternation(r);
      case rt:
        return this.visitTerminal(r);
      case Gi:
        return this.visitRule(r);
      default:
        throw Error("non exhaustive match");
    }
  }
  /* c8 ignore next */
  visitNonTerminal(e) {
  }
  /* c8 ignore next */
  visitAlternative(e) {
  }
  /* c8 ignore next */
  visitOption(e) {
  }
  /* c8 ignore next */
  visitRepetition(e) {
  }
  /* c8 ignore next */
  visitRepetitionMandatory(e) {
  }
  /* c8 ignore next 3 */
  visitRepetitionMandatoryWithSeparator(e) {
  }
  /* c8 ignore next */
  visitRepetitionWithSeparator(e) {
  }
  /* c8 ignore next */
  visitAlternation(e) {
  }
  /* c8 ignore next */
  visitTerminal(e) {
  }
  /* c8 ignore next */
  visitRule(e) {
  }
}
function Yv(t) {
  return t instanceof zt || t instanceof Ht || t instanceof dt || t instanceof Xr || t instanceof $r || t instanceof Rr || t instanceof rt || t instanceof Gi;
}
function Ga(t, e = []) {
  return t instanceof Ht || t instanceof dt || t instanceof Rr ? true : t instanceof Mr ? Y2(t.definition, (n) => Ga(n, e)) : t instanceof Zt && Ft(e, t) ? false : t instanceof Kr ? (t instanceof Zt && e.push(t), Ir(t.definition, (n) => Ga(n, e))) : false;
}
function Wv(t) {
  return t instanceof Mr;
}
function Qr(t) {
  if (t instanceof Zt)
    return "SUBRULE";
  if (t instanceof Ht)
    return "OPTION";
  if (t instanceof Mr)
    return "OR";
  if (t instanceof Xr)
    return "AT_LEAST_ONE";
  if (t instanceof $r)
    return "AT_LEAST_ONE_SEP";
  if (t instanceof Rr)
    return "MANY_SEP";
  if (t instanceof dt)
    return "MANY";
  if (t instanceof rt)
    return "CONSUME";
  throw Error("non exhaustive match");
}
class Eo {
  walk(e, r = []) {
    ve(e.definition, (n, i) => {
      const s = Ct(e.definition, i + 1);
      if (n instanceof Zt)
        this.walkProdRef(n, s, r);
      else if (n instanceof rt)
        this.walkTerminal(n, s, r);
      else if (n instanceof zt)
        this.walkFlat(n, s, r);
      else if (n instanceof Ht)
        this.walkOption(n, s, r);
      else if (n instanceof Xr)
        this.walkAtLeastOne(n, s, r);
      else if (n instanceof $r)
        this.walkAtLeastOneSep(n, s, r);
      else if (n instanceof Rr)
        this.walkManySep(n, s, r);
      else if (n instanceof dt)
        this.walkMany(n, s, r);
      else if (n instanceof Mr)
        this.walkOr(n, s, r);
      else
        throw Error("non exhaustive match");
    });
  }
  walkTerminal(e, r, n) {
  }
  walkProdRef(e, r, n) {
  }
  walkFlat(e, r, n) {
    const i = r.concat(n);
    this.walk(e, i);
  }
  walkOption(e, r, n) {
    const i = r.concat(n);
    this.walk(e, i);
  }
  walkAtLeastOne(e, r, n) {
    const i = [
      new Ht({ definition: e.definition })
    ].concat(r, n);
    this.walk(e, i);
  }
  walkAtLeastOneSep(e, r, n) {
    const i = N0(e, r, n);
    this.walk(e, i);
  }
  walkMany(e, r, n) {
    const i = [
      new Ht({ definition: e.definition })
    ].concat(r, n);
    this.walk(e, i);
  }
  walkManySep(e, r, n) {
    const i = N0(e, r, n);
    this.walk(e, i);
  }
  walkOr(e, r, n) {
    const i = r.concat(n);
    ve(e.definition, (s) => {
      const a = new zt({ definition: [s] });
      this.walk(a, i);
    });
  }
}
function N0(t, e, r) {
  return [
    new Ht({
      definition: [
        new rt({ terminalType: t.separator })
      ].concat(t.definition)
    })
  ].concat(e, r);
}
function Hs(t) {
  if (t instanceof Zt)
    return Hs(t.referencedRule);
  if (t instanceof rt)
    return Kv(t);
  if (Yv(t))
    return jv(t);
  if (Wv(t))
    return qv(t);
  throw Error("non exhaustive match");
}
function jv(t) {
  let e = [];
  const r = t.definition;
  let n = 0, i = r.length > n, s, a = true;
  for (; i && a; )
    s = r[n], a = Ga(s), e = e.concat(Hs(s)), n = n + 1, i = r.length > n;
  return Yc(e);
}
function qv(t) {
  const e = fe(t.definition, (r) => Hs(r));
  return Yc(Er(e));
}
function Kv(t) {
  return [t.terminalType];
}
const K2 = "_~IN~_";
class Xv extends Eo {
  constructor(e) {
    super(), this.topProd = e, this.follows = {};
  }
  startWalking() {
    return this.walk(this.topProd), this.follows;
  }
  walkTerminal(e, r, n) {
  }
  walkProdRef(e, r, n) {
    const i = Zv(e.referencedRule, e.idx) + this.topProd.name, s = r.concat(n), a = new zt({ definition: s }), o = Hs(a);
    this.follows[i] = o;
  }
}
function $v(t) {
  const e = {};
  return ve(t, (r) => {
    const n = new Xv(r).startWalking();
    Xt(e, n);
  }), e;
}
function Zv(t, e) {
  return t.name + e + K2;
}
function Ee(t) {
  return t.charCodeAt(0);
}
function rl(t, e) {
  Array.isArray(t) ? t.forEach(function(r) {
    e.push(r);
  }) : e.push(t);
}
function qi(t, e) {
  if (t[e] === true)
    throw "duplicate flag " + e;
  t[e], t[e] = true;
}
function Ci(t) {
  if (t === void 0)
    throw Error("Internal Error - Should never get here!");
  return true;
}
function Jv() {
  throw Error("Internal Error - Should never get here!");
}
function U0(t) {
  return t.type === "Character";
}
const Ha = [];
for (let t = Ee("0"); t <= Ee("9"); t++)
  Ha.push(t);
const Va = [Ee("_")].concat(Ha);
for (let t = Ee("a"); t <= Ee("z"); t++)
  Va.push(t);
for (let t = Ee("A"); t <= Ee("Z"); t++)
  Va.push(t);
const G0 = [
  Ee(" "),
  Ee("\f"),
  Ee(`
`),
  Ee("\r"),
  Ee("	"),
  Ee("\v"),
  Ee("	"),
  Ee(" "),
  Ee(" "),
  Ee(" "),
  Ee(" "),
  Ee(" "),
  Ee(" "),
  Ee(" "),
  Ee(" "),
  Ee(" "),
  Ee(" "),
  Ee(" "),
  Ee(" "),
  Ee(" "),
  Ee("\u2028"),
  Ee("\u2029"),
  Ee(" "),
  Ee(" "),
  Ee("　"),
  Ee("\uFEFF")
], ey = /[0-9a-fA-F]/, la = /[0-9]/, ty = /[1-9]/;
class ry {
  constructor() {
    this.idx = 0, this.input = "", this.groupIdx = 0;
  }
  saveState() {
    return {
      idx: this.idx,
      input: this.input,
      groupIdx: this.groupIdx
    };
  }
  restoreState(e) {
    this.idx = e.idx, this.input = e.input, this.groupIdx = e.groupIdx;
  }
  pattern(e) {
    this.idx = 0, this.input = e, this.groupIdx = 0, this.consumeChar("/");
    const r = this.disjunction();
    this.consumeChar("/");
    const n = {
      type: "Flags",
      loc: { begin: this.idx, end: e.length },
      global: false,
      ignoreCase: false,
      multiLine: false,
      unicode: false,
      sticky: false
    };
    for (; this.isRegExpFlag(); )
      switch (this.popChar()) {
        case "g":
          qi(n, "global");
          break;
        case "i":
          qi(n, "ignoreCase");
          break;
        case "m":
          qi(n, "multiLine");
          break;
        case "u":
          qi(n, "unicode");
          break;
        case "y":
          qi(n, "sticky");
          break;
      }
    if (this.idx !== this.input.length)
      throw Error("Redundant input: " + this.input.substring(this.idx));
    return {
      type: "Pattern",
      flags: n,
      value: r,
      loc: this.loc(0)
    };
  }
  disjunction() {
    const e = [], r = this.idx;
    for (e.push(this.alternative()); this.peekChar() === "|"; )
      this.consumeChar("|"), e.push(this.alternative());
    return { type: "Disjunction", value: e, loc: this.loc(r) };
  }
  alternative() {
    const e = [], r = this.idx;
    for (; this.isTerm(); )
      e.push(this.term());
    return { type: "Alternative", value: e, loc: this.loc(r) };
  }
  term() {
    return this.isAssertion() ? this.assertion() : this.atom();
  }
  assertion() {
    const e = this.idx;
    switch (this.popChar()) {
      case "^":
        return {
          type: "StartAnchor",
          loc: this.loc(e)
        };
      case "$":
        return { type: "EndAnchor", loc: this.loc(e) };
      case "\\":
        switch (this.popChar()) {
          case "b":
            return {
              type: "WordBoundary",
              loc: this.loc(e)
            };
          case "B":
            return {
              type: "NonWordBoundary",
              loc: this.loc(e)
            };
        }
        throw Error("Invalid Assertion Escape");
      case "(":
        this.consumeChar("?");
        let r;
        switch (this.popChar()) {
          case "=":
            r = "Lookahead";
            break;
          case "!":
            r = "NegativeLookahead";
            break;
        }
        Ci(r);
        const n = this.disjunction();
        return this.consumeChar(")"), {
          type: r,
          value: n,
          loc: this.loc(e)
        };
    }
    return Jv();
  }
  quantifier(e = false) {
    let r;
    const n = this.idx;
    switch (this.popChar()) {
      case "*":
        r = {
          atLeast: 0,
          atMost: 1 / 0
        };
        break;
      case "+":
        r = {
          atLeast: 1,
          atMost: 1 / 0
        };
        break;
      case "?":
        r = {
          atLeast: 0,
          atMost: 1
        };
        break;
      case "{":
        const i = this.integerIncludingZero();
        switch (this.popChar()) {
          case "}":
            r = {
              atLeast: i,
              atMost: i
            };
            break;
          case ",":
            let s;
            this.isDigit() ? (s = this.integerIncludingZero(), r = {
              atLeast: i,
              atMost: s
            }) : r = {
              atLeast: i,
              atMost: 1 / 0
            }, this.consumeChar("}");
            break;
        }
        if (e === true && r === void 0)
          return;
        Ci(r);
        break;
    }
    if (!(e === true && r === void 0) && Ci(r))
      return this.peekChar(0) === "?" ? (this.consumeChar("?"), r.greedy = false) : r.greedy = true, r.type = "Quantifier", r.loc = this.loc(n), r;
  }
  atom() {
    let e;
    const r = this.idx;
    switch (this.peekChar()) {
      case ".":
        e = this.dotAll();
        break;
      case "\\":
        e = this.atomEscape();
        break;
      case "[":
        e = this.characterClass();
        break;
      case "(":
        e = this.group();
        break;
    }
    if (e === void 0 && this.isPatternCharacter() && (e = this.patternCharacter()), Ci(e))
      return e.loc = this.loc(r), this.isQuantifier() && (e.quantifier = this.quantifier()), e;
  }
  dotAll() {
    return this.consumeChar("."), {
      type: "Set",
      complement: true,
      value: [Ee(`
`), Ee("\r"), Ee("\u2028"), Ee("\u2029")]
    };
  }
  atomEscape() {
    switch (this.consumeChar("\\"), this.peekChar()) {
      case "1":
      case "2":
      case "3":
      case "4":
      case "5":
      case "6":
      case "7":
      case "8":
      case "9":
        return this.decimalEscapeAtom();
      case "d":
      case "D":
      case "s":
      case "S":
      case "w":
      case "W":
        return this.characterClassEscape();
      case "f":
      case "n":
      case "r":
      case "t":
      case "v":
        return this.controlEscapeAtom();
      case "c":
        return this.controlLetterEscapeAtom();
      case "0":
        return this.nulCharacterAtom();
      case "x":
        return this.hexEscapeSequenceAtom();
      case "u":
        return this.regExpUnicodeEscapeSequenceAtom();
      default:
        return this.identityEscapeAtom();
    }
  }
  decimalEscapeAtom() {
    return { type: "GroupBackReference", value: this.positiveInteger() };
  }
  characterClassEscape() {
    let e, r = false;
    switch (this.popChar()) {
      case "d":
        e = Ha;
        break;
      case "D":
        e = Ha, r = true;
        break;
      case "s":
        e = G0;
        break;
      case "S":
        e = G0, r = true;
        break;
      case "w":
        e = Va;
        break;
      case "W":
        e = Va, r = true;
        break;
    }
    if (Ci(e))
      return { type: "Set", value: e, complement: r };
  }
  controlEscapeAtom() {
    let e;
    switch (this.popChar()) {
      case "f":
        e = Ee("\f");
        break;
      case "n":
        e = Ee(`
`);
        break;
      case "r":
        e = Ee("\r");
        break;
      case "t":
        e = Ee("	");
        break;
      case "v":
        e = Ee("\v");
        break;
    }
    if (Ci(e))
      return { type: "Character", value: e };
  }
  controlLetterEscapeAtom() {
    this.consumeChar("c");
    const e = this.popChar();
    if (/[a-zA-Z]/.test(e) === false)
      throw Error("Invalid ");
    return { type: "Character", value: e.toUpperCase().charCodeAt(0) - 64 };
  }
  nulCharacterAtom() {
    return this.consumeChar("0"), { type: "Character", value: Ee("\0") };
  }
  hexEscapeSequenceAtom() {
    return this.consumeChar("x"), this.parseHexDigits(2);
  }
  regExpUnicodeEscapeSequenceAtom() {
    return this.consumeChar("u"), this.parseHexDigits(4);
  }
  identityEscapeAtom() {
    const e = this.popChar();
    return { type: "Character", value: Ee(e) };
  }
  classPatternCharacterAtom() {
    switch (this.peekChar()) {
      case `
`:
      case "\r":
      case "\u2028":
      case "\u2029":
      case "\\":
      case "]":
        throw Error("TBD");
      default:
        const e = this.popChar();
        return { type: "Character", value: Ee(e) };
    }
  }
  characterClass() {
    const e = [];
    let r = false;
    for (this.consumeChar("["), this.peekChar(0) === "^" && (this.consumeChar("^"), r = true); this.isClassAtom(); ) {
      const n = this.classAtom();
      if (n.type, U0(n) && this.isRangeDash()) {
        this.consumeChar("-");
        const i = this.classAtom();
        if (i.type, U0(i)) {
          if (i.value < n.value)
            throw Error("Range out of order in character class");
          e.push({ from: n.value, to: i.value });
        } else
          rl(n.value, e), e.push(Ee("-")), rl(i.value, e);
      } else
        rl(n.value, e);
    }
    return this.consumeChar("]"), { type: "Set", complement: r, value: e };
  }
  classAtom() {
    switch (this.peekChar()) {
      case "]":
      case `
`:
      case "\r":
      case "\u2028":
      case "\u2029":
        throw Error("TBD");
      case "\\":
        return this.classEscape();
      default:
        return this.classPatternCharacterAtom();
    }
  }
  classEscape() {
    switch (this.consumeChar("\\"), this.peekChar()) {
      case "b":
        return this.consumeChar("b"), { type: "Character", value: Ee("\b") };
      case "d":
      case "D":
      case "s":
      case "S":
      case "w":
      case "W":
        return this.characterClassEscape();
      case "f":
      case "n":
      case "r":
      case "t":
      case "v":
        return this.controlEscapeAtom();
      case "c":
        return this.controlLetterEscapeAtom();
      case "0":
        return this.nulCharacterAtom();
      case "x":
        return this.hexEscapeSequenceAtom();
      case "u":
        return this.regExpUnicodeEscapeSequenceAtom();
      default:
        return this.identityEscapeAtom();
    }
  }
  group() {
    let e = true;
    switch (this.consumeChar("("), this.peekChar(0)) {
      case "?":
        this.consumeChar("?"), this.consumeChar(":"), e = false;
        break;
      default:
        this.groupIdx++;
        break;
    }
    const r = this.disjunction();
    this.consumeChar(")");
    const n = {
      type: "Group",
      capturing: e,
      value: r
    };
    return e && (n.idx = this.groupIdx), n;
  }
  positiveInteger() {
    let e = this.popChar();
    if (ty.test(e) === false)
      throw Error("Expecting a positive integer");
    for (; la.test(this.peekChar(0)); )
      e += this.popChar();
    return parseInt(e, 10);
  }
  integerIncludingZero() {
    let e = this.popChar();
    if (la.test(e) === false)
      throw Error("Expecting an integer");
    for (; la.test(this.peekChar(0)); )
      e += this.popChar();
    return parseInt(e, 10);
  }
  patternCharacter() {
    const e = this.popChar();
    switch (e) {
      case `
`:
      case "\r":
      case "\u2028":
      case "\u2029":
      case "^":
      case "$":
      case "\\":
      case ".":
      case "*":
      case "+":
      case "?":
      case "(":
      case ")":
      case "[":
      case "|":
        throw Error("TBD");
      default:
        return { type: "Character", value: Ee(e) };
    }
  }
  isRegExpFlag() {
    switch (this.peekChar(0)) {
      case "g":
      case "i":
      case "m":
      case "u":
      case "y":
        return true;
      default:
        return false;
    }
  }
  isRangeDash() {
    return this.peekChar() === "-" && this.isClassAtom(1);
  }
  isDigit() {
    return la.test(this.peekChar(0));
  }
  isClassAtom(e = 0) {
    switch (this.peekChar(e)) {
      case "]":
      case `
`:
      case "\r":
      case "\u2028":
      case "\u2029":
        return false;
      default:
        return true;
    }
  }
  isTerm() {
    return this.isAtom() || this.isAssertion();
  }
  isAtom() {
    if (this.isPatternCharacter())
      return true;
    switch (this.peekChar(0)) {
      case ".":
      case "\\":
      case "[":
      case "(":
        return true;
      default:
        return false;
    }
  }
  isAssertion() {
    switch (this.peekChar(0)) {
      case "^":
      case "$":
        return true;
      case "\\":
        switch (this.peekChar(1)) {
          case "b":
          case "B":
            return true;
          default:
            return false;
        }
      case "(":
        return this.peekChar(1) === "?" && (this.peekChar(2) === "=" || this.peekChar(2) === "!");
      default:
        return false;
    }
  }
  isQuantifier() {
    const e = this.saveState();
    try {
      return this.quantifier(true) !== void 0;
    } catch {
      return false;
    } finally {
      this.restoreState(e);
    }
  }
  isPatternCharacter() {
    switch (this.peekChar()) {
      case "^":
      case "$":
      case "\\":
      case ".":
      case "*":
      case "+":
      case "?":
      case "(":
      case ")":
      case "[":
      case "|":
      case "/":
      case `
`:
      case "\r":
      case "\u2028":
      case "\u2029":
        return false;
      default:
        return true;
    }
  }
  parseHexDigits(e) {
    let r = "";
    for (let i = 0; i < e; i++) {
      const s = this.popChar();
      if (ey.test(s) === false)
        throw Error("Expecting a HexDecimal digits");
      r += s;
    }
    return { type: "Character", value: parseInt(r, 16) };
  }
  peekChar(e = 0) {
    return this.input[this.idx + e];
  }
  popChar() {
    const e = this.peekChar(0);
    return this.consumeChar(void 0), e;
  }
  consumeChar(e) {
    if (e !== void 0 && this.input[this.idx] !== e)
      throw Error("Expected: '" + e + "' but found: '" + this.input[this.idx] + "' at offset: " + this.idx);
    if (this.idx >= this.input.length)
      throw Error("Unexpected end of input");
    this.idx++;
  }
  loc(e) {
    return { begin: e, end: this.idx };
  }
}
class Wc {
  visitChildren(e) {
    for (const r in e) {
      const n = e[r];
      e.hasOwnProperty(r) && (n.type !== void 0 ? this.visit(n) : Array.isArray(n) && n.forEach((i) => {
        this.visit(i);
      }, this));
    }
  }
  visit(e) {
    switch (e.type) {
      case "Pattern":
        this.visitPattern(e);
        break;
      case "Flags":
        this.visitFlags(e);
        break;
      case "Disjunction":
        this.visitDisjunction(e);
        break;
      case "Alternative":
        this.visitAlternative(e);
        break;
      case "StartAnchor":
        this.visitStartAnchor(e);
        break;
      case "EndAnchor":
        this.visitEndAnchor(e);
        break;
      case "WordBoundary":
        this.visitWordBoundary(e);
        break;
      case "NonWordBoundary":
        this.visitNonWordBoundary(e);
        break;
      case "Lookahead":
        this.visitLookahead(e);
        break;
      case "NegativeLookahead":
        this.visitNegativeLookahead(e);
        break;
      case "Character":
        this.visitCharacter(e);
        break;
      case "Set":
        this.visitSet(e);
        break;
      case "Group":
        this.visitGroup(e);
        break;
      case "GroupBackReference":
        this.visitGroupBackReference(e);
        break;
      case "Quantifier":
        this.visitQuantifier(e);
        break;
    }
    this.visitChildren(e);
  }
  visitPattern(e) {
  }
  visitFlags(e) {
  }
  visitDisjunction(e) {
  }
  visitAlternative(e) {
  }
  // Assertion
  visitStartAnchor(e) {
  }
  visitEndAnchor(e) {
  }
  visitWordBoundary(e) {
  }
  visitNonWordBoundary(e) {
  }
  visitLookahead(e) {
  }
  visitNegativeLookahead(e) {
  }
  // atoms
  visitCharacter(e) {
  }
  visitSet(e) {
  }
  visitGroup(e) {
  }
  visitGroupBackReference(e) {
  }
  visitQuantifier(e) {
  }
}
let xa = {};
const ny = new ry();
function Io(t) {
  const e = t.toString();
  if (xa.hasOwnProperty(e))
    return xa[e];
  {
    const r = ny.pattern(e);
    return xa[e] = r, r;
  }
}
function iy() {
  xa = {};
}
const X2 = "Complement Sets are not supported for first char optimization", za = `Unable to use "first char" lexer optimizations:
`;
function sy(t, e = false) {
  try {
    const r = Io(t);
    return rc(r.value, {}, r.flags.ignoreCase);
  } catch (r) {
    if (r.message === X2)
      e && W2(`${za}	Unable to optimize: < ${t.toString()} >
	Complement Sets cannot be automatically optimized.
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.`);
    else {
      let n = "";
      e && (n = `
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details.`), tc(`${za}
	Failed parsing: < ${t.toString()} >
	Using the @chevrotain/regexp-to-ast library
	Please open an issue at: https://github.com/chevrotain/chevrotain/issues` + n);
    }
  }
  return [];
}
function rc(t, e, r) {
  switch (t.type) {
    case "Disjunction":
      for (let i = 0; i < t.value.length; i++)
        rc(t.value[i], e, r);
      break;
    case "Alternative":
      const n = t.value;
      for (let i = 0; i < n.length; i++) {
        const s = n[i];
        switch (s.type) {
          case "EndAnchor":
          case "GroupBackReference":
          case "Lookahead":
          case "NegativeLookahead":
          case "StartAnchor":
          case "WordBoundary":
          case "NonWordBoundary":
            continue;
        }
        const a = s;
        switch (a.type) {
          case "Character":
            ca(a.value, e, r);
            break;
          case "Set":
            if (a.complement === true)
              throw Error(X2);
            ve(a.value, (l) => {
              if (typeof l == "number")
                ca(l, e, r);
              else {
                const c = l;
                if (r === true)
                  for (let u = c.from; u <= c.to; u++)
                    ca(u, e, r);
                else {
                  for (let u = c.from; u <= c.to && u < ns; u++)
                    ca(u, e, r);
                  if (c.to >= ns) {
                    const u = c.from >= ns ? c.from : ns, h = c.to, A = Un(u), f = Un(h);
                    for (let d = A; d <= f; d++)
                      e[d] = d;
                  }
                }
              }
            });
            break;
          case "Group":
            rc(a.value, e, r);
            break;
          default:
            throw Error("Non Exhaustive Match");
        }
        const o = a.quantifier !== void 0 && a.quantifier.atLeast === 0;
        if (
          // A group may be optional due to empty contents /(?:)/
          // or if everything inside it is optional /((a)?)/
          a.type === "Group" && nc(a) === false || // If this term is not a group it may only be optional if it has an optional quantifier
          a.type !== "Group" && o === false
        )
          break;
      }
      break;
    default:
      throw Error("non exhaustive match!");
  }
  return ft(e);
}
function ca(t, e, r) {
  const n = Un(t);
  e[n] = n, r === true && ay(t, e);
}
function ay(t, e) {
  const r = String.fromCharCode(t), n = r.toUpperCase();
  if (n !== r) {
    const i = Un(n.charCodeAt(0));
    e[i] = i;
  } else {
    const i = r.toLowerCase();
    if (i !== r) {
      const s = Un(i.charCodeAt(0));
      e[s] = s;
    }
  }
}
function H0(t, e) {
  return Qi(t.value, (r) => {
    if (typeof r == "number")
      return Ft(e, r);
    {
      const n = r;
      return Qi(e, (i) => n.from <= i && i <= n.to) !== void 0;
    }
  });
}
function nc(t) {
  const e = t.quantifier;
  return e && e.atLeast === 0 ? true : t.value ? Ne(t.value) ? Ir(t.value, nc) : nc(t.value) : false;
}
class oy extends Wc {
  constructor(e) {
    super(), this.targetCharCodes = e, this.found = false;
  }
  visitChildren(e) {
    if (this.found !== true) {
      switch (e.type) {
        case "Lookahead":
          this.visitLookahead(e);
          return;
        case "NegativeLookahead":
          this.visitNegativeLookahead(e);
          return;
      }
      super.visitChildren(e);
    }
  }
  visitCharacter(e) {
    Ft(this.targetCharCodes, e.value) && (this.found = true);
  }
  visitSet(e) {
    e.complement ? H0(e, this.targetCharCodes) === void 0 && (this.found = true) : H0(e, this.targetCharCodes) !== void 0 && (this.found = true);
  }
}
function jc(t, e) {
  if (e instanceof RegExp) {
    const r = Io(e), n = new oy(t);
    return n.visit(r), n.found;
  } else
    return Qi(e, (r) => Ft(t, r.charCodeAt(0))) !== void 0;
}
const ui = "PATTERN", rs = "defaultMode", ua = "modes";
let $2 = typeof new RegExp("(?:)").sticky == "boolean";
function ly(t, e) {
  e = zc(e, {
    useSticky: $2,
    debug: false,
    safeMode: false,
    positionTracking: "full",
    lineTerminatorCharacters: ["\r", `
`],
    tracer: (y, p) => p()
  });
  const r = e.tracer;
  r("initCharCodeToOptimizedIndexMap", () => {
    My();
  });
  let n;
  r("Reject Lexer.NA", () => {
    n = yo(t, (y) => y[ui] === or.NA);
  });
  let i = false, s;
  r("Transform Patterns", () => {
    i = false, s = fe(n, (y) => {
      const p = y[ui];
      if (cn(p)) {
        const g = p.source;
        return g.length === 1 && // only these regExp meta characters which can appear in a length one regExp
        g !== "^" && g !== "$" && g !== "." && !p.ignoreCase ? g : g.length === 2 && g[0] === "\\" && // not a meta character
        !Ft([
          "d",
          "D",
          "s",
          "S",
          "t",
          "r",
          "n",
          "t",
          "0",
          "c",
          "b",
          "B",
          "f",
          "v",
          "w",
          "W"
        ], g[1]) ? g[1] : e.useSticky ? z0(p) : V0(p);
      } else {
        if (fn(p))
          return i = true, { exec: p };
        if (typeof p == "object")
          return i = true, p;
        if (typeof p == "string") {
          if (p.length === 1)
            return p;
          {
            const g = p.replace(/[\\^$.*+?()[\]{}|]/g, "\\$&"), C = new RegExp(g);
            return e.useSticky ? z0(C) : V0(C);
          }
        } else
          throw Error("non exhaustive match");
      }
    });
  });
  let a, o, l, c, u;
  r("misc mapping", () => {
    a = fe(n, (y) => y.tokenTypeIdx), o = fe(n, (y) => {
      const p = y.GROUP;
      if (p !== or.SKIPPED) {
        if (Vt(p))
          return p;
        if (un(p))
          return false;
        throw Error("non exhaustive match");
      }
    }), l = fe(n, (y) => {
      const p = y.LONGER_ALT;
      if (p)
        return Ne(p) ? fe(p, (C) => P0(n, C)) : [P0(n, p)];
    }), c = fe(n, (y) => y.PUSH_MODE), u = fe(n, (y) => de(y, "POP_MODE"));
  });
  let h;
  r("Line Terminator Handling", () => {
    const y = eA(e.lineTerminatorCharacters);
    h = fe(n, (p) => false), e.positionTracking !== "onlyOffset" && (h = fe(n, (p) => de(p, "LINE_BREAKS") ? !!p.LINE_BREAKS : J2(p, y) === false && jc(y, p.PATTERN)));
  });
  let A, f, d, v;
  r("Misc Mapping #2", () => {
    A = fe(n, Z2), f = fe(s, by), d = $t(n, (y, p) => {
      const g = p.GROUP;
      return Vt(g) && g !== or.SKIPPED && (y[g] = []), y;
    }, {}), v = fe(s, (y, p) => ({
      pattern: s[p],
      longerAlt: l[p],
      canLineTerminator: h[p],
      isCustom: A[p],
      short: f[p],
      group: o[p],
      push: c[p],
      pop: u[p],
      tokenTypeIdx: a[p],
      tokenType: n[p]
    }));
  });
  let m = true, E = [];
  return e.safeMode || r("First Char Optimization", () => {
    E = $t(n, (y, p, g) => {
      if (typeof p.PATTERN == "string") {
        const C = p.PATTERN.charCodeAt(0), S = Un(C);
        nl(y, S, v[g]);
      } else if (Ne(p.START_CHARS_HINT)) {
        let C;
        ve(p.START_CHARS_HINT, (S) => {
          const x = typeof S == "string" ? S.charCodeAt(0) : S, T = Un(x);
          C !== T && (C = T, nl(y, T, v[g]));
        });
      } else if (cn(p.PATTERN))
        if (p.PATTERN.unicode)
          m = false, e.ensureOptimizations && tc(`${za}	Unable to analyze < ${p.PATTERN.toString()} > pattern.
	The regexp unicode flag is not currently supported by the regexp-to-ast library.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE`);
        else {
          const C = sy(p.PATTERN, e.ensureOptimizations);
          Ke(C) && (m = false), ve(C, (S) => {
            nl(y, S, v[g]);
          });
        }
      else
        e.ensureOptimizations && tc(`${za}	TokenType: <${p.name}> is using a custom token pattern without providing <start_chars_hint> parameter.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE`), m = false;
      return y;
    }, []);
  }), {
    emptyGroups: d,
    patternIdxToConfig: v,
    charCodeToPatternIdxToConfig: E,
    hasCustom: i,
    canBeOptimized: m
  };
}
function cy(t, e) {
  let r = [];
  const n = hy(t);
  r = r.concat(n.errors);
  const i = Ay(n.valid), s = i.valid;
  return r = r.concat(i.errors), r = r.concat(uy(s)), r = r.concat(Ey(s)), r = r.concat(Iy(s, e)), r = r.concat(Cy(s)), r;
}
function uy(t) {
  let e = [];
  const r = Ar(t, (n) => cn(n[ui]));
  return e = e.concat(py(r)), e = e.concat(my(r)), e = e.concat(vy(r)), e = e.concat(yy(r)), e = e.concat(dy(r)), e;
}
function hy(t) {
  const e = Ar(t, (i) => !de(i, ui)), r = fe(e, (i) => ({
    message: "Token Type: ->" + i.name + "<- missing static 'PATTERN' property",
    type: it.MISSING_PATTERN,
    tokenTypes: [i]
  })), n = vo(t, e);
  return { errors: r, valid: n };
}
function Ay(t) {
  const e = Ar(t, (i) => {
    const s = i[ui];
    return !cn(s) && !fn(s) && !de(s, "exec") && !Vt(s);
  }), r = fe(e, (i) => ({
    message: "Token Type: ->" + i.name + "<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",
    type: it.INVALID_PATTERN,
    tokenTypes: [i]
  })), n = vo(t, e);
  return { errors: r, valid: n };
}
const fy = /[^\\][$]/;
function py(t) {
  class e extends Wc {
    constructor() {
      super(...arguments), this.found = false;
    }
    visitEndAnchor(s) {
      this.found = true;
    }
  }
  const r = Ar(t, (i) => {
    const s = i.PATTERN;
    try {
      const a = Io(s), o = new e();
      return o.visit(a), o.found;
    } catch {
      return fy.test(s.source);
    }
  });
  return fe(r, (i) => ({
    message: `Unexpected RegExp Anchor Error:
	Token Type: ->` + i.name + `<- static 'PATTERN' cannot contain end of input anchor '$'
	See chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,
    type: it.EOI_ANCHOR_FOUND,
    tokenTypes: [i]
  }));
}
function dy(t) {
  const e = Ar(t, (n) => n.PATTERN.test(""));
  return fe(e, (n) => ({
    message: "Token Type: ->" + n.name + "<- static 'PATTERN' must not match an empty string",
    type: it.EMPTY_MATCH_PATTERN,
    tokenTypes: [n]
  }));
}
const gy = /[^\\[][\^]|^\^/;
function my(t) {
  class e extends Wc {
    constructor() {
      super(...arguments), this.found = false;
    }
    visitStartAnchor(s) {
      this.found = true;
    }
  }
  const r = Ar(t, (i) => {
    const s = i.PATTERN;
    try {
      const a = Io(s), o = new e();
      return o.visit(a), o.found;
    } catch {
      return gy.test(s.source);
    }
  });
  return fe(r, (i) => ({
    message: `Unexpected RegExp Anchor Error:
	Token Type: ->` + i.name + `<- static 'PATTERN' cannot contain start of input anchor '^'
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,
    type: it.SOI_ANCHOR_FOUND,
    tokenTypes: [i]
  }));
}
function vy(t) {
  const e = Ar(t, (n) => {
    const i = n[ui];
    return i instanceof RegExp && (i.multiline || i.global);
  });
  return fe(e, (n) => ({
    message: "Token Type: ->" + n.name + "<- static 'PATTERN' may NOT contain global('g') or multiline('m')",
    type: it.UNSUPPORTED_FLAGS_FOUND,
    tokenTypes: [n]
  }));
}
function yy(t) {
  const e = [];
  let r = fe(t, (s) => $t(t, (a, o) => (s.PATTERN.source === o.PATTERN.source && !Ft(e, o) && o.PATTERN !== or.NA && (e.push(o), a.push(o)), a), []));
  r = Gs(r);
  const n = Ar(r, (s) => s.length > 1);
  return fe(n, (s) => {
    const a = fe(s, (l) => l.name);
    return {
      message: `The same RegExp pattern ->${wr(s).PATTERN}<-has been used in all of the following Token Types: ${a.join(", ")} <-`,
      type: it.DUPLICATE_PATTERNS_FOUND,
      tokenTypes: s
    };
  });
}
function Ey(t) {
  const e = Ar(t, (n) => {
    if (!de(n, "GROUP"))
      return false;
    const i = n.GROUP;
    return i !== or.SKIPPED && i !== or.NA && !Vt(i);
  });
  return fe(e, (n) => ({
    message: "Token Type: ->" + n.name + "<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",
    type: it.INVALID_GROUP_TYPE_FOUND,
    tokenTypes: [n]
  }));
}
function Iy(t, e) {
  const r = Ar(t, (i) => i.PUSH_MODE !== void 0 && !Ft(e, i.PUSH_MODE));
  return fe(r, (i) => ({
    message: `Token Type: ->${i.name}<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->${i.PUSH_MODE}<-which does not exist`,
    type: it.PUSH_MODE_DOES_NOT_EXIST,
    tokenTypes: [i]
  }));
}
function Cy(t) {
  const e = [], r = $t(t, (n, i, s) => {
    const a = i.PATTERN;
    return a === or.NA || (Vt(a) ? n.push({ str: a, idx: s, tokenType: i }) : cn(a) && Ty(a) && n.push({ str: a.source, idx: s, tokenType: i })), n;
  }, []);
  return ve(t, (n, i) => {
    ve(r, ({ str: s, idx: a, tokenType: o }) => {
      if (i < a && xy(s, n.PATTERN)) {
        const l = `Token: ->${o.name}<- can never be matched.
Because it appears AFTER the Token Type ->${n.name}<-in the lexer's definition.
See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;
        e.push({
          message: l,
          type: it.UNREACHABLE_PATTERN,
          tokenTypes: [n, o]
        });
      }
    });
  }), e;
}
function xy(t, e) {
  if (cn(e)) {
    const r = e.exec(t);
    return r !== null && r.index === 0;
  } else {
    if (fn(e))
      return e(t, 0, [], {});
    if (de(e, "exec"))
      return e.exec(t, 0, [], {});
    if (typeof e == "string")
      return e === t;
    throw Error("non exhaustive match");
  }
}
function Ty(t) {
  return Qi([
    ".",
    "\\",
    "[",
    "]",
    "|",
    "^",
    "$",
    "(",
    ")",
    "?",
    "*",
    "+",
    "{"
  ], (r) => t.source.indexOf(r) !== -1) === void 0;
}
function V0(t) {
  const e = t.ignoreCase ? "i" : "";
  return new RegExp(`^(?:${t.source})`, e);
}
function z0(t) {
  const e = t.ignoreCase ? "iy" : "y";
  return new RegExp(`${t.source}`, e);
}
function Sy(t, e, r) {
  const n = [];
  return de(t, rs) || n.push({
    message: "A MultiMode Lexer cannot be initialized without a <" + rs + `> property in its definition
`,
    type: it.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE
  }), de(t, ua) || n.push({
    message: "A MultiMode Lexer cannot be initialized without a <" + ua + `> property in its definition
`,
    type: it.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY
  }), de(t, ua) && de(t, rs) && !de(t.modes, t.defaultMode) && n.push({
    message: `A MultiMode Lexer cannot be initialized with a ${rs}: <${t.defaultMode}>which does not exist
`,
    type: it.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST
  }), de(t, ua) && ve(t.modes, (i, s) => {
    ve(i, (a, o) => {
      if (un(a))
        n.push({
          message: `A Lexer cannot be initialized using an undefined Token Type. Mode:<${s}> at index: <${o}>
`,
          type: it.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED
        });
      else if (de(a, "LONGER_ALT")) {
        const l = Ne(a.LONGER_ALT) ? a.LONGER_ALT : [a.LONGER_ALT];
        ve(l, (c) => {
          !un(c) && !Ft(i, c) && n.push({
            message: `A MultiMode Lexer cannot be initialized with a longer_alt <${c.name}> on token <${a.name}> outside of mode <${s}>
`,
            type: it.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE
          });
        });
      }
    });
  }), n;
}
function wy(t, e, r) {
  const n = [];
  let i = false;
  const s = Gs(Er(ft(t.modes))), a = yo(s, (l) => l[ui] === or.NA), o = eA(r);
  return e && ve(a, (l) => {
    const c = J2(l, o);
    if (c !== false) {
      const h = {
        message: Ry(l, c),
        type: c.issue,
        tokenType: l
      };
      n.push(h);
    } else
      de(l, "LINE_BREAKS") ? l.LINE_BREAKS === true && (i = true) : jc(o, l.PATTERN) && (i = true);
  }), e && !i && n.push({
    message: `Warning: No LINE_BREAKS Found.
	This Lexer has been defined to track line and column information,
	But none of the Token Types can be identified as matching a line terminator.
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS 
	for details.`,
    type: it.NO_LINE_BREAKS_FLAGS
  }), n;
}
function By(t) {
  const e = {}, r = Kt(t);
  return ve(r, (n) => {
    const i = t[n];
    if (Ne(i))
      e[n] = [];
    else
      throw Error("non exhaustive match");
  }), e;
}
function Z2(t) {
  const e = t.PATTERN;
  if (cn(e))
    return false;
  if (fn(e))
    return true;
  if (de(e, "exec"))
    return true;
  if (Vt(e))
    return false;
  throw Error("non exhaustive match");
}
function by(t) {
  return Vt(t) && t.length === 1 ? t.charCodeAt(0) : false;
}
const _y = {
  // implements /\n|\r\n?/g.test
  test: function(t) {
    const e = t.length;
    for (let r = this.lastIndex; r < e; r++) {
      const n = t.charCodeAt(r);
      if (n === 10)
        return this.lastIndex = r + 1, true;
      if (n === 13)
        return t.charCodeAt(r + 1) === 10 ? this.lastIndex = r + 2 : this.lastIndex = r + 1, true;
    }
    return false;
  },
  lastIndex: 0
};
function J2(t, e) {
  if (de(t, "LINE_BREAKS"))
    return false;
  if (cn(t.PATTERN)) {
    try {
      jc(e, t.PATTERN);
    } catch (r) {
      return {
        issue: it.IDENTIFY_TERMINATOR,
        errMsg: r.message
      };
    }
    return false;
  } else {
    if (Vt(t.PATTERN))
      return false;
    if (Z2(t))
      return { issue: it.CUSTOM_LINE_BREAK };
    throw Error("non exhaustive match");
  }
}
function Ry(t, e) {
  if (e.issue === it.IDENTIFY_TERMINATOR)
    return `Warning: unable to identify line terminator usage in pattern.
	The problem is in the <${t.name}> Token Type
	 Root cause: ${e.errMsg}.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR`;
  if (e.issue === it.CUSTOM_LINE_BREAK)
    return `Warning: A Custom Token Pattern should specify the <line_breaks> option.
	The problem is in the <${t.name}> Token Type
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK`;
  throw Error("non exhaustive match");
}
function eA(t) {
  return fe(t, (r) => Vt(r) ? r.charCodeAt(0) : r);
}
function nl(t, e, r) {
  t[e] === void 0 ? t[e] = [r] : t[e].push(r);
}
const ns = 256;
let Ta = [];
function Un(t) {
  return t < ns ? t : Ta[t];
}
function My() {
  if (Ke(Ta)) {
    Ta = new Array(65536);
    for (let t = 0; t < 65536; t++)
      Ta[t] = t > 255 ? 255 + ~~(t / 255) : t;
  }
}
function Vs(t, e) {
  const r = t.tokenTypeIdx;
  return r === e.tokenTypeIdx ? true : e.isParent === true && e.categoryMatchesMap[r] === true;
}
function Ya(t, e) {
  return t.tokenTypeIdx === e.tokenTypeIdx;
}
let Y0 = 1;
const tA = {};
function zs(t) {
  const e = Dy(t);
  ky(e), Ly(e), Fy(e), ve(e, (r) => {
    r.isParent = r.categoryMatches.length > 0;
  });
}
function Dy(t) {
  let e = Bt(t), r = t, n = true;
  for (; n; ) {
    r = Gs(Er(fe(r, (s) => s.CATEGORIES)));
    const i = vo(r, e);
    e = e.concat(i), Ke(i) ? n = false : r = i;
  }
  return e;
}
function ky(t) {
  ve(t, (e) => {
    nA(e) || (tA[Y0] = e, e.tokenTypeIdx = Y0++), W0(e) && !Ne(e.CATEGORIES) && (e.CATEGORIES = [e.CATEGORIES]), W0(e) || (e.CATEGORIES = []), Oy(e) || (e.categoryMatches = []), Py(e) || (e.categoryMatchesMap = {});
  });
}
function Fy(t) {
  ve(t, (e) => {
    e.categoryMatches = [], ve(e.categoryMatchesMap, (r, n) => {
      e.categoryMatches.push(tA[n].tokenTypeIdx);
    });
  });
}
function Ly(t) {
  ve(t, (e) => {
    rA([], e);
  });
}
function rA(t, e) {
  ve(t, (r) => {
    e.categoryMatchesMap[r.tokenTypeIdx] = true;
  }), ve(e.CATEGORIES, (r) => {
    const n = t.concat(e);
    Ft(n, r) || rA(n, r);
  });
}
function nA(t) {
  return de(t, "tokenTypeIdx");
}
function W0(t) {
  return de(t, "CATEGORIES");
}
function Oy(t) {
  return de(t, "categoryMatches");
}
function Py(t) {
  return de(t, "categoryMatchesMap");
}
function Qy(t) {
  return de(t, "tokenTypeIdx");
}
const Ny = {
  buildUnableToPopLexerModeMessage(t) {
    return `Unable to pop Lexer Mode after encountering Token ->${t.image}<- The Mode Stack is empty`;
  },
  buildUnexpectedCharactersMessage(t, e, r, n, i) {
    return `unexpected character: ->${t.charAt(e)}<- at offset: ${e}, skipped ${r} characters.`;
  }
};
var it;
(function(t) {
  t[t.MISSING_PATTERN = 0] = "MISSING_PATTERN", t[t.INVALID_PATTERN = 1] = "INVALID_PATTERN", t[t.EOI_ANCHOR_FOUND = 2] = "EOI_ANCHOR_FOUND", t[t.UNSUPPORTED_FLAGS_FOUND = 3] = "UNSUPPORTED_FLAGS_FOUND", t[t.DUPLICATE_PATTERNS_FOUND = 4] = "DUPLICATE_PATTERNS_FOUND", t[t.INVALID_GROUP_TYPE_FOUND = 5] = "INVALID_GROUP_TYPE_FOUND", t[t.PUSH_MODE_DOES_NOT_EXIST = 6] = "PUSH_MODE_DOES_NOT_EXIST", t[t.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE = 7] = "MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE", t[t.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY = 8] = "MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY", t[t.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST = 9] = "MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST", t[t.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED = 10] = "LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED", t[t.SOI_ANCHOR_FOUND = 11] = "SOI_ANCHOR_FOUND", t[t.EMPTY_MATCH_PATTERN = 12] = "EMPTY_MATCH_PATTERN", t[t.NO_LINE_BREAKS_FLAGS = 13] = "NO_LINE_BREAKS_FLAGS", t[t.UNREACHABLE_PATTERN = 14] = "UNREACHABLE_PATTERN", t[t.IDENTIFY_TERMINATOR = 15] = "IDENTIFY_TERMINATOR", t[t.CUSTOM_LINE_BREAK = 16] = "CUSTOM_LINE_BREAK", t[t.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE = 17] = "MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE";
})(it || (it = {}));
const is = {
  deferDefinitionErrorsHandling: false,
  positionTracking: "full",
  lineTerminatorsPattern: /\n|\r\n?/g,
  lineTerminatorCharacters: [`
`, "\r"],
  ensureOptimizations: false,
  safeMode: false,
  errorMessageProvider: Ny,
  traceInitPerf: false,
  skipValidations: false,
  recoveryEnabled: true
};
Object.freeze(is);
class or {
  constructor(e, r = is) {
    if (this.lexerDefinition = e, this.lexerDefinitionErrors = [], this.lexerDefinitionWarning = [], this.patternIdxToConfig = {}, this.charCodeToPatternIdxToConfig = {}, this.modes = [], this.emptyGroups = {}, this.trackStartLines = true, this.trackEndLines = true, this.hasCustom = false, this.canModeBeOptimized = {}, this.TRACE_INIT = (i, s) => {
      if (this.traceInitPerf === true) {
        this.traceInitIndent++;
        const a = new Array(this.traceInitIndent + 1).join("	");
        this.traceInitIndent < this.traceInitMaxIdent && console.log(`${a}--> <${i}>`);
        const { time: o, value: l } = j2(s), c = o > 10 ? console.warn : console.log;
        return this.traceInitIndent < this.traceInitMaxIdent && c(`${a}<-- <${i}> time: ${o}ms`), this.traceInitIndent--, l;
      } else
        return s();
    }, typeof r == "boolean")
      throw Error(`The second argument to the Lexer constructor is now an ILexerConfig Object.
a boolean 2nd argument is no longer supported`);
    this.config = Xt({}, is, r);
    const n = this.config.traceInitPerf;
    n === true ? (this.traceInitMaxIdent = 1 / 0, this.traceInitPerf = true) : typeof n == "number" && (this.traceInitMaxIdent = n, this.traceInitPerf = true), this.traceInitIndent = -1, this.TRACE_INIT("Lexer Constructor", () => {
      let i, s = true;
      this.TRACE_INIT("Lexer Config handling", () => {
        if (this.config.lineTerminatorsPattern === is.lineTerminatorsPattern)
          this.config.lineTerminatorsPattern = _y;
        else if (this.config.lineTerminatorCharacters === is.lineTerminatorCharacters)
          throw Error(`Error: Missing <lineTerminatorCharacters> property on the Lexer config.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS`);
        if (r.safeMode && r.ensureOptimizations)
          throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');
        this.trackStartLines = /full|onlyStart/i.test(this.config.positionTracking), this.trackEndLines = /full/i.test(this.config.positionTracking), Ne(e) ? i = {
          modes: { defaultMode: Bt(e) },
          defaultMode: rs
        } : (s = false, i = Bt(e));
      }), this.config.skipValidations === false && (this.TRACE_INIT("performRuntimeChecks", () => {
        this.lexerDefinitionErrors = this.lexerDefinitionErrors.concat(Sy(i, this.trackStartLines, this.config.lineTerminatorCharacters));
      }), this.TRACE_INIT("performWarningRuntimeChecks", () => {
        this.lexerDefinitionWarning = this.lexerDefinitionWarning.concat(wy(i, this.trackStartLines, this.config.lineTerminatorCharacters));
      })), i.modes = i.modes ? i.modes : {}, ve(i.modes, (o, l) => {
        i.modes[l] = yo(o, (c) => un(c));
      });
      const a = Kt(i.modes);
      if (ve(i.modes, (o, l) => {
        this.TRACE_INIT(`Mode: <${l}> processing`, () => {
          if (this.modes.push(l), this.config.skipValidations === false && this.TRACE_INIT("validatePatterns", () => {
            this.lexerDefinitionErrors = this.lexerDefinitionErrors.concat(cy(o, a));
          }), Ke(this.lexerDefinitionErrors)) {
            zs(o);
            let c;
            this.TRACE_INIT("analyzeTokenTypes", () => {
              c = ly(o, {
                lineTerminatorCharacters: this.config.lineTerminatorCharacters,
                positionTracking: r.positionTracking,
                ensureOptimizations: r.ensureOptimizations,
                safeMode: r.safeMode,
                tracer: this.TRACE_INIT
              });
            }), this.patternIdxToConfig[l] = c.patternIdxToConfig, this.charCodeToPatternIdxToConfig[l] = c.charCodeToPatternIdxToConfig, this.emptyGroups = Xt({}, this.emptyGroups, c.emptyGroups), this.hasCustom = c.hasCustom || this.hasCustom, this.canModeBeOptimized[l] = c.canBeOptimized;
          }
        });
      }), this.defaultMode = i.defaultMode, !Ke(this.lexerDefinitionErrors) && !this.config.deferDefinitionErrorsHandling) {
        const l = fe(this.lexerDefinitionErrors, (c) => c.message).join(`-----------------------
`);
        throw new Error(`Errors detected in definition of Lexer:
` + l);
      }
      ve(this.lexerDefinitionWarning, (o) => {
        W2(o.message);
      }), this.TRACE_INIT("Choosing sub-methods implementations", () => {
        if ($2 ? (this.chopInput = Fi, this.match = this.matchWithTest) : (this.updateLastIndex = At, this.match = this.matchWithExec), s && (this.handleModes = At), this.trackStartLines === false && (this.computeNewColumn = Fi), this.trackEndLines === false && (this.updateTokenEndLineColumnLocation = At), /full/i.test(this.config.positionTracking))
          this.createTokenInstance = this.createFullToken;
        else if (/onlyStart/i.test(this.config.positionTracking))
          this.createTokenInstance = this.createStartOnlyToken;
        else if (/onlyOffset/i.test(this.config.positionTracking))
          this.createTokenInstance = this.createOffsetOnlyToken;
        else
          throw Error(`Invalid <positionTracking> config option: "${this.config.positionTracking}"`);
        this.hasCustom ? (this.addToken = this.addTokenUsingPush, this.handlePayload = this.handlePayloadWithCustom) : (this.addToken = this.addTokenUsingMemberAccess, this.handlePayload = this.handlePayloadNoCustom);
      }), this.TRACE_INIT("Failed Optimization Warnings", () => {
        const o = $t(this.canModeBeOptimized, (l, c, u) => (c === false && l.push(u), l), []);
        if (r.ensureOptimizations && !Ke(o))
          throw Error(`Lexer Modes: < ${o.join(", ")} > cannot be optimized.
	 Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.
	 Or inspect the console log for details on how to resolve these issues.`);
      }), this.TRACE_INIT("clearRegExpParserCache", () => {
        iy();
      }), this.TRACE_INIT("toFastProperties", () => {
        q2(this);
      });
    });
  }
  tokenize(e, r = this.defaultMode) {
    if (!Ke(this.lexerDefinitionErrors)) {
      const i = fe(this.lexerDefinitionErrors, (s) => s.message).join(`-----------------------
`);
      throw new Error(`Unable to Tokenize because Errors detected in definition of Lexer:
` + i);
    }
    return this.tokenizeInternal(e, r);
  }
  // There is quite a bit of duplication between this and "tokenizeInternalLazy"
  // This is intentional due to performance considerations.
  // this method also used quite a bit of `!` none null assertions because it is too optimized
  // for `tsc` to always understand it is "safe"
  tokenizeInternal(e, r) {
    let n, i, s, a, o, l, c, u, h, A, f, d, v, m, E;
    const y = e, p = y.length;
    let g = 0, C = 0;
    const S = this.hasCustom ? 0 : Math.floor(e.length / 10), x = new Array(S), T = [];
    let B = this.trackStartLines ? 1 : void 0, R = this.trackStartLines ? 1 : void 0;
    const _ = By(this.emptyGroups), F = this.trackStartLines, U = this.config.lineTerminatorsPattern;
    let Y = 0, N = [], Z = [];
    const j = [], Q = [];
    Object.freeze(Q);
    let $;
    function X() {
      return N;
    }
    function K(V) {
      const k = Un(V), q = Z[k];
      return q === void 0 ? Q : q;
    }
    const D = (V) => {
      if (j.length === 1 && // if we have both a POP_MODE and a PUSH_MODE this is in-fact a "transition"
      // So no error should occur.
      V.tokenType.PUSH_MODE === void 0) {
        const k = this.config.errorMessageProvider.buildUnableToPopLexerModeMessage(V);
        T.push({
          offset: V.startOffset,
          line: V.startLine,
          column: V.startColumn,
          length: V.image.length,
          message: k
        });
      } else {
        j.pop();
        const k = Pi(j);
        N = this.patternIdxToConfig[k], Z = this.charCodeToPatternIdxToConfig[k], Y = N.length;
        const q = this.canModeBeOptimized[k] && this.config.safeMode === false;
        Z && q ? $ = K : $ = X;
      }
    };
    function L(V) {
      j.push(V), Z = this.charCodeToPatternIdxToConfig[V], N = this.patternIdxToConfig[V], Y = N.length, Y = N.length;
      const k = this.canModeBeOptimized[V] && this.config.safeMode === false;
      Z && k ? $ = K : $ = X;
    }
    L.call(this, r);
    let I;
    const O = this.config.recoveryEnabled;
    for (; g < p; ) {
      l = null;
      const V = y.charCodeAt(g), k = $(V), q = k.length;
      for (n = 0; n < q; n++) {
        I = k[n];
        const se = I.pattern;
        c = null;
        const re = I.short;
        if (re !== false ? V === re && (l = se) : I.isCustom === true ? (E = se.exec(y, g, x, _), E !== null ? (l = E[0], E.payload !== void 0 && (c = E.payload)) : l = null) : (this.updateLastIndex(se, g), l = this.match(se, e, g)), l !== null) {
          if (o = I.longerAlt, o !== void 0) {
            const ne = o.length;
            for (s = 0; s < ne; s++) {
              const te = N[o[s]], ge = te.pattern;
              if (u = null, te.isCustom === true ? (E = ge.exec(y, g, x, _), E !== null ? (a = E[0], E.payload !== void 0 && (u = E.payload)) : a = null) : (this.updateLastIndex(ge, g), a = this.match(ge, e, g)), a && a.length > l.length) {
                l = a, c = u, I = te;
                break;
              }
            }
          }
          break;
        }
      }
      if (l !== null) {
        if (h = l.length, A = I.group, A !== void 0 && (f = I.tokenTypeIdx, d = this.createTokenInstance(l, g, f, I.tokenType, B, R, h), this.handlePayload(d, c), A === false ? C = this.addToken(x, C, d) : _[A].push(d)), e = this.chopInput(e, h), g = g + h, R = this.computeNewColumn(R, h), F === true && I.canLineTerminator === true) {
          let se = 0, re, ne;
          U.lastIndex = 0;
          do
            re = U.test(l), re === true && (ne = U.lastIndex - 1, se++);
          while (re === true);
          se !== 0 && (B = B + se, R = h - ne, this.updateTokenEndLineColumnLocation(d, A, ne, se, B, R, h));
        }
        this.handleModes(I, D, L, d);
      } else {
        const se = g, re = B, ne = R;
        let te = O === false;
        for (; te === false && g < p; )
          for (e = this.chopInput(e, 1), g++, i = 0; i < Y; i++) {
            const ge = N[i], ee = ge.pattern, le = ge.short;
            if (le !== false ? y.charCodeAt(g) === le && (te = true) : ge.isCustom === true ? te = ee.exec(y, g, x, _) !== null : (this.updateLastIndex(ee, g), te = ee.exec(e) !== null), te === true)
              break;
          }
        if (v = g - se, R = this.computeNewColumn(R, v), m = this.config.errorMessageProvider.buildUnexpectedCharactersMessage(y, se, v, re, ne), T.push({
          offset: se,
          line: re,
          column: ne,
          length: v,
          message: m
        }), O === false)
          break;
      }
    }
    return this.hasCustom || (x.length = C), {
      tokens: x,
      groups: _,
      errors: T
    };
  }
  handleModes(e, r, n, i) {
    if (e.pop === true) {
      const s = e.push;
      r(i), s !== void 0 && n.call(this, s);
    } else
      e.push !== void 0 && n.call(this, e.push);
  }
  chopInput(e, r) {
    return e.substring(r);
  }
  updateLastIndex(e, r) {
    e.lastIndex = r;
  }
  // TODO: decrease this under 600 characters? inspect stripping comments option in TSC compiler
  updateTokenEndLineColumnLocation(e, r, n, i, s, a, o) {
    let l, c;
    r !== void 0 && (l = n === o - 1, c = l ? -1 : 0, i === 1 && l === true || (e.endLine = s + c, e.endColumn = a - 1 + -c));
  }
  computeNewColumn(e, r) {
    return e + r;
  }
  createOffsetOnlyToken(e, r, n, i) {
    return {
      image: e,
      startOffset: r,
      tokenTypeIdx: n,
      tokenType: i
    };
  }
  createStartOnlyToken(e, r, n, i, s, a) {
    return {
      image: e,
      startOffset: r,
      startLine: s,
      startColumn: a,
      tokenTypeIdx: n,
      tokenType: i
    };
  }
  createFullToken(e, r, n, i, s, a, o) {
    return {
      image: e,
      startOffset: r,
      endOffset: r + o - 1,
      startLine: s,
      endLine: s,
      startColumn: a,
      endColumn: a + o - 1,
      tokenTypeIdx: n,
      tokenType: i
    };
  }
  addTokenUsingPush(e, r, n) {
    return e.push(n), r;
  }
  addTokenUsingMemberAccess(e, r, n) {
    return e[r] = n, r++, r;
  }
  handlePayloadNoCustom(e, r) {
  }
  handlePayloadWithCustom(e, r) {
    r !== null && (e.payload = r);
  }
  matchWithTest(e, r, n) {
    return e.test(r) === true ? r.substring(n, e.lastIndex) : null;
  }
  matchWithExec(e, r) {
    const n = e.exec(r);
    return n !== null ? n[0] : null;
  }
}
or.SKIPPED = "This marks a skipped Token pattern, this means each token identified by it willbe consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.";
or.NA = /NOT_APPLICABLE/;
function fs(t) {
  return iA(t) ? t.LABEL : t.name;
}
function iA(t) {
  return Vt(t.LABEL) && t.LABEL !== "";
}
const Uy = "parent", j0 = "categories", q0 = "label", K0 = "group", X0 = "push_mode", $0 = "pop_mode", Z0 = "longer_alt", J0 = "line_breaks", eu = "start_chars_hint";
function sA(t) {
  return Gy(t);
}
function Gy(t) {
  const e = t.pattern, r = {};
  if (r.name = t.name, un(e) || (r.PATTERN = e), de(t, Uy))
    throw `The parent property is no longer supported.
See: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.`;
  return de(t, j0) && (r.CATEGORIES = t[j0]), zs([r]), de(t, q0) && (r.LABEL = t[q0]), de(t, K0) && (r.GROUP = t[K0]), de(t, $0) && (r.POP_MODE = t[$0]), de(t, X0) && (r.PUSH_MODE = t[X0]), de(t, Z0) && (r.LONGER_ALT = t[Z0]), de(t, J0) && (r.LINE_BREAKS = t[J0]), de(t, eu) && (r.START_CHARS_HINT = t[eu]), r;
}
const hi = sA({ name: "EOF", pattern: or.NA });
zs([hi]);
function qc(t, e, r, n, i, s, a, o) {
  return {
    image: e,
    startOffset: r,
    endOffset: n,
    startLine: i,
    endLine: s,
    startColumn: a,
    endColumn: o,
    tokenTypeIdx: t.tokenTypeIdx,
    tokenType: t
  };
}
function Hy(t, e) {
  return Vs(t, e);
}
const aA = {
  buildMismatchTokenMessage({ expected: t, actual: e, previous: r, ruleName: n }) {
    return `Expecting ${iA(t) ? `--> ${fs(t)} <--` : `token of type --> ${t.name} <--`} but found --> '${e.image}' <--`;
  },
  buildNotAllInputParsedMessage({ firstRedundant: t, ruleName: e }) {
    return "Redundant input, expecting EOF but found: " + t.image;
  },
  buildNoViableAltMessage({ expectedPathsPerAlt: t, actual: e, previous: r, customUserDescription: n, ruleName: i }) {
    const s = "Expecting: ", o = `
but found: '` + wr(e).image + "'";
    if (n)
      return s + n + o;
    {
      const l = $t(t, (A, f) => A.concat(f), []), c = fe(l, (A) => `[${fe(A, (f) => fs(f)).join(", ")}]`), h = `one of these possible Token sequences:
${fe(c, (A, f) => `  ${f + 1}. ${A}`).join(`
`)}`;
      return s + h + o;
    }
  },
  buildEarlyExitMessage({ expectedIterationPaths: t, actual: e, customUserDescription: r, ruleName: n }) {
    const i = "Expecting: ", a = `
but found: '` + wr(e).image + "'";
    if (r)
      return i + r + a;
    {
      const l = `expecting at least one iteration which starts with one of these possible Token sequences::
  <${fe(t, (c) => `[${fe(c, (u) => fs(u)).join(",")}]`).join(" ,")}>`;
      return i + l + a;
    }
  }
};
Object.freeze(aA);
const Vy = {
  buildRuleNotFoundError(t, e) {
    return "Invalid grammar, reference to a rule which is not defined: ->" + e.nonTerminalName + `<-
inside top level rule: ->` + t.name + "<-";
  }
}, oi = {
  buildDuplicateFoundError(t, e) {
    function r(u) {
      return u instanceof rt ? u.terminalType.name : u instanceof Zt ? u.nonTerminalName : "";
    }
    const n = t.name, i = wr(e), s = i.idx, a = Qr(i), o = r(i), l = s > 0;
    let c = `->${a}${l ? s : ""}<- ${o ? `with argument: ->${o}<-` : ""}
                  appears more than once (${e.length} times) in the top level rule: ->${n}<-.                  
                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES 
                  `;
    return c = c.replace(/[ \t]+/g, " "), c = c.replace(/\s\s+/g, `
`), c;
  },
  buildNamespaceConflictError(t) {
    return `Namespace conflict found in grammar.
The grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <${t.name}>.
To resolve this make sure each Terminal and Non-Terminal names are unique
This is easy to accomplish by using the convention that Terminal names start with an uppercase letter
and Non-Terminal names start with a lower case letter.`;
  },
  buildAlternationPrefixAmbiguityError(t) {
    const e = fe(t.prefixPath, (i) => fs(i)).join(", "), r = t.alternation.idx === 0 ? "" : t.alternation.idx;
    return `Ambiguous alternatives: <${t.ambiguityIndices.join(" ,")}> due to common lookahead prefix
in <OR${r}> inside <${t.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX
For Further details.`;
  },
  buildAlternationAmbiguityError(t) {
    const e = fe(t.prefixPath, (i) => fs(i)).join(", "), r = t.alternation.idx === 0 ? "" : t.alternation.idx;
    let n = `Ambiguous Alternatives Detected: <${t.ambiguityIndices.join(" ,")}> in <OR${r}> inside <${t.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
`;
    return n = n + `See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`, n;
  },
  buildEmptyRepetitionError(t) {
    let e = Qr(t.repetition);
    return t.repetition.idx !== 0 && (e += t.repetition.idx), `The repetition <${e}> within Rule <${t.topLevelRule.name}> can never consume any tokens.
This could lead to an infinite loop.`;
  },
  // TODO: remove - `errors_public` from nyc.config.js exclude
  //       once this method is fully removed from this file
  buildTokenNameError(t) {
    return "deprecated";
  },
  buildEmptyAlternationError(t) {
    return `Ambiguous empty alternative: <${t.emptyChoiceIdx + 1}> in <OR${t.alternation.idx}> inside <${t.topLevelRule.name}> Rule.
Only the last alternative may be an empty alternative.`;
  },
  buildTooManyAlternativesError(t) {
    return `An Alternation cannot have more than 256 alternatives:
<OR${t.alternation.idx}> inside <${t.topLevelRule.name}> Rule.
 has ${t.alternation.definition.length + 1} alternatives.`;
  },
  buildLeftRecursionError(t) {
    const e = t.topLevelRule.name, r = fe(t.leftRecursionPath, (s) => s.name), n = `${e} --> ${r.concat([e]).join(" --> ")}`;
    return `Left Recursion found in grammar.
rule: <${e}> can be invoked from itself (directly or indirectly)
without consuming any Tokens. The grammar path that causes this is: 
 ${n}
 To fix this refactor your grammar to remove the left recursion.
see: https://en.wikipedia.org/wiki/LL_parser#Left_factoring.`;
  },
  // TODO: remove - `errors_public` from nyc.config.js exclude
  //       once this method is fully removed from this file
  buildInvalidRuleNameError(t) {
    return "deprecated";
  },
  buildDuplicateRuleNameError(t) {
    let e;
    return t.topLevelRule instanceof Gi ? e = t.topLevelRule.name : e = t.topLevelRule, `Duplicate definition, rule: ->${e}<- is already defined in the grammar: ->${t.grammarName}<-`;
  }
};
function zy(t, e) {
  const r = new Yy(t, e);
  return r.resolveRefs(), r.errors;
}
class Yy extends Hi {
  constructor(e, r) {
    super(), this.nameToTopRule = e, this.errMsgProvider = r, this.errors = [];
  }
  resolveRefs() {
    ve(ft(this.nameToTopRule), (e) => {
      this.currTopLevel = e, e.accept(this);
    });
  }
  visitNonTerminal(e) {
    const r = this.nameToTopRule[e.nonTerminalName];
    if (r)
      e.referencedRule = r;
    else {
      const n = this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel, e);
      this.errors.push({
        message: n,
        type: Dt.UNRESOLVED_SUBRULE_REF,
        ruleName: this.currTopLevel.name,
        unresolvedRefName: e.nonTerminalName
      });
    }
  }
}
class Wy extends Eo {
  constructor(e, r) {
    super(), this.topProd = e, this.path = r, this.possibleTokTypes = [], this.nextProductionName = "", this.nextProductionOccurrence = 0, this.found = false, this.isAtEndOfPath = false;
  }
  startWalking() {
    if (this.found = false, this.path.ruleStack[0] !== this.topProd.name)
      throw Error("The path does not start with the walker's top Rule!");
    return this.ruleStack = Bt(this.path.ruleStack).reverse(), this.occurrenceStack = Bt(this.path.occurrenceStack).reverse(), this.ruleStack.pop(), this.occurrenceStack.pop(), this.updateExpectedNext(), this.walk(this.topProd), this.possibleTokTypes;
  }
  walk(e, r = []) {
    this.found || super.walk(e, r);
  }
  walkProdRef(e, r, n) {
    if (e.referencedRule.name === this.nextProductionName && e.idx === this.nextProductionOccurrence) {
      const i = r.concat(n);
      this.updateExpectedNext(), this.walk(e.referencedRule, i);
    }
  }
  updateExpectedNext() {
    Ke(this.ruleStack) ? (this.nextProductionName = "", this.nextProductionOccurrence = 0, this.isAtEndOfPath = true) : (this.nextProductionName = this.ruleStack.pop(), this.nextProductionOccurrence = this.occurrenceStack.pop());
  }
}
class jy extends Wy {
  constructor(e, r) {
    super(e, r), this.path = r, this.nextTerminalName = "", this.nextTerminalOccurrence = 0, this.nextTerminalName = this.path.lastTok.name, this.nextTerminalOccurrence = this.path.lastTokOccurrence;
  }
  walkTerminal(e, r, n) {
    if (this.isAtEndOfPath && e.terminalType.name === this.nextTerminalName && e.idx === this.nextTerminalOccurrence && !this.found) {
      const i = r.concat(n), s = new zt({ definition: i });
      this.possibleTokTypes = Hs(s), this.found = true;
    }
  }
}
class Co extends Eo {
  constructor(e, r) {
    super(), this.topRule = e, this.occurrence = r, this.result = {
      token: void 0,
      occurrence: void 0,
      isEndOfRule: void 0
    };
  }
  startWalking() {
    return this.walk(this.topRule), this.result;
  }
}
class qy extends Co {
  walkMany(e, r, n) {
    if (e.idx === this.occurrence) {
      const i = wr(r.concat(n));
      this.result.isEndOfRule = i === void 0, i instanceof rt && (this.result.token = i.terminalType, this.result.occurrence = i.idx);
    } else
      super.walkMany(e, r, n);
  }
}
class tu extends Co {
  walkManySep(e, r, n) {
    if (e.idx === this.occurrence) {
      const i = wr(r.concat(n));
      this.result.isEndOfRule = i === void 0, i instanceof rt && (this.result.token = i.terminalType, this.result.occurrence = i.idx);
    } else
      super.walkManySep(e, r, n);
  }
}
class Ky extends Co {
  walkAtLeastOne(e, r, n) {
    if (e.idx === this.occurrence) {
      const i = wr(r.concat(n));
      this.result.isEndOfRule = i === void 0, i instanceof rt && (this.result.token = i.terminalType, this.result.occurrence = i.idx);
    } else
      super.walkAtLeastOne(e, r, n);
  }
}
class ru extends Co {
  walkAtLeastOneSep(e, r, n) {
    if (e.idx === this.occurrence) {
      const i = wr(r.concat(n));
      this.result.isEndOfRule = i === void 0, i instanceof rt && (this.result.token = i.terminalType, this.result.occurrence = i.idx);
    } else
      super.walkAtLeastOneSep(e, r, n);
  }
}
function ic(t, e, r = []) {
  r = Bt(r);
  let n = [], i = 0;
  function s(o) {
    return o.concat(Ct(t, i + 1));
  }
  function a(o) {
    const l = ic(s(o), e, r);
    return n.concat(l);
  }
  for (; r.length < e && i < t.length; ) {
    const o = t[i];
    if (o instanceof zt)
      return a(o.definition);
    if (o instanceof Zt)
      return a(o.definition);
    if (o instanceof Ht)
      n = a(o.definition);
    else if (o instanceof Xr) {
      const l = o.definition.concat([
        new dt({
          definition: o.definition
        })
      ]);
      return a(l);
    } else if (o instanceof $r) {
      const l = [
        new zt({ definition: o.definition }),
        new dt({
          definition: [new rt({ terminalType: o.separator })].concat(o.definition)
        })
      ];
      return a(l);
    } else if (o instanceof Rr) {
      const l = o.definition.concat([
        new dt({
          definition: [new rt({ terminalType: o.separator })].concat(o.definition)
        })
      ]);
      n = a(l);
    } else if (o instanceof dt) {
      const l = o.definition.concat([
        new dt({
          definition: o.definition
        })
      ]);
      n = a(l);
    } else {
      if (o instanceof Mr)
        return ve(o.definition, (l) => {
          Ke(l.definition) === false && (n = a(l.definition));
        }), n;
      if (o instanceof rt)
        r.push(o.terminalType);
      else
        throw Error("non exhaustive match");
    }
    i++;
  }
  return n.push({
    partialPath: r,
    suffixDef: Ct(t, i)
  }), n;
}
function oA(t, e, r, n) {
  const i = "EXIT_NONE_TERMINAL", s = [i], a = "EXIT_ALTERNATIVE";
  let o = false;
  const l = e.length, c = l - n - 1, u = [], h = [];
  for (h.push({
    idx: -1,
    def: t,
    ruleStack: [],
    occurrenceStack: []
  }); !Ke(h); ) {
    const A = h.pop();
    if (A === a) {
      o && Pi(h).idx <= c && h.pop();
      continue;
    }
    const f = A.def, d = A.idx, v = A.ruleStack, m = A.occurrenceStack;
    if (Ke(f))
      continue;
    const E = f[0];
    if (E === i) {
      const y = {
        idx: d,
        def: Ct(f),
        ruleStack: xs(v),
        occurrenceStack: xs(m)
      };
      h.push(y);
    } else if (E instanceof rt)
      if (d < l - 1) {
        const y = d + 1, p = e[y];
        if (r(p, E.terminalType)) {
          const g = {
            idx: y,
            def: Ct(f),
            ruleStack: v,
            occurrenceStack: m
          };
          h.push(g);
        }
      } else if (d === l - 1)
        u.push({
          nextTokenType: E.terminalType,
          nextTokenOccurrence: E.idx,
          ruleStack: v,
          occurrenceStack: m
        }), o = true;
      else
        throw Error("non exhaustive match");
    else if (E instanceof Zt) {
      const y = Bt(v);
      y.push(E.nonTerminalName);
      const p = Bt(m);
      p.push(E.idx);
      const g = {
        idx: d,
        def: E.definition.concat(s, Ct(f)),
        ruleStack: y,
        occurrenceStack: p
      };
      h.push(g);
    } else if (E instanceof Ht) {
      const y = {
        idx: d,
        def: Ct(f),
        ruleStack: v,
        occurrenceStack: m
      };
      h.push(y), h.push(a);
      const p = {
        idx: d,
        def: E.definition.concat(Ct(f)),
        ruleStack: v,
        occurrenceStack: m
      };
      h.push(p);
    } else if (E instanceof Xr) {
      const y = new dt({
        definition: E.definition,
        idx: E.idx
      }), p = E.definition.concat([y], Ct(f)), g = {
        idx: d,
        def: p,
        ruleStack: v,
        occurrenceStack: m
      };
      h.push(g);
    } else if (E instanceof $r) {
      const y = new rt({
        terminalType: E.separator
      }), p = new dt({
        definition: [y].concat(E.definition),
        idx: E.idx
      }), g = E.definition.concat([p], Ct(f)), C = {
        idx: d,
        def: g,
        ruleStack: v,
        occurrenceStack: m
      };
      h.push(C);
    } else if (E instanceof Rr) {
      const y = {
        idx: d,
        def: Ct(f),
        ruleStack: v,
        occurrenceStack: m
      };
      h.push(y), h.push(a);
      const p = new rt({
        terminalType: E.separator
      }), g = new dt({
        definition: [p].concat(E.definition),
        idx: E.idx
      }), C = E.definition.concat([g], Ct(f)), S = {
        idx: d,
        def: C,
        ruleStack: v,
        occurrenceStack: m
      };
      h.push(S);
    } else if (E instanceof dt) {
      const y = {
        idx: d,
        def: Ct(f),
        ruleStack: v,
        occurrenceStack: m
      };
      h.push(y), h.push(a);
      const p = new dt({
        definition: E.definition,
        idx: E.idx
      }), g = E.definition.concat([p], Ct(f)), C = {
        idx: d,
        def: g,
        ruleStack: v,
        occurrenceStack: m
      };
      h.push(C);
    } else if (E instanceof Mr)
      for (let y = E.definition.length - 1; y >= 0; y--) {
        const p = E.definition[y], g = {
          idx: d,
          def: p.definition.concat(Ct(f)),
          ruleStack: v,
          occurrenceStack: m
        };
        h.push(g), h.push(a);
      }
    else if (E instanceof zt)
      h.push({
        idx: d,
        def: E.definition.concat(Ct(f)),
        ruleStack: v,
        occurrenceStack: m
      });
    else if (E instanceof Gi)
      h.push(Xy(E, d, v, m));
    else
      throw Error("non exhaustive match");
  }
  return u;
}
function Xy(t, e, r, n) {
  const i = Bt(r);
  i.push(t.name);
  const s = Bt(n);
  return s.push(1), {
    idx: e,
    def: t.definition,
    ruleStack: i,
    occurrenceStack: s
  };
}
var nt;
(function(t) {
  t[t.OPTION = 0] = "OPTION", t[t.REPETITION = 1] = "REPETITION", t[t.REPETITION_MANDATORY = 2] = "REPETITION_MANDATORY", t[t.REPETITION_MANDATORY_WITH_SEPARATOR = 3] = "REPETITION_MANDATORY_WITH_SEPARATOR", t[t.REPETITION_WITH_SEPARATOR = 4] = "REPETITION_WITH_SEPARATOR", t[t.ALTERNATION = 5] = "ALTERNATION";
})(nt || (nt = {}));
function lA(t) {
  if (t instanceof Ht || t === "Option")
    return nt.OPTION;
  if (t instanceof dt || t === "Repetition")
    return nt.REPETITION;
  if (t instanceof Xr || t === "RepetitionMandatory")
    return nt.REPETITION_MANDATORY;
  if (t instanceof $r || t === "RepetitionMandatoryWithSeparator")
    return nt.REPETITION_MANDATORY_WITH_SEPARATOR;
  if (t instanceof Rr || t === "RepetitionWithSeparator")
    return nt.REPETITION_WITH_SEPARATOR;
  if (t instanceof Mr || t === "Alternation")
    return nt.ALTERNATION;
  throw Error("non exhaustive match");
}
function $y(t, e, r, n, i, s) {
  const a = Kc(t, e, r), o = hA(a) ? Ya : Vs;
  return s(a, n, o, i);
}
function Zy(t, e, r, n, i, s) {
  const a = Xc(t, e, i, r), o = hA(a) ? Ya : Vs;
  return s(a[0], o, n);
}
function Jy(t, e, r, n) {
  const i = t.length, s = Ir(t, (a) => Ir(a, (o) => o.length === 1));
  if (e)
    return function(a) {
      const o = fe(a, (l) => l.GATE);
      for (let l = 0; l < i; l++) {
        const c = t[l], u = c.length, h = o[l];
        if (!(h !== void 0 && h.call(this) === false))
          e:
            for (let A = 0; A < u; A++) {
              const f = c[A], d = f.length;
              for (let v = 0; v < d; v++) {
                const m = this.LA(v + 1);
                if (r(m, f[v]) === false)
                  continue e;
              }
              return l;
            }
      }
    };
  if (s && !n) {
    const a = fe(t, (l) => Er(l)), o = $t(a, (l, c, u) => (ve(c, (h) => {
      de(l, h.tokenTypeIdx) || (l[h.tokenTypeIdx] = u), ve(h.categoryMatches, (A) => {
        de(l, A) || (l[A] = u);
      });
    }), l), {});
    return function() {
      const l = this.LA(1);
      return o[l.tokenTypeIdx];
    };
  } else
    return function() {
      for (let a = 0; a < i; a++) {
        const o = t[a], l = o.length;
        e:
          for (let c = 0; c < l; c++) {
            const u = o[c], h = u.length;
            for (let A = 0; A < h; A++) {
              const f = this.LA(A + 1);
              if (r(f, u[A]) === false)
                continue e;
            }
            return a;
          }
      }
    };
}
function eE(t, e, r) {
  const n = Ir(t, (s) => s.length === 1), i = t.length;
  if (n && !r) {
    const s = Er(t);
    if (s.length === 1 && Ke(s[0].categoryMatches)) {
      const o = s[0].tokenTypeIdx;
      return function() {
        return this.LA(1).tokenTypeIdx === o;
      };
    } else {
      const a = $t(s, (o, l, c) => (o[l.tokenTypeIdx] = true, ve(l.categoryMatches, (u) => {
        o[u] = true;
      }), o), []);
      return function() {
        const o = this.LA(1);
        return a[o.tokenTypeIdx] === true;
      };
    }
  } else
    return function() {
      e:
        for (let s = 0; s < i; s++) {
          const a = t[s], o = a.length;
          for (let l = 0; l < o; l++) {
            const c = this.LA(l + 1);
            if (e(c, a[l]) === false)
              continue e;
          }
          return true;
        }
      return false;
    };
}
class tE extends Eo {
  constructor(e, r, n) {
    super(), this.topProd = e, this.targetOccurrence = r, this.targetProdType = n;
  }
  startWalking() {
    return this.walk(this.topProd), this.restDef;
  }
  checkIsTarget(e, r, n, i) {
    return e.idx === this.targetOccurrence && this.targetProdType === r ? (this.restDef = n.concat(i), true) : false;
  }
  walkOption(e, r, n) {
    this.checkIsTarget(e, nt.OPTION, r, n) || super.walkOption(e, r, n);
  }
  walkAtLeastOne(e, r, n) {
    this.checkIsTarget(e, nt.REPETITION_MANDATORY, r, n) || super.walkOption(e, r, n);
  }
  walkAtLeastOneSep(e, r, n) {
    this.checkIsTarget(e, nt.REPETITION_MANDATORY_WITH_SEPARATOR, r, n) || super.walkOption(e, r, n);
  }
  walkMany(e, r, n) {
    this.checkIsTarget(e, nt.REPETITION, r, n) || super.walkOption(e, r, n);
  }
  walkManySep(e, r, n) {
    this.checkIsTarget(e, nt.REPETITION_WITH_SEPARATOR, r, n) || super.walkOption(e, r, n);
  }
}
class cA extends Hi {
  constructor(e, r, n) {
    super(), this.targetOccurrence = e, this.targetProdType = r, this.targetRef = n, this.result = [];
  }
  checkIsTarget(e, r) {
    e.idx === this.targetOccurrence && this.targetProdType === r && (this.targetRef === void 0 || e === this.targetRef) && (this.result = e.definition);
  }
  visitOption(e) {
    this.checkIsTarget(e, nt.OPTION);
  }
  visitRepetition(e) {
    this.checkIsTarget(e, nt.REPETITION);
  }
  visitRepetitionMandatory(e) {
    this.checkIsTarget(e, nt.REPETITION_MANDATORY);
  }
  visitRepetitionMandatoryWithSeparator(e) {
    this.checkIsTarget(e, nt.REPETITION_MANDATORY_WITH_SEPARATOR);
  }
  visitRepetitionWithSeparator(e) {
    this.checkIsTarget(e, nt.REPETITION_WITH_SEPARATOR);
  }
  visitAlternation(e) {
    this.checkIsTarget(e, nt.ALTERNATION);
  }
}
function nu(t) {
  const e = new Array(t);
  for (let r = 0; r < t; r++)
    e[r] = [];
  return e;
}
function il(t) {
  let e = [""];
  for (let r = 0; r < t.length; r++) {
    const n = t[r], i = [];
    for (let s = 0; s < e.length; s++) {
      const a = e[s];
      i.push(a + "_" + n.tokenTypeIdx);
      for (let o = 0; o < n.categoryMatches.length; o++) {
        const l = "_" + n.categoryMatches[o];
        i.push(a + l);
      }
    }
    e = i;
  }
  return e;
}
function rE(t, e, r) {
  for (let n = 0; n < t.length; n++) {
    if (n === r)
      continue;
    const i = t[n];
    for (let s = 0; s < e.length; s++) {
      const a = e[s];
      if (i[a] === true)
        return false;
    }
  }
  return true;
}
function uA(t, e) {
  const r = fe(t, (a) => ic([a], 1)), n = nu(r.length), i = fe(r, (a) => {
    const o = {};
    return ve(a, (l) => {
      const c = il(l.partialPath);
      ve(c, (u) => {
        o[u] = true;
      });
    }), o;
  });
  let s = r;
  for (let a = 1; a <= e; a++) {
    const o = s;
    s = nu(o.length);
    for (let l = 0; l < o.length; l++) {
      const c = o[l];
      for (let u = 0; u < c.length; u++) {
        const h = c[u].partialPath, A = c[u].suffixDef, f = il(h);
        if (rE(i, f, l) || Ke(A) || h.length === e) {
          const v = n[l];
          if (sc(v, h) === false) {
            v.push(h);
            for (let m = 0; m < f.length; m++) {
              const E = f[m];
              i[l][E] = true;
            }
          }
        } else {
          const v = ic(A, a + 1, h);
          s[l] = s[l].concat(v), ve(v, (m) => {
            const E = il(m.partialPath);
            ve(E, (y) => {
              i[l][y] = true;
            });
          });
        }
      }
    }
  }
  return n;
}
function Kc(t, e, r, n) {
  const i = new cA(t, nt.ALTERNATION, n);
  return e.accept(i), uA(i.result, r);
}
function Xc(t, e, r, n) {
  const i = new cA(t, r);
  e.accept(i);
  const s = i.result, o = new tE(e, t, r).startWalking(), l = new zt({ definition: s }), c = new zt({ definition: o });
  return uA([l, c], n);
}
function sc(t, e) {
  e:
    for (let r = 0; r < t.length; r++) {
      const n = t[r];
      if (n.length === e.length) {
        for (let i = 0; i < n.length; i++) {
          const s = e[i], a = n[i];
          if ((s === a || a.categoryMatchesMap[s.tokenTypeIdx] !== void 0) === false)
            continue e;
        }
        return true;
      }
    }
  return false;
}
function nE(t, e) {
  return t.length < e.length && Ir(t, (r, n) => {
    const i = e[n];
    return r === i || i.categoryMatchesMap[r.tokenTypeIdx];
  });
}
function hA(t) {
  return Ir(t, (e) => Ir(e, (r) => Ir(r, (n) => Ke(n.categoryMatches))));
}
function iE(t) {
  const e = t.lookaheadStrategy.validate({
    rules: t.rules,
    tokenTypes: t.tokenTypes,
    grammarName: t.grammarName
  });
  return fe(e, (r) => Object.assign({ type: Dt.CUSTOM_LOOKAHEAD_VALIDATION }, r));
}
function sE(t, e, r, n) {
  const i = ar(t, (l) => aE(l, r)), s = vE(t, e, r), a = ar(t, (l) => pE(l, r)), o = ar(t, (l) => cE(l, t, n, r));
  return i.concat(s, a, o);
}
function aE(t, e) {
  const r = new lE();
  t.accept(r);
  const n = r.allProductions, i = gv(n, oE), s = _r(i, (o) => o.length > 1);
  return fe(ft(s), (o) => {
    const l = wr(o), c = e.buildDuplicateFoundError(t, o), u = Qr(l), h = {
      message: c,
      type: Dt.DUPLICATE_PRODUCTIONS,
      ruleName: t.name,
      dslName: u,
      occurrence: l.idx
    }, A = AA(l);
    return A && (h.parameter = A), h;
  });
}
function oE(t) {
  return `${Qr(t)}_#_${t.idx}_#_${AA(t)}`;
}
function AA(t) {
  return t instanceof rt ? t.terminalType.name : t instanceof Zt ? t.nonTerminalName : "";
}
class lE extends Hi {
  constructor() {
    super(...arguments), this.allProductions = [];
  }
  visitNonTerminal(e) {
    this.allProductions.push(e);
  }
  visitOption(e) {
    this.allProductions.push(e);
  }
  visitRepetitionWithSeparator(e) {
    this.allProductions.push(e);
  }
  visitRepetitionMandatory(e) {
    this.allProductions.push(e);
  }
  visitRepetitionMandatoryWithSeparator(e) {
    this.allProductions.push(e);
  }
  visitRepetition(e) {
    this.allProductions.push(e);
  }
  visitAlternation(e) {
    this.allProductions.push(e);
  }
  visitTerminal(e) {
    this.allProductions.push(e);
  }
}
function cE(t, e, r, n) {
  const i = [];
  if ($t(e, (a, o) => o.name === t.name ? a + 1 : a, 0) > 1) {
    const a = n.buildDuplicateRuleNameError({
      topLevelRule: t,
      grammarName: r
    });
    i.push({
      message: a,
      type: Dt.DUPLICATE_RULE_NAME,
      ruleName: t.name
    });
  }
  return i;
}
function uE(t, e, r) {
  const n = [];
  let i;
  return Ft(e, t) || (i = `Invalid rule override, rule: ->${t}<- cannot be overridden in the grammar: ->${r}<-as it is not defined in any of the super grammars `, n.push({
    message: i,
    type: Dt.INVALID_RULE_OVERRIDE,
    ruleName: t
  })), n;
}
function fA(t, e, r, n = []) {
  const i = [], s = Sa(e.definition);
  if (Ke(s))
    return [];
  {
    const a = t.name;
    Ft(s, t) && i.push({
      message: r.buildLeftRecursionError({
        topLevelRule: t,
        leftRecursionPath: n
      }),
      type: Dt.LEFT_RECURSION,
      ruleName: a
    });
    const l = vo(s, n.concat([t])), c = ar(l, (u) => {
      const h = Bt(n);
      return h.push(u), fA(t, u, r, h);
    });
    return i.concat(c);
  }
}
function Sa(t) {
  let e = [];
  if (Ke(t))
    return e;
  const r = wr(t);
  if (r instanceof Zt)
    e.push(r.referencedRule);
  else if (r instanceof zt || r instanceof Ht || r instanceof Xr || r instanceof $r || r instanceof Rr || r instanceof dt)
    e = e.concat(Sa(r.definition));
  else if (r instanceof Mr)
    e = Er(fe(r.definition, (s) => Sa(s.definition)));
  else if (!(r instanceof rt))
    throw Error("non exhaustive match");
  const n = Ga(r), i = t.length > 1;
  if (n && i) {
    const s = Ct(t);
    return e.concat(Sa(s));
  } else
    return e;
}
class $c extends Hi {
  constructor() {
    super(...arguments), this.alternations = [];
  }
  visitAlternation(e) {
    this.alternations.push(e);
  }
}
function hE(t, e) {
  const r = new $c();
  t.accept(r);
  const n = r.alternations;
  return ar(n, (s) => {
    const a = xs(s.definition);
    return ar(a, (o, l) => {
      const c = oA([o], [], Vs, 1);
      return Ke(c) ? [
        {
          message: e.buildEmptyAlternationError({
            topLevelRule: t,
            alternation: s,
            emptyChoiceIdx: l
          }),
          type: Dt.NONE_LAST_EMPTY_ALT,
          ruleName: t.name,
          occurrence: s.idx,
          alternative: l + 1
        }
      ] : [];
    });
  });
}
function AE(t, e, r) {
  const n = new $c();
  t.accept(n);
  let i = n.alternations;
  return i = yo(i, (a) => a.ignoreAmbiguities === true), ar(i, (a) => {
    const o = a.idx, l = a.maxLookahead || e, c = Kc(o, t, l, a), u = gE(c, a, t, r), h = mE(c, a, t, r);
    return u.concat(h);
  });
}
class fE extends Hi {
  constructor() {
    super(...arguments), this.allProductions = [];
  }
  visitRepetitionWithSeparator(e) {
    this.allProductions.push(e);
  }
  visitRepetitionMandatory(e) {
    this.allProductions.push(e);
  }
  visitRepetitionMandatoryWithSeparator(e) {
    this.allProductions.push(e);
  }
  visitRepetition(e) {
    this.allProductions.push(e);
  }
}
function pE(t, e) {
  const r = new $c();
  t.accept(r);
  const n = r.alternations;
  return ar(n, (s) => s.definition.length > 255 ? [
    {
      message: e.buildTooManyAlternativesError({
        topLevelRule: t,
        alternation: s
      }),
      type: Dt.TOO_MANY_ALTS,
      ruleName: t.name,
      occurrence: s.idx
    }
  ] : []);
}
function dE(t, e, r) {
  const n = [];
  return ve(t, (i) => {
    const s = new fE();
    i.accept(s);
    const a = s.allProductions;
    ve(a, (o) => {
      const l = lA(o), c = o.maxLookahead || e, u = o.idx, A = Xc(u, i, l, c)[0];
      if (Ke(Er(A))) {
        const f = r.buildEmptyRepetitionError({
          topLevelRule: i,
          repetition: o
        });
        n.push({
          message: f,
          type: Dt.NO_NON_EMPTY_LOOKAHEAD,
          ruleName: i.name
        });
      }
    });
  }), n;
}
function gE(t, e, r, n) {
  const i = [], s = $t(t, (o, l, c) => (e.definition[c].ignoreAmbiguities === true || ve(l, (u) => {
    const h = [c];
    ve(t, (A, f) => {
      c !== f && sc(A, u) && // ignore (skip) ambiguities with this "other" alternative
      e.definition[f].ignoreAmbiguities !== true && h.push(f);
    }), h.length > 1 && !sc(i, u) && (i.push(u), o.push({
      alts: h,
      path: u
    }));
  }), o), []);
  return fe(s, (o) => {
    const l = fe(o.alts, (u) => u + 1);
    return {
      message: n.buildAlternationAmbiguityError({
        topLevelRule: r,
        alternation: e,
        ambiguityIndices: l,
        prefixPath: o.path
      }),
      type: Dt.AMBIGUOUS_ALTS,
      ruleName: r.name,
      occurrence: e.idx,
      alternatives: o.alts
    };
  });
}
function mE(t, e, r, n) {
  const i = $t(t, (a, o, l) => {
    const c = fe(o, (u) => ({ idx: l, path: u }));
    return a.concat(c);
  }, []);
  return Gs(ar(i, (a) => {
    if (e.definition[a.idx].ignoreAmbiguities === true)
      return [];
    const l = a.idx, c = a.path, u = Ar(i, (A) => (
      // ignore (skip) ambiguities with this "other" alternative
      e.definition[A.idx].ignoreAmbiguities !== true && A.idx < l && // checking for strict prefix because identical lookaheads
      // will be be detected using a different validation.
      nE(A.path, c)
    ));
    return fe(u, (A) => {
      const f = [A.idx + 1, l + 1], d = e.idx === 0 ? "" : e.idx;
      return {
        message: n.buildAlternationPrefixAmbiguityError({
          topLevelRule: r,
          alternation: e,
          ambiguityIndices: f,
          prefixPath: A.path
        }),
        type: Dt.AMBIGUOUS_PREFIX_ALTS,
        ruleName: r.name,
        occurrence: d,
        alternatives: f
      };
    });
  }));
}
function vE(t, e, r) {
  const n = [], i = fe(e, (s) => s.name);
  return ve(t, (s) => {
    const a = s.name;
    if (Ft(i, a)) {
      const o = r.buildNamespaceConflictError(s);
      n.push({
        message: o,
        type: Dt.CONFLICT_TOKENS_RULES_NAMESPACE,
        ruleName: a
      });
    }
  }), n;
}
function yE(t) {
  const e = zc(t, {
    errMsgProvider: Vy
  }), r = {};
  return ve(t.rules, (n) => {
    r[n.name] = n;
  }), zy(r, e.errMsgProvider);
}
function EE(t) {
  return t = zc(t, {
    errMsgProvider: oi
  }), sE(t.rules, t.tokenTypes, t.errMsgProvider, t.grammarName);
}
const pA = "MismatchedTokenException", dA = "NoViableAltException", gA = "EarlyExitException", mA = "NotAllInputParsedException", vA = [
  pA,
  dA,
  gA,
  mA
];
Object.freeze(vA);
function Wa(t) {
  return Ft(vA, t.name);
}
class xo extends Error {
  constructor(e, r) {
    super(e), this.token = r, this.resyncedTokens = [], Object.setPrototypeOf(this, new.target.prototype), Error.captureStackTrace && Error.captureStackTrace(this, this.constructor);
  }
}
class yA extends xo {
  constructor(e, r, n) {
    super(e, r), this.previousToken = n, this.name = pA;
  }
}
class IE extends xo {
  constructor(e, r, n) {
    super(e, r), this.previousToken = n, this.name = dA;
  }
}
class CE extends xo {
  constructor(e, r) {
    super(e, r), this.name = mA;
  }
}
class xE extends xo {
  constructor(e, r, n) {
    super(e, r), this.previousToken = n, this.name = gA;
  }
}
const sl = {}, EA = "InRuleRecoveryException";
class TE extends Error {
  constructor(e) {
    super(e), this.name = EA;
  }
}
class SE {
  initRecoverable(e) {
    this.firstAfterRepMap = {}, this.resyncFollows = {}, this.recoveryEnabled = de(e, "recoveryEnabled") ? e.recoveryEnabled : Gn.recoveryEnabled, this.recoveryEnabled && (this.attemptInRepetitionRecovery = wE);
  }
  getTokenToInsert(e) {
    const r = qc(e, "", NaN, NaN, NaN, NaN, NaN, NaN);
    return r.isInsertedInRecovery = true, r;
  }
  canTokenTypeBeInsertedInRecovery(e) {
    return true;
  }
  canTokenTypeBeDeletedInRecovery(e) {
    return true;
  }
  tryInRepetitionRecovery(e, r, n, i) {
    const s = this.findReSyncTokenType(), a = this.exportLexerState(), o = [];
    let l = false;
    const c = this.LA(1);
    let u = this.LA(1);
    const h = () => {
      const A = this.LA(0), f = this.errorMessageProvider.buildMismatchTokenMessage({
        expected: i,
        actual: c,
        previous: A,
        ruleName: this.getCurrRuleFullName()
      }), d = new yA(f, c, this.LA(0));
      d.resyncedTokens = xs(o), this.SAVE_ERROR(d);
    };
    for (; !l; )
      if (this.tokenMatcher(u, i)) {
        h();
        return;
      } else if (n.call(this)) {
        h(), e.apply(this, r);
        return;
      } else
        this.tokenMatcher(u, s) ? l = true : (u = this.SKIP_TOKEN(), this.addToResyncTokens(u, o));
    this.importLexerState(a);
  }
  shouldInRepetitionRecoveryBeTried(e, r, n) {
    return !(n === false || this.tokenMatcher(this.LA(1), e) || this.isBackTracking() || this.canPerformInRuleRecovery(e, this.getFollowsForInRuleRecovery(e, r)));
  }
  // Error Recovery functionality
  getFollowsForInRuleRecovery(e, r) {
    const n = this.getCurrentGrammarPath(e, r);
    return this.getNextPossibleTokenTypes(n);
  }
  tryInRuleRecovery(e, r) {
    if (this.canRecoverWithSingleTokenInsertion(e, r))
      return this.getTokenToInsert(e);
    if (this.canRecoverWithSingleTokenDeletion(e)) {
      const n = this.SKIP_TOKEN();
      return this.consumeToken(), n;
    }
    throw new TE("sad sad panda");
  }
  canPerformInRuleRecovery(e, r) {
    return this.canRecoverWithSingleTokenInsertion(e, r) || this.canRecoverWithSingleTokenDeletion(e);
  }
  canRecoverWithSingleTokenInsertion(e, r) {
    if (!this.canTokenTypeBeInsertedInRecovery(e) || Ke(r))
      return false;
    const n = this.LA(1);
    return Qi(r, (s) => this.tokenMatcher(n, s)) !== void 0;
  }
  canRecoverWithSingleTokenDeletion(e) {
    return this.canTokenTypeBeDeletedInRecovery(e) ? this.tokenMatcher(this.LA(2), e) : false;
  }
  isInCurrentRuleReSyncSet(e) {
    const r = this.getCurrFollowKey(), n = this.getFollowSetFromFollowKey(r);
    return Ft(n, e);
  }
  findReSyncTokenType() {
    const e = this.flattenFollowSet();
    let r = this.LA(1), n = 2;
    for (; ; ) {
      const i = Qi(e, (s) => Hy(r, s));
      if (i !== void 0)
        return i;
      r = this.LA(n), n++;
    }
  }
  getCurrFollowKey() {
    if (this.RULE_STACK.length === 1)
      return sl;
    const e = this.getLastExplicitRuleShortName(), r = this.getLastExplicitRuleOccurrenceIndex(), n = this.getPreviousExplicitRuleShortName();
    return {
      ruleName: this.shortRuleNameToFullName(e),
      idxInCallingRule: r,
      inRule: this.shortRuleNameToFullName(n)
    };
  }
  buildFullFollowKeyStack() {
    const e = this.RULE_STACK, r = this.RULE_OCCURRENCE_STACK;
    return fe(e, (n, i) => i === 0 ? sl : {
      ruleName: this.shortRuleNameToFullName(n),
      idxInCallingRule: r[i],
      inRule: this.shortRuleNameToFullName(e[i - 1])
    });
  }
  flattenFollowSet() {
    const e = fe(this.buildFullFollowKeyStack(), (r) => this.getFollowSetFromFollowKey(r));
    return Er(e);
  }
  getFollowSetFromFollowKey(e) {
    if (e === sl)
      return [hi];
    const r = e.ruleName + e.idxInCallingRule + K2 + e.inRule;
    return this.resyncFollows[r];
  }
  // It does not make any sense to include a virtual EOF token in the list of resynced tokens
  // as EOF does not really exist and thus does not contain any useful information (line/column numbers)
  addToResyncTokens(e, r) {
    return this.tokenMatcher(e, hi) || r.push(e), r;
  }
  reSyncTo(e) {
    const r = [];
    let n = this.LA(1);
    for (; this.tokenMatcher(n, e) === false; )
      n = this.SKIP_TOKEN(), this.addToResyncTokens(n, r);
    return xs(r);
  }
  attemptInRepetitionRecovery(e, r, n, i, s, a, o) {
  }
  getCurrentGrammarPath(e, r) {
    const n = this.getHumanReadableRuleStack(), i = Bt(this.RULE_OCCURRENCE_STACK);
    return {
      ruleStack: n,
      occurrenceStack: i,
      lastTok: e,
      lastTokOccurrence: r
    };
  }
  getHumanReadableRuleStack() {
    return fe(this.RULE_STACK, (e) => this.shortRuleNameToFullName(e));
  }
}
function wE(t, e, r, n, i, s, a) {
  const o = this.getKeyForAutomaticLookahead(n, i);
  let l = this.firstAfterRepMap[o];
  if (l === void 0) {
    const A = this.getCurrRuleFullName(), f = this.getGAstProductions()[A];
    l = new s(f, i).startWalking(), this.firstAfterRepMap[o] = l;
  }
  let c = l.token, u = l.occurrence;
  const h = l.isEndOfRule;
  this.RULE_STACK.length === 1 && h && c === void 0 && (c = hi, u = 1), !(c === void 0 || u === void 0) && this.shouldInRepetitionRecoveryBeTried(c, u, a) && this.tryInRepetitionRecovery(t, e, r, c);
}
const BE = 4, Wn = 8, IA = 1 << Wn, CA = 2 << Wn, ac = 3 << Wn, oc = 4 << Wn, lc = 5 << Wn, wa = 6 << Wn;
function al(t, e, r) {
  return r | e | t;
}
class bE {
  constructor(e) {
    var r;
    this.maxLookahead = (r = e == null ? void 0 : e.maxLookahead) !== null && r !== void 0 ? r : Gn.maxLookahead;
  }
  validate(e) {
    const r = this.validateNoLeftRecursion(e.rules);
    if (Ke(r)) {
      const n = this.validateEmptyOrAlternatives(e.rules), i = this.validateAmbiguousAlternationAlternatives(e.rules, this.maxLookahead), s = this.validateSomeNonEmptyLookaheadPath(e.rules, this.maxLookahead);
      return [
        ...r,
        ...n,
        ...i,
        ...s
      ];
    }
    return r;
  }
  validateNoLeftRecursion(e) {
    return ar(e, (r) => fA(r, r, oi));
  }
  validateEmptyOrAlternatives(e) {
    return ar(e, (r) => hE(r, oi));
  }
  validateAmbiguousAlternationAlternatives(e, r) {
    return ar(e, (n) => AE(n, r, oi));
  }
  validateSomeNonEmptyLookaheadPath(e, r) {
    return dE(e, r, oi);
  }
  buildLookaheadForAlternation(e) {
    return $y(e.prodOccurrence, e.rule, e.maxLookahead, e.hasPredicates, e.dynamicTokensEnabled, Jy);
  }
  buildLookaheadForOptional(e) {
    return Zy(e.prodOccurrence, e.rule, e.maxLookahead, e.dynamicTokensEnabled, lA(e.prodType), eE);
  }
}
class _E {
  initLooksAhead(e) {
    this.dynamicTokensEnabled = de(e, "dynamicTokensEnabled") ? e.dynamicTokensEnabled : Gn.dynamicTokensEnabled, this.maxLookahead = de(e, "maxLookahead") ? e.maxLookahead : Gn.maxLookahead, this.lookaheadStrategy = de(e, "lookaheadStrategy") ? e.lookaheadStrategy : new bE({ maxLookahead: this.maxLookahead }), this.lookAheadFuncsCache = /* @__PURE__ */ new Map();
  }
  preComputeLookaheadFunctions(e) {
    ve(e, (r) => {
      this.TRACE_INIT(`${r.name} Rule Lookahead`, () => {
        const { alternation: n, repetition: i, option: s, repetitionMandatory: a, repetitionMandatoryWithSeparator: o, repetitionWithSeparator: l } = ME(r);
        ve(n, (c) => {
          const u = c.idx === 0 ? "" : c.idx;
          this.TRACE_INIT(`${Qr(c)}${u}`, () => {
            const h = this.lookaheadStrategy.buildLookaheadForAlternation({
              prodOccurrence: c.idx,
              rule: r,
              maxLookahead: c.maxLookahead || this.maxLookahead,
              hasPredicates: c.hasPredicates,
              dynamicTokensEnabled: this.dynamicTokensEnabled
            }), A = al(this.fullRuleNameToShort[r.name], IA, c.idx);
            this.setLaFuncCache(A, h);
          });
        }), ve(i, (c) => {
          this.computeLookaheadFunc(r, c.idx, ac, "Repetition", c.maxLookahead, Qr(c));
        }), ve(s, (c) => {
          this.computeLookaheadFunc(r, c.idx, CA, "Option", c.maxLookahead, Qr(c));
        }), ve(a, (c) => {
          this.computeLookaheadFunc(r, c.idx, oc, "RepetitionMandatory", c.maxLookahead, Qr(c));
        }), ve(o, (c) => {
          this.computeLookaheadFunc(r, c.idx, wa, "RepetitionMandatoryWithSeparator", c.maxLookahead, Qr(c));
        }), ve(l, (c) => {
          this.computeLookaheadFunc(r, c.idx, lc, "RepetitionWithSeparator", c.maxLookahead, Qr(c));
        });
      });
    });
  }
  computeLookaheadFunc(e, r, n, i, s, a) {
    this.TRACE_INIT(`${a}${r === 0 ? "" : r}`, () => {
      const o = this.lookaheadStrategy.buildLookaheadForOptional({
        prodOccurrence: r,
        rule: e,
        maxLookahead: s || this.maxLookahead,
        dynamicTokensEnabled: this.dynamicTokensEnabled,
        prodType: i
      }), l = al(this.fullRuleNameToShort[e.name], n, r);
      this.setLaFuncCache(l, o);
    });
  }
  // this actually returns a number, but it is always used as a string (object prop key)
  getKeyForAutomaticLookahead(e, r) {
    const n = this.getLastExplicitRuleShortName();
    return al(n, e, r);
  }
  getLaFuncFromCache(e) {
    return this.lookAheadFuncsCache.get(e);
  }
  /* istanbul ignore next */
  setLaFuncCache(e, r) {
    this.lookAheadFuncsCache.set(e, r);
  }
}
class RE extends Hi {
  constructor() {
    super(...arguments), this.dslMethods = {
      option: [],
      alternation: [],
      repetition: [],
      repetitionWithSeparator: [],
      repetitionMandatory: [],
      repetitionMandatoryWithSeparator: []
    };
  }
  reset() {
    this.dslMethods = {
      option: [],
      alternation: [],
      repetition: [],
      repetitionWithSeparator: [],
      repetitionMandatory: [],
      repetitionMandatoryWithSeparator: []
    };
  }
  visitOption(e) {
    this.dslMethods.option.push(e);
  }
  visitRepetitionWithSeparator(e) {
    this.dslMethods.repetitionWithSeparator.push(e);
  }
  visitRepetitionMandatory(e) {
    this.dslMethods.repetitionMandatory.push(e);
  }
  visitRepetitionMandatoryWithSeparator(e) {
    this.dslMethods.repetitionMandatoryWithSeparator.push(e);
  }
  visitRepetition(e) {
    this.dslMethods.repetition.push(e);
  }
  visitAlternation(e) {
    this.dslMethods.alternation.push(e);
  }
}
const ha = new RE();
function ME(t) {
  ha.reset(), t.accept(ha);
  const e = ha.dslMethods;
  return ha.reset(), e;
}
function iu(t, e) {
  isNaN(t.startOffset) === true ? (t.startOffset = e.startOffset, t.endOffset = e.endOffset) : t.endOffset < e.endOffset && (t.endOffset = e.endOffset);
}
function su(t, e) {
  isNaN(t.startOffset) === true ? (t.startOffset = e.startOffset, t.startColumn = e.startColumn, t.startLine = e.startLine, t.endOffset = e.endOffset, t.endColumn = e.endColumn, t.endLine = e.endLine) : t.endOffset < e.endOffset && (t.endOffset = e.endOffset, t.endColumn = e.endColumn, t.endLine = e.endLine);
}
function DE(t, e, r) {
  t.children[r] === void 0 ? t.children[r] = [e] : t.children[r].push(e);
}
function kE(t, e, r) {
  t.children[e] === void 0 ? t.children[e] = [r] : t.children[e].push(r);
}
const FE = "name";
function xA(t, e) {
  Object.defineProperty(t, FE, {
    enumerable: false,
    configurable: true,
    writable: false,
    value: e
  });
}
function LE(t, e) {
  const r = Kt(t), n = r.length;
  for (let i = 0; i < n; i++) {
    const s = r[i], a = t[s], o = a.length;
    for (let l = 0; l < o; l++) {
      const c = a[l];
      c.tokenTypeIdx === void 0 && this[c.name](c.children, e);
    }
  }
}
function OE(t, e) {
  const r = function() {
  };
  xA(r, t + "BaseSemantics");
  const n = {
    visit: function(i, s) {
      if (Ne(i) && (i = i[0]), !un(i))
        return this[i.name](i.children, s);
    },
    validateVisitor: function() {
      const i = QE(this, e);
      if (!Ke(i)) {
        const s = fe(i, (a) => a.msg);
        throw Error(`Errors Detected in CST Visitor <${this.constructor.name}>:
	${s.join(`

`).replace(/\n/g, `
	`)}`);
      }
    }
  };
  return r.prototype = n, r.prototype.constructor = r, r._RULE_NAMES = e, r;
}
function PE(t, e, r) {
  const n = function() {
  };
  xA(n, t + "BaseSemanticsWithDefaults");
  const i = Object.create(r.prototype);
  return ve(e, (s) => {
    i[s] = LE;
  }), n.prototype = i, n.prototype.constructor = n, n;
}
var cc;
(function(t) {
  t[t.REDUNDANT_METHOD = 0] = "REDUNDANT_METHOD", t[t.MISSING_METHOD = 1] = "MISSING_METHOD";
})(cc || (cc = {}));
function QE(t, e) {
  return NE(t, e);
}
function NE(t, e) {
  const r = Ar(e, (i) => fn(t[i]) === false), n = fe(r, (i) => ({
    msg: `Missing visitor method: <${i}> on ${t.constructor.name} CST Visitor.`,
    type: cc.MISSING_METHOD,
    methodName: i
  }));
  return Gs(n);
}
class UE {
  initTreeBuilder(e) {
    if (this.CST_STACK = [], this.outputCst = e.outputCst, this.nodeLocationTracking = de(e, "nodeLocationTracking") ? e.nodeLocationTracking : Gn.nodeLocationTracking, !this.outputCst)
      this.cstInvocationStateUpdate = At, this.cstFinallyStateUpdate = At, this.cstPostTerminal = At, this.cstPostNonTerminal = At, this.cstPostRule = At;
    else if (/full/i.test(this.nodeLocationTracking))
      this.recoveryEnabled ? (this.setNodeLocationFromToken = su, this.setNodeLocationFromNode = su, this.cstPostRule = At, this.setInitialNodeLocation = this.setInitialNodeLocationFullRecovery) : (this.setNodeLocationFromToken = At, this.setNodeLocationFromNode = At, this.cstPostRule = this.cstPostRuleFull, this.setInitialNodeLocation = this.setInitialNodeLocationFullRegular);
    else if (/onlyOffset/i.test(this.nodeLocationTracking))
      this.recoveryEnabled ? (this.setNodeLocationFromToken = iu, this.setNodeLocationFromNode = iu, this.cstPostRule = At, this.setInitialNodeLocation = this.setInitialNodeLocationOnlyOffsetRecovery) : (this.setNodeLocationFromToken = At, this.setNodeLocationFromNode = At, this.cstPostRule = this.cstPostRuleOnlyOffset, this.setInitialNodeLocation = this.setInitialNodeLocationOnlyOffsetRegular);
    else if (/none/i.test(this.nodeLocationTracking))
      this.setNodeLocationFromToken = At, this.setNodeLocationFromNode = At, this.cstPostRule = At, this.setInitialNodeLocation = At;
    else
      throw Error(`Invalid <nodeLocationTracking> config option: "${e.nodeLocationTracking}"`);
  }
  setInitialNodeLocationOnlyOffsetRecovery(e) {
    e.location = {
      startOffset: NaN,
      endOffset: NaN
    };
  }
  setInitialNodeLocationOnlyOffsetRegular(e) {
    e.location = {
      // without error recovery the starting Location of a new CstNode is guaranteed
      // To be the next Token's startOffset (for valid inputs).
      // For invalid inputs there won't be any CSTOutput so this potential
      // inaccuracy does not matter
      startOffset: this.LA(1).startOffset,
      endOffset: NaN
    };
  }
  setInitialNodeLocationFullRecovery(e) {
    e.location = {
      startOffset: NaN,
      startLine: NaN,
      startColumn: NaN,
      endOffset: NaN,
      endLine: NaN,
      endColumn: NaN
    };
  }
  /**
       *  @see setInitialNodeLocationOnlyOffsetRegular for explanation why this work
  
       * @param cstNode
       */
  setInitialNodeLocationFullRegular(e) {
    const r = this.LA(1);
    e.location = {
      startOffset: r.startOffset,
      startLine: r.startLine,
      startColumn: r.startColumn,
      endOffset: NaN,
      endLine: NaN,
      endColumn: NaN
    };
  }
  cstInvocationStateUpdate(e) {
    const r = {
      name: e,
      children: /* @__PURE__ */ Object.create(null)
    };
    this.setInitialNodeLocation(r), this.CST_STACK.push(r);
  }
  cstFinallyStateUpdate() {
    this.CST_STACK.pop();
  }
  cstPostRuleFull(e) {
    const r = this.LA(0), n = e.location;
    n.startOffset <= r.startOffset ? (n.endOffset = r.endOffset, n.endLine = r.endLine, n.endColumn = r.endColumn) : (n.startOffset = NaN, n.startLine = NaN, n.startColumn = NaN);
  }
  cstPostRuleOnlyOffset(e) {
    const r = this.LA(0), n = e.location;
    n.startOffset <= r.startOffset ? n.endOffset = r.endOffset : n.startOffset = NaN;
  }
  cstPostTerminal(e, r) {
    const n = this.CST_STACK[this.CST_STACK.length - 1];
    DE(n, r, e), this.setNodeLocationFromToken(n.location, r);
  }
  cstPostNonTerminal(e, r) {
    const n = this.CST_STACK[this.CST_STACK.length - 1];
    kE(n, r, e), this.setNodeLocationFromNode(n.location, e.location);
  }
  getBaseCstVisitorConstructor() {
    if (un(this.baseCstVisitorConstructor)) {
      const e = OE(this.className, Kt(this.gastProductionsCache));
      return this.baseCstVisitorConstructor = e, e;
    }
    return this.baseCstVisitorConstructor;
  }
  getBaseCstVisitorConstructorWithDefaults() {
    if (un(this.baseCstVisitorWithDefaultsConstructor)) {
      const e = PE(this.className, Kt(this.gastProductionsCache), this.getBaseCstVisitorConstructor());
      return this.baseCstVisitorWithDefaultsConstructor = e, e;
    }
    return this.baseCstVisitorWithDefaultsConstructor;
  }
  getLastExplicitRuleShortName() {
    const e = this.RULE_STACK;
    return e[e.length - 1];
  }
  getPreviousExplicitRuleShortName() {
    const e = this.RULE_STACK;
    return e[e.length - 2];
  }
  getLastExplicitRuleOccurrenceIndex() {
    const e = this.RULE_OCCURRENCE_STACK;
    return e[e.length - 1];
  }
}
class GE {
  initLexerAdapter() {
    this.tokVector = [], this.tokVectorLength = 0, this.currIdx = -1;
  }
  set input(e) {
    if (this.selfAnalysisDone !== true)
      throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");
    this.reset(), this.tokVector = e, this.tokVectorLength = e.length;
  }
  get input() {
    return this.tokVector;
  }
  // skips a token and returns the next token
  SKIP_TOKEN() {
    return this.currIdx <= this.tokVector.length - 2 ? (this.consumeToken(), this.LA(1)) : qa;
  }
  // Lexer (accessing Token vector) related methods which can be overridden to implement lazy lexers
  // or lexers dependent on parser context.
  LA(e) {
    const r = this.currIdx + e;
    return r < 0 || this.tokVectorLength <= r ? qa : this.tokVector[r];
  }
  consumeToken() {
    this.currIdx++;
  }
  exportLexerState() {
    return this.currIdx;
  }
  importLexerState(e) {
    this.currIdx = e;
  }
  resetLexerState() {
    this.currIdx = -1;
  }
  moveToTerminatedState() {
    this.currIdx = this.tokVector.length - 1;
  }
  getLexerPosition() {
    return this.exportLexerState();
  }
}
class HE {
  ACTION(e) {
    return e.call(this);
  }
  consume(e, r, n) {
    return this.consumeInternal(r, e, n);
  }
  subrule(e, r, n) {
    return this.subruleInternal(r, e, n);
  }
  option(e, r) {
    return this.optionInternal(r, e);
  }
  or(e, r) {
    return this.orInternal(r, e);
  }
  many(e, r) {
    return this.manyInternal(e, r);
  }
  atLeastOne(e, r) {
    return this.atLeastOneInternal(e, r);
  }
  CONSUME(e, r) {
    return this.consumeInternal(e, 0, r);
  }
  CONSUME1(e, r) {
    return this.consumeInternal(e, 1, r);
  }
  CONSUME2(e, r) {
    return this.consumeInternal(e, 2, r);
  }
  CONSUME3(e, r) {
    return this.consumeInternal(e, 3, r);
  }
  CONSUME4(e, r) {
    return this.consumeInternal(e, 4, r);
  }
  CONSUME5(e, r) {
    return this.consumeInternal(e, 5, r);
  }
  CONSUME6(e, r) {
    return this.consumeInternal(e, 6, r);
  }
  CONSUME7(e, r) {
    return this.consumeInternal(e, 7, r);
  }
  CONSUME8(e, r) {
    return this.consumeInternal(e, 8, r);
  }
  CONSUME9(e, r) {
    return this.consumeInternal(e, 9, r);
  }
  SUBRULE(e, r) {
    return this.subruleInternal(e, 0, r);
  }
  SUBRULE1(e, r) {
    return this.subruleInternal(e, 1, r);
  }
  SUBRULE2(e, r) {
    return this.subruleInternal(e, 2, r);
  }
  SUBRULE3(e, r) {
    return this.subruleInternal(e, 3, r);
  }
  SUBRULE4(e, r) {
    return this.subruleInternal(e, 4, r);
  }
  SUBRULE5(e, r) {
    return this.subruleInternal(e, 5, r);
  }
  SUBRULE6(e, r) {
    return this.subruleInternal(e, 6, r);
  }
  SUBRULE7(e, r) {
    return this.subruleInternal(e, 7, r);
  }
  SUBRULE8(e, r) {
    return this.subruleInternal(e, 8, r);
  }
  SUBRULE9(e, r) {
    return this.subruleInternal(e, 9, r);
  }
  OPTION(e) {
    return this.optionInternal(e, 0);
  }
  OPTION1(e) {
    return this.optionInternal(e, 1);
  }
  OPTION2(e) {
    return this.optionInternal(e, 2);
  }
  OPTION3(e) {
    return this.optionInternal(e, 3);
  }
  OPTION4(e) {
    return this.optionInternal(e, 4);
  }
  OPTION5(e) {
    return this.optionInternal(e, 5);
  }
  OPTION6(e) {
    return this.optionInternal(e, 6);
  }
  OPTION7(e) {
    return this.optionInternal(e, 7);
  }
  OPTION8(e) {
    return this.optionInternal(e, 8);
  }
  OPTION9(e) {
    return this.optionInternal(e, 9);
  }
  OR(e) {
    return this.orInternal(e, 0);
  }
  OR1(e) {
    return this.orInternal(e, 1);
  }
  OR2(e) {
    return this.orInternal(e, 2);
  }
  OR3(e) {
    return this.orInternal(e, 3);
  }
  OR4(e) {
    return this.orInternal(e, 4);
  }
  OR5(e) {
    return this.orInternal(e, 5);
  }
  OR6(e) {
    return this.orInternal(e, 6);
  }
  OR7(e) {
    return this.orInternal(e, 7);
  }
  OR8(e) {
    return this.orInternal(e, 8);
  }
  OR9(e) {
    return this.orInternal(e, 9);
  }
  MANY(e) {
    this.manyInternal(0, e);
  }
  MANY1(e) {
    this.manyInternal(1, e);
  }
  MANY2(e) {
    this.manyInternal(2, e);
  }
  MANY3(e) {
    this.manyInternal(3, e);
  }
  MANY4(e) {
    this.manyInternal(4, e);
  }
  MANY5(e) {
    this.manyInternal(5, e);
  }
  MANY6(e) {
    this.manyInternal(6, e);
  }
  MANY7(e) {
    this.manyInternal(7, e);
  }
  MANY8(e) {
    this.manyInternal(8, e);
  }
  MANY9(e) {
    this.manyInternal(9, e);
  }
  MANY_SEP(e) {
    this.manySepFirstInternal(0, e);
  }
  MANY_SEP1(e) {
    this.manySepFirstInternal(1, e);
  }
  MANY_SEP2(e) {
    this.manySepFirstInternal(2, e);
  }
  MANY_SEP3(e) {
    this.manySepFirstInternal(3, e);
  }
  MANY_SEP4(e) {
    this.manySepFirstInternal(4, e);
  }
  MANY_SEP5(e) {
    this.manySepFirstInternal(5, e);
  }
  MANY_SEP6(e) {
    this.manySepFirstInternal(6, e);
  }
  MANY_SEP7(e) {
    this.manySepFirstInternal(7, e);
  }
  MANY_SEP8(e) {
    this.manySepFirstInternal(8, e);
  }
  MANY_SEP9(e) {
    this.manySepFirstInternal(9, e);
  }
  AT_LEAST_ONE(e) {
    this.atLeastOneInternal(0, e);
  }
  AT_LEAST_ONE1(e) {
    return this.atLeastOneInternal(1, e);
  }
  AT_LEAST_ONE2(e) {
    this.atLeastOneInternal(2, e);
  }
  AT_LEAST_ONE3(e) {
    this.atLeastOneInternal(3, e);
  }
  AT_LEAST_ONE4(e) {
    this.atLeastOneInternal(4, e);
  }
  AT_LEAST_ONE5(e) {
    this.atLeastOneInternal(5, e);
  }
  AT_LEAST_ONE6(e) {
    this.atLeastOneInternal(6, e);
  }
  AT_LEAST_ONE7(e) {
    this.atLeastOneInternal(7, e);
  }
  AT_LEAST_ONE8(e) {
    this.atLeastOneInternal(8, e);
  }
  AT_LEAST_ONE9(e) {
    this.atLeastOneInternal(9, e);
  }
  AT_LEAST_ONE_SEP(e) {
    this.atLeastOneSepFirstInternal(0, e);
  }
  AT_LEAST_ONE_SEP1(e) {
    this.atLeastOneSepFirstInternal(1, e);
  }
  AT_LEAST_ONE_SEP2(e) {
    this.atLeastOneSepFirstInternal(2, e);
  }
  AT_LEAST_ONE_SEP3(e) {
    this.atLeastOneSepFirstInternal(3, e);
  }
  AT_LEAST_ONE_SEP4(e) {
    this.atLeastOneSepFirstInternal(4, e);
  }
  AT_LEAST_ONE_SEP5(e) {
    this.atLeastOneSepFirstInternal(5, e);
  }
  AT_LEAST_ONE_SEP6(e) {
    this.atLeastOneSepFirstInternal(6, e);
  }
  AT_LEAST_ONE_SEP7(e) {
    this.atLeastOneSepFirstInternal(7, e);
  }
  AT_LEAST_ONE_SEP8(e) {
    this.atLeastOneSepFirstInternal(8, e);
  }
  AT_LEAST_ONE_SEP9(e) {
    this.atLeastOneSepFirstInternal(9, e);
  }
  RULE(e, r, n = Ka) {
    if (Ft(this.definedRulesNames, e)) {
      const a = {
        message: oi.buildDuplicateRuleNameError({
          topLevelRule: e,
          grammarName: this.className
        }),
        type: Dt.DUPLICATE_RULE_NAME,
        ruleName: e
      };
      this.definitionErrors.push(a);
    }
    this.definedRulesNames.push(e);
    const i = this.defineRule(e, r, n);
    return this[e] = i, i;
  }
  OVERRIDE_RULE(e, r, n = Ka) {
    const i = uE(e, this.definedRulesNames, this.className);
    this.definitionErrors = this.definitionErrors.concat(i);
    const s = this.defineRule(e, r, n);
    return this[e] = s, s;
  }
  BACKTRACK(e, r) {
    return function() {
      this.isBackTrackingStack.push(1);
      const n = this.saveRecogState();
      try {
        return e.apply(this, r), true;
      } catch (i) {
        if (Wa(i))
          return false;
        throw i;
      } finally {
        this.reloadRecogState(n), this.isBackTrackingStack.pop();
      }
    };
  }
  // GAST export APIs
  getGAstProductions() {
    return this.gastProductionsCache;
  }
  getSerializedGastProductions() {
    return zv(ft(this.gastProductionsCache));
  }
}
class VE {
  initRecognizerEngine(e, r) {
    if (this.className = this.constructor.name, this.shortRuleNameToFull = {}, this.fullRuleNameToShort = {}, this.ruleShortNameIdx = 256, this.tokenMatcher = Ya, this.subruleIdx = 0, this.definedRulesNames = [], this.tokensMap = {}, this.isBackTrackingStack = [], this.RULE_STACK = [], this.RULE_OCCURRENCE_STACK = [], this.gastProductionsCache = {}, de(r, "serializedGrammar"))
      throw Error(`The Parser's configuration can no longer contain a <serializedGrammar> property.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0
	For Further details.`);
    if (Ne(e)) {
      if (Ke(e))
        throw Error(`A Token Vocabulary cannot be empty.
	Note that the first argument for the parser constructor
	is no longer a Token vector (since v4.0).`);
      if (typeof e[0].startOffset == "number")
        throw Error(`The Parser constructor no longer accepts a token vector as the first argument.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0
	For Further details.`);
    }
    if (Ne(e))
      this.tokensMap = $t(e, (s, a) => (s[a.name] = a, s), {});
    else if (de(e, "modes") && Ir(Er(ft(e.modes)), Qy)) {
      const s = Er(ft(e.modes)), a = Yc(s);
      this.tokensMap = $t(a, (o, l) => (o[l.name] = l, o), {});
    } else if (ur(e))
      this.tokensMap = Bt(e);
    else
      throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");
    this.tokensMap.EOF = hi;
    const n = de(e, "modes") ? Er(ft(e.modes)) : ft(e), i = Ir(n, (s) => Ke(s.categoryMatches));
    this.tokenMatcher = i ? Ya : Vs, zs(ft(this.tokensMap));
  }
  defineRule(e, r, n) {
    if (this.selfAnalysisDone)
      throw Error(`Grammar rule <${e}> may not be defined after the 'performSelfAnalysis' method has been called'
Make sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.`);
    const i = de(n, "resyncEnabled") ? n.resyncEnabled : Ka.resyncEnabled, s = de(n, "recoveryValueFunc") ? n.recoveryValueFunc : Ka.recoveryValueFunc, a = this.ruleShortNameIdx << BE + Wn;
    this.ruleShortNameIdx++, this.shortRuleNameToFull[a] = e, this.fullRuleNameToShort[e] = a;
    let o;
    return this.outputCst === true ? o = function(...u) {
      try {
        this.ruleInvocationStateUpdate(a, e, this.subruleIdx), r.apply(this, u);
        const h = this.CST_STACK[this.CST_STACK.length - 1];
        return this.cstPostRule(h), h;
      } catch (h) {
        return this.invokeRuleCatch(h, i, s);
      } finally {
        this.ruleFinallyStateUpdate();
      }
    } : o = function(...u) {
      try {
        return this.ruleInvocationStateUpdate(a, e, this.subruleIdx), r.apply(this, u);
      } catch (h) {
        return this.invokeRuleCatch(h, i, s);
      } finally {
        this.ruleFinallyStateUpdate();
      }
    }, Object.assign(o, { ruleName: e, originalGrammarAction: r });
  }
  invokeRuleCatch(e, r, n) {
    const i = this.RULE_STACK.length === 1, s = r && !this.isBackTracking() && this.recoveryEnabled;
    if (Wa(e)) {
      const a = e;
      if (s) {
        const o = this.findReSyncTokenType();
        if (this.isInCurrentRuleReSyncSet(o))
          if (a.resyncedTokens = this.reSyncTo(o), this.outputCst) {
            const l = this.CST_STACK[this.CST_STACK.length - 1];
            return l.recoveredNode = true, l;
          } else
            return n(e);
        else {
          if (this.outputCst) {
            const l = this.CST_STACK[this.CST_STACK.length - 1];
            l.recoveredNode = true, a.partialCstResult = l;
          }
          throw a;
        }
      } else {
        if (i)
          return this.moveToTerminatedState(), n(e);
        throw a;
      }
    } else
      throw e;
  }
  // Implementation of parsing DSL
  optionInternal(e, r) {
    const n = this.getKeyForAutomaticLookahead(CA, r);
    return this.optionInternalLogic(e, r, n);
  }
  optionInternalLogic(e, r, n) {
    let i = this.getLaFuncFromCache(n), s;
    if (typeof e != "function") {
      s = e.DEF;
      const a = e.GATE;
      if (a !== void 0) {
        const o = i;
        i = () => a.call(this) && o.call(this);
      }
    } else
      s = e;
    if (i.call(this) === true)
      return s.call(this);
  }
  atLeastOneInternal(e, r) {
    const n = this.getKeyForAutomaticLookahead(oc, e);
    return this.atLeastOneInternalLogic(e, r, n);
  }
  atLeastOneInternalLogic(e, r, n) {
    let i = this.getLaFuncFromCache(n), s;
    if (typeof r != "function") {
      s = r.DEF;
      const a = r.GATE;
      if (a !== void 0) {
        const o = i;
        i = () => a.call(this) && o.call(this);
      }
    } else
      s = r;
    if (i.call(this) === true) {
      let a = this.doSingleRepetition(s);
      for (; i.call(this) === true && a === true; )
        a = this.doSingleRepetition(s);
    } else
      throw this.raiseEarlyExitException(e, nt.REPETITION_MANDATORY, r.ERR_MSG);
    this.attemptInRepetitionRecovery(this.atLeastOneInternal, [e, r], i, oc, e, Ky);
  }
  atLeastOneSepFirstInternal(e, r) {
    const n = this.getKeyForAutomaticLookahead(wa, e);
    this.atLeastOneSepFirstInternalLogic(e, r, n);
  }
  atLeastOneSepFirstInternalLogic(e, r, n) {
    const i = r.DEF, s = r.SEP;
    if (this.getLaFuncFromCache(n).call(this) === true) {
      i.call(this);
      const o = () => this.tokenMatcher(this.LA(1), s);
      for (; this.tokenMatcher(this.LA(1), s) === true; )
        this.CONSUME(s), i.call(this);
      this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal, [
        e,
        s,
        o,
        i,
        ru
      ], o, wa, e, ru);
    } else
      throw this.raiseEarlyExitException(e, nt.REPETITION_MANDATORY_WITH_SEPARATOR, r.ERR_MSG);
  }
  manyInternal(e, r) {
    const n = this.getKeyForAutomaticLookahead(ac, e);
    return this.manyInternalLogic(e, r, n);
  }
  manyInternalLogic(e, r, n) {
    let i = this.getLaFuncFromCache(n), s;
    if (typeof r != "function") {
      s = r.DEF;
      const o = r.GATE;
      if (o !== void 0) {
        const l = i;
        i = () => o.call(this) && l.call(this);
      }
    } else
      s = r;
    let a = true;
    for (; i.call(this) === true && a === true; )
      a = this.doSingleRepetition(s);
    this.attemptInRepetitionRecovery(
      this.manyInternal,
      [e, r],
      i,
      ac,
      e,
      qy,
      // The notStuck parameter is only relevant when "attemptInRepetitionRecovery"
      // is invoked from manyInternal, in the MANY_SEP case and AT_LEAST_ONE[_SEP]
      // An infinite loop cannot occur as:
      // - Either the lookahead is guaranteed to consume something (Single Token Separator)
      // - AT_LEAST_ONE by definition is guaranteed to consume something (or error out).
      a
    );
  }
  manySepFirstInternal(e, r) {
    const n = this.getKeyForAutomaticLookahead(lc, e);
    this.manySepFirstInternalLogic(e, r, n);
  }
  manySepFirstInternalLogic(e, r, n) {
    const i = r.DEF, s = r.SEP;
    if (this.getLaFuncFromCache(n).call(this) === true) {
      i.call(this);
      const o = () => this.tokenMatcher(this.LA(1), s);
      for (; this.tokenMatcher(this.LA(1), s) === true; )
        this.CONSUME(s), i.call(this);
      this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal, [
        e,
        s,
        o,
        i,
        tu
      ], o, lc, e, tu);
    }
  }
  repetitionSepSecondInternal(e, r, n, i, s) {
    for (; n(); )
      this.CONSUME(r), i.call(this);
    this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal, [
      e,
      r,
      n,
      i,
      s
    ], n, wa, e, s);
  }
  doSingleRepetition(e) {
    const r = this.getLexerPosition();
    return e.call(this), this.getLexerPosition() > r;
  }
  orInternal(e, r) {
    const n = this.getKeyForAutomaticLookahead(IA, r), i = Ne(e) ? e : e.DEF, a = this.getLaFuncFromCache(n).call(this, i);
    if (a !== void 0)
      return i[a].ALT.call(this);
    this.raiseNoAltException(r, e.ERR_MSG);
  }
  ruleFinallyStateUpdate() {
    if (this.RULE_STACK.pop(), this.RULE_OCCURRENCE_STACK.pop(), this.cstFinallyStateUpdate(), this.RULE_STACK.length === 0 && this.isAtEndOfInput() === false) {
      const e = this.LA(1), r = this.errorMessageProvider.buildNotAllInputParsedMessage({
        firstRedundant: e,
        ruleName: this.getCurrRuleFullName()
      });
      this.SAVE_ERROR(new CE(r, e));
    }
  }
  subruleInternal(e, r, n) {
    let i;
    try {
      const s = n !== void 0 ? n.ARGS : void 0;
      return this.subruleIdx = r, i = e.apply(this, s), this.cstPostNonTerminal(i, n !== void 0 && n.LABEL !== void 0 ? n.LABEL : e.ruleName), i;
    } catch (s) {
      throw this.subruleInternalError(s, n, e.ruleName);
    }
  }
  subruleInternalError(e, r, n) {
    throw Wa(e) && e.partialCstResult !== void 0 && (this.cstPostNonTerminal(e.partialCstResult, r !== void 0 && r.LABEL !== void 0 ? r.LABEL : n), delete e.partialCstResult), e;
  }
  consumeInternal(e, r, n) {
    let i;
    try {
      const s = this.LA(1);
      this.tokenMatcher(s, e) === true ? (this.consumeToken(), i = s) : this.consumeInternalError(e, s, n);
    } catch (s) {
      i = this.consumeInternalRecovery(e, r, s);
    }
    return this.cstPostTerminal(n !== void 0 && n.LABEL !== void 0 ? n.LABEL : e.name, i), i;
  }
  consumeInternalError(e, r, n) {
    let i;
    const s = this.LA(0);
    throw n !== void 0 && n.ERR_MSG ? i = n.ERR_MSG : i = this.errorMessageProvider.buildMismatchTokenMessage({
      expected: e,
      actual: r,
      previous: s,
      ruleName: this.getCurrRuleFullName()
    }), this.SAVE_ERROR(new yA(i, r, s));
  }
  consumeInternalRecovery(e, r, n) {
    if (this.recoveryEnabled && // TODO: more robust checking of the exception type. Perhaps Typescript extending expressions?
    n.name === "MismatchedTokenException" && !this.isBackTracking()) {
      const i = this.getFollowsForInRuleRecovery(e, r);
      try {
        return this.tryInRuleRecovery(e, i);
      } catch (s) {
        throw s.name === EA ? n : s;
      }
    } else
      throw n;
  }
  saveRecogState() {
    const e = this.errors, r = Bt(this.RULE_STACK);
    return {
      errors: e,
      lexerState: this.exportLexerState(),
      RULE_STACK: r,
      CST_STACK: this.CST_STACK
    };
  }
  reloadRecogState(e) {
    this.errors = e.errors, this.importLexerState(e.lexerState), this.RULE_STACK = e.RULE_STACK;
  }
  ruleInvocationStateUpdate(e, r, n) {
    this.RULE_OCCURRENCE_STACK.push(n), this.RULE_STACK.push(e), this.cstInvocationStateUpdate(r);
  }
  isBackTracking() {
    return this.isBackTrackingStack.length !== 0;
  }
  getCurrRuleFullName() {
    const e = this.getLastExplicitRuleShortName();
    return this.shortRuleNameToFull[e];
  }
  shortRuleNameToFullName(e) {
    return this.shortRuleNameToFull[e];
  }
  isAtEndOfInput() {
    return this.tokenMatcher(this.LA(1), hi);
  }
  reset() {
    this.resetLexerState(), this.subruleIdx = 0, this.isBackTrackingStack = [], this.errors = [], this.RULE_STACK = [], this.CST_STACK = [], this.RULE_OCCURRENCE_STACK = [];
  }
}
class zE {
  initErrorHandler(e) {
    this._errors = [], this.errorMessageProvider = de(e, "errorMessageProvider") ? e.errorMessageProvider : Gn.errorMessageProvider;
  }
  SAVE_ERROR(e) {
    if (Wa(e))
      return e.context = {
        ruleStack: this.getHumanReadableRuleStack(),
        ruleOccurrenceStack: Bt(this.RULE_OCCURRENCE_STACK)
      }, this._errors.push(e), e;
    throw Error("Trying to save an Error which is not a RecognitionException");
  }
  get errors() {
    return Bt(this._errors);
  }
  set errors(e) {
    this._errors = e;
  }
  // TODO: consider caching the error message computed information
  raiseEarlyExitException(e, r, n) {
    const i = this.getCurrRuleFullName(), s = this.getGAstProductions()[i], o = Xc(e, s, r, this.maxLookahead)[0], l = [];
    for (let u = 1; u <= this.maxLookahead; u++)
      l.push(this.LA(u));
    const c = this.errorMessageProvider.buildEarlyExitMessage({
      expectedIterationPaths: o,
      actual: l,
      previous: this.LA(0),
      customUserDescription: n,
      ruleName: i
    });
    throw this.SAVE_ERROR(new xE(c, this.LA(1), this.LA(0)));
  }
  // TODO: consider caching the error message computed information
  raiseNoAltException(e, r) {
    const n = this.getCurrRuleFullName(), i = this.getGAstProductions()[n], s = Kc(e, i, this.maxLookahead), a = [];
    for (let c = 1; c <= this.maxLookahead; c++)
      a.push(this.LA(c));
    const o = this.LA(0), l = this.errorMessageProvider.buildNoViableAltMessage({
      expectedPathsPerAlt: s,
      actual: a,
      previous: o,
      customUserDescription: r,
      ruleName: this.getCurrRuleFullName()
    });
    throw this.SAVE_ERROR(new IE(l, this.LA(1), o));
  }
}
class YE {
  initContentAssist() {
  }
  computeContentAssist(e, r) {
    const n = this.gastProductionsCache[e];
    if (un(n))
      throw Error(`Rule ->${e}<- does not exist in this grammar.`);
    return oA([n], r, this.tokenMatcher, this.maxLookahead);
  }
  // TODO: should this be a member method or a utility? it does not have any state or usage of 'this'...
  // TODO: should this be more explicitly part of the public API?
  getNextPossibleTokenTypes(e) {
    const r = wr(e.ruleStack), i = this.getGAstProductions()[r];
    return new jy(i, e).startWalking();
  }
}
const To = {
  description: "This Object indicates the Parser is during Recording Phase"
};
Object.freeze(To);
const au = true, ou = Math.pow(2, Wn) - 1, TA = sA({ name: "RECORDING_PHASE_TOKEN", pattern: or.NA });
zs([TA]);
const SA = qc(
  TA,
  `This IToken indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,
  // Using "-1" instead of NaN (as in EOF) because an actual number is less likely to
  // cause errors if the output of LA or CONSUME would be (incorrectly) used during the recording phase.
  -1,
  -1,
  -1,
  -1,
  -1,
  -1
);
Object.freeze(SA);
const WE = {
  name: `This CSTNode indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,
  children: {}
};
class jE {
  initGastRecorder(e) {
    this.recordingProdStack = [], this.RECORDING_PHASE = false;
  }
  enableRecording() {
    this.RECORDING_PHASE = true, this.TRACE_INIT("Enable Recording", () => {
      for (let e = 0; e < 10; e++) {
        const r = e > 0 ? e : "";
        this[`CONSUME${r}`] = function(n, i) {
          return this.consumeInternalRecord(n, e, i);
        }, this[`SUBRULE${r}`] = function(n, i) {
          return this.subruleInternalRecord(n, e, i);
        }, this[`OPTION${r}`] = function(n) {
          return this.optionInternalRecord(n, e);
        }, this[`OR${r}`] = function(n) {
          return this.orInternalRecord(n, e);
        }, this[`MANY${r}`] = function(n) {
          this.manyInternalRecord(e, n);
        }, this[`MANY_SEP${r}`] = function(n) {
          this.manySepFirstInternalRecord(e, n);
        }, this[`AT_LEAST_ONE${r}`] = function(n) {
          this.atLeastOneInternalRecord(e, n);
        }, this[`AT_LEAST_ONE_SEP${r}`] = function(n) {
          this.atLeastOneSepFirstInternalRecord(e, n);
        };
      }
      this.consume = function(e, r, n) {
        return this.consumeInternalRecord(r, e, n);
      }, this.subrule = function(e, r, n) {
        return this.subruleInternalRecord(r, e, n);
      }, this.option = function(e, r) {
        return this.optionInternalRecord(r, e);
      }, this.or = function(e, r) {
        return this.orInternalRecord(r, e);
      }, this.many = function(e, r) {
        this.manyInternalRecord(e, r);
      }, this.atLeastOne = function(e, r) {
        this.atLeastOneInternalRecord(e, r);
      }, this.ACTION = this.ACTION_RECORD, this.BACKTRACK = this.BACKTRACK_RECORD, this.LA = this.LA_RECORD;
    });
  }
  disableRecording() {
    this.RECORDING_PHASE = false, this.TRACE_INIT("Deleting Recording methods", () => {
      const e = this;
      for (let r = 0; r < 10; r++) {
        const n = r > 0 ? r : "";
        delete e[`CONSUME${n}`], delete e[`SUBRULE${n}`], delete e[`OPTION${n}`], delete e[`OR${n}`], delete e[`MANY${n}`], delete e[`MANY_SEP${n}`], delete e[`AT_LEAST_ONE${n}`], delete e[`AT_LEAST_ONE_SEP${n}`];
      }
      delete e.consume, delete e.subrule, delete e.option, delete e.or, delete e.many, delete e.atLeastOne, delete e.ACTION, delete e.BACKTRACK, delete e.LA;
    });
  }
  //   Parser methods are called inside an ACTION?
  //   Maybe try/catch/finally on ACTIONS while disabling the recorders state changes?
  // @ts-expect-error -- noop place holder
  ACTION_RECORD(e) {
  }
  // Executing backtracking logic will break our recording logic assumptions
  BACKTRACK_RECORD(e, r) {
    return () => true;
  }
  // LA is part of the official API and may be used for custom lookahead logic
  // by end users who may forget to wrap it in ACTION or inside a GATE
  LA_RECORD(e) {
    return qa;
  }
  topLevelRuleRecord(e, r) {
    try {
      const n = new Gi({ definition: [], name: e });
      return n.name = e, this.recordingProdStack.push(n), r.call(this), this.recordingProdStack.pop(), n;
    } catch (n) {
      if (n.KNOWN_RECORDER_ERROR !== true)
        try {
          n.message = n.message + `
	 This error was thrown during the "grammar recording phase" For more info see:
	https://chevrotain.io/docs/guide/internals.html#grammar-recording`;
        } catch {
          throw n;
        }
      throw n;
    }
  }
  // Implementation of parsing DSL
  optionInternalRecord(e, r) {
    return Ki.call(this, Ht, e, r);
  }
  atLeastOneInternalRecord(e, r) {
    Ki.call(this, Xr, r, e);
  }
  atLeastOneSepFirstInternalRecord(e, r) {
    Ki.call(this, $r, r, e, au);
  }
  manyInternalRecord(e, r) {
    Ki.call(this, dt, r, e);
  }
  manySepFirstInternalRecord(e, r) {
    Ki.call(this, Rr, r, e, au);
  }
  orInternalRecord(e, r) {
    return qE.call(this, e, r);
  }
  subruleInternalRecord(e, r, n) {
    if (ja(r), !e || de(e, "ruleName") === false) {
      const o = new Error(`<SUBRULE${lu(r)}> argument is invalid expecting a Parser method reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);
      throw o.KNOWN_RECORDER_ERROR = true, o;
    }
    const i = Pi(this.recordingProdStack), s = e.ruleName, a = new Zt({
      idx: r,
      nonTerminalName: s,
      label: n == null ? void 0 : n.LABEL,
      // The resolving of the `referencedRule` property will be done once all the Rule's GASTs have been created
      referencedRule: void 0
    });
    return i.definition.push(a), this.outputCst ? WE : To;
  }
  consumeInternalRecord(e, r, n) {
    if (ja(r), !nA(e)) {
      const a = new Error(`<CONSUME${lu(r)}> argument is invalid expecting a TokenType reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);
      throw a.KNOWN_RECORDER_ERROR = true, a;
    }
    const i = Pi(this.recordingProdStack), s = new rt({
      idx: r,
      terminalType: e,
      label: n == null ? void 0 : n.LABEL
    });
    return i.definition.push(s), SA;
  }
}
function Ki(t, e, r, n = false) {
  ja(r);
  const i = Pi(this.recordingProdStack), s = fn(e) ? e : e.DEF, a = new t({ definition: [], idx: r });
  return n && (a.separator = e.SEP), de(e, "MAX_LOOKAHEAD") && (a.maxLookahead = e.MAX_LOOKAHEAD), this.recordingProdStack.push(a), s.call(this), i.definition.push(a), this.recordingProdStack.pop(), To;
}
function qE(t, e) {
  ja(e);
  const r = Pi(this.recordingProdStack), n = Ne(t) === false, i = n === false ? t : t.DEF, s = new Mr({
    definition: [],
    idx: e,
    ignoreAmbiguities: n && t.IGNORE_AMBIGUITIES === true
  });
  de(t, "MAX_LOOKAHEAD") && (s.maxLookahead = t.MAX_LOOKAHEAD);
  const a = Y2(i, (o) => fn(o.GATE));
  return s.hasPredicates = a, r.definition.push(s), ve(i, (o) => {
    const l = new zt({ definition: [] });
    s.definition.push(l), de(o, "IGNORE_AMBIGUITIES") ? l.ignoreAmbiguities = o.IGNORE_AMBIGUITIES : de(o, "GATE") && (l.ignoreAmbiguities = true), this.recordingProdStack.push(l), o.ALT.call(this), this.recordingProdStack.pop();
  }), To;
}
function lu(t) {
  return t === 0 ? "" : `${t}`;
}
function ja(t) {
  if (t < 0 || t > ou) {
    const e = new Error(
      // The stack trace will contain all the needed details
      `Invalid DSL Method idx value: <${t}>
	Idx value must be a none negative value smaller than ${ou + 1}`
    );
    throw e.KNOWN_RECORDER_ERROR = true, e;
  }
}
class KE {
  initPerformanceTracer(e) {
    if (de(e, "traceInitPerf")) {
      const r = e.traceInitPerf, n = typeof r == "number";
      this.traceInitMaxIdent = n ? r : 1 / 0, this.traceInitPerf = n ? r > 0 : r;
    } else
      this.traceInitMaxIdent = 0, this.traceInitPerf = Gn.traceInitPerf;
    this.traceInitIndent = -1;
  }
  TRACE_INIT(e, r) {
    if (this.traceInitPerf === true) {
      this.traceInitIndent++;
      const n = new Array(this.traceInitIndent + 1).join("	");
      this.traceInitIndent < this.traceInitMaxIdent && console.log(`${n}--> <${e}>`);
      const { time: i, value: s } = j2(r), a = i > 10 ? console.warn : console.log;
      return this.traceInitIndent < this.traceInitMaxIdent && a(`${n}<-- <${e}> time: ${i}ms`), this.traceInitIndent--, s;
    } else
      return r();
  }
}
function XE(t, e) {
  e.forEach((r) => {
    const n = r.prototype;
    Object.getOwnPropertyNames(n).forEach((i) => {
      if (i === "constructor")
        return;
      const s = Object.getOwnPropertyDescriptor(n, i);
      s && (s.get || s.set) ? Object.defineProperty(t.prototype, i, s) : t.prototype[i] = r.prototype[i];
    });
  });
}
const qa = qc(hi, "", NaN, NaN, NaN, NaN, NaN, NaN);
Object.freeze(qa);
const Gn = Object.freeze({
  recoveryEnabled: false,
  maxLookahead: 3,
  dynamicTokensEnabled: false,
  outputCst: true,
  errorMessageProvider: aA,
  nodeLocationTracking: "none",
  traceInitPerf: false,
  skipValidations: false
}), Ka = Object.freeze({
  recoveryValueFunc: () => {
  },
  resyncEnabled: true
});
var Dt;
(function(t) {
  t[t.INVALID_RULE_NAME = 0] = "INVALID_RULE_NAME", t[t.DUPLICATE_RULE_NAME = 1] = "DUPLICATE_RULE_NAME", t[t.INVALID_RULE_OVERRIDE = 2] = "INVALID_RULE_OVERRIDE", t[t.DUPLICATE_PRODUCTIONS = 3] = "DUPLICATE_PRODUCTIONS", t[t.UNRESOLVED_SUBRULE_REF = 4] = "UNRESOLVED_SUBRULE_REF", t[t.LEFT_RECURSION = 5] = "LEFT_RECURSION", t[t.NONE_LAST_EMPTY_ALT = 6] = "NONE_LAST_EMPTY_ALT", t[t.AMBIGUOUS_ALTS = 7] = "AMBIGUOUS_ALTS", t[t.CONFLICT_TOKENS_RULES_NAMESPACE = 8] = "CONFLICT_TOKENS_RULES_NAMESPACE", t[t.INVALID_TOKEN_NAME = 9] = "INVALID_TOKEN_NAME", t[t.NO_NON_EMPTY_LOOKAHEAD = 10] = "NO_NON_EMPTY_LOOKAHEAD", t[t.AMBIGUOUS_PREFIX_ALTS = 11] = "AMBIGUOUS_PREFIX_ALTS", t[t.TOO_MANY_ALTS = 12] = "TOO_MANY_ALTS", t[t.CUSTOM_LOOKAHEAD_VALIDATION = 13] = "CUSTOM_LOOKAHEAD_VALIDATION";
})(Dt || (Dt = {}));
class So {
  /**
   *  @deprecated use the **instance** method with the same name instead
   */
  static performSelfAnalysis(e) {
    throw Error("The **static** `performSelfAnalysis` method has been deprecated.	\nUse the **instance** method with the same name instead.");
  }
  performSelfAnalysis() {
    this.TRACE_INIT("performSelfAnalysis", () => {
      let e;
      this.selfAnalysisDone = true;
      const r = this.className;
      this.TRACE_INIT("toFastProps", () => {
        q2(this);
      }), this.TRACE_INIT("Grammar Recording", () => {
        try {
          this.enableRecording(), ve(this.definedRulesNames, (i) => {
            const a = this[i].originalGrammarAction;
            let o;
            this.TRACE_INIT(`${i} Rule`, () => {
              o = this.topLevelRuleRecord(i, a);
            }), this.gastProductionsCache[i] = o;
          });
        } finally {
          this.disableRecording();
        }
      });
      let n = [];
      if (this.TRACE_INIT("Grammar Resolving", () => {
        n = yE({
          rules: ft(this.gastProductionsCache)
        }), this.definitionErrors = this.definitionErrors.concat(n);
      }), this.TRACE_INIT("Grammar Validations", () => {
        if (Ke(n) && this.skipValidations === false) {
          const i = EE({
            rules: ft(this.gastProductionsCache),
            tokenTypes: ft(this.tokensMap),
            errMsgProvider: oi,
            grammarName: r
          }), s = iE({
            lookaheadStrategy: this.lookaheadStrategy,
            rules: ft(this.gastProductionsCache),
            tokenTypes: ft(this.tokensMap),
            grammarName: r
          });
          this.definitionErrors = this.definitionErrors.concat(i, s);
        }
      }), Ke(this.definitionErrors) && (this.recoveryEnabled && this.TRACE_INIT("computeAllProdsFollows", () => {
        const i = $v(ft(this.gastProductionsCache));
        this.resyncFollows = i;
      }), this.TRACE_INIT("ComputeLookaheadFunctions", () => {
        var i, s;
        (s = (i = this.lookaheadStrategy).initialize) === null || s === void 0 || s.call(i, {
          rules: ft(this.gastProductionsCache)
        }), this.preComputeLookaheadFunctions(ft(this.gastProductionsCache));
      })), !So.DEFER_DEFINITION_ERRORS_HANDLING && !Ke(this.definitionErrors))
        throw e = fe(this.definitionErrors, (i) => i.message), new Error(`Parser Definition Errors detected:
 ${e.join(`
-------------------------------
`)}`);
    });
  }
  constructor(e, r) {
    this.definitionErrors = [], this.selfAnalysisDone = false;
    const n = this;
    if (n.initErrorHandler(r), n.initLexerAdapter(), n.initLooksAhead(r), n.initRecognizerEngine(e, r), n.initRecoverable(r), n.initTreeBuilder(r), n.initContentAssist(), n.initGastRecorder(r), n.initPerformanceTracer(r), de(r, "ignoredIssues"))
      throw new Error(`The <ignoredIssues> IParserConfig property has been deprecated.
	Please use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.
	See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES
	For further details.`);
    this.skipValidations = de(r, "skipValidations") ? r.skipValidations : Gn.skipValidations;
  }
}
So.DEFER_DEFINITION_ERRORS_HANDLING = false;
XE(So, [
  SE,
  _E,
  UE,
  GE,
  VE,
  HE,
  zE,
  YE,
  jE,
  KE
]);
class $E {
  constructor(e = 4) {
    this.pool = e, this.queue = [], this.workers = [], this.workersResolve = [], this.workerStatus = 0;
  }
  _initWorker(e) {
    if (!this.workers[e]) {
      const r = this.workerCreator();
      r.addEventListener("message", this._onMessage.bind(this, e)), this.workers[e] = r;
    }
  }
  _getIdleWorker() {
    for (let e = 0; e < this.pool; e++)
      if (!(this.workerStatus & 1 << e))
        return e;
    return -1;
  }
  _onMessage(e, r) {
    const n = this.workersResolve[e];
    if (n && n(r), this.queue.length) {
      const { resolve: i, msg: s, transfer: a } = this.queue.shift();
      this.workersResolve[e] = i, this.workers[e].postMessage(s, a);
    } else
      this.workerStatus ^= 1 << e;
  }
  setWorkerCreator(e) {
    this.workerCreator = e;
  }
  setWorkerLimit(e) {
    this.pool = e;
  }
  postMessage(e, r) {
    return new Promise((n) => {
      const i = this._getIdleWorker();
      i !== -1 ? (this._initWorker(i), this.workerStatus |= 1 << i, this.workersResolve[i] = n, this.workers[i].postMessage(e, r)) : this.queue.push({ resolve: n, msg: e, transfer: r });
    });
  }
  dispose() {
    this.workers.forEach((e) => e.terminate()), this.workersResolve.length = 0, this.workers.length = 0, this.queue.length = 0, this.workerStatus = 0;
  }
}
class ZE extends CompressedTexture {
  constructor(e, r, n, i, s, a) {
    super(e, r, n, s, a), this.isCompressedArrayTexture = true, this.image.depth = i, this.wrapR = ClampToEdgeWrapping;
  }
}
const ol = /* @__PURE__ */ new WeakMap();
let ll = 0, cl;
const ss = class extends Loader {
  constructor(t) {
    super(t), this.transcoderPath = "", this.transcoderBinary = null, this.transcoderPending = null, this.workerPool = new $E(), this.workerSourceURL = "", this.workerConfig = null, typeof MSC_TRANSCODER < "u" && console.warn(
      'THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.'
    );
  }
  setTranscoderPath(t) {
    return this.transcoderPath = t, this;
  }
  setWorkerLimit(t) {
    return this.workerPool.setWorkerLimit(t), this;
  }
  detectSupport(t) {
    return this.workerConfig = {
      astcSupported: t.extensions.has("WEBGL_compressed_texture_astc"),
      etc1Supported: t.extensions.has("WEBGL_compressed_texture_etc1"),
      etc2Supported: t.extensions.has("WEBGL_compressed_texture_etc"),
      dxtSupported: t.extensions.has("WEBGL_compressed_texture_s3tc"),
      bptcSupported: t.extensions.has("EXT_texture_compression_bptc"),
      pvrtcSupported: t.extensions.has("WEBGL_compressed_texture_pvrtc") || t.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")
    }, t.capabilities.isWebGL2 && (this.workerConfig.etc1Supported = false), this;
  }
  init() {
    if (!this.transcoderPending) {
      const t = new FileLoader(this.manager);
      t.setPath(this.transcoderPath), t.setWithCredentials(this.withCredentials);
      const e = t.loadAsync("basis_transcoder.js"), r = new FileLoader(this.manager);
      r.setPath(this.transcoderPath), r.setResponseType("arraybuffer"), r.setWithCredentials(this.withCredentials);
      const n = r.loadAsync("basis_transcoder.wasm");
      this.transcoderPending = Promise.all([e, n]).then(([i, s]) => {
        const a = ss.BasisWorker.toString(), o = [
          "/* constants */",
          "let _EngineFormat = " + JSON.stringify(ss.EngineFormat),
          "let _TranscoderFormat = " + JSON.stringify(ss.TranscoderFormat),
          "let _BasisFormat = " + JSON.stringify(ss.BasisFormat),
          "/* basis_transcoder.js */",
          i,
          "/* worker */",
          a.substring(a.indexOf("{") + 1, a.lastIndexOf("}"))
        ].join(`
`);
        this.workerSourceURL = URL.createObjectURL(new Blob([o])), this.transcoderBinary = s, this.workerPool.setWorkerCreator(() => {
          const l = new Worker(this.workerSourceURL), c = this.transcoderBinary.slice(0);
          return l.postMessage({ type: "init", config: this.workerConfig, transcoderBinary: c }, [c]), l;
        });
      }), ll > 0 && console.warn(
        "THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."
      ), ll++;
    }
    return this.transcoderPending;
  }
  load(t, e, r, n) {
    if (this.workerConfig === null)
      throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");
    const i = new FileLoader(this.manager);
    i.setResponseType("arraybuffer"), i.setWithCredentials(this.withCredentials), i.load(
      t,
      (s) => {
        if (ol.has(s))
          return ol.get(s).promise.then(e).catch(n);
        this._createTexture(s).then((a) => e ? e(a) : null).catch(n);
      },
      r,
      n
    );
  }
  _createTextureFrom(t, e) {
    const { mipmaps: r, width: n, height: i, format: s, type: a, error: o, dfdTransferFn: l, dfdFlags: c } = t;
    if (a === "error")
      return Promise.reject(o);
    const u = e.layerCount > 1 ? new ZE(r, n, i, e.layerCount, s, UnsignedByteType) : new CompressedTexture(r, n, i, s, UnsignedByteType);
    return u.minFilter = r.length === 1 ? LinearFilter : LinearMipmapLinearFilter, u.magFilter = LinearFilter, u.generateMipmaps = false, u.needsUpdate = true, "colorSpace" in u ? u.colorSpace = l === Fl ? "srgb" : "srgb-linear" : u.encoding = l === Fl ? 3001 : 3e3, u.premultiplyAlpha = !!(c & ef), u;
  }
  /**
   * @param {ArrayBuffer} buffer
   * @param {object?} config
   * @return {Promise<CompressedTexture|CompressedArrayTexture|DataTexture|Data3DTexture>}
   */
  async _createTexture(t, e = {}) {
    const r = sf(new Uint8Array(t));
    if (r.vkFormat !== fh)
      return eI(r);
    const n = e, i = this.init().then(() => this.workerPool.postMessage({ type: "transcode", buffer: t, taskConfig: n }, [t])).then((s) => this._createTextureFrom(s.data, r));
    return ol.set(t, { promise: i }), i;
  }
  dispose() {
    return this.workerPool.dispose(), this.workerSourceURL && URL.revokeObjectURL(this.workerSourceURL), ll--, this;
  }
};
let wo = ss;
b(wo, "BasisFormat", {
  ETC1S: 0,
  UASTC_4x4: 1
});
b(wo, "TranscoderFormat", {
  ETC1: 0,
  ETC2: 1,
  BC1: 2,
  BC3: 3,
  BC4: 4,
  BC5: 5,
  BC7_M6_OPAQUE_ONLY: 6,
  BC7_M5: 7,
  PVRTC1_4_RGB: 8,
  PVRTC1_4_RGBA: 9,
  ASTC_4x4: 10,
  ATC_RGB: 11,
  ATC_RGBA_INTERPOLATED_ALPHA: 12,
  RGBA32: 13,
  RGB565: 14,
  BGR565: 15,
  RGBA4444: 16
});
b(wo, "EngineFormat", {
  RGBAFormat,
  RGBA_ASTC_4x4_Format,
  RGBA_BPTC_Format,
  RGBA_ETC2_EAC_Format,
  RGBA_PVRTC_4BPPV1_Format,
  RGBA_S3TC_DXT5_Format,
  RGB_ETC1_Format,
  RGB_ETC2_Format,
  RGB_PVRTC_4BPPV1_Format,
  RGB_S3TC_DXT1_Format
});
b(wo, "BasisWorker", function() {
  let t, e, r;
  const n = _EngineFormat, i = _TranscoderFormat, s = _BasisFormat;
  self.addEventListener("message", function(d) {
    const v = d.data;
    switch (v.type) {
      case "init":
        t = v.config, a(v.transcoderBinary);
        break;
      case "transcode":
        e.then(() => {
          try {
            const { width: m, height: E, hasAlpha: y, mipmaps: p, format: g, dfdTransferFn: C, dfdFlags: S } = o(v.buffer), x = [];
            for (let T = 0; T < p.length; ++T)
              x.push(p[T].data.buffer);
            self.postMessage(
              {
                type: "transcode",
                id: v.id,
                width: m,
                height: E,
                hasAlpha: y,
                mipmaps: p,
                format: g,
                dfdTransferFn: C,
                dfdFlags: S
              },
              x
            );
          } catch (m) {
            console.error(m), self.postMessage({ type: "error", id: v.id, error: m.message });
          }
        });
        break;
    }
  });
  function a(d) {
    e = new Promise((v) => {
      r = { wasmBinary: d, onRuntimeInitialized: v }, BASIS(r);
    }).then(() => {
      r.initializeBasis(), r.KTX2File === void 0 && console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.");
    });
  }
  function o(d) {
    const v = new r.KTX2File(new Uint8Array(d));
    function m() {
      v.close(), v.delete();
    }
    if (!v.isValid())
      throw m(), new Error("THREE.KTX2Loader:	Invalid or unsupported .ktx2 file");
    const E = v.isUASTC() ? s.UASTC_4x4 : s.ETC1S, y = v.getWidth(), p = v.getHeight(), g = v.getLayers() || 1, C = v.getLevels(), S = v.getHasAlpha(), x = v.getDFDTransferFunc(), T = v.getDFDFlags(), { transcoderFormat: B, engineFormat: R } = h(E, y, p, S);
    if (!y || !p || !C)
      throw m(), new Error("THREE.KTX2Loader:	Invalid texture");
    if (!v.startTranscoding())
      throw m(), new Error("THREE.KTX2Loader: .startTranscoding failed");
    const _ = [];
    for (let F = 0; F < C; F++) {
      const U = [];
      let Y, N;
      for (let Z = 0; Z < g; Z++) {
        const j = v.getImageLevelInfo(F, Z, 0);
        Y = j.origWidth < 4 ? j.origWidth : j.width, N = j.origHeight < 4 ? j.origHeight : j.height;
        const Q = new Uint8Array(v.getImageTranscodedSizeInBytes(F, Z, 0, B));
        if (!v.transcodeImage(Q, F, Z, 0, B, 0, -1, -1))
          throw m(), new Error("THREE.KTX2Loader: .transcodeImage failed.");
        U.push(Q);
      }
      _.push({ data: f(U), width: Y, height: N });
    }
    return m(), { width: y, height: p, hasAlpha: S, mipmaps: _, format: R, dfdTransferFn: x, dfdFlags: T };
  }
  const l = [
    {
      if: "astcSupported",
      basisFormat: [s.UASTC_4x4],
      transcoderFormat: [i.ASTC_4x4, i.ASTC_4x4],
      engineFormat: [n.RGBA_ASTC_4x4_Format, n.RGBA_ASTC_4x4_Format],
      priorityETC1S: 1 / 0,
      priorityUASTC: 1,
      needsPowerOfTwo: false
    },
    {
      if: "bptcSupported",
      basisFormat: [s.ETC1S, s.UASTC_4x4],
      transcoderFormat: [i.BC7_M5, i.BC7_M5],
      engineFormat: [n.RGBA_BPTC_Format, n.RGBA_BPTC_Format],
      priorityETC1S: 3,
      priorityUASTC: 2,
      needsPowerOfTwo: false
    },
    {
      if: "dxtSupported",
      basisFormat: [s.ETC1S, s.UASTC_4x4],
      transcoderFormat: [i.BC1, i.BC3],
      engineFormat: [n.RGB_S3TC_DXT1_Format, n.RGBA_S3TC_DXT5_Format],
      priorityETC1S: 4,
      priorityUASTC: 5,
      needsPowerOfTwo: false
    },
    {
      if: "etc2Supported",
      basisFormat: [s.ETC1S, s.UASTC_4x4],
      transcoderFormat: [i.ETC1, i.ETC2],
      engineFormat: [n.RGB_ETC2_Format, n.RGBA_ETC2_EAC_Format],
      priorityETC1S: 1,
      priorityUASTC: 3,
      needsPowerOfTwo: false
    },
    {
      if: "etc1Supported",
      basisFormat: [s.ETC1S, s.UASTC_4x4],
      transcoderFormat: [i.ETC1],
      engineFormat: [n.RGB_ETC1_Format],
      priorityETC1S: 2,
      priorityUASTC: 4,
      needsPowerOfTwo: false
    },
    {
      if: "pvrtcSupported",
      basisFormat: [s.ETC1S, s.UASTC_4x4],
      transcoderFormat: [i.PVRTC1_4_RGB, i.PVRTC1_4_RGBA],
      engineFormat: [n.RGB_PVRTC_4BPPV1_Format, n.RGBA_PVRTC_4BPPV1_Format],
      priorityETC1S: 5,
      priorityUASTC: 6,
      needsPowerOfTwo: true
    }
  ], c = l.sort(function(d, v) {
    return d.priorityETC1S - v.priorityETC1S;
  }), u = l.sort(function(d, v) {
    return d.priorityUASTC - v.priorityUASTC;
  });
  function h(d, v, m, E) {
    let y, p;
    const g = d === s.ETC1S ? c : u;
    for (let C = 0; C < g.length; C++) {
      const S = g[C];
      if (t[S.if] && S.basisFormat.includes(d) && !(E && S.transcoderFormat.length < 2) && !(S.needsPowerOfTwo && !(A(v) && A(m))))
        return y = S.transcoderFormat[E ? 1 : 0], p = S.engineFormat[E ? 1 : 0], { transcoderFormat: y, engineFormat: p };
    }
    return console.warn("THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32."), y = i.RGBA32, p = n.RGBAFormat, { transcoderFormat: y, engineFormat: p };
  }
  function A(d) {
    return d <= 2 ? true : (d & d - 1) === 0 && d !== 0;
  }
  function f(d) {
    let v = 0;
    for (let y = 0; y < d.length; y++) {
      const p = d[y];
      v += p.byteLength;
    }
    const m = new Uint8Array(v);
    let E = 0;
    for (let y = 0; y < d.length; y++) {
      const p = d[y];
      m.set(p, E), E += p.byteLength;
    }
    return m;
  }
});
const cu = {
  [Ch]: RGBAFormat,
  [yh]: RGBAFormat,
  [gh]: RGBAFormat,
  [Ec]: RGBAFormat,
  [Ih]: RGFormat,
  [vh]: RGFormat,
  [dh]: RGFormat,
  [yc]: RGFormat,
  [Eh]: RedFormat,
  [mh]: RedFormat,
  [vc]: RedFormat,
  [ph]: RedFormat
}, ul = {
  [Ch]: FloatType,
  [yh]: HalfFloatType,
  [gh]: UnsignedByteType,
  [Ec]: UnsignedByteType,
  [Ih]: FloatType,
  [vh]: HalfFloatType,
  [dh]: UnsignedByteType,
  [yc]: UnsignedByteType,
  [Eh]: FloatType,
  [mh]: HalfFloatType,
  [vc]: UnsignedByteType,
  [ph]: UnsignedByteType
}, JE = {
  [Ec]: 3001,
  // sRGBEncoding
  [yc]: 3001,
  // sRGBEncoding
  [vc]: 3001
  // sRGBEncoding
};
async function eI(t) {
  const { vkFormat: e, pixelWidth: r, pixelHeight: n, pixelDepth: i } = t;
  if (cu[e] === void 0)
    throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");
  const s = t.levels[0];
  let a, o;
  if (t.supercompressionScheme === Ah)
    a = s.levelData;
  else if (t.supercompressionScheme === q5)
    cl || (cl = new Promise(async (c) => {
      const u = new af();
      await u.init(), c(u);
    })), a = (await cl).decode(s.levelData, s.uncompressedByteLength);
  else
    throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");
  ul[e] === FloatType ? o = new Float32Array(
    a.buffer,
    a.byteOffset,
    a.byteLength / Float32Array.BYTES_PER_ELEMENT
  ) : ul[e] === HalfFloatType ? o = new Uint16Array(a.buffer, a.byteOffset, a.byteLength / Uint16Array.BYTES_PER_ELEMENT) : o = a;
  const l = i === 0 ? new DataTexture(o, r, n) : new T8(o, r, n, i);
  return l.type = ul[e], l.format = cu[e], l.encoding = JE[e] || 3e3, l.needsUpdate = true, Promise.resolve(l);
}
class tI extends DataTextureLoader {
  constructor(e) {
    super(e), this.type = HalfFloatType;
  }
  // adapted from http://www.graphics.cornell.edu/~bjw/rgbe.html
  parse(e) {
    const o = function(p, g) {
      switch (p) {
        case 1:
          console.error("THREE.RGBELoader Read Error: " + (g || ""));
          break;
        case 2:
          console.error("THREE.RGBELoader Write Error: " + (g || ""));
          break;
        case 3:
          console.error("THREE.RGBELoader Bad File Format: " + (g || ""));
          break;
        default:
        case 4:
          console.error("THREE.RGBELoader: Error: " + (g || ""));
      }
      return -1;
    }, h = `
`, A = function(p, g, C) {
      g = g || 1024;
      let x = p.pos, T = -1, B = 0, R = "", _ = String.fromCharCode.apply(null, new Uint16Array(p.subarray(x, x + 128)));
      for (; 0 > (T = _.indexOf(h)) && B < g && x < p.byteLength; )
        R += _, B += _.length, x += 128, _ += String.fromCharCode.apply(null, new Uint16Array(p.subarray(x, x + 128)));
      return -1 < T ? (C !== false && (p.pos += B + T + 1), R + _.slice(0, T)) : false;
    }, f = function(p) {
      const g = /^#\?(\S+)/, C = /^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/, S = /^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/, x = /^\s*FORMAT=(\S+)\s*$/, T = /^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/, B = {
        valid: 0,
        string: "",
        comments: "",
        programtype: "RGBE",
        format: "",
        gamma: 1,
        exposure: 1,
        width: 0,
        height: 0
      };
      let R, _;
      if (p.pos >= p.byteLength || !(R = A(p)))
        return o(1, "no header found");
      if (!(_ = R.match(g)))
        return o(3, "bad initial token");
      for (B.valid |= 1, B.programtype = _[1], B.string += R + `
`; R = A(p), R !== false; ) {
        if (B.string += R + `
`, R.charAt(0) === "#") {
          B.comments += R + `
`;
          continue;
        }
        if ((_ = R.match(C)) && (B.gamma = parseFloat(_[1])), (_ = R.match(S)) && (B.exposure = parseFloat(_[1])), (_ = R.match(x)) && (B.valid |= 2, B.format = _[1]), (_ = R.match(T)) && (B.valid |= 4, B.height = parseInt(_[1], 10), B.width = parseInt(_[2], 10)), B.valid & 2 && B.valid & 4)
          break;
      }
      return B.valid & 2 ? B.valid & 4 ? B : o(3, "missing image size specifier") : o(3, "missing format specifier");
    }, d = function(p, g, C) {
      const S = g;
      if (
        // run length encoding is not allowed so read flat
        S < 8 || S > 32767 || // this file is not run length encoded
        p[0] !== 2 || p[1] !== 2 || p[2] & 128
      )
        return new Uint8Array(p);
      if (S !== (p[2] << 8 | p[3]))
        return o(3, "wrong scanline width");
      const x = new Uint8Array(4 * g * C);
      if (!x.length)
        return o(4, "unable to allocate buffer space");
      let T = 0, B = 0;
      const R = 4 * S, _ = new Uint8Array(4), F = new Uint8Array(R);
      let U = C;
      for (; U > 0 && B < p.byteLength; ) {
        if (B + 4 > p.byteLength)
          return o(1);
        if (_[0] = p[B++], _[1] = p[B++], _[2] = p[B++], _[3] = p[B++], _[0] != 2 || _[1] != 2 || (_[2] << 8 | _[3]) != S)
          return o(3, "bad rgbe scanline format");
        let Y = 0, N;
        for (; Y < R && B < p.byteLength; ) {
          N = p[B++];
          const j = N > 128;
          if (j && (N -= 128), N === 0 || Y + N > R)
            return o(3, "bad scanline data");
          if (j) {
            const Q = p[B++];
            for (let $ = 0; $ < N; $++)
              F[Y++] = Q;
          } else
            F.set(p.subarray(B, B + N), Y), Y += N, B += N;
        }
        const Z = S;
        for (let j = 0; j < Z; j++) {
          let Q = 0;
          x[T] = F[j + Q], Q += S, x[T + 1] = F[j + Q], Q += S, x[T + 2] = F[j + Q], Q += S, x[T + 3] = F[j + Q], T += 4;
        }
        U--;
      }
      return x;
    }, v = function(p, g, C, S) {
      const x = p[g + 3], T = Math.pow(2, x - 128) / 255;
      C[S + 0] = p[g + 0] * T, C[S + 1] = p[g + 1] * T, C[S + 2] = p[g + 2] * T, C[S + 3] = 1;
    }, m = function(p, g, C, S) {
      const x = p[g + 3], T = Math.pow(2, x - 128) / 255;
      C[S + 0] = DataUtils.toHalfFloat(Math.min(p[g + 0] * T, 65504)), C[S + 1] = DataUtils.toHalfFloat(Math.min(p[g + 1] * T, 65504)), C[S + 2] = DataUtils.toHalfFloat(Math.min(p[g + 2] * T, 65504)), C[S + 3] = DataUtils.toHalfFloat(1);
    }, E = new Uint8Array(e);
    E.pos = 0;
    const y = f(E);
    if (y !== -1) {
      const p = y.width, g = y.height, C = d(E.subarray(E.pos), p, g);
      if (C !== -1) {
        let S, x, T;
        switch (this.type) {
          case FloatType:
            T = C.length / 4;
            const B = new Float32Array(T * 4);
            for (let _ = 0; _ < T; _++)
              v(C, _ * 4, B, _ * 4);
            S = B, x = FloatType;
            break;
          case HalfFloatType:
            T = C.length / 4;
            const R = new Uint16Array(T * 4);
            for (let _ = 0; _ < T; _++)
              m(C, _ * 4, R, _ * 4);
            S = R, x = HalfFloatType;
            break;
          default:
            console.error("THREE.RGBELoader: unsupported type: ", this.type);
            break;
        }
        return {
          width: p,
          height: g,
          data: S,
          header: y.string,
          gamma: y.gamma,
          exposure: y.exposure,
          type: x
        };
      }
    }
    return null;
  }
  setDataType(e) {
    return this.type = e, this;
  }
  load(e, r, n, i) {
    function s(a, o) {
      switch (a.type) {
        case FloatType:
        case HalfFloatType:
          "colorSpace" in a ? a.colorSpace = "srgb-linear" : a.encoding = 3e3, a.minFilter = LinearFilter, a.magFilter = LinearFilter, a.generateMipmaps = false, a.flipY = true;
          break;
      }
      r && r(a, o);
    }
    return super.load(e, s, n, i);
  }
}
const hl = /* @__PURE__ */ new WeakMap(), as = class extends Loader {
  constructor(t) {
    super(t), this.transcoderPath = "", this.transcoderBinary = null, this.transcoderPending = null, this.workerLimit = 4, this.workerPool = [], this.workerNextTaskID = 1, this.workerSourceURL = "", this.workerConfig = null;
  }
  setTranscoderPath(t) {
    return this.transcoderPath = t, this;
  }
  setWorkerLimit(t) {
    return this.workerLimit = t, this;
  }
  detectSupport(t) {
    return this.workerConfig = {
      astcSupported: t.extensions.has("WEBGL_compressed_texture_astc"),
      etc1Supported: t.extensions.has("WEBGL_compressed_texture_etc1"),
      etc2Supported: t.extensions.has("WEBGL_compressed_texture_etc"),
      dxtSupported: t.extensions.has("WEBGL_compressed_texture_s3tc"),
      bptcSupported: t.extensions.has("EXT_texture_compression_bptc"),
      pvrtcSupported: t.extensions.has("WEBGL_compressed_texture_pvrtc") || t.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")
    }, this;
  }
  load(t, e, r, n) {
    const i = new FileLoader(this.manager);
    i.setResponseType("arraybuffer"), i.setWithCredentials(this.withCredentials);
    const s = new CompressedTexture();
    return i.load(
      t,
      (a) => {
        if (hl.has(a))
          return hl.get(a).promise.then(e).catch(n);
        this._createTexture([a]).then(function(o) {
          s.copy(o), s.needsUpdate = true, e && e(s);
        }).catch(n);
      },
      r,
      n
    ), s;
  }
  /** Low-level transcoding API, exposed for use by KTX2Loader. */
  parseInternalAsync(t) {
    const { levels: e } = t, r = /* @__PURE__ */ new Set();
    for (let n = 0; n < e.length; n++)
      r.add(e[n].data.buffer);
    return this._createTexture(Array.from(r), { ...t, lowLevel: true });
  }
  /**
   * @param {ArrayBuffer[]} buffers
   * @param {object?} config
   * @return {Promise<CompressedTexture>}
   */
  _createTexture(t, e = {}) {
    let r, n;
    const i = e;
    let s = 0;
    for (let o = 0; o < t.length; o++)
      s += t[o].byteLength;
    const a = this._allocateWorker(s).then((o) => (r = o, n = this.workerNextTaskID++, new Promise((l, c) => {
      r._callbacks[n] = { resolve: l, reject: c }, r.postMessage({ type: "transcode", id: n, buffers: t, taskConfig: i }, t);
    }))).then((o) => {
      const { mipmaps: l, width: c, height: u, format: h } = o, A = new CompressedTexture(l, c, u, h, UnsignedByteType);
      return A.minFilter = l.length === 1 ? LinearFilter : LinearMipmapLinearFilter, A.magFilter = LinearFilter, A.generateMipmaps = false, A.needsUpdate = true, A;
    });
    return a.catch(() => true).then(() => {
      r && n && (r._taskLoad -= s, delete r._callbacks[n]);
    }), hl.set(t[0], { promise: a }), a;
  }
  _initTranscoder() {
    if (!this.transcoderPending) {
      const t = new FileLoader(this.manager);
      t.setPath(this.transcoderPath), t.setWithCredentials(this.withCredentials);
      const e = new Promise((i, s) => {
        t.load("basis_transcoder.js", i, void 0, s);
      }), r = new FileLoader(this.manager);
      r.setPath(this.transcoderPath), r.setResponseType("arraybuffer"), r.setWithCredentials(this.withCredentials);
      const n = new Promise((i, s) => {
        r.load("basis_transcoder.wasm", i, void 0, s);
      });
      this.transcoderPending = Promise.all([e, n]).then(([i, s]) => {
        const a = as.BasisWorker.toString(), o = [
          "/* constants */",
          "let _EngineFormat = " + JSON.stringify(as.EngineFormat),
          "let _TranscoderFormat = " + JSON.stringify(as.TranscoderFormat),
          "let _BasisFormat = " + JSON.stringify(as.BasisFormat),
          "/* basis_transcoder.js */",
          i,
          "/* worker */",
          a.substring(a.indexOf("{") + 1, a.lastIndexOf("}"))
        ].join(`
`);
        this.workerSourceURL = URL.createObjectURL(new Blob([o])), this.transcoderBinary = s;
      });
    }
    return this.transcoderPending;
  }
  _allocateWorker(t) {
    return this._initTranscoder().then(() => {
      if (this.workerPool.length < this.workerLimit) {
        const r = new Worker(this.workerSourceURL);
        r._callbacks = {}, r._taskLoad = 0, r.postMessage({
          type: "init",
          config: this.workerConfig,
          transcoderBinary: this.transcoderBinary
        }), r.onmessage = function(n) {
          const i = n.data;
          switch (i.type) {
            case "transcode":
              r._callbacks[i.id].resolve(i);
              break;
            case "error":
              r._callbacks[i.id].reject(i);
              break;
            default:
              console.error('THREE.BasisTextureLoader: Unexpected message, "' + i.type + '"');
          }
        }, this.workerPool.push(r);
      } else
        this.workerPool.sort(function(r, n) {
          return r._taskLoad > n._taskLoad ? -1 : 1;
        });
      const e = this.workerPool[this.workerPool.length - 1];
      return e._taskLoad += t, e;
    });
  }
  dispose() {
    for (let t = 0; t < this.workerPool.length; t++)
      this.workerPool[t].terminate();
    return this.workerPool.length = 0, this;
  }
};
let Bo = as;
b(Bo, "BasisFormat", {
  ETC1S: 0,
  UASTC_4x4: 1
});
b(Bo, "TranscoderFormat", {
  ETC1: 0,
  ETC2: 1,
  BC1: 2,
  BC3: 3,
  BC4: 4,
  BC5: 5,
  BC7_M6_OPAQUE_ONLY: 6,
  BC7_M5: 7,
  PVRTC1_4_RGB: 8,
  PVRTC1_4_RGBA: 9,
  ASTC_4x4: 10,
  ATC_RGB: 11,
  ATC_RGBA_INTERPOLATED_ALPHA: 12,
  RGBA32: 13,
  RGB565: 14,
  BGR565: 15,
  RGBA4444: 16
});
b(Bo, "EngineFormat", {
  RGBAFormat,
  RGBA_ASTC_4x4_Format,
  RGBA_BPTC_Format,
  RGBA_ETC2_EAC_Format,
  RGBA_PVRTC_4BPPV1_Format,
  RGBA_S3TC_DXT5_Format,
  RGB_ETC1_Format,
  RGB_ETC2_Format,
  RGB_PVRTC_4BPPV1_Format,
  RGB_S3TC_DXT1_Format
});
b(Bo, "BasisWorker", function() {
  let t, e, r;
  const n = _EngineFormat, i = _TranscoderFormat, s = _BasisFormat;
  onmessage = function(y) {
    const p = y.data;
    switch (p.type) {
      case "init":
        t = p.config, a(p.transcoderBinary);
        break;
      case "transcode":
        e.then(() => {
          try {
            const { width: g, height: C, hasAlpha: S, mipmaps: x, format: T } = p.taskConfig.lowLevel ? o(p.taskConfig) : l(p.buffers[0]), B = [];
            for (let R = 0; R < x.length; ++R)
              B.push(x[R].data.buffer);
            self.postMessage({ type: "transcode", id: p.id, width: g, height: C, hasAlpha: S, mipmaps: x, format: T }, B);
          } catch (g) {
            console.error(g), self.postMessage({ type: "error", id: p.id, error: g.message });
          }
        });
        break;
    }
  };
  function a(y) {
    e = new Promise((p) => {
      r = { wasmBinary: y, onRuntimeInitialized: p }, BASIS(r);
    }).then(() => {
      r.initializeBasis();
    });
  }
  function o(y) {
    const { basisFormat: p, width: g, height: C, hasAlpha: S } = y, { transcoderFormat: x, engineFormat: T } = A(p, g, C, S), B = r.getBytesPerBlockOrPixel(x);
    f(r.isFormatSupported(x), "THREE.BasisTextureLoader: Unsupported format.");
    const R = [];
    if (p === s.ETC1S) {
      const _ = new r.LowLevelETC1SImageTranscoder(), { endpointCount: F, endpointsData: U, selectorCount: Y, selectorsData: N, tablesData: Z } = y.globalData;
      try {
        let j;
        j = _.decodePalettes(F, U, Y, N), f(j, "THREE.BasisTextureLoader: decodePalettes() failed."), j = _.decodeTables(Z), f(j, "THREE.BasisTextureLoader: decodeTables() failed.");
        for (let Q = 0; Q < y.levels.length; Q++) {
          const $ = y.levels[Q], X = y.globalData.imageDescs[Q], K = m(x, $.width, $.height), D = new Uint8Array(K);
          j = _.transcodeImage(
            x,
            D,
            K / B,
            $.data,
            d(x, $.width),
            v(x, $.height),
            $.width,
            $.height,
            $.index,
            X.rgbSliceByteOffset,
            X.rgbSliceByteLength,
            X.alphaSliceByteOffset,
            X.alphaSliceByteLength,
            X.imageFlags,
            S,
            false,
            0,
            0
          ), f(j, "THREE.BasisTextureLoader: transcodeImage() failed for level " + $.index + "."), R.push({ data: D, width: $.width, height: $.height });
        }
      } finally {
        _.delete();
      }
    } else
      for (let _ = 0; _ < y.levels.length; _++) {
        const F = y.levels[_], U = m(x, F.width, F.height), Y = new Uint8Array(U), N = r.transcodeUASTCImage(
          x,
          Y,
          U / B,
          F.data,
          d(x, F.width),
          v(x, F.height),
          F.width,
          F.height,
          F.index,
          0,
          F.data.byteLength,
          0,
          S,
          false,
          0,
          0,
          -1,
          -1
        );
        f(N, "THREE.BasisTextureLoader: transcodeUASTCImage() failed for level " + F.index + "."), R.push({ data: Y, width: F.width, height: F.height });
      }
    return { width: g, height: C, hasAlpha: S, mipmaps: R, format: T };
  }
  function l(y) {
    const p = new r.BasisFile(new Uint8Array(y)), g = p.isUASTC() ? s.UASTC_4x4 : s.ETC1S, C = p.getImageWidth(0, 0), S = p.getImageHeight(0, 0), x = p.getNumLevels(0), T = p.getHasAlpha();
    function B() {
      p.close(), p.delete();
    }
    const { transcoderFormat: R, engineFormat: _ } = A(g, C, S, T);
    if (!C || !S || !x)
      throw B(), new Error("THREE.BasisTextureLoader:	Invalid texture");
    if (!p.startTranscoding())
      throw B(), new Error("THREE.BasisTextureLoader: .startTranscoding failed");
    const F = [];
    for (let U = 0; U < x; U++) {
      const Y = p.getImageWidth(0, U), N = p.getImageHeight(0, U), Z = new Uint8Array(p.getImageTranscodedSizeInBytes(0, U, R));
      if (!p.transcodeImage(Z, 0, U, R, 0, T))
        throw B(), new Error("THREE.BasisTextureLoader: .transcodeImage failed.");
      F.push({ data: Z, width: Y, height: N });
    }
    return B(), { width: C, height: S, hasAlpha: T, mipmaps: F, format: _ };
  }
  const c = [
    {
      if: "astcSupported",
      basisFormat: [s.UASTC_4x4],
      transcoderFormat: [i.ASTC_4x4, i.ASTC_4x4],
      engineFormat: [n.RGBA_ASTC_4x4_Format, n.RGBA_ASTC_4x4_Format],
      priorityETC1S: 1 / 0,
      priorityUASTC: 1,
      needsPowerOfTwo: false
    },
    {
      if: "bptcSupported",
      basisFormat: [s.ETC1S, s.UASTC_4x4],
      transcoderFormat: [i.BC7_M5, i.BC7_M5],
      engineFormat: [n.RGBA_BPTC_Format, n.RGBA_BPTC_Format],
      priorityETC1S: 3,
      priorityUASTC: 2,
      needsPowerOfTwo: false
    },
    {
      if: "dxtSupported",
      basisFormat: [s.ETC1S, s.UASTC_4x4],
      transcoderFormat: [i.BC1, i.BC3],
      engineFormat: [n.RGB_S3TC_DXT1_Format, n.RGBA_S3TC_DXT5_Format],
      priorityETC1S: 4,
      priorityUASTC: 5,
      needsPowerOfTwo: false
    },
    {
      if: "etc2Supported",
      basisFormat: [s.ETC1S, s.UASTC_4x4],
      transcoderFormat: [i.ETC1, i.ETC2],
      engineFormat: [n.RGB_ETC2_Format, n.RGBA_ETC2_EAC_Format],
      priorityETC1S: 1,
      priorityUASTC: 3,
      needsPowerOfTwo: false
    },
    {
      if: "etc1Supported",
      basisFormat: [s.ETC1S, s.UASTC_4x4],
      transcoderFormat: [i.ETC1, i.ETC1],
      engineFormat: [n.RGB_ETC1_Format, n.RGB_ETC1_Format],
      priorityETC1S: 2,
      priorityUASTC: 4,
      needsPowerOfTwo: false
    },
    {
      if: "pvrtcSupported",
      basisFormat: [s.ETC1S, s.UASTC_4x4],
      transcoderFormat: [i.PVRTC1_4_RGB, i.PVRTC1_4_RGBA],
      engineFormat: [n.RGB_PVRTC_4BPPV1_Format, n.RGBA_PVRTC_4BPPV1_Format],
      priorityETC1S: 5,
      priorityUASTC: 6,
      needsPowerOfTwo: true
    }
  ], u = c.sort(function(y, p) {
    return y.priorityETC1S - p.priorityETC1S;
  }), h = c.sort(function(y, p) {
    return y.priorityUASTC - p.priorityUASTC;
  });
  function A(y, p, g, C) {
    let S, x;
    const T = y === s.ETC1S ? u : h;
    for (let B = 0; B < T.length; B++) {
      const R = T[B];
      if (t[R.if] && R.basisFormat.includes(y) && !(R.needsPowerOfTwo && !(E(p) && E(g))))
        return S = R.transcoderFormat[C ? 1 : 0], x = R.engineFormat[C ? 1 : 0], { transcoderFormat: S, engineFormat: x };
    }
    return console.warn("THREE.BasisTextureLoader: No suitable compressed texture format found. Decoding to RGBA32."), S = i.RGBA32, x = n.RGBAFormat, { transcoderFormat: S, engineFormat: x };
  }
  function f(y, p) {
    if (!y)
      throw new Error(p);
  }
  function d(y, p) {
    return Math.ceil(p / r.getFormatBlockWidth(y));
  }
  function v(y, p) {
    return Math.ceil(p / r.getFormatBlockHeight(y));
  }
  function m(y, p, g) {
    const C = r.getBytesPerBlockOrPixel(y);
    if (r.formatIsUncompressed(y))
      return p * g * C;
    if (y === i.PVRTC1_4_RGB || y === i.PVRTC1_4_RGBA) {
      const S = p + 3 & -4, x = g + 3 & -4;
      return (Math.max(8, S) * Math.max(8, x) * 4 + 7) / 8;
    }
    return d(y, p) * v(y, g) * C;
  }
  function E(y) {
    return y <= 2 ? true : (y & y - 1) === 0 && y !== 0;
  }
});
const Al = /* @__PURE__ */ new WeakMap();
class rI extends Loader {
  constructor(e) {
    super(e), this.decoderPath = "", this.decoderConfig = {}, this.decoderBinary = null, this.decoderPending = null, this.workerLimit = 4, this.workerPool = [], this.workerNextTaskID = 1, this.workerSourceURL = "", this.defaultAttributeIDs = {
      position: "POSITION",
      normal: "NORMAL",
      color: "COLOR",
      uv: "TEX_COORD"
    }, this.defaultAttributeTypes = {
      position: "Float32Array",
      normal: "Float32Array",
      color: "Float32Array",
      uv: "Float32Array"
    };
  }
  setDecoderPath(e) {
    return this.decoderPath = e, this;
  }
  setDecoderConfig(e) {
    return this.decoderConfig = e, this;
  }
  setWorkerLimit(e) {
    return this.workerLimit = e, this;
  }
  load(e, r, n, i) {
    const s = new FileLoader(this.manager);
    s.setPath(this.path), s.setResponseType("arraybuffer"), s.setRequestHeader(this.requestHeader), s.setWithCredentials(this.withCredentials), s.load(
      e,
      (a) => {
        const o = {
          attributeIDs: this.defaultAttributeIDs,
          attributeTypes: this.defaultAttributeTypes,
          useUniqueIDs: false
        };
        this.decodeGeometry(a, o).then(r).catch(i);
      },
      n,
      i
    );
  }
  /** @deprecated Kept for backward-compatibility with previous DRACOLoader versions. */
  decodeDracoFile(e, r, n, i) {
    const s = {
      attributeIDs: n || this.defaultAttributeIDs,
      attributeTypes: i || this.defaultAttributeTypes,
      useUniqueIDs: !!n
    };
    this.decodeGeometry(e, s).then(r);
  }
  decodeGeometry(e, r) {
    for (const l in r.attributeTypes) {
      const c = r.attributeTypes[l];
      c.BYTES_PER_ELEMENT !== void 0 && (r.attributeTypes[l] = c.name);
    }
    const n = JSON.stringify(r);
    if (Al.has(e)) {
      const l = Al.get(e);
      if (l.key === n)
        return l.promise;
      if (e.byteLength === 0)
        throw new Error(
          "THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred."
        );
    }
    let i;
    const s = this.workerNextTaskID++, a = e.byteLength, o = this._getWorker(s, a).then((l) => (i = l, new Promise((c, u) => {
      i._callbacks[s] = { resolve: c, reject: u }, i.postMessage({ type: "decode", id: s, taskConfig: r, buffer: e }, [e]);
    }))).then((l) => this._createGeometry(l.geometry));
    return o.catch(() => true).then(() => {
      i && s && this._releaseTask(i, s);
    }), Al.set(e, {
      key: n,
      promise: o
    }), o;
  }
  _createGeometry(e) {
    const r = new BufferGeometry();
    e.index && r.setIndex(new BufferAttribute(e.index.array, 1));
    for (let n = 0; n < e.attributes.length; n++) {
      const i = e.attributes[n], s = i.name, a = i.array, o = i.itemSize;
      r.setAttribute(s, new BufferAttribute(a, o));
    }
    return r;
  }
  _loadLibrary(e, r) {
    const n = new FileLoader(this.manager);
    return n.setPath(this.decoderPath), n.setResponseType(r), n.setWithCredentials(this.withCredentials), new Promise((i, s) => {
      n.load(e, i, void 0, s);
    });
  }
  preload() {
    return this._initDecoder(), this;
  }
  _initDecoder() {
    if (this.decoderPending)
      return this.decoderPending;
    const e = typeof WebAssembly != "object" || this.decoderConfig.type === "js", r = [];
    return e ? r.push(this._loadLibrary("draco_decoder.js", "text")) : (r.push(this._loadLibrary("draco_wasm_wrapper.js", "text")), r.push(this._loadLibrary("draco_decoder.wasm", "arraybuffer"))), this.decoderPending = Promise.all(r).then((n) => {
      const i = n[0];
      e || (this.decoderConfig.wasmBinary = n[1]);
      const s = nI.toString(), a = [
        "/* draco decoder */",
        i,
        "",
        "/* worker */",
        s.substring(s.indexOf("{") + 1, s.lastIndexOf("}"))
      ].join(`
`);
      this.workerSourceURL = URL.createObjectURL(new Blob([a]));
    }), this.decoderPending;
  }
  _getWorker(e, r) {
    return this._initDecoder().then(() => {
      if (this.workerPool.length < this.workerLimit) {
        const i = new Worker(this.workerSourceURL);
        i._callbacks = {}, i._taskCosts = {}, i._taskLoad = 0, i.postMessage({ type: "init", decoderConfig: this.decoderConfig }), i.onmessage = function(s) {
          const a = s.data;
          switch (a.type) {
            case "decode":
              i._callbacks[a.id].resolve(a);
              break;
            case "error":
              i._callbacks[a.id].reject(a);
              break;
            default:
              console.error('THREE.DRACOLoader: Unexpected message, "' + a.type + '"');
          }
        }, this.workerPool.push(i);
      } else
        this.workerPool.sort(function(i, s) {
          return i._taskLoad > s._taskLoad ? -1 : 1;
        });
      const n = this.workerPool[this.workerPool.length - 1];
      return n._taskCosts[e] = r, n._taskLoad += r, n;
    });
  }
  _releaseTask(e, r) {
    e._taskLoad -= e._taskCosts[r], delete e._callbacks[r], delete e._taskCosts[r];
  }
  debug() {
    console.log(
      "Task load: ",
      this.workerPool.map((e) => e._taskLoad)
    );
  }
  dispose() {
    for (let e = 0; e < this.workerPool.length; ++e)
      this.workerPool[e].terminate();
    return this.workerPool.length = 0, this;
  }
}
function nI() {
  let t, e;
  onmessage = function(a) {
    const o = a.data;
    switch (o.type) {
      case "init":
        t = o.decoderConfig, e = new Promise(function(u) {
          t.onModuleLoaded = function(h) {
            u({ draco: h });
          }, DracoDecoderModule(t);
        });
        break;
      case "decode":
        const l = o.buffer, c = o.taskConfig;
        e.then((u) => {
          const h = u.draco, A = new h.Decoder(), f = new h.DecoderBuffer();
          f.Init(new Int8Array(l), l.byteLength);
          try {
            const d = r(h, A, f, c), v = d.attributes.map((m) => m.array.buffer);
            d.index && v.push(d.index.array.buffer), self.postMessage({ type: "decode", id: o.id, geometry: d }, v);
          } catch (d) {
            console.error(d), self.postMessage({ type: "error", id: o.id, error: d.message });
          } finally {
            h.destroy(f), h.destroy(A);
          }
        });
        break;
    }
  };
  function r(a, o, l, c) {
    const u = c.attributeIDs, h = c.attributeTypes;
    let A, f;
    const d = o.GetEncodedGeometryType(l);
    if (d === a.TRIANGULAR_MESH)
      A = new a.Mesh(), f = o.DecodeBufferToMesh(l, A);
    else if (d === a.POINT_CLOUD)
      A = new a.PointCloud(), f = o.DecodeBufferToPointCloud(l, A);
    else
      throw new Error("THREE.DRACOLoader: Unexpected geometry type.");
    if (!f.ok() || A.ptr === 0)
      throw new Error("THREE.DRACOLoader: Decoding failed: " + f.error_msg());
    const v = { index: null, attributes: [] };
    for (const m in u) {
      const E = self[h[m]];
      let y, p;
      if (c.useUniqueIDs)
        p = u[m], y = o.GetAttributeByUniqueId(A, p);
      else {
        if (p = o.GetAttributeId(A, a[u[m]]), p === -1)
          continue;
        y = o.GetAttribute(A, p);
      }
      v.attributes.push(i(a, o, A, m, E, y));
    }
    return d === a.TRIANGULAR_MESH && (v.index = n(a, o, A)), a.destroy(A), v;
  }
  function n(a, o, l) {
    const u = l.num_faces() * 3, h = u * 4, A = a._malloc(h);
    o.GetTrianglesUInt32Array(l, h, A);
    const f = new Uint32Array(a.HEAPF32.buffer, A, u).slice();
    return a._free(A), { array: f, itemSize: 1 };
  }
  function i(a, o, l, c, u, h) {
    const A = h.num_components(), d = l.num_points() * A, v = d * u.BYTES_PER_ELEMENT, m = s(a, u), E = a._malloc(v);
    o.GetAttributeDataArrayForAllPoints(l, h, m, v, E);
    const y = new u(a.HEAPF32.buffer, E, d).slice();
    return a._free(E), {
      name: c,
      array: y,
      itemSize: A
    };
  }
  function s(a, o) {
    switch (o) {
      case Float32Array:
        return a.DT_FLOAT32;
      case Int8Array:
        return a.DT_INT8;
      case Int16Array:
        return a.DT_INT16;
      case Int32Array:
        return a.DT_INT32;
      case Uint8Array:
        return a.DT_UINT8;
      case Uint16Array:
        return a.DT_UINT16;
      case Uint32Array:
        return a.DT_UINT32;
    }
  }
}
const iI = ["args", "center"], vx = /* @__PURE__ */ defineComponent({
  __name: "Text3D",
  props: {
    font: {},
    text: {},
    size: { default: 0.5 },
    height: { default: 0.2 },
    curveSegments: { default: 5 },
    bevelEnabled: { type: Boolean, default: true },
    bevelThickness: { default: 0.05 },
    bevelSize: { default: 0.02 },
    bevelOffset: { default: 0 },
    bevelSegments: { default: 4 },
    center: { type: Boolean, default: false },
    needUpdates: { type: Boolean, default: false }
  },
  async setup(t, { expose: e }) {
    let r, n;
    const i = t, {
      center: s,
      font: a,
      text: o,
      needUpdates: l,
      size: c,
      height: u,
      curveSegments: h,
      bevelEnabled: A,
      bevelThickness: f,
      bevelSize: d,
      bevelOffset: v,
      bevelSegments: m
    } = toRefs(i), { extend: E } = useTresContext();
    E({ TextGeometry: t0 });
    const y = new I8(), p = useSlots(), g = computed(() => {
      var T;
      return o != null && o.value ? o.value : p.default ? (T = p.default()[0].children) == null ? void 0 : T.trim() : l.value ? "" : "TresJS";
    }), C = shallowRef();
    e({
      value: C
    });
    const S = ([r, n] = withAsyncContext(() => new Promise((T, B) => {
      try {
        typeof a.value == "string" ? y.load(a.value, (R) => {
          T(R);
        }) : T(a.value);
      } catch (R) {
        B(console.error("cientos", R));
      }
    })), r = await r, n(), r), x = computed(() => ({
      font: S,
      size: toValue(c),
      height: toValue(u),
      curveSegments: toValue(h),
      bevelEnabled: toValue(A),
      bevelThickness: toValue(f),
      bevelSize: toValue(d),
      bevelOffset: toValue(v),
      bevelSegments: toValue(m)
    }));
    return watchEffect(() => {
      C.value && l.value && (C.value.geometry.dispose(), C.value.geometry = new t0(g.value, x.value), s.value && C.value.geometry.center());
    }), (T, B) => unref(a) ? (openBlock(), createElementBlock("TresMesh", {
      key: 0,
      ref_key: "text3DRef",
      ref: C
    }, [
      g.value ? (openBlock(), createElementBlock("TresTextGeometry", {
        key: 0,
        args: [g.value, x.value],
        center: unref(s)
      }, null, 8, iI)) : createCommentVNode("", true),
      renderSlot(T.$slots, "default")
    ], 512)) : createCommentVNode("", true);
  }
});
const Ex = /* @__PURE__ */ defineComponent({
  __name: "Levioso",
  props: {
    speed: { default: 1 },
    rotationFactor: { default: 1 },
    floatFactor: { default: 1 },
    range: { default: () => [-0.1, 0.1] }
  },
  setup(t, { expose: e }) {
    const r = t, n = shallowRef();
    e({
      value: n
    });
    const { onLoop: i } = useRenderLoop(), s = ref(Math.random() * 1e4);
    return i(({ elapsed: a }) => {
      var c, u;
      if (!n.value)
        return;
      const o = s.value + a;
      n.value.rotation.x = Math.cos(o / 4 * r.speed) / 8 * r.rotationFactor, n.value.rotation.y = Math.sin(o / 4 * r.speed) / 8 * r.rotationFactor, n.value.rotation.z = Math.sin(o / 4 * r.speed) / 20 * r.rotationFactor;
      let l = Math.sin(o / 4 * r.speed) / 10;
      l = MathUtils.mapLinear(l, -0.1, 0.1, ((c = r.range) == null ? void 0 : c[0]) ?? -0.1, ((u = r.range) == null ? void 0 : u[1]) ?? 0.1), n.value.position.y = l * r.floatFactor;
    }), (a, o) => (openBlock(), createElementBlock("TresGroup", mergeProps(a.$attrs, {
      ref_key: "groupRef",
      ref: n
    }), [
      renderSlot(a.$slots, "default")
    ], 16));
  }
});
function wA(t) {
  return getCurrentScope() ? (onScopeDispose(t), true) : false;
}
function ir(t) {
  return typeof t == "function" ? t() : unref(t);
}
const sI = typeof window < "u" && typeof document < "u", aI = Object.prototype.toString, oI = (t) => aI.call(t) === "[object Object]", Ai = () => {
};
function BA(t, e) {
  function r(...n) {
    return new Promise((i, s) => {
      Promise.resolve(t(() => e.apply(this, n), { fn: e, thisArg: this, args: n })).then(i).catch(s);
    });
  }
  return r;
}
function lI(t, e = {}) {
  let r, n, i = Ai;
  const s = (o) => {
    clearTimeout(o), i(), i = Ai;
  };
  return (o) => {
    const l = ir(t), c = ir(e.maxWait);
    return r && s(r), l <= 0 || c !== void 0 && c <= 0 ? (n && (s(n), n = null), Promise.resolve(o())) : new Promise((u, h) => {
      i = e.rejectOnCancel ? h : u, c && !n && (n = setTimeout(() => {
        r && s(r), n = null, u(o());
      }, c)), r = setTimeout(() => {
        n && s(n), n = null, u(o());
      }, l);
    });
  };
}
function cI(t, e = true, r = true, n = false) {
  let i = 0, s, a = true, o = Ai, l;
  const c = () => {
    s && (clearTimeout(s), s = void 0, o(), o = Ai);
  };
  return (h) => {
    const A = ir(t), f = Date.now() - i, d = () => l = h();
    return c(), A <= 0 ? (i = Date.now(), d()) : (f > A && (r || !a) ? (i = Date.now(), d()) : e && (l = new Promise((v, m) => {
      o = n ? m : v, s = setTimeout(() => {
        i = Date.now(), a = true, v(d()), c();
      }, Math.max(0, A - f));
    })), !r && !s && (s = setTimeout(() => a = true, A)), a = false, l);
  };
}
function uI(t, e = 200, r = {}) {
  return BA(
    lI(e, r),
    t
  );
}
function hI(t, e = 200, r = false, n = true, i = false) {
  return BA(
    cI(e, r, n, i),
    t
  );
}
function AI(t, e = true) {
  getCurrentInstance() ? onMounted(t) : e ? t() : nextTick(t);
}
function fI(t) {
  var e;
  const r = ir(t);
  return (e = r == null ? void 0 : r.$el) != null ? e : r;
}
const mi = sI ? window : void 0;
function lt(...t) {
  let e, r, n, i;
  if (typeof t[0] == "string" || Array.isArray(t[0]) ? ([r, n, i] = t, e = mi) : [e, r, n, i] = t, !e)
    return Ai;
  Array.isArray(r) || (r = [r]), Array.isArray(n) || (n = [n]);
  const s = [], a = () => {
    s.forEach((u) => u()), s.length = 0;
  }, o = (u, h, A, f) => (u.addEventListener(h, A, f), () => u.removeEventListener(h, A, f)), l = watch(
    () => [fI(e), ir(i)],
    ([u, h]) => {
      if (a(), !u)
        return;
      const A = oI(h) ? { ...h } : h;
      s.push(
        ...r.flatMap((f) => n.map((d) => o(u, f, d, A)))
      );
    },
    { immediate: true, flush: "post" }
  ), c = () => {
    l(), a();
  };
  return wA(c), c;
}
function dI() {
  const t = ref(false);
  return getCurrentInstance() && onMounted(() => {
    t.value = true;
  }), t;
}
function gI(t) {
  const e = dI();
  return computed(() => (e.value, !!t()));
}
function mI(t, e = {}) {
  const { window: r = mi } = e, n = gI(() => r && "matchMedia" in r && typeof r.matchMedia == "function");
  let i;
  const s = ref(false), a = (c) => {
    s.value = c.matches;
  }, o = () => {
    i && ("removeEventListener" in i ? i.removeEventListener("change", a) : i.removeListener(a));
  }, l = watchEffect(() => {
    n.value && (o(), i = r.matchMedia(ir(t)), "addEventListener" in i ? i.addEventListener("change", a) : i.addListener(a), s.value = i.matches);
  });
  return wA(() => {
    l(), o(), i = void 0;
  }), s;
}
const uu = 1;
function vI(t, e = {}) {
  const {
    throttle: r = 0,
    idle: n = 200,
    onStop: i = Ai,
    onScroll: s = Ai,
    offset: a = {
      left: 0,
      right: 0,
      top: 0,
      bottom: 0
    },
    eventListenerOptions: o = {
      capture: false,
      passive: true
    },
    behavior: l = "auto",
    window: c = mi
  } = e, u = ref(0), h = ref(0), A = computed({
    get() {
      return u.value;
    },
    set(S) {
      d(S, void 0);
    }
  }), f = computed({
    get() {
      return h.value;
    },
    set(S) {
      d(void 0, S);
    }
  });
  function d(S, x) {
    var T, B, R;
    if (!c)
      return;
    const _ = ir(t);
    _ && ((R = _ instanceof Document ? c.document.body : _) == null || R.scrollTo({
      top: (T = ir(x)) != null ? T : f.value,
      left: (B = ir(S)) != null ? B : A.value,
      behavior: ir(l)
    }));
  }
  const v = ref(false), m = reactive({
    left: true,
    right: false,
    top: true,
    bottom: false
  }), E = reactive({
    left: false,
    right: false,
    top: false,
    bottom: false
  }), y = (S) => {
    v.value && (v.value = false, E.left = false, E.right = false, E.top = false, E.bottom = false, i(S));
  }, p = uI(y, r + n), g = (S) => {
    var x;
    if (!c)
      return;
    const T = S.document ? S.document.documentElement : (x = S.documentElement) != null ? x : S, { display: B, flexDirection: R } = getComputedStyle(T), _ = T.scrollLeft;
    E.left = _ < u.value, E.right = _ > u.value;
    const F = Math.abs(_) <= 0 + (a.left || 0), U = Math.abs(_) + T.clientWidth >= T.scrollWidth - (a.right || 0) - uu;
    B === "flex" && R === "row-reverse" ? (m.left = U, m.right = F) : (m.left = F, m.right = U), u.value = _;
    let Y = T.scrollTop;
    S === c.document && !Y && (Y = c.document.body.scrollTop), E.top = Y < h.value, E.bottom = Y > h.value;
    const N = Math.abs(Y) <= 0 + (a.top || 0), Z = Math.abs(Y) + T.clientHeight >= T.scrollHeight - (a.bottom || 0) - uu;
    B === "flex" && R === "column-reverse" ? (m.top = Z, m.bottom = N) : (m.top = N, m.bottom = Z), h.value = Y;
  }, C = (S) => {
    var x;
    if (!c)
      return;
    const T = (x = S.target.documentElement) != null ? x : S.target;
    g(T), v.value = true, p(S), s(S);
  };
  return lt(
    t,
    "scroll",
    r ? hI(C, r, true, false) : C,
    o
  ), lt(
    t,
    "scrollend",
    y,
    o
  ), {
    x: A,
    y: f,
    isScrolling: v,
    arrivedState: m,
    directions: E,
    measure() {
      const S = ir(t);
      c && S && g(S);
    }
  };
}
const yI = {
  page: (t) => [t.pageX, t.pageY],
  client: (t) => [t.clientX, t.clientY],
  screen: (t) => [t.screenX, t.screenY],
  movement: (t) => t instanceof Touch ? null : [t.movementX, t.movementY]
};
function EI(t = {}) {
  const {
    type: e = "page",
    touch: r = true,
    resetOnTouchEnds: n = false,
    initialValue: i = { x: 0, y: 0 },
    window: s = mi,
    target: a = s,
    scroll: o = true,
    eventFilter: l
  } = t;
  let c = null;
  const u = ref(i.x), h = ref(i.y), A = ref(null), f = typeof e == "function" ? e : yI[e], d = (C) => {
    const S = f(C);
    c = C, S && ([u.value, h.value] = S, A.value = "mouse");
  }, v = (C) => {
    if (C.touches.length > 0) {
      const S = f(C.touches[0]);
      S && ([u.value, h.value] = S, A.value = "touch");
    }
  }, m = () => {
    if (!c || !s)
      return;
    const C = f(c);
    c instanceof MouseEvent && C && (u.value = C[0] + s.scrollX, h.value = C[1] + s.scrollY);
  }, E = () => {
    u.value = i.x, h.value = i.y;
  }, y = l ? (C) => l(() => d(C), {}) : (C) => d(C), p = l ? (C) => l(() => v(C), {}) : (C) => v(C), g = l ? () => l(() => m(), {}) : () => m();
  if (a) {
    const C = { passive: true };
    lt(a, ["mousemove", "dragover"], y, C), r && e !== "movement" && (lt(a, ["touchstart", "touchmove"], p, C), n && lt(a, "touchend", E, C)), o && e === "page" && lt(s, "scroll", g, { passive: true });
  }
  return {
    x: u,
    y: h,
    sourceType: A
  };
}
function II({ window: t = mi } = {}) {
  if (!t)
    return {
      x: ref(0),
      y: ref(0)
    };
  const e = ref(t.scrollX), r = ref(t.scrollY);
  return lt(
    t,
    "scroll",
    () => {
      e.value = t.scrollX, r.value = t.scrollY;
    },
    {
      capture: false,
      passive: true
    }
  ), { x: e, y: r };
}
function bA(t = {}) {
  const {
    window: e = mi,
    initialWidth: r = Number.POSITIVE_INFINITY,
    initialHeight: n = Number.POSITIVE_INFINITY,
    listenOrientation: i = true,
    includeScrollbar: s = true
  } = t, a = ref(r), o = ref(n), l = () => {
    e && (s ? (a.value = e.innerWidth, o.value = e.innerHeight) : (a.value = e.document.documentElement.clientWidth, o.value = e.document.documentElement.clientHeight));
  };
  if (l(), AI(l), lt("resize", l, { passive: true }), i) {
    const c = mI("(orientation: portrait)");
    watch(c, () => l());
  }
  return { width: a, height: o };
}
const Ix = /* @__PURE__ */ defineComponent({
  __name: "MouseParallax",
  props: {
    disabled: { type: Boolean, default: false },
    factor: { default: 2.5 },
    ease: { default: 0.1 }
  },
  setup(t) {
    const e = t, { camera: r } = useTresContext(), { disabled: n, factor: i, ease: s } = toRefs(e), { x: a, y: o } = EI(), { width: l, height: c } = bA(), u = ref(), h = computed(() => (a.value / l.value - 0.5) * i.value), A = computed(() => -(o.value / c.value - 0.5) * i.value), { onLoop: f } = useRenderLoop();
    return f(({ delta: d }) => {
      n.value || !u.value || (u.value.position.x += (h.value - u.value.position.x) * s.value * d, u.value.position.y += (A.value - u.value.position.y) * s.value * d);
    }), watch(
      () => u.value,
      (d) => d == null ? void 0 : d.add(r.value)
    ), (d, v) => (openBlock(), createElementBlock("TresGroup", {
      ref_key: "cameraGroupRef",
      ref: u
    }, null, 512));
  }
});
class Ts extends Mesh {
  constructor() {
    super(Ts.Geometry, new MeshBasicMaterial({ opacity: 0, transparent: true })), this.isLensflare = true, this.type = "Lensflare", this.frustumCulled = false, this.renderOrder = 1 / 0;
    const e = new Vector3(), r = new Vector3(), n = new FramebufferTexture(16, 16), i = new FramebufferTexture(16, 16), s = Ts.Geometry, a = new RawShaderMaterial({
      uniforms: {
        scale: { value: null },
        screenPosition: { value: null }
      },
      vertexShader: (
        /* glsl */
        `

				precision highp float;

				uniform vec3 screenPosition;
				uniform vec2 scale;

				attribute vec3 position;

				void main() {

					gl_Position = vec4( position.xy * scale + screenPosition.xy, screenPosition.z, 1.0 );

				}`
      ),
      fragmentShader: (
        /* glsl */
        `

				precision highp float;

				void main() {

					gl_FragColor = vec4( 1.0, 0.0, 1.0, 1.0 );

				}`
      ),
      depthTest: true,
      depthWrite: false,
      transparent: false
    }), o = new RawShaderMaterial({
      uniforms: {
        map: { value: n },
        scale: { value: null },
        screenPosition: { value: null }
      },
      vertexShader: (
        /* glsl */
        `

				precision highp float;

				uniform vec3 screenPosition;
				uniform vec2 scale;

				attribute vec3 position;
				attribute vec2 uv;

				varying vec2 vUV;

				void main() {

					vUV = uv;

					gl_Position = vec4( position.xy * scale + screenPosition.xy, screenPosition.z, 1.0 );

				}`
      ),
      fragmentShader: (
        /* glsl */
        `

				precision highp float;

				uniform sampler2D map;

				varying vec2 vUV;

				void main() {

					gl_FragColor = texture2D( map, vUV );

				}`
      ),
      depthTest: false,
      depthWrite: false,
      transparent: false
    }), l = new Mesh(s, a), c = [], u = _A.Shader, h = new RawShaderMaterial({
      uniforms: {
        map: { value: null },
        occlusionMap: { value: i },
        color: { value: new Color(16777215) },
        scale: { value: new Vector2() },
        screenPosition: { value: new Vector3() }
      },
      vertexShader: u.vertexShader,
      fragmentShader: u.fragmentShader,
      blending: AdditiveBlending,
      transparent: true,
      depthWrite: false
    }), A = new Mesh(s, h);
    this.addElement = function(E) {
      c.push(E);
    };
    const f = new Vector2(), d = new Vector2(), v = new Box2(), m = new Vector4();
    this.onBeforeRender = function(E, y, p) {
      E.getCurrentViewport(m);
      const g = m.w / m.z, C = m.z / 2, S = m.w / 2;
      let x = 16 / m.w;
      if (f.set(x * g, x), v.min.set(m.x, m.y), v.max.set(m.x + (m.z - 16), m.y + (m.w - 16)), r.setFromMatrixPosition(this.matrixWorld), r.applyMatrix4(p.matrixWorldInverse), !(r.z > 0) && (e.copy(r).applyMatrix4(p.projectionMatrix), d.x = m.x + e.x * C + C - 8, d.y = m.y + e.y * S + S - 8, v.containsPoint(d))) {
        E.copyFramebufferToTexture(d, n);
        let T = a.uniforms;
        T.scale.value = f, T.screenPosition.value = e, E.renderBufferDirect(p, null, s, a, l, null), E.copyFramebufferToTexture(d, i), T = o.uniforms, T.scale.value = f, T.screenPosition.value = e, E.renderBufferDirect(p, null, s, o, l, null);
        const B = -e.x * 2, R = -e.y * 2;
        for (let _ = 0, F = c.length; _ < F; _++) {
          const U = c[_], Y = h.uniforms;
          Y.color.value.copy(U.color), Y.map.value = U.texture, Y.screenPosition.value.x = e.x + B * U.distance, Y.screenPosition.value.y = e.y + R * U.distance, x = U.size / m.w;
          const N = m.w / m.z;
          Y.scale.value.set(x * N, x), h.uniformsNeedUpdate = true, E.renderBufferDirect(p, null, s, h, A, null);
        }
      }
    }, this.dispose = function() {
      a.dispose(), o.dispose(), h.dispose(), n.dispose(), i.dispose();
      for (let E = 0, y = c.length; E < y; E++)
        c[E].texture.dispose();
    };
  }
}
class _A {
  constructor(e, r = 1, n = 0, i = new Color(16777215)) {
    this.texture = e, this.size = r, this.distance = n, this.color = i;
  }
}
_A.Shader = {
  uniforms: {
    map: { value: null },
    occlusionMap: { value: null },
    color: { value: null },
    scale: { value: null },
    screenPosition: { value: null }
  },
  vertexShader: (
    /* glsl */
    `

		precision highp float;

		uniform vec3 screenPosition;
		uniform vec2 scale;

		uniform sampler2D occlusionMap;

		attribute vec3 position;
		attribute vec2 uv;

		varying vec2 vUV;
		varying float vVisibility;

		void main() {

			vUV = uv;

			vec2 pos = position.xy;

			vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );
			visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );
			visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );
			visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );
			visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );
			visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );
			visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );
			visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );
			visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );

			vVisibility =        visibility.r / 9.0;
			vVisibility *= 1.0 - visibility.g / 9.0;
			vVisibility *=       visibility.b / 9.0;

			gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );

		}`
  ),
  fragmentShader: (
    /* glsl */
    `

		precision highp float;

		uniform sampler2D map;
		uniform vec3 color;

		varying vec2 vUV;
		varying float vVisibility;

		void main() {

			vec4 texture = texture2D( map, vUV );
			texture.a *= vVisibility;
			gl_FragColor = texture;
			gl_FragColor.rgb *= color;

		}`
  )
};
Ts.Geometry = function() {
  const t = new BufferGeometry(), e = new Float32Array([
    -1,
    -1,
    0,
    0,
    0,
    1,
    -1,
    0,
    1,
    0,
    1,
    1,
    0,
    1,
    1,
    -1,
    1,
    0,
    0,
    1
  ]), r = new InterleavedBuffer(e, 5);
  return t.setIndex([0, 1, 2, 0, 2, 3]), t.setAttribute("position", new InterleavedBufferAttribute(r, 3, 0, false)), t.setAttribute("uv", new InterleavedBufferAttribute(r, 2, 3, false)), t;
}();
MathUtils.clamp;
MathUtils.lerp;
const fl = {
  sunset: "venice/venice_sunset_4k.hdr"
};
async function UI({
  files: t = ["/px.png", "/nx.png", "/py.png", "/ny.png", "/pz.png", "/nz.png"],
  blur: e = 0,
  background: r = false,
  path: n = "/",
  preset: i = void 0
}) {
  const { scene: s } = useTresContext();
  if (i) {
    if (!(i in fl))
      throw new Error(`Preset must be one of: ${Object.keys(fl).join(", ")}`);
    t = fl[i], n = "https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/";
  }
  const a = Array.isArray(t), l = await useLoader(
    a ? CubeTextureLoader : tI,
    a ? [t] : t,
    (u) => {
      n && u.setPath(n);
    }
  ), c = a ? l[0] : l;
  return c && (c.mapping = a ? CubeReflectionMapping : EquirectangularReflectionMapping, c.colorSpace = SRGBColorSpace), s.value && (s.value.environment = c, r && (s.value.background = c), e && (s.value.backgroundBlurriness = e | 0)), c;
}
let Aa = null;
function GI(t, e) {
  return (r) => {
    e && e(r), t.draco && (Aa || (Aa = new rI()), Aa.setDecoderPath(t.decoderPath || "https://www.gstatic.com/draco/versioned/decoders/1.4.3/"), r.setDRACOLoader(Aa));
  };
}
async function HI(t, e = {
  draco: false
}, r) {
  return await useLoader(E6, t, GI(e, r));
}
const VI = ["object"], xx = /* @__PURE__ */ defineComponent({
  __name: "component",
  props: {
    path: {},
    draco: { type: Boolean, default: false },
    decoderPath: { default: "https://www.gstatic.com/draco/versioned/decoders/1.4.1/" }
  },
  async setup(t, { expose: e }) {
    let r, n;
    const i = t, s = ref();
    e({
      value: s
    });
    const { scene: a } = ([r, n] = withAsyncContext(() => HI(i.path, {
      draco: i.draco,
      decoderPath: i.decoderPath
    })), r = await r, n(), r);
    return (o, l) => (openBlock(), createElementBlock("primitive", mergeProps({
      ref_key: "modelRef",
      ref: s,
      object: unref(a)
    }, o.$attrs), null, 16, VI));
  }
});
async function zI(t) {
  return await useLoader(c8, t);
}
const YI = ["object"], Tx = /* @__PURE__ */ defineComponent({
  __name: "component",
  props: {
    path: {}
  },
  async setup(t, { expose: e }) {
    let r, n;
    const i = t, s = ref();
    e({
      value: s
    });
    const a = ([r, n] = withAsyncContext(() => zI(i.path)), r = await r, n(), r);
    return (o, l) => (openBlock(), createElementBlock("primitive", mergeProps({
      ref_key: "modelRef",
      ref: s,
      object: unref(a)
    }, o.$attrs), null, 16, YI));
  }
}), gu = "[TresJS - Cientos ▲ ■ ♥] ";
function Jc() {
  function t(n, i) {
    console.error(`${gu} ${n}`, i || "");
  }
  function e(n) {
    console.warn(`${gu} ${n}`);
  }
  function r(n, i) {
  }
  return {
    logError: t,
    logWarning: e,
    logMessage: r
  };
}
let pl = 0;
function wx() {
  const t = ref(false), e = ref(0), r = ref([]), { logError: n } = Jc();
  return new Promise((i) => {
    DefaultLoadingManager.onStart = () => {
      t.value = false;
    }, DefaultLoadingManager.onLoad = () => {
      t.value = true;
    }, DefaultLoadingManager.onProgress = (s, a, o) => {
      a === o && (pl = o, t.value = true, r.value.push(s)), e.value = Math.round((a - pl) / (o - pl) * 100 || 100, 2);
    }, DefaultLoadingManager.onError = (s) => {
      n("Error loading assets", new Error(s)), t.value = true;
    }, i({
      items: r,
      hasFinishLoading: t,
      progress: e
    });
  });
}
async function Bx(t, e) {
  const { logError: r } = Jc();
  if (!t)
    return r("Error no path provided");
  const { unsuspend: n, start: i, crossOrigin: s, muted: a, loop: o, ...l } = {
    unsuspend: "loadedmetadata",
    crossOrigin: "Anonymous",
    muted: true,
    loop: true,
    start: true,
    playsInline: true,
    ...e
  };
  function c() {
    return new Promise((u, h) => {
      const A = Object.assign(document.createElement("video"), {
        src: typeof t == "string" && t || void 0,
        crossOrigin: s,
        loop: o,
        muted: a,
        autoplay: true,
        ...l
      }), f = new VideoTexture(A);
      return A.addEventListener(n, () => u(f)), A.addEventListener("error", () => h()), f;
    });
  }
  try {
    const u = await c();
    return i && u.image && u.image.play(), u;
  } catch {
    r("Error loading resource");
  }
}
const jI = ["target", "auto-rotate", "auto-rotate-speed", "enable-damping", "damping-factor", "enable-pan", "key-pan-speed", "keys", "max-azimuth-angle", "min-azimuth-angle", "max-polar-angle", "min-polar-angle", "min-distance", "max-distance", "min-zoom", "max-zoom", "touches", "enable-zoom", "zoom-speed", "enable-rotate", "rotate-speed", "args"], bx = /* @__PURE__ */ defineComponent({
  __name: "OrbitControls",
  props: {
    makeDefault: { type: Boolean, default: false },
    camera: {},
    domElement: {},
    target: { default: () => [0, 0, 0] },
    enableDamping: { type: Boolean, default: false },
    dampingFactor: { default: 0.05 },
    autoRotate: { type: Boolean, default: false },
    autoRotateSpeed: { default: 2 },
    enablePan: { type: Boolean, default: true },
    keyPanSpeed: { default: 7 },
    keys: {},
    maxAzimuthAngle: { default: 1 / 0 },
    minAzimuthAngle: { default: -1 / 0 },
    maxPolarAngle: { default: Math.PI },
    minPolarAngle: { default: 0 },
    minDistance: { default: 0 },
    maxDistance: { default: 1 / 0 },
    minZoom: { default: 0 },
    maxZoom: { default: 1 / 0 },
    touches: { default: () => ({ ONE: TOUCH.ROTATE, TWO: TOUCH.DOLLY_PAN }) },
    enableZoom: { type: Boolean, default: true },
    zoomSpeed: { default: 1 },
    enableRotate: { type: Boolean, default: true },
    rotateSpeed: { default: 1 }
  },
  emits: ["change", "start", "end"],
  setup(t, { emit: e }) {
    const r = t, {
      makeDefault: n,
      autoRotate: i,
      autoRotateSpeed: s,
      enableDamping: a,
      dampingFactor: o,
      enablePan: l,
      keyPanSpeed: c,
      maxAzimuthAngle: u,
      minAzimuthAngle: h,
      maxPolarAngle: A,
      minPolarAngle: f,
      minDistance: d,
      maxDistance: v,
      minZoom: m,
      maxZoom: E,
      enableZoom: y,
      zoomSpeed: p,
      enableRotate: g,
      touches: C,
      rotateSpeed: S,
      target: x
    } = toRefs(r), { camera: T, renderer: B, extend: R, controls: _ } = useTresContext(), F = ref(null);
    R({ OrbitControls: a2 }), watch(F, (N) => {
      U(), N && n.value ? _.value = N : _.value = null;
    });
    function U() {
      lt(F.value, "change", () => e("change", F.value)), lt(F.value, "start", () => e("start", F.value)), lt(F.value, "end", () => e("end", F.value));
    }
    const { onLoop: Y } = useRenderLoop();
    return Y(() => {
      F.value && (a.value || i.value) && F.value.update();
    }), onUnmounted(() => {
      F.value && F.value.dispose();
    }), (N, Z) => (N.camera || unref(T)) && (N.domElement || unref(B)) ? (openBlock(), createElementBlock("TresOrbitControls", {
      key: 0,
      ref_key: "controlsRef",
      ref: F,
      target: unref(x),
      "auto-rotate": unref(i),
      "auto-rotate-speed": unref(s),
      "enable-damping": unref(a),
      "damping-factor": unref(o),
      "enable-pan": unref(l),
      "key-pan-speed": unref(c),
      keys: N.keys,
      "max-azimuth-angle": unref(u),
      "min-azimuth-angle": unref(h),
      "max-polar-angle": unref(A),
      "min-polar-angle": unref(f),
      "min-distance": unref(d),
      "max-distance": unref(v),
      "min-zoom": unref(m),
      "max-zoom": unref(E),
      touches: unref(C),
      "enable-zoom": unref(y),
      "zoom-speed": unref(p),
      "enable-rotate": unref(g),
      "rotate-speed": unref(S),
      args: [N.camera || unref(T), N.domElement || unref(B).domElement]
    }, null, 8, jI)) : createCommentVNode("", true);
  }
}), $I = ["object", "args", "mode", "enabled", "axis", "translation-snap", "rotation-snap", "scale-snap", "space", "size", "show-x", "show-y", "show-z"], Rx = /* @__PURE__ */ defineComponent({
  __name: "TransformControls",
  props: {
    object: {},
    mode: { default: "translate" },
    enabled: { type: Boolean, default: true },
    axis: { default: "XYZ" },
    translationSnap: {},
    rotationSnap: {},
    scaleSnap: {},
    space: { default: "world" },
    size: { default: 1 },
    showX: { type: Boolean, default: true },
    showY: { type: Boolean, default: true },
    showZ: { type: Boolean, default: true }
  },
  emits: ["dragging", "change", "mouseDown", "mouseUp", "objectChange"],
  setup(t, { emit: e }) {
    const r = t, { object: n, mode: i, enabled: s, axis: a, translationSnap: o, rotationSnap: l, scaleSnap: c, space: u, size: h, showX: A, showY: f, showZ: d } = toRefs(r), v = shallowRef(), { controls: m, camera: E, renderer: y, extend: p } = useTresContext();
    p({ TransformControls: c6 });
    const g = (S) => {
      m.value && (m.value.enabled = !S.value), e("dragging", S.value);
    };
    function C() {
      lt(v.value, "change", () => e("change")), lt(v.value, "dragging-changed", g), lt(v.value, "mouseDown", () => e("mouseDown")), lt(v.value, "mouseUp", () => e("mouseUp")), lt(v.value, "objectChange", () => e("objectChange"));
    }
    return watchEffect(() => {
      v.value && C();
    }), onUnmounted(() => {
      v.value && v.value.dispose();
    }), (S, x) => unref(E) && unref(y) ? (openBlock(), createElementBlock("TresTransformControls", {
      key: 0,
      ref_key: "controlsRef",
      ref: v,
      object: unref(n),
      args: [unref(E), unref(y).domElement],
      mode: unref(i),
      enabled: unref(s),
      axis: unref(a),
      "translation-snap": unref(o),
      "rotation-snap": unref(l),
      "scale-snap": unref(c),
      space: unref(u),
      size: unref(h),
      "show-x": unref(A),
      "show-y": unref(f),
      "show-z": unref(d),
      visible: true
    }, null, 8, $I)) : createCommentVNode("", true);
  }
}), JI = ["args"], Dx = /* @__PURE__ */ defineComponent({
  __name: "MapControls",
  props: {
    makeDefault: { type: Boolean, default: false },
    camera: {},
    domElement: {}
  },
  setup(t) {
    const e = t, { camera: r, renderer: n, extend: i, controls: s } = useTresContext(), a = ref(null);
    return i({ MapControls: d6 }), watch(s, (o) => {
      o && e.makeDefault ? s.value = o : s.value = null;
    }), onUnmounted(() => {
      a.value && a.value.dispose();
    }), (o, l) => (o.camera || unref(r)) && (o.domElement || unref(n)) ? (openBlock(), createElementBlock("TresMapControls", {
      key: 0,
      ref_key: "controlsRef",
      ref: a,
      args: [o.camera || unref(r), o.domElement || unref(n).domElement]
    }, null, 8, JI)) : createCommentVNode("", true);
  }
}), kx = /* @__PURE__ */ defineComponent({
  __name: "ScrollControls",
  props: {
    pages: { default: 4 },
    distance: { default: 4 },
    smoothScroll: { default: 0.1 },
    horizontal: { type: Boolean, default: false },
    htmlScroll: { type: Boolean, default: false }
  },
  emits: ["update:modelValue"],
  setup(t, { emit: e }) {
    const r = t, { logWarning: n } = useLogger();
    r.smoothScroll < 0 && n("SmoothControl must be greater than zero"), r.pages < 0 && n("Pages must be greater than zero");
    const { camera: i, controls: s, renderer: a } = useTresContext(), o = shallowRef(), l = document.createElement("div"), { y: c } = II(), { x: u, y: h, isScrolling: A } = vI(l), { height: f, width: d } = bA();
    let v = 0;
    const m = ref(false), E = ref(0), y = ref(0), p = ref(0), g = r.horizontal ? "x" : "y", C = watch(
      i,
      (x) => {
        if (m.value) {
          C();
          return;
        }
        v = r.horizontal ? (x == null ? void 0 : x.position.x) || 0 : (x == null ? void 0 : x.position.y) || 0, m.value = true;
      },
      {
        immediate: true
      }
    );
    watch(
      A,
      (x) => {
        s.value && (s.value.enabled = !x);
      },
      {
        immediate: true
      }
    ), watch(c, (x) => {
      !A.value && !r.htmlScroll || (y.value = x / f.value / (p.value / f.value - 1), E.value = -1 * y.value, e("update:modelValue", y.value));
    }), watch(h, (x) => {
      y.value = x / f.value / (p.value / f.value), E.value = -1 * y.value, e("update:modelValue", y.value);
    }), watch(u, (x) => {
      y.value = x / d.value / (p.value / d.value - 1), E.value = +y.value, e("update:modelValue", y.value);
    }), watch(
      a,
      (x) => {
        var B, R;
        const T = x == null ? void 0 : x.domElement;
        if (r.htmlScroll && (x != null && x.domElement))
          T != null && T.style.width && (T != null && T.style.position) && (T != null && T.style.top) && (T != null && T.style.left) && (T.style.width = "100%", T.style.position = "fixed", T.style.zIndex = " -99999", T.style.top = "0", T.style.left = "0"), p.value = document.body.scrollHeight;
        else {
          const _ = document.createElement("div"), F = document.createElement("div");
          l.style[r.horizontal ? "overflowX" : "overflowY"] = "auto", l.style[r.horizontal ? "overflowY" : "overflowX"] = "hidden", l.style.position = "absolute", l.style.width = "100%", l.style.height = " 100%", l.style.top = "0", l.style.left = "0", l.classList.add("scrollContainer"), _.style.position = "sticky", _.style.top = "0px", _.style.left = "0px", _.style.width = "100%", _.style.height = "100%", _.style.overflow = "hidden", l.appendChild(_), F.style.height = r.horizontal ? "100%" : `${f.value * r.pages}px`, F.style.width = r.horizontal ? `${d.value * r.pages}px` : "100vw", F.style.pointerEvents = "none", T.style.position = "fixed", T.style.zIndex = "0", T != null && T.style.width && (T.style.width = "100%"), l.appendChild(F), x.domElement.parentNode.style.position = "relative", (R = (B = x == null ? void 0 : x.domElement) == null ? void 0 : B.parentNode) == null || R.appendChild(l), p.value = r.horizontal ? d.value * r.pages : f.value * r.pages;
        }
      },
      {
        immediate: true
      }
    );
    const { onLoop: S } = useRenderLoop();
    return S(() => {
      var x;
      if ((x = i.value) != null && x.position) {
        const T = (E.value * r.distance - i.value.position[g] + v) * r.smoothScroll;
        i.value.position[g] += T, o.value.children.length > 0 && (o.value.position[g] += T);
      }
    }), (x, T) => (openBlock(), createElementBlock("TresGroup", {
      ref_key: "wrapperRef",
      ref: o
    }, [
      renderSlot(x.$slots, "default")
    ], 512));
  }
});
/*!
 * camera-controls
 * https://github.com/yomotsu/camera-controls
 * (c) 2017 @yomotsu
 * Released under the MIT License.
 */
const Ie = {
  LEFT: 1,
  RIGHT: 2,
  MIDDLE: 4
}, W = Object.freeze({
  NONE: 0,
  ROTATE: 1,
  TRUCK: 2,
  OFFSET: 4,
  DOLLY: 8,
  ZOOM: 16,
  TOUCH_ROTATE: 32,
  TOUCH_TRUCK: 64,
  TOUCH_OFFSET: 128,
  TOUCH_DOLLY: 256,
  TOUCH_ZOOM: 512,
  TOUCH_DOLLY_TRUCK: 1024,
  TOUCH_DOLLY_OFFSET: 2048,
  TOUCH_DOLLY_ROTATE: 4096,
  TOUCH_ZOOM_TRUCK: 8192,
  TOUCH_ZOOM_OFFSET: 16384,
  TOUCH_ZOOM_ROTATE: 32768
}), xi = {
  NONE: 0,
  IN: 1,
  OUT: -1
};
function $n(t) {
  return t.isPerspectiveCamera;
}
function bn(t) {
  return t.isOrthographicCamera;
}
const Ti = Math.PI * 2, mu = Math.PI / 2, FA = 1e-5, Xi = Math.PI / 180;
function yr(t, e, r) {
  return Math.max(e, Math.min(r, t));
}
function Ye(t, e = FA) {
  return Math.abs(t) < e;
}
function He(t, e, r = FA) {
  return Ye(t - e, r);
}
function vu(t, e) {
  return Math.round(t / e) * e;
}
function $i(t) {
  return isFinite(t) ? t : t < 0 ? -Number.MAX_VALUE : Number.MAX_VALUE;
}
function Zi(t) {
  return Math.abs(t) < Number.MAX_VALUE ? t : t * (1 / 0);
}
function fa(t, e, r, n, i = 1 / 0, s) {
  n = Math.max(1e-4, n);
  const a = 2 / n, o = a * s, l = 1 / (1 + o + 0.48 * o * o + 0.235 * o * o * o);
  let c = t - e;
  const u = e, h = i * n;
  c = yr(c, -h, h), e = t - c;
  const A = (r.value + a * c) * s;
  r.value = (r.value - a * A) * l;
  let f = e + (c + A) * l;
  return u - t > 0 == f > u && (f = u, r.value = (f - u) / s), f;
}
function yu(t, e, r, n, i = 1 / 0, s, a) {
  n = Math.max(1e-4, n);
  const o = 2 / n, l = o * s, c = 1 / (1 + l + 0.48 * l * l + 0.235 * l * l * l);
  let u = e.x, h = e.y, A = e.z, f = t.x - u, d = t.y - h, v = t.z - A;
  const m = u, E = h, y = A, p = i * n, g = p * p, C = f * f + d * d + v * v;
  if (C > g) {
    const N = Math.sqrt(C);
    f = f / N * p, d = d / N * p, v = v / N * p;
  }
  u = t.x - f, h = t.y - d, A = t.z - v;
  const S = (r.x + o * f) * s, x = (r.y + o * d) * s, T = (r.z + o * v) * s;
  r.x = (r.x - o * S) * c, r.y = (r.y - o * x) * c, r.z = (r.z - o * T) * c, a.x = u + (f + S) * c, a.y = h + (d + x) * c, a.z = A + (v + T) * c;
  const B = m - t.x, R = E - t.y, _ = y - t.z, F = a.x - m, U = a.y - E, Y = a.z - y;
  return B * F + R * U + _ * Y > 0 && (a.x = m, a.y = E, a.z = y, r.x = (a.x - m) / s, r.y = (a.y - E) / s, r.z = (a.z - y) / s), a;
}
function dl(t, e) {
  e.set(0, 0), t.forEach((r) => {
    e.x += r.clientX, e.y += r.clientY;
  }), e.x /= t.length, e.y /= t.length;
}
function gl(t, e) {
  return bn(t) ? (console.warn(`${e} is not supported in OrthographicCamera`), true) : false;
}
class eC {
  constructor() {
    this._listeners = {};
  }
  /**
   * Adds the specified event listener.
   * @param type event name
   * @param listener handler function
   * @category Methods
   */
  addEventListener(e, r) {
    const n = this._listeners;
    n[e] === void 0 && (n[e] = []), n[e].indexOf(r) === -1 && n[e].push(r);
  }
  /**
   * Presence of the specified event listener.
   * @param type event name
   * @param listener handler function
   * @category Methods
   */
  hasEventListener(e, r) {
    const n = this._listeners;
    return n[e] !== void 0 && n[e].indexOf(r) !== -1;
  }
  /**
   * Removes the specified event listener
   * @param type event name
   * @param listener handler function
   * @category Methods
   */
  removeEventListener(e, r) {
    const i = this._listeners[e];
    if (i !== void 0) {
      const s = i.indexOf(r);
      s !== -1 && i.splice(s, 1);
    }
  }
  /**
   * Removes all event listeners
   * @param type event name
   * @category Methods
   */
  removeAllEventListeners(e) {
    if (!e) {
      this._listeners = {};
      return;
    }
    Array.isArray(this._listeners[e]) && (this._listeners[e].length = 0);
  }
  /**
   * Fire an event type.
   * @param event DispatcherEvent
   * @category Methods
   */
  dispatchEvent(e) {
    const n = this._listeners[e.type];
    if (n !== void 0) {
      e.target = this;
      const i = n.slice(0);
      for (let s = 0, a = i.length; s < a; s++)
        i[s].call(this, e);
    }
  }
}
const tC = "2.7.2", pa = 1 / 8, LA = typeof window < "u", rC = LA && /Mac/.test(navigator.platform), nC = !(LA && "PointerEvent" in window);
let me, Eu, da, ml, Qt, Me, Ue, Si, Ji, Fr, Lr, Zn, Iu, Cu, tr, es, wi, xu, vl, Tu, yl, El, ga;
class Ss extends eC {
  /**
       * Injects THREE as the dependency. You can then proceed to use CameraControls.
       *
       * e.g
       * ```javascript
       * CameraControls.install( { THREE: THREE } );
       * ```
       *
       * Note: If you do not wish to use enter three.js to reduce file size(tree-shaking for example), make a subset to install.
       *
       * ```js
       * import {
       * 	Vector2,
       * 	Vector3,
       * 	Vector4,
       * 	Quaternion,
       * 	Matrix4,
       * 	Spherical,
       * 	Box3,
       * 	Sphere,
       * 	Raycaster,
       * 	MathUtils,
       * } from 'three';
       *
       * const subsetOfTHREE = {
       * 	Vector2   : Vector2,
       * 	Vector3   : Vector3,
       * 	Vector4   : Vector4,
       * 	Quaternion: Quaternion,
       * 	Matrix4   : Matrix4,
       * 	Spherical : Spherical,
       * 	Box3      : Box3,
       * 	Sphere    : Sphere,
       * 	Raycaster : Raycaster,
       * };
  
       * CameraControls.install( { THREE: subsetOfTHREE } );
       * ```
       * @category Statics
       */
  static install(e) {
    me = e.THREE, Eu = Object.freeze(new me.Vector3(0, 0, 0)), da = Object.freeze(new me.Vector3(0, 1, 0)), ml = Object.freeze(new me.Vector3(0, 0, 1)), Qt = new me.Vector2(), Me = new me.Vector3(), Ue = new me.Vector3(), Si = new me.Vector3(), Ji = new me.Vector3(), Fr = new me.Vector3(), Lr = new me.Vector3(), Zn = new me.Vector3(), Iu = new me.Vector3(), Cu = new me.Vector3(), tr = new me.Spherical(), es = new me.Spherical(), wi = new me.Box3(), xu = new me.Box3(), vl = new me.Sphere(), Tu = new me.Quaternion(), yl = new me.Quaternion(), El = new me.Matrix4(), ga = new me.Raycaster();
  }
  /**
   * list all ACTIONs
   * @category Statics
   */
  static get ACTION() {
    return W;
  }
  /**
   * Creates a `CameraControls` instance.
   *
   * Note:
   * You **must install** three.js before using camera-controls. see [#install](#install)
   * Not doing so will lead to runtime errors (`undefined` references to THREE).
   *
   * e.g.
   * ```
   * CameraControls.install( { THREE } );
   * const cameraControls = new CameraControls( camera, domElement );
   * ```
   *
   * @param camera A `THREE.PerspectiveCamera` or `THREE.OrthographicCamera` to be controlled.
   * @param domElement A `HTMLElement` for the draggable area, usually `renderer.domElement`.
   * @category Constructor
   */
  constructor(e, r) {
    super(), this.minPolarAngle = 0, this.maxPolarAngle = Math.PI, this.minAzimuthAngle = -1 / 0, this.maxAzimuthAngle = 1 / 0, this.minDistance = Number.EPSILON, this.maxDistance = 1 / 0, this.infinityDolly = false, this.minZoom = 0.01, this.maxZoom = 1 / 0, this.smoothTime = 0.25, this.draggingSmoothTime = 0.125, this.maxSpeed = 1 / 0, this.azimuthRotateSpeed = 1, this.polarRotateSpeed = 1, this.dollySpeed = 1, this.dollyDragInverted = false, this.truckSpeed = 2, this.dollyToCursor = false, this.dragToOffset = false, this.verticalDragToForward = false, this.boundaryFriction = 0, this.restThreshold = 0.01, this.colliderMeshes = [], this.cancel = () => {
    }, this._enabled = true, this._state = W.NONE, this._viewport = null, this._changedDolly = 0, this._changedZoom = 0, this._hasRested = true, this._boundaryEnclosesCamera = false, this._needsUpdate = true, this._updatedLastTime = false, this._elementRect = new DOMRect(), this._isDragging = false, this._activePointers = [], this._lockedPointer = null, this._interactiveArea = new DOMRect(0, 0, 1, 1), this._isUserControllingRotate = false, this._isUserControllingDolly = false, this._isUserControllingTruck = false, this._isUserControllingOffset = false, this._isUserControllingZoom = false, this._lastDollyDirection = xi.NONE, this._thetaVelocity = { value: 0 }, this._phiVelocity = { value: 0 }, this._radiusVelocity = { value: 0 }, this._targetVelocity = new me.Vector3(), this._focalOffsetVelocity = new me.Vector3(), this._zoomVelocity = { value: 0 }, this._truckInternal = (g, C, S) => {
      let x, T;
      if ($n(this._camera)) {
        const B = Me.copy(this._camera.position).sub(this._target), R = this._camera.getEffectiveFOV() * Xi, _ = B.length() * Math.tan(R * 0.5);
        x = this.truckSpeed * g * _ / this._elementRect.height, T = this.truckSpeed * C * _ / this._elementRect.height;
      } else if (bn(this._camera)) {
        const B = this._camera;
        x = g * (B.right - B.left) / B.zoom / this._elementRect.width, T = C * (B.top - B.bottom) / B.zoom / this._elementRect.height;
      } else
        return;
      this.verticalDragToForward ? (S ? this.setFocalOffset(this._focalOffsetEnd.x + x, this._focalOffsetEnd.y, this._focalOffsetEnd.z, true) : this.truck(x, 0, true), this.forward(-T, true)) : S ? this.setFocalOffset(this._focalOffsetEnd.x + x, this._focalOffsetEnd.y + T, this._focalOffsetEnd.z, true) : this.truck(x, T, true);
    }, this._rotateInternal = (g, C) => {
      const S = Ti * this.azimuthRotateSpeed * g / this._elementRect.height, x = Ti * this.polarRotateSpeed * C / this._elementRect.height;
      this.rotate(S, x, true);
    }, this._dollyInternal = (g, C, S) => {
      const x = Math.pow(0.95, -g * this.dollySpeed), T = this._sphericalEnd.radius, B = this._sphericalEnd.radius * x, R = yr(B, this.minDistance, this.maxDistance), _ = R - B;
      this.infinityDolly && this.dollyToCursor ? this._dollyToNoClamp(B, true) : this.infinityDolly && !this.dollyToCursor ? (this.dollyInFixed(_, true), this._dollyToNoClamp(R, true)) : this._dollyToNoClamp(R, true), this.dollyToCursor && (this._changedDolly += (this.infinityDolly ? B : R) - T, this._dollyControlCoord.set(C, S)), this._lastDollyDirection = Math.sign(-g);
    }, this._zoomInternal = (g, C, S) => {
      const x = Math.pow(0.95, g * this.dollySpeed), T = this._zoom, B = this._zoom * x;
      this.zoomTo(B, true), this.dollyToCursor && (this._changedZoom += B - T, this._dollyControlCoord.set(C, S));
    }, typeof me > "u" && console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."), this._camera = e, this._yAxisUpSpace = new me.Quaternion().setFromUnitVectors(this._camera.up, da), this._yAxisUpSpaceInverse = this._yAxisUpSpace.clone().invert(), this._state = W.NONE, this._target = new me.Vector3(), this._targetEnd = this._target.clone(), this._focalOffset = new me.Vector3(), this._focalOffsetEnd = this._focalOffset.clone(), this._spherical = new me.Spherical().setFromVector3(Me.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)), this._sphericalEnd = this._spherical.clone(), this._lastDistance = this._spherical.radius, this._zoom = this._camera.zoom, this._zoomEnd = this._zoom, this._lastZoom = this._zoom, this._nearPlaneCorners = [
      new me.Vector3(),
      new me.Vector3(),
      new me.Vector3(),
      new me.Vector3()
    ], this._updateNearPlaneCorners(), this._boundary = new me.Box3(new me.Vector3(-1 / 0, -1 / 0, -1 / 0), new me.Vector3(1 / 0, 1 / 0, 1 / 0)), this._cameraUp0 = this._camera.up.clone(), this._target0 = this._target.clone(), this._position0 = this._camera.position.clone(), this._zoom0 = this._zoom, this._focalOffset0 = this._focalOffset.clone(), this._dollyControlCoord = new me.Vector2(), this.mouseButtons = {
      left: W.ROTATE,
      middle: W.DOLLY,
      right: W.TRUCK,
      wheel: $n(this._camera) ? W.DOLLY : bn(this._camera) ? W.ZOOM : W.NONE
    }, this.touches = {
      one: W.TOUCH_ROTATE,
      two: $n(this._camera) ? W.TOUCH_DOLLY_TRUCK : bn(this._camera) ? W.TOUCH_ZOOM_TRUCK : W.NONE,
      three: W.TOUCH_TRUCK
    };
    const n = new me.Vector2(), i = new me.Vector2(), s = new me.Vector2(), a = (g) => {
      if (!this._enabled || !this._domElement)
        return;
      if (this._interactiveArea.left !== 0 || this._interactiveArea.top !== 0 || this._interactiveArea.width !== 1 || this._interactiveArea.height !== 1) {
        const x = this._domElement.getBoundingClientRect(), T = g.clientX / x.width, B = g.clientY / x.height;
        if (T < this._interactiveArea.left || T > this._interactiveArea.right || B < this._interactiveArea.top || B > this._interactiveArea.bottom)
          return;
      }
      const C = g.pointerType !== "mouse" ? null : (g.buttons & Ie.LEFT) === Ie.LEFT ? Ie.LEFT : (g.buttons & Ie.MIDDLE) === Ie.MIDDLE ? Ie.MIDDLE : (g.buttons & Ie.RIGHT) === Ie.RIGHT ? Ie.RIGHT : null;
      if (C !== null) {
        const x = this._findPointerByMouseButton(C);
        x && this._disposePointer(x);
      }
      if ((g.buttons & Ie.LEFT) === Ie.LEFT && this._lockedPointer)
        return;
      const S = {
        pointerId: g.pointerId,
        clientX: g.clientX,
        clientY: g.clientY,
        deltaX: 0,
        deltaY: 0,
        mouseButton: C
      };
      this._activePointers.push(S), this._domElement.ownerDocument.removeEventListener("pointermove", l, { passive: false }), this._domElement.ownerDocument.removeEventListener("pointerup", u), this._domElement.ownerDocument.addEventListener("pointermove", l, { passive: false }), this._domElement.ownerDocument.addEventListener("pointerup", u), this._isDragging = true, v(g);
    }, o = (g) => {
      if (!this._enabled || !this._domElement || this._lockedPointer)
        return;
      if (this._interactiveArea.left !== 0 || this._interactiveArea.top !== 0 || this._interactiveArea.width !== 1 || this._interactiveArea.height !== 1) {
        const x = this._domElement.getBoundingClientRect(), T = g.clientX / x.width, B = g.clientY / x.height;
        if (T < this._interactiveArea.left || T > this._interactiveArea.right || B < this._interactiveArea.top || B > this._interactiveArea.bottom)
          return;
      }
      const C = (g.buttons & Ie.LEFT) === Ie.LEFT ? Ie.LEFT : (g.buttons & Ie.MIDDLE) === Ie.MIDDLE ? Ie.MIDDLE : (g.buttons & Ie.RIGHT) === Ie.RIGHT ? Ie.RIGHT : null;
      if (C !== null) {
        const x = this._findPointerByMouseButton(C);
        x && this._disposePointer(x);
      }
      const S = {
        pointerId: 1,
        clientX: g.clientX,
        clientY: g.clientY,
        deltaX: 0,
        deltaY: 0,
        mouseButton: (g.buttons & Ie.LEFT) === Ie.LEFT ? Ie.LEFT : (g.buttons & Ie.MIDDLE) === Ie.LEFT ? Ie.MIDDLE : (g.buttons & Ie.RIGHT) === Ie.LEFT ? Ie.RIGHT : null
      };
      this._activePointers.push(S), this._domElement.ownerDocument.removeEventListener("mousemove", c), this._domElement.ownerDocument.removeEventListener("mouseup", h), this._domElement.ownerDocument.addEventListener("mousemove", c), this._domElement.ownerDocument.addEventListener("mouseup", h), this._isDragging = true, v(g);
    }, l = (g) => {
      g.cancelable && g.preventDefault();
      const C = g.pointerId, S = this._lockedPointer || this._findPointerById(C);
      if (S) {
        if (S.clientX = g.clientX, S.clientY = g.clientY, S.deltaX = g.movementX, S.deltaY = g.movementY, this._state = 0, g.pointerType === "touch")
          switch (this._activePointers.length) {
            case 1:
              this._state = this.touches.one;
              break;
            case 2:
              this._state = this.touches.two;
              break;
            case 3:
              this._state = this.touches.three;
              break;
          }
        else
          (!this._isDragging && this._lockedPointer || this._isDragging && (g.buttons & Ie.LEFT) === Ie.LEFT) && (this._state = this._state | this.mouseButtons.left), this._isDragging && (g.buttons & Ie.MIDDLE) === Ie.MIDDLE && (this._state = this._state | this.mouseButtons.middle), this._isDragging && (g.buttons & Ie.RIGHT) === Ie.RIGHT && (this._state = this._state | this.mouseButtons.right);
        m();
      }
    }, c = (g) => {
      const C = this._lockedPointer || this._findPointerById(1);
      C && (C.clientX = g.clientX, C.clientY = g.clientY, C.deltaX = g.movementX, C.deltaY = g.movementY, this._state = 0, (this._lockedPointer || (g.buttons & Ie.LEFT) === Ie.LEFT) && (this._state = this._state | this.mouseButtons.left), (g.buttons & Ie.MIDDLE) === Ie.MIDDLE && (this._state = this._state | this.mouseButtons.middle), (g.buttons & Ie.RIGHT) === Ie.RIGHT && (this._state = this._state | this.mouseButtons.right), m());
    }, u = (g) => {
      const C = this._findPointerById(g.pointerId);
      if (!(C && C === this._lockedPointer)) {
        if (C && this._disposePointer(C), g.pointerType === "touch")
          switch (this._activePointers.length) {
            case 0:
              this._state = W.NONE;
              break;
            case 1:
              this._state = this.touches.one;
              break;
            case 2:
              this._state = this.touches.two;
              break;
            case 3:
              this._state = this.touches.three;
              break;
          }
        else
          this._state = W.NONE;
        E();
      }
    }, h = () => {
      const g = this._findPointerById(1);
      g && g === this._lockedPointer || (g && this._disposePointer(g), this._state = W.NONE, E());
    };
    let A = -1;
    const f = (g) => {
      if (!this._domElement || !this._enabled || this.mouseButtons.wheel === W.NONE)
        return;
      if (this._interactiveArea.left !== 0 || this._interactiveArea.top !== 0 || this._interactiveArea.width !== 1 || this._interactiveArea.height !== 1) {
        const B = this._domElement.getBoundingClientRect(), R = g.clientX / B.width, _ = g.clientY / B.height;
        if (R < this._interactiveArea.left || R > this._interactiveArea.right || _ < this._interactiveArea.top || _ > this._interactiveArea.bottom)
          return;
      }
      if (g.preventDefault(), this.dollyToCursor || this.mouseButtons.wheel === W.ROTATE || this.mouseButtons.wheel === W.TRUCK) {
        const B = performance.now();
        A - B < 1e3 && this._getClientRect(this._elementRect), A = B;
      }
      const C = rC ? -1 : -3, S = g.deltaMode === 1 ? g.deltaY / C : g.deltaY / (C * 10), x = this.dollyToCursor ? (g.clientX - this._elementRect.x) / this._elementRect.width * 2 - 1 : 0, T = this.dollyToCursor ? (g.clientY - this._elementRect.y) / this._elementRect.height * -2 + 1 : 0;
      switch (this.mouseButtons.wheel) {
        case W.ROTATE: {
          this._rotateInternal(g.deltaX, g.deltaY), this._isUserControllingRotate = true;
          break;
        }
        case W.TRUCK: {
          this._truckInternal(g.deltaX, g.deltaY, false), this._isUserControllingTruck = true;
          break;
        }
        case W.OFFSET: {
          this._truckInternal(g.deltaX, g.deltaY, true), this._isUserControllingOffset = true;
          break;
        }
        case W.DOLLY: {
          this._dollyInternal(-S, x, T), this._isUserControllingDolly = true;
          break;
        }
        case W.ZOOM: {
          this._zoomInternal(-S, x, T), this._isUserControllingZoom = true;
          break;
        }
      }
      this.dispatchEvent({ type: "control" });
    }, d = (g) => {
      if (!(!this._domElement || !this._enabled)) {
        if (this.mouseButtons.right === Ss.ACTION.NONE) {
          const C = g instanceof PointerEvent ? g.pointerId : 0, S = this._findPointerById(C);
          S && this._disposePointer(S), this._domElement.ownerDocument.removeEventListener("pointermove", l, { passive: false }), this._domElement.ownerDocument.removeEventListener("pointerup", u), this._domElement.ownerDocument.removeEventListener("mousemove", c), this._domElement.ownerDocument.removeEventListener("mouseup", h);
          return;
        }
        g.preventDefault();
      }
    }, v = (g) => {
      if (!this._enabled)
        return;
      if (dl(this._activePointers, Qt), this._getClientRect(this._elementRect), n.copy(Qt), i.copy(Qt), this._activePointers.length >= 2) {
        const S = Qt.x - this._activePointers[1].clientX, x = Qt.y - this._activePointers[1].clientY, T = Math.sqrt(S * S + x * x);
        s.set(0, T);
        const B = (this._activePointers[0].clientX + this._activePointers[1].clientX) * 0.5, R = (this._activePointers[0].clientY + this._activePointers[1].clientY) * 0.5;
        i.set(B, R);
      }
      if (this._state = 0, !g)
        this._lockedPointer && (this._state = this._state | this.mouseButtons.left);
      else if ("pointerType" in g && g.pointerType === "touch")
        switch (this._activePointers.length) {
          case 1:
            this._state = this.touches.one;
            break;
          case 2:
            this._state = this.touches.two;
            break;
          case 3:
            this._state = this.touches.three;
            break;
        }
      else
        !this._lockedPointer && (g.buttons & Ie.LEFT) === Ie.LEFT && (this._state = this._state | this.mouseButtons.left), (g.buttons & Ie.MIDDLE) === Ie.MIDDLE && (this._state = this._state | this.mouseButtons.middle), (g.buttons & Ie.RIGHT) === Ie.RIGHT && (this._state = this._state | this.mouseButtons.right);
      ((this._state & W.ROTATE) === W.ROTATE || (this._state & W.TOUCH_ROTATE) === W.TOUCH_ROTATE || (this._state & W.TOUCH_DOLLY_ROTATE) === W.TOUCH_DOLLY_ROTATE || (this._state & W.TOUCH_ZOOM_ROTATE) === W.TOUCH_ZOOM_ROTATE) && (this._sphericalEnd.theta = this._spherical.theta, this._sphericalEnd.phi = this._spherical.phi, this._thetaVelocity.value = 0, this._phiVelocity.value = 0), ((this._state & W.TRUCK) === W.TRUCK || (this._state & W.TOUCH_TRUCK) === W.TOUCH_TRUCK || (this._state & W.TOUCH_DOLLY_TRUCK) === W.TOUCH_DOLLY_TRUCK || (this._state & W.TOUCH_ZOOM_TRUCK) === W.TOUCH_ZOOM_TRUCK) && (this._targetEnd.copy(this._target), this._targetVelocity.set(0, 0, 0)), ((this._state & W.DOLLY) === W.DOLLY || (this._state & W.TOUCH_DOLLY) === W.TOUCH_DOLLY || (this._state & W.TOUCH_DOLLY_TRUCK) === W.TOUCH_DOLLY_TRUCK || (this._state & W.TOUCH_DOLLY_OFFSET) === W.TOUCH_DOLLY_OFFSET || (this._state & W.TOUCH_DOLLY_ROTATE) === W.TOUCH_DOLLY_ROTATE) && (this._sphericalEnd.radius = this._spherical.radius, this._radiusVelocity.value = 0), ((this._state & W.ZOOM) === W.ZOOM || (this._state & W.TOUCH_ZOOM) === W.TOUCH_ZOOM || (this._state & W.TOUCH_ZOOM_TRUCK) === W.TOUCH_ZOOM_TRUCK || (this._state & W.TOUCH_ZOOM_OFFSET) === W.TOUCH_ZOOM_OFFSET || (this._state & W.TOUCH_ZOOM_ROTATE) === W.TOUCH_ZOOM_ROTATE) && (this._zoomEnd = this._zoom, this._zoomVelocity.value = 0), ((this._state & W.OFFSET) === W.OFFSET || (this._state & W.TOUCH_OFFSET) === W.TOUCH_OFFSET || (this._state & W.TOUCH_DOLLY_OFFSET) === W.TOUCH_DOLLY_OFFSET || (this._state & W.TOUCH_ZOOM_OFFSET) === W.TOUCH_ZOOM_OFFSET) && (this._focalOffsetEnd.copy(this._focalOffset), this._focalOffsetVelocity.set(0, 0, 0)), this.dispatchEvent({ type: "controlstart" });
    }, m = () => {
      if (!this._enabled)
        return;
      dl(this._activePointers, Qt);
      const C = this._domElement && document.pointerLockElement === this._domElement ? this._lockedPointer || this._activePointers[0] : null, S = C ? -C.deltaX : i.x - Qt.x, x = C ? -C.deltaY : i.y - Qt.y;
      if (i.copy(Qt), ((this._state & W.ROTATE) === W.ROTATE || (this._state & W.TOUCH_ROTATE) === W.TOUCH_ROTATE || (this._state & W.TOUCH_DOLLY_ROTATE) === W.TOUCH_DOLLY_ROTATE || (this._state & W.TOUCH_ZOOM_ROTATE) === W.TOUCH_ZOOM_ROTATE) && (this._rotateInternal(S, x), this._isUserControllingRotate = true), (this._state & W.DOLLY) === W.DOLLY || (this._state & W.ZOOM) === W.ZOOM) {
        const T = this.dollyToCursor ? (n.x - this._elementRect.x) / this._elementRect.width * 2 - 1 : 0, B = this.dollyToCursor ? (n.y - this._elementRect.y) / this._elementRect.height * -2 + 1 : 0, R = this.dollyDragInverted ? -1 : 1;
        (this._state & W.DOLLY) === W.DOLLY ? (this._dollyInternal(R * x * pa, T, B), this._isUserControllingDolly = true) : (this._zoomInternal(R * x * pa, T, B), this._isUserControllingZoom = true);
      }
      if ((this._state & W.TOUCH_DOLLY) === W.TOUCH_DOLLY || (this._state & W.TOUCH_ZOOM) === W.TOUCH_ZOOM || (this._state & W.TOUCH_DOLLY_TRUCK) === W.TOUCH_DOLLY_TRUCK || (this._state & W.TOUCH_ZOOM_TRUCK) === W.TOUCH_ZOOM_TRUCK || (this._state & W.TOUCH_DOLLY_OFFSET) === W.TOUCH_DOLLY_OFFSET || (this._state & W.TOUCH_ZOOM_OFFSET) === W.TOUCH_ZOOM_OFFSET || (this._state & W.TOUCH_DOLLY_ROTATE) === W.TOUCH_DOLLY_ROTATE || (this._state & W.TOUCH_ZOOM_ROTATE) === W.TOUCH_ZOOM_ROTATE) {
        const T = Qt.x - this._activePointers[1].clientX, B = Qt.y - this._activePointers[1].clientY, R = Math.sqrt(T * T + B * B), _ = s.y - R;
        s.set(0, R);
        const F = this.dollyToCursor ? (i.x - this._elementRect.x) / this._elementRect.width * 2 - 1 : 0, U = this.dollyToCursor ? (i.y - this._elementRect.y) / this._elementRect.height * -2 + 1 : 0;
        (this._state & W.TOUCH_DOLLY) === W.TOUCH_DOLLY || (this._state & W.TOUCH_DOLLY_ROTATE) === W.TOUCH_DOLLY_ROTATE || (this._state & W.TOUCH_DOLLY_TRUCK) === W.TOUCH_DOLLY_TRUCK || (this._state & W.TOUCH_DOLLY_OFFSET) === W.TOUCH_DOLLY_OFFSET ? (this._dollyInternal(_ * pa, F, U), this._isUserControllingDolly = true) : (this._zoomInternal(_ * pa, F, U), this._isUserControllingZoom = true);
      }
      ((this._state & W.TRUCK) === W.TRUCK || (this._state & W.TOUCH_TRUCK) === W.TOUCH_TRUCK || (this._state & W.TOUCH_DOLLY_TRUCK) === W.TOUCH_DOLLY_TRUCK || (this._state & W.TOUCH_ZOOM_TRUCK) === W.TOUCH_ZOOM_TRUCK) && (this._truckInternal(S, x, false), this._isUserControllingTruck = true), ((this._state & W.OFFSET) === W.OFFSET || (this._state & W.TOUCH_OFFSET) === W.TOUCH_OFFSET || (this._state & W.TOUCH_DOLLY_OFFSET) === W.TOUCH_DOLLY_OFFSET || (this._state & W.TOUCH_ZOOM_OFFSET) === W.TOUCH_ZOOM_OFFSET) && (this._truckInternal(S, x, true), this._isUserControllingOffset = true), this.dispatchEvent({ type: "control" });
    }, E = () => {
      dl(this._activePointers, Qt), i.copy(Qt), (this._activePointers.length === 0 || this._activePointers.length === 1 && this._activePointers[0] === this._lockedPointer) && (this._isDragging = false), this._activePointers.length === 0 && this._domElement && (this._domElement.ownerDocument.removeEventListener("pointermove", l, { passive: false }), this._domElement.ownerDocument.removeEventListener("mousemove", c), this._domElement.ownerDocument.removeEventListener("pointerup", u), this._domElement.ownerDocument.removeEventListener("mouseup", h), this.dispatchEvent({ type: "controlend" }));
    };
    this.lockPointer = () => {
      !this._enabled || !this._domElement || (this.cancel(), this._lockedPointer = {
        pointerId: -1,
        clientX: 0,
        clientY: 0,
        deltaX: 0,
        deltaY: 0,
        mouseButton: null
      }, this._activePointers.push(this._lockedPointer), this._domElement.ownerDocument.removeEventListener("pointermove", l, { passive: false }), this._domElement.ownerDocument.removeEventListener("pointerup", u), this._domElement.requestPointerLock(), this._domElement.ownerDocument.addEventListener("pointerlockchange", y), this._domElement.ownerDocument.addEventListener("pointerlockerror", p), this._domElement.ownerDocument.addEventListener("pointermove", l, { passive: false }), this._domElement.ownerDocument.addEventListener("pointerup", u), v());
    }, this.unlockPointer = () => {
      this._lockedPointer !== null && (this._disposePointer(this._lockedPointer), this._lockedPointer = null), document.exitPointerLock(), this.cancel(), this._domElement && (this._domElement.ownerDocument.removeEventListener("pointerlockchange", y), this._domElement.ownerDocument.removeEventListener("pointerlockerror", p));
    };
    const y = () => {
      this._domElement && this._domElement.ownerDocument.pointerLockElement === this._domElement || this.unlockPointer();
    }, p = () => {
      this.unlockPointer();
    };
    this._addAllEventListeners = (g) => {
      this._domElement = g, this._domElement.style.touchAction = "none", this._domElement.style.userSelect = "none", this._domElement.style.webkitUserSelect = "none", this._domElement.addEventListener("pointerdown", a), nC && this._domElement.addEventListener("mousedown", o), this._domElement.addEventListener("pointercancel", u), this._domElement.addEventListener("wheel", f, { passive: false }), this._domElement.addEventListener("contextmenu", d);
    }, this._removeAllEventListeners = () => {
      this._domElement && (this._domElement.style.touchAction = "", this._domElement.style.userSelect = "", this._domElement.style.webkitUserSelect = "", this._domElement.removeEventListener("pointerdown", a), this._domElement.removeEventListener("mousedown", o), this._domElement.removeEventListener("pointercancel", u), this._domElement.removeEventListener("wheel", f, { passive: false }), this._domElement.removeEventListener("contextmenu", d), this._domElement.ownerDocument.removeEventListener("pointermove", l, { passive: false }), this._domElement.ownerDocument.removeEventListener("mousemove", c), this._domElement.ownerDocument.removeEventListener("pointerup", u), this._domElement.ownerDocument.removeEventListener("mouseup", h), this._domElement.ownerDocument.removeEventListener("pointerlockchange", y), this._domElement.ownerDocument.removeEventListener("pointerlockerror", p));
    }, this.cancel = () => {
      this._state !== W.NONE && (this._state = W.NONE, this._activePointers.length = 0, E());
    }, r && this.connect(r), this.update(0);
  }
  /**
   * The camera to be controlled
   * @category Properties
   */
  get camera() {
    return this._camera;
  }
  set camera(e) {
    this._camera = e, this.updateCameraUp(), this._camera.updateProjectionMatrix(), this._updateNearPlaneCorners(), this._needsUpdate = true;
  }
  /**
   * Whether or not the controls are enabled.
   * `false` to disable user dragging/touch-move, but all methods works.
   * @category Properties
   */
  get enabled() {
    return this._enabled;
  }
  set enabled(e) {
    this._enabled = e, this._domElement && (e ? (this._domElement.style.touchAction = "none", this._domElement.style.userSelect = "none", this._domElement.style.webkitUserSelect = "none") : (this.cancel(), this._domElement.style.touchAction = "", this._domElement.style.userSelect = "", this._domElement.style.webkitUserSelect = ""));
  }
  /**
   * Returns `true` if the controls are active updating.
   * readonly value.
   * @category Properties
   */
  get active() {
    return !this._hasRested;
  }
  /**
   * Getter for the current `ACTION`.
   * readonly value.
   * @category Properties
   */
  get currentAction() {
    return this._state;
  }
  /**
   * get/set Current distance.
   * @category Properties
   */
  get distance() {
    return this._spherical.radius;
  }
  set distance(e) {
    this._spherical.radius === e && this._sphericalEnd.radius === e || (this._spherical.radius = e, this._sphericalEnd.radius = e, this._needsUpdate = true);
  }
  // horizontal angle
  /**
   * get/set the azimuth angle (horizontal) in radians.
   * Every 360 degrees turn is added to `.azimuthAngle` value, which is accumulative.
   * @category Properties
   */
  get azimuthAngle() {
    return this._spherical.theta;
  }
  set azimuthAngle(e) {
    this._spherical.theta === e && this._sphericalEnd.theta === e || (this._spherical.theta = e, this._sphericalEnd.theta = e, this._needsUpdate = true);
  }
  // vertical angle
  /**
   * get/set the polar angle (vertical) in radians.
   * @category Properties
   */
  get polarAngle() {
    return this._spherical.phi;
  }
  set polarAngle(e) {
    this._spherical.phi === e && this._sphericalEnd.phi === e || (this._spherical.phi = e, this._sphericalEnd.phi = e, this._needsUpdate = true);
  }
  /**
   * Whether camera position should be enclosed in the boundary or not.
   * @category Properties
   */
  get boundaryEnclosesCamera() {
    return this._boundaryEnclosesCamera;
  }
  set boundaryEnclosesCamera(e) {
    this._boundaryEnclosesCamera = e, this._needsUpdate = true;
  }
  /**
   * Set drag-start, touches and wheel enable area in the domElement.
   * each values are between `0` and `1` inclusive, where `0` is left/top and `1` is right/bottom of the screen.
   * e.g. `{ x: 0, y: 0, width: 1, height: 1 }` for entire area.
   * @category Properties
   */
  set interactiveArea(e) {
    this._interactiveArea.width = yr(e.width, 0, 1), this._interactiveArea.height = yr(e.height, 0, 1), this._interactiveArea.x = yr(e.x, 0, 1 - this._interactiveArea.width), this._interactiveArea.y = yr(e.x, 0, 1 - this._interactiveArea.height);
  }
  /**
   * Adds the specified event listener.
   * Applicable event types (which is `K`) are:
   * | Event name          | Timing |
   * | ------------------- | ------ |
   * | `'controlstart'`    | When the user starts to control the camera via mouse / touches. ¹ |
   * | `'control'`         | When the user controls the camera (dragging). |
   * | `'controlend'`      | When the user ends to control the camera. ¹ |
   * | `'transitionstart'` | When any kind of transition starts, either user control or using a method with `enableTransition = true` |
   * | `'update'`          | When the camera position is updated. |
   * | `'wake'`            | When the camera starts moving. |
   * | `'rest'`            | When the camera movement is below `.restThreshold` ². |
   * | `'sleep'`           | When the camera end moving. |
   *
   * 1. `mouseButtons.wheel` (Mouse wheel control) does not emit `'controlstart'` and `'controlend'`. `mouseButtons.wheel` uses scroll-event internally, and scroll-event happens intermittently. That means "start" and "end" cannot be detected.
   * 2. Due to damping, `sleep` will usually fire a few seconds after the camera _appears_ to have stopped moving. If you want to do something (e.g. enable UI, perform another transition) at the point when the camera has stopped, you probably want the `rest` event. This can be fine tuned using the `.restThreshold` parameter. See the [Rest and Sleep Example](https://yomotsu.github.io/camera-controls/examples/rest-and-sleep.html).
   *
   * e.g.
   * ```
   * cameraControl.addEventListener( 'controlstart', myCallbackFunction );
   * ```
   * @param type event name
   * @param listener handler function
   * @category Methods
   */
  addEventListener(e, r) {
    super.addEventListener(e, r);
  }
  /**
   * Removes the specified event listener
   * e.g.
   * ```
   * cameraControl.addEventListener( 'controlstart', myCallbackFunction );
   * ```
   * @param type event name
   * @param listener handler function
   * @category Methods
   */
  removeEventListener(e, r) {
    super.removeEventListener(e, r);
  }
  /**
   * Rotate azimuthal angle(horizontal) and polar angle(vertical).
   * Every value is added to the current value.
   * @param azimuthAngle Azimuth rotate angle. In radian.
   * @param polarAngle Polar rotate angle. In radian.
   * @param enableTransition Whether to move smoothly or immediately
   * @category Methods
   */
  rotate(e, r, n = false) {
    return this.rotateTo(this._sphericalEnd.theta + e, this._sphericalEnd.phi + r, n);
  }
  /**
   * Rotate azimuthal angle(horizontal) to the given angle and keep the same polar angle(vertical) target.
   *
   * e.g.
   * ```
   * cameraControls.rotateAzimuthTo( 30 * THREE.MathUtils.DEG2RAD, true );
   * ```
   * @param azimuthAngle Azimuth rotate angle. In radian.
   * @param enableTransition Whether to move smoothly or immediately
   * @category Methods
   */
  rotateAzimuthTo(e, r = false) {
    return this.rotateTo(e, this._sphericalEnd.phi, r);
  }
  /**
   * Rotate polar angle(vertical) to the given angle and keep the same azimuthal angle(horizontal) target.
   *
   * e.g.
   * ```
   * cameraControls.rotatePolarTo( 30 * THREE.MathUtils.DEG2RAD, true );
   * ```
   * @param polarAngle Polar rotate angle. In radian.
   * @param enableTransition Whether to move smoothly or immediately
   * @category Methods
   */
  rotatePolarTo(e, r = false) {
    return this.rotateTo(this._sphericalEnd.theta, e, r);
  }
  /**
   * Rotate azimuthal angle(horizontal) and polar angle(vertical) to the given angle.
   * Camera view will rotate over the orbit pivot absolutely:
   *
   * azimuthAngle
   * ```
   *       0º
   *         \
   * 90º -----+----- -90º
   *           \
   *           180º
   * ```
   * | direction | angle                  |
   * | --------- | ---------------------- |
   * | front     | 0º                     |
   * | left      | 90º (`Math.PI / 2`)    |
   * | right     | -90º (`- Math.PI / 2`) |
   * | back      | 180º (`Math.PI`)       |
   *
   * polarAngle
   * ```
   *     180º
   *      |
   *      90º
   *      |
   *      0º
   * ```
   * | direction            | angle                  |
   * | -------------------- | ---------------------- |
   * | top/sky              | 180º (`Math.PI`)       |
   * | horizontal from view | 90º (`Math.PI / 2`)    |
   * | bottom/floor         | 0º                     |
   *
   * @param azimuthAngle Azimuth rotate angle to. In radian.
   * @param polarAngle Polar rotate angle to. In radian.
   * @param enableTransition  Whether to move smoothly or immediately
   * @category Methods
   */
  rotateTo(e, r, n = false) {
    this._isUserControllingRotate = false;
    const i = yr(e, this.minAzimuthAngle, this.maxAzimuthAngle), s = yr(r, this.minPolarAngle, this.maxPolarAngle);
    this._sphericalEnd.theta = i, this._sphericalEnd.phi = s, this._sphericalEnd.makeSafe(), this._needsUpdate = true, n || (this._spherical.theta = this._sphericalEnd.theta, this._spherical.phi = this._sphericalEnd.phi);
    const a = !n || He(this._spherical.theta, this._sphericalEnd.theta, this.restThreshold) && He(this._spherical.phi, this._sphericalEnd.phi, this.restThreshold);
    return this._createOnRestPromise(a);
  }
  /**
   * Dolly in/out camera position.
   * @param distance Distance of dollyIn. Negative number for dollyOut.
   * @param enableTransition Whether to move smoothly or immediately.
   * @category Methods
   */
  dolly(e, r = false) {
    return this.dollyTo(this._sphericalEnd.radius - e, r);
  }
  /**
   * Dolly in/out camera position to given distance.
   * @param distance Distance of dolly.
   * @param enableTransition Whether to move smoothly or immediately.
   * @category Methods
   */
  dollyTo(e, r = false) {
    return this._isUserControllingDolly = false, this._lastDollyDirection = xi.NONE, this._changedDolly = 0, this._dollyToNoClamp(yr(e, this.minDistance, this.maxDistance), r);
  }
  _dollyToNoClamp(e, r = false) {
    const n = this._sphericalEnd.radius;
    if (this.colliderMeshes.length >= 1) {
      const a = this._collisionTest(), o = He(a, this._spherical.radius);
      if (!(n > e) && o)
        return Promise.resolve();
      this._sphericalEnd.radius = Math.min(e, a);
    } else
      this._sphericalEnd.radius = e;
    this._needsUpdate = true, r || (this._spherical.radius = this._sphericalEnd.radius);
    const s = !r || He(this._spherical.radius, this._sphericalEnd.radius, this.restThreshold);
    return this._createOnRestPromise(s);
  }
  /**
   * Dolly in, but does not change the distance between the target and the camera, and moves the target position instead.
   * Specify a negative value for dolly out.
   * @param distance Distance of dolly.
   * @param enableTransition Whether to move smoothly or immediately.
   * @category Methods
   */
  dollyInFixed(e, r = false) {
    this._targetEnd.add(this._getCameraDirection(Ji).multiplyScalar(e)), r || this._target.copy(this._targetEnd);
    const n = !r || He(this._target.x, this._targetEnd.x, this.restThreshold) && He(this._target.y, this._targetEnd.y, this.restThreshold) && He(this._target.z, this._targetEnd.z, this.restThreshold);
    return this._createOnRestPromise(n);
  }
  /**
   * Zoom in/out camera. The value is added to camera zoom.
   * Limits set with `.minZoom` and `.maxZoom`
   * @param zoomStep zoom scale
   * @param enableTransition Whether to move smoothly or immediately
   * @category Methods
   */
  zoom(e, r = false) {
    return this.zoomTo(this._zoomEnd + e, r);
  }
  /**
   * Zoom in/out camera to given scale. The value overwrites camera zoom.
   * Limits set with .minZoom and .maxZoom
   * @param zoom
   * @param enableTransition
   * @category Methods
   */
  zoomTo(e, r = false) {
    this._isUserControllingZoom = false, this._zoomEnd = yr(e, this.minZoom, this.maxZoom), this._needsUpdate = true, r || (this._zoom = this._zoomEnd);
    const n = !r || He(this._zoom, this._zoomEnd, this.restThreshold);
    return this._changedZoom = 0, this._createOnRestPromise(n);
  }
  /**
   * @deprecated `pan()` has been renamed to `truck()`
   * @category Methods
   */
  pan(e, r, n = false) {
    return console.warn("`pan` has been renamed to `truck`"), this.truck(e, r, n);
  }
  /**
   * Truck and pedestal camera using current azimuthal angle
   * @param x Horizontal translate amount
   * @param y Vertical translate amount
   * @param enableTransition Whether to move smoothly or immediately
   * @category Methods
   */
  truck(e, r, n = false) {
    this._camera.updateMatrix(), Fr.setFromMatrixColumn(this._camera.matrix, 0), Lr.setFromMatrixColumn(this._camera.matrix, 1), Fr.multiplyScalar(e), Lr.multiplyScalar(-r);
    const i = Me.copy(Fr).add(Lr), s = Ue.copy(this._targetEnd).add(i);
    return this.moveTo(s.x, s.y, s.z, n);
  }
  /**
   * Move forward / backward.
   * @param distance Amount to move forward / backward. Negative value to move backward
   * @param enableTransition Whether to move smoothly or immediately
   * @category Methods
   */
  forward(e, r = false) {
    Me.setFromMatrixColumn(this._camera.matrix, 0), Me.crossVectors(this._camera.up, Me), Me.multiplyScalar(e);
    const n = Ue.copy(this._targetEnd).add(Me);
    return this.moveTo(n.x, n.y, n.z, r);
  }
  /**
   * Move up / down.
   * @param height Amount to move up / down. Negative value to move down
   * @param enableTransition Whether to move smoothly or immediately
   * @category Methods
   */
  elevate(e, r = false) {
    return Me.copy(this._camera.up).multiplyScalar(e), this.moveTo(this._targetEnd.x + Me.x, this._targetEnd.y + Me.y, this._targetEnd.z + Me.z, r);
  }
  /**
   * Move target position to given point.
   * @param x x coord to move center position
   * @param y y coord to move center position
   * @param z z coord to move center position
   * @param enableTransition Whether to move smoothly or immediately
   * @category Methods
   */
  moveTo(e, r, n, i = false) {
    this._isUserControllingTruck = false;
    const s = Me.set(e, r, n).sub(this._targetEnd);
    this._encloseToBoundary(this._targetEnd, s, this.boundaryFriction), this._needsUpdate = true, i || this._target.copy(this._targetEnd);
    const a = !i || He(this._target.x, this._targetEnd.x, this.restThreshold) && He(this._target.y, this._targetEnd.y, this.restThreshold) && He(this._target.z, this._targetEnd.z, this.restThreshold);
    return this._createOnRestPromise(a);
  }
  /**
   * Look in the given point direction.
   * @param x point x.
   * @param y point y.
   * @param z point z.
   * @param enableTransition Whether to move smoothly or immediately.
   * @returns Transition end promise
   * @category Methods
   */
  lookInDirectionOf(e, r, n, i = false) {
    const o = Me.set(e, r, n).sub(this._targetEnd).normalize().multiplyScalar(-this._sphericalEnd.radius);
    return this.setPosition(o.x, o.y, o.z, i);
  }
  /**
   * Fit the viewport to the box or the bounding box of the object, using the nearest axis. paddings are in unit.
   * set `cover: true` to fill enter screen.
   * e.g.
   * ```
   * cameraControls.fitToBox( myMesh );
   * ```
   * @param box3OrObject Axis aligned bounding box to fit the view.
   * @param enableTransition Whether to move smoothly or immediately.
   * @param options | `<object>` { cover: boolean, paddingTop: number, paddingLeft: number, paddingBottom: number, paddingRight: number }
   * @returns Transition end promise
   * @category Methods
   */
  fitToBox(e, r, { cover: n = false, paddingLeft: i = 0, paddingRight: s = 0, paddingBottom: a = 0, paddingTop: o = 0 } = {}) {
    const l = [], c = e.isBox3 ? wi.copy(e) : wi.setFromObject(e);
    c.isEmpty() && (console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"), Promise.resolve());
    const u = vu(this._sphericalEnd.theta, mu), h = vu(this._sphericalEnd.phi, mu);
    l.push(this.rotateTo(u, h, r));
    const A = Me.setFromSpherical(this._sphericalEnd).normalize(), f = Tu.setFromUnitVectors(A, ml), d = He(Math.abs(A.y), 1);
    d && f.multiply(yl.setFromAxisAngle(da, u)), f.multiply(this._yAxisUpSpaceInverse);
    const v = xu.makeEmpty();
    Ue.copy(c.min).applyQuaternion(f), v.expandByPoint(Ue), Ue.copy(c.min).setX(c.max.x).applyQuaternion(f), v.expandByPoint(Ue), Ue.copy(c.min).setY(c.max.y).applyQuaternion(f), v.expandByPoint(Ue), Ue.copy(c.max).setZ(c.min.z).applyQuaternion(f), v.expandByPoint(Ue), Ue.copy(c.min).setZ(c.max.z).applyQuaternion(f), v.expandByPoint(Ue), Ue.copy(c.max).setY(c.min.y).applyQuaternion(f), v.expandByPoint(Ue), Ue.copy(c.max).setX(c.min.x).applyQuaternion(f), v.expandByPoint(Ue), Ue.copy(c.max).applyQuaternion(f), v.expandByPoint(Ue), v.min.x -= i, v.min.y -= a, v.max.x += s, v.max.y += o, f.setFromUnitVectors(ml, A), d && f.premultiply(yl.invert()), f.premultiply(this._yAxisUpSpace);
    const m = v.getSize(Me), E = v.getCenter(Ue).applyQuaternion(f);
    if ($n(this._camera)) {
      const y = this.getDistanceToFitBox(m.x, m.y, m.z, n);
      l.push(this.moveTo(E.x, E.y, E.z, r)), l.push(this.dollyTo(y, r)), l.push(this.setFocalOffset(0, 0, 0, r));
    } else if (bn(this._camera)) {
      const y = this._camera, p = y.right - y.left, g = y.top - y.bottom, C = n ? Math.max(p / m.x, g / m.y) : Math.min(p / m.x, g / m.y);
      l.push(this.moveTo(E.x, E.y, E.z, r)), l.push(this.zoomTo(C, r)), l.push(this.setFocalOffset(0, 0, 0, r));
    }
    return Promise.all(l);
  }
  /**
   * Fit the viewport to the sphere or the bounding sphere of the object.
   * @param sphereOrMesh
   * @param enableTransition
   * @category Methods
   */
  fitToSphere(e, r) {
    const n = [], s = e instanceof me.Sphere ? vl.copy(e) : Ss.createBoundingSphere(e, vl);
    if (n.push(this.moveTo(s.center.x, s.center.y, s.center.z, r)), $n(this._camera)) {
      const a = this.getDistanceToFitSphere(s.radius);
      n.push(this.dollyTo(a, r));
    } else if (bn(this._camera)) {
      const a = this._camera.right - this._camera.left, o = this._camera.top - this._camera.bottom, l = 2 * s.radius, c = Math.min(a / l, o / l);
      n.push(this.zoomTo(c, r));
    }
    return n.push(this.setFocalOffset(0, 0, 0, r)), Promise.all(n);
  }
  /**
   * Look at the `target` from the `position`.
   * @param positionX
   * @param positionY
   * @param positionZ
   * @param targetX
   * @param targetY
   * @param targetZ
   * @param enableTransition
   * @category Methods
   */
  setLookAt(e, r, n, i, s, a, o = false) {
    this._isUserControllingRotate = false, this._isUserControllingDolly = false, this._isUserControllingTruck = false, this._lastDollyDirection = xi.NONE, this._changedDolly = 0;
    const l = Ue.set(i, s, a), c = Me.set(e, r, n);
    this._targetEnd.copy(l), this._sphericalEnd.setFromVector3(c.sub(l).applyQuaternion(this._yAxisUpSpace)), this.normalizeRotations(), this._needsUpdate = true, o || (this._target.copy(this._targetEnd), this._spherical.copy(this._sphericalEnd));
    const u = !o || He(this._target.x, this._targetEnd.x, this.restThreshold) && He(this._target.y, this._targetEnd.y, this.restThreshold) && He(this._target.z, this._targetEnd.z, this.restThreshold) && He(this._spherical.theta, this._sphericalEnd.theta, this.restThreshold) && He(this._spherical.phi, this._sphericalEnd.phi, this.restThreshold) && He(this._spherical.radius, this._sphericalEnd.radius, this.restThreshold);
    return this._createOnRestPromise(u);
  }
  /**
   * Similar to setLookAt, but it interpolates between two states.
   * @param positionAX
   * @param positionAY
   * @param positionAZ
   * @param targetAX
   * @param targetAY
   * @param targetAZ
   * @param positionBX
   * @param positionBY
   * @param positionBZ
   * @param targetBX
   * @param targetBY
   * @param targetBZ
   * @param t
   * @param enableTransition
   * @category Methods
   */
  lerpLookAt(e, r, n, i, s, a, o, l, c, u, h, A, f, d = false) {
    this._isUserControllingRotate = false, this._isUserControllingDolly = false, this._isUserControllingTruck = false, this._lastDollyDirection = xi.NONE, this._changedDolly = 0;
    const v = Me.set(i, s, a), m = Ue.set(e, r, n);
    tr.setFromVector3(m.sub(v).applyQuaternion(this._yAxisUpSpace));
    const E = Si.set(u, h, A), y = Ue.set(o, l, c);
    es.setFromVector3(y.sub(E).applyQuaternion(this._yAxisUpSpace)), this._targetEnd.copy(v.lerp(E, f));
    const p = es.theta - tr.theta, g = es.phi - tr.phi, C = es.radius - tr.radius;
    this._sphericalEnd.set(tr.radius + C * f, tr.phi + g * f, tr.theta + p * f), this.normalizeRotations(), this._needsUpdate = true, d || (this._target.copy(this._targetEnd), this._spherical.copy(this._sphericalEnd));
    const S = !d || He(this._target.x, this._targetEnd.x, this.restThreshold) && He(this._target.y, this._targetEnd.y, this.restThreshold) && He(this._target.z, this._targetEnd.z, this.restThreshold) && He(this._spherical.theta, this._sphericalEnd.theta, this.restThreshold) && He(this._spherical.phi, this._sphericalEnd.phi, this.restThreshold) && He(this._spherical.radius, this._sphericalEnd.radius, this.restThreshold);
    return this._createOnRestPromise(S);
  }
  /**
   * Set angle and distance by given position.
   * An alias of `setLookAt()`, without target change. Thus keep gazing at the current target
   * @param positionX
   * @param positionY
   * @param positionZ
   * @param enableTransition
   * @category Methods
   */
  setPosition(e, r, n, i = false) {
    return this.setLookAt(e, r, n, this._targetEnd.x, this._targetEnd.y, this._targetEnd.z, i);
  }
  /**
   * Set the target position where gaze at.
   * An alias of `setLookAt()`, without position change. Thus keep the same position.
   * @param targetX
   * @param targetY
   * @param targetZ
   * @param enableTransition
   * @category Methods
   */
  setTarget(e, r, n, i = false) {
    const s = this.getPosition(Me), a = this.setLookAt(s.x, s.y, s.z, e, r, n, i);
    return this._sphericalEnd.phi = yr(this._sphericalEnd.phi, this.minPolarAngle, this.maxPolarAngle), a;
  }
  /**
   * Set focal offset using the screen parallel coordinates. z doesn't affect in Orthographic as with Dolly.
   * @param x
   * @param y
   * @param z
   * @param enableTransition
   * @category Methods
   */
  setFocalOffset(e, r, n, i = false) {
    this._isUserControllingOffset = false, this._focalOffsetEnd.set(e, r, n), this._needsUpdate = true, i || this._focalOffset.copy(this._focalOffsetEnd);
    const s = !i || He(this._focalOffset.x, this._focalOffsetEnd.x, this.restThreshold) && He(this._focalOffset.y, this._focalOffsetEnd.y, this.restThreshold) && He(this._focalOffset.z, this._focalOffsetEnd.z, this.restThreshold);
    return this._createOnRestPromise(s);
  }
  /**
   * Set orbit point without moving the camera.
   * SHOULD NOT RUN DURING ANIMATIONS. `setOrbitPoint()` will immediately fix the positions.
   * @param targetX
   * @param targetY
   * @param targetZ
   * @category Methods
   */
  setOrbitPoint(e, r, n) {
    this._camera.updateMatrixWorld(), Fr.setFromMatrixColumn(this._camera.matrixWorldInverse, 0), Lr.setFromMatrixColumn(this._camera.matrixWorldInverse, 1), Zn.setFromMatrixColumn(this._camera.matrixWorldInverse, 2);
    const i = Me.set(e, r, n), s = i.distanceTo(this._camera.position), a = i.sub(this._camera.position);
    Fr.multiplyScalar(a.x), Lr.multiplyScalar(a.y), Zn.multiplyScalar(a.z), Me.copy(Fr).add(Lr).add(Zn), Me.z = Me.z + s, this.dollyTo(s, false), this.setFocalOffset(-Me.x, Me.y, -Me.z, false), this.moveTo(e, r, n, false);
  }
  /**
   * Set the boundary box that encloses the target of the camera. box3 is in THREE.Box3
   * @param box3
   * @category Methods
   */
  setBoundary(e) {
    if (!e) {
      this._boundary.min.set(-1 / 0, -1 / 0, -1 / 0), this._boundary.max.set(1 / 0, 1 / 0, 1 / 0), this._needsUpdate = true;
      return;
    }
    this._boundary.copy(e), this._boundary.clampPoint(this._targetEnd, this._targetEnd), this._needsUpdate = true;
  }
  /**
   * Set (or unset) the current viewport.
   * Set this when you want to use renderer viewport and .dollyToCursor feature at the same time.
   * @param viewportOrX
   * @param y
   * @param width
   * @param height
   * @category Methods
   */
  setViewport(e, r, n, i) {
    if (e === null) {
      this._viewport = null;
      return;
    }
    this._viewport = this._viewport || new me.Vector4(), typeof e == "number" ? this._viewport.set(e, r, n, i) : this._viewport.copy(e);
  }
  /**
   * Calculate the distance to fit the box.
   * @param width box width
   * @param height box height
   * @param depth box depth
   * @returns distance
   * @category Methods
   */
  getDistanceToFitBox(e, r, n, i = false) {
    if (gl(this._camera, "getDistanceToFitBox"))
      return this._spherical.radius;
    const s = e / r, a = this._camera.getEffectiveFOV() * Xi, o = this._camera.aspect;
    return ((i ? s > o : s < o) ? r : e / o) * 0.5 / Math.tan(a * 0.5) + n * 0.5;
  }
  /**
   * Calculate the distance to fit the sphere.
   * @param radius sphere radius
   * @returns distance
   * @category Methods
   */
  getDistanceToFitSphere(e) {
    if (gl(this._camera, "getDistanceToFitSphere"))
      return this._spherical.radius;
    const r = this._camera.getEffectiveFOV() * Xi, n = Math.atan(Math.tan(r * 0.5) * this._camera.aspect) * 2, i = 1 < this._camera.aspect ? r : n;
    return e / Math.sin(i * 0.5);
  }
  /**
   * Returns the orbit center position, where the camera looking at.
   * @param out The receiving Vector3 instance to copy the result
   * @param receiveEndValue Whether receive the transition end coords or current. default is `true`
   * @category Methods
   */
  getTarget(e, r = true) {
    return (e && e.isVector3 ? e : new me.Vector3()).copy(r ? this._targetEnd : this._target);
  }
  /**
   * Returns the camera position.
   * @param out The receiving Vector3 instance to copy the result
   * @param receiveEndValue Whether receive the transition end coords or current. default is `true`
   * @category Methods
   */
  getPosition(e, r = true) {
    return (e && e.isVector3 ? e : new me.Vector3()).setFromSpherical(r ? this._sphericalEnd : this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(r ? this._targetEnd : this._target);
  }
  /**
   * Returns the spherical coordinates of the orbit.
   * @param out The receiving Spherical instance to copy the result
   * @param receiveEndValue Whether receive the transition end coords or current. default is `true`
   * @category Methods
   */
  getSpherical(e, r = true) {
    return (e && e instanceof me.Spherical ? e : new me.Spherical()).copy(r ? this._sphericalEnd : this._spherical);
  }
  /**
   * Returns the focal offset, which is how much the camera appears to be translated in screen parallel coordinates.
   * @param out The receiving Vector3 instance to copy the result
   * @param receiveEndValue Whether receive the transition end coords or current. default is `true`
   * @category Methods
   */
  getFocalOffset(e, r = true) {
    return (e && e.isVector3 ? e : new me.Vector3()).copy(r ? this._focalOffsetEnd : this._focalOffset);
  }
  /**
   * Normalize camera azimuth angle rotation between 0 and 360 degrees.
   * @category Methods
   */
  normalizeRotations() {
    this._sphericalEnd.theta = this._sphericalEnd.theta % Ti, this._sphericalEnd.theta < 0 && (this._sphericalEnd.theta += Ti), this._spherical.theta += Ti * Math.round((this._sphericalEnd.theta - this._spherical.theta) / Ti);
  }
  /**
   * Reset all rotation and position to defaults.
   * @param enableTransition
   * @category Methods
   */
  reset(e = false) {
    if (!He(this._camera.up.x, this._cameraUp0.x) || !He(this._camera.up.y, this._cameraUp0.y) || !He(this._camera.up.z, this._cameraUp0.z)) {
      this._camera.up.copy(this._cameraUp0);
      const n = this.getPosition(Me);
      this.updateCameraUp(), this.setPosition(n.x, n.y, n.z);
    }
    const r = [
      this.setLookAt(this._position0.x, this._position0.y, this._position0.z, this._target0.x, this._target0.y, this._target0.z, e),
      this.setFocalOffset(this._focalOffset0.x, this._focalOffset0.y, this._focalOffset0.z, e),
      this.zoomTo(this._zoom0, e)
    ];
    return Promise.all(r);
  }
  /**
   * Set current camera position as the default position.
   * @category Methods
   */
  saveState() {
    this._cameraUp0.copy(this._camera.up), this.getTarget(this._target0), this.getPosition(this._position0), this._zoom0 = this._zoom, this._focalOffset0.copy(this._focalOffset);
  }
  /**
   * Sync camera-up direction.
   * When camera-up vector is changed, `.updateCameraUp()` must be called.
   * @category Methods
   */
  updateCameraUp() {
    this._yAxisUpSpace.setFromUnitVectors(this._camera.up, da), this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).invert();
  }
  /**
   * Apply current camera-up direction to the camera.
   * The orbit system will be re-initialized with the current position.
   * @category Methods
   */
  applyCameraUp() {
    const e = Me.subVectors(this._target, this._camera.position).normalize(), r = Ue.crossVectors(e, this._camera.up);
    this._camera.up.crossVectors(r, e).normalize(), this._camera.updateMatrixWorld();
    const n = this.getPosition(Me);
    this.updateCameraUp(), this.setPosition(n.x, n.y, n.z);
  }
  /**
   * Update camera position and directions.
   * This should be called in your tick loop every time, and returns true if re-rendering is needed.
   * @param delta
   * @returns updated
   * @category Methods
   */
  update(e) {
    const r = this._sphericalEnd.theta - this._spherical.theta, n = this._sphericalEnd.phi - this._spherical.phi, i = this._sphericalEnd.radius - this._spherical.radius, s = Iu.subVectors(this._targetEnd, this._target), a = Cu.subVectors(this._focalOffsetEnd, this._focalOffset), o = this._zoomEnd - this._zoom;
    if (Ye(r))
      this._thetaVelocity.value = 0, this._spherical.theta = this._sphericalEnd.theta;
    else {
      const h = this._isUserControllingRotate ? this.draggingSmoothTime : this.smoothTime;
      this._spherical.theta = fa(this._spherical.theta, this._sphericalEnd.theta, this._thetaVelocity, h, 1 / 0, e), this._needsUpdate = true;
    }
    if (Ye(n))
      this._phiVelocity.value = 0, this._spherical.phi = this._sphericalEnd.phi;
    else {
      const h = this._isUserControllingRotate ? this.draggingSmoothTime : this.smoothTime;
      this._spherical.phi = fa(this._spherical.phi, this._sphericalEnd.phi, this._phiVelocity, h, 1 / 0, e), this._needsUpdate = true;
    }
    if (Ye(i))
      this._radiusVelocity.value = 0, this._spherical.radius = this._sphericalEnd.radius;
    else {
      const h = this._isUserControllingDolly ? this.draggingSmoothTime : this.smoothTime;
      this._spherical.radius = fa(this._spherical.radius, this._sphericalEnd.radius, this._radiusVelocity, h, this.maxSpeed, e), this._needsUpdate = true;
    }
    if (Ye(s.x) && Ye(s.y) && Ye(s.z))
      this._targetVelocity.set(0, 0, 0), this._target.copy(this._targetEnd);
    else {
      const h = this._isUserControllingTruck ? this.draggingSmoothTime : this.smoothTime;
      yu(this._target, this._targetEnd, this._targetVelocity, h, this.maxSpeed, e, this._target), this._needsUpdate = true;
    }
    if (Ye(a.x) && Ye(a.y) && Ye(a.z))
      this._focalOffsetVelocity.set(0, 0, 0), this._focalOffset.copy(this._focalOffsetEnd);
    else {
      const h = this._isUserControllingOffset ? this.draggingSmoothTime : this.smoothTime;
      yu(this._focalOffset, this._focalOffsetEnd, this._focalOffsetVelocity, h, this.maxSpeed, e, this._focalOffset), this._needsUpdate = true;
    }
    if (Ye(o))
      this._zoomVelocity.value = 0, this._zoom = this._zoomEnd;
    else {
      const h = this._isUserControllingZoom ? this.draggingSmoothTime : this.smoothTime;
      this._zoom = fa(this._zoom, this._zoomEnd, this._zoomVelocity, h, 1 / 0, e);
    }
    if (this.dollyToCursor) {
      if ($n(this._camera) && this._changedDolly !== 0) {
        const h = this._spherical.radius - this._lastDistance, A = this._camera, f = this._getCameraDirection(Ji), d = Me.copy(f).cross(A.up).normalize();
        d.lengthSq() === 0 && (d.x = 1);
        const v = Ue.crossVectors(d, f), m = this._sphericalEnd.radius * Math.tan(A.getEffectiveFOV() * Xi * 0.5), y = (this._sphericalEnd.radius - h - this._sphericalEnd.radius) / this._sphericalEnd.radius, p = Si.copy(this._targetEnd).add(d.multiplyScalar(this._dollyControlCoord.x * m * A.aspect)).add(v.multiplyScalar(this._dollyControlCoord.y * m)), g = Me.copy(this._targetEnd).lerp(p, y), C = this._lastDollyDirection === xi.IN && this._spherical.radius <= this.minDistance, S = this._lastDollyDirection === xi.OUT && this.maxDistance <= this._spherical.radius;
        if (this.infinityDolly && (C || S)) {
          this._sphericalEnd.radius -= h, this._spherical.radius -= h;
          const T = Ue.copy(f).multiplyScalar(-h);
          g.add(T);
        }
        this._boundary.clampPoint(g, g);
        const x = Ue.subVectors(g, this._targetEnd);
        this._targetEnd.copy(g), this._target.add(x), this._changedDolly -= h, Ye(this._changedDolly) && (this._changedDolly = 0);
      } else if (bn(this._camera) && this._changedZoom !== 0) {
        const h = this._zoom - this._lastZoom, A = this._camera, f = Me.set(this._dollyControlCoord.x, this._dollyControlCoord.y, (A.near + A.far) / (A.near - A.far)).unproject(A), d = Ue.set(0, 0, -1).applyQuaternion(A.quaternion), v = Si.copy(f).add(d.multiplyScalar(-f.dot(A.up))), E = -(this._zoom - h - this._zoom) / this._zoom, y = this._getCameraDirection(Ji), p = this._targetEnd.dot(y), g = Me.copy(this._targetEnd).lerp(v, E), C = g.dot(y), S = y.multiplyScalar(C - p);
        g.sub(S), this._boundary.clampPoint(g, g);
        const x = Ue.subVectors(g, this._targetEnd);
        this._targetEnd.copy(g), this._target.add(x), this._changedZoom -= h, Ye(this._changedZoom) && (this._changedZoom = 0);
      }
    }
    this._camera.zoom !== this._zoom && (this._camera.zoom = this._zoom, this._camera.updateProjectionMatrix(), this._updateNearPlaneCorners(), this._needsUpdate = true);
    const l = this._collisionTest();
    this._spherical.radius = Math.min(this._spherical.radius, l), this._spherical.makeSafe(), this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target), this._camera.lookAt(this._target), (!Ye(this._focalOffset.x) || !Ye(this._focalOffset.y) || !Ye(this._focalOffset.z)) && (this._camera.updateMatrixWorld(), Fr.setFromMatrixColumn(this._camera.matrix, 0), Lr.setFromMatrixColumn(this._camera.matrix, 1), Zn.setFromMatrixColumn(this._camera.matrix, 2), Fr.multiplyScalar(this._focalOffset.x), Lr.multiplyScalar(-this._focalOffset.y), Zn.multiplyScalar(this._focalOffset.z), Me.copy(Fr).add(Lr).add(Zn), this._camera.position.add(Me)), this._boundaryEnclosesCamera && this._encloseToBoundary(this._camera.position.copy(this._target), Me.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse), 1);
    const u = this._needsUpdate;
    return u && !this._updatedLastTime ? (this._hasRested = false, this.dispatchEvent({ type: "wake" }), this.dispatchEvent({ type: "update" })) : u ? (this.dispatchEvent({ type: "update" }), Ye(r, this.restThreshold) && Ye(n, this.restThreshold) && Ye(i, this.restThreshold) && Ye(s.x, this.restThreshold) && Ye(s.y, this.restThreshold) && Ye(s.z, this.restThreshold) && Ye(a.x, this.restThreshold) && Ye(a.y, this.restThreshold) && Ye(a.z, this.restThreshold) && Ye(o, this.restThreshold) && !this._hasRested && (this._hasRested = true, this.dispatchEvent({ type: "rest" }))) : !u && this._updatedLastTime && this.dispatchEvent({ type: "sleep" }), this._lastDistance = this._spherical.radius, this._lastZoom = this._zoom, this._updatedLastTime = u, this._needsUpdate = false, u;
  }
  /**
   * Get all state in JSON string
   * @category Methods
   */
  toJSON() {
    return JSON.stringify({
      enabled: this._enabled,
      minDistance: this.minDistance,
      maxDistance: $i(this.maxDistance),
      minZoom: this.minZoom,
      maxZoom: $i(this.maxZoom),
      minPolarAngle: this.minPolarAngle,
      maxPolarAngle: $i(this.maxPolarAngle),
      minAzimuthAngle: $i(this.minAzimuthAngle),
      maxAzimuthAngle: $i(this.maxAzimuthAngle),
      smoothTime: this.smoothTime,
      draggingSmoothTime: this.draggingSmoothTime,
      dollySpeed: this.dollySpeed,
      truckSpeed: this.truckSpeed,
      dollyToCursor: this.dollyToCursor,
      verticalDragToForward: this.verticalDragToForward,
      target: this._targetEnd.toArray(),
      position: Me.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),
      zoom: this._zoomEnd,
      focalOffset: this._focalOffsetEnd.toArray(),
      target0: this._target0.toArray(),
      position0: this._position0.toArray(),
      zoom0: this._zoom0,
      focalOffset0: this._focalOffset0.toArray()
    });
  }
  /**
   * Reproduce the control state with JSON. enableTransition is where anim or not in a boolean.
   * @param json
   * @param enableTransition
   * @category Methods
   */
  fromJSON(e, r = false) {
    const n = JSON.parse(e);
    this.enabled = n.enabled, this.minDistance = n.minDistance, this.maxDistance = Zi(n.maxDistance), this.minZoom = n.minZoom, this.maxZoom = Zi(n.maxZoom), this.minPolarAngle = n.minPolarAngle, this.maxPolarAngle = Zi(n.maxPolarAngle), this.minAzimuthAngle = Zi(n.minAzimuthAngle), this.maxAzimuthAngle = Zi(n.maxAzimuthAngle), this.smoothTime = n.smoothTime, this.draggingSmoothTime = n.draggingSmoothTime, this.dollySpeed = n.dollySpeed, this.truckSpeed = n.truckSpeed, this.dollyToCursor = n.dollyToCursor, this.verticalDragToForward = n.verticalDragToForward, this._target0.fromArray(n.target0), this._position0.fromArray(n.position0), this._zoom0 = n.zoom0, this._focalOffset0.fromArray(n.focalOffset0), this.moveTo(n.target[0], n.target[1], n.target[2], r), tr.setFromVector3(Me.fromArray(n.position).sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)), this.rotateTo(tr.theta, tr.phi, r), this.dollyTo(tr.radius, r), this.zoomTo(n.zoom, r), this.setFocalOffset(n.focalOffset[0], n.focalOffset[1], n.focalOffset[2], r), this._needsUpdate = true;
  }
  /**
   * Attach all internal event handlers to enable drag control.
   * @category Methods
   */
  connect(e) {
    if (this._domElement) {
      console.warn("camera-controls is already connected.");
      return;
    }
    e.setAttribute("data-camera-controls-version", tC), this._addAllEventListeners(e), this._getClientRect(this._elementRect);
  }
  /**
   * Detach all internal event handlers to disable drag control.
   */
  disconnect() {
    this.cancel(), this._removeAllEventListeners(), this._domElement && (this._domElement.removeAttribute("data-camera-controls-version"), this._domElement = void 0);
  }
  /**
   * Dispose the cameraControls instance itself, remove all eventListeners.
   * @category Methods
   */
  dispose() {
    this.removeAllEventListeners(), this.disconnect();
  }
  // it's okay to expose public though
  _getTargetDirection(e) {
    return e.setFromSpherical(this._spherical).divideScalar(this._spherical.radius).applyQuaternion(this._yAxisUpSpaceInverse);
  }
  // it's okay to expose public though
  _getCameraDirection(e) {
    return this._getTargetDirection(e).negate();
  }
  _findPointerById(e) {
    return this._activePointers.find((r) => r.pointerId === e);
  }
  _findPointerByMouseButton(e) {
    return this._activePointers.find((r) => r.mouseButton === e);
  }
  _disposePointer(e) {
    this._activePointers.splice(this._activePointers.indexOf(e), 1);
  }
  _encloseToBoundary(e, r, n) {
    const i = r.lengthSq();
    if (i === 0)
      return e;
    const s = Ue.copy(r).add(e), o = this._boundary.clampPoint(s, Si).sub(s), l = o.lengthSq();
    if (l === 0)
      return e.add(r);
    if (l === i)
      return e;
    if (n === 0)
      return e.add(r).add(o);
    {
      const c = 1 + n * l / r.dot(o);
      return e.add(Ue.copy(r).multiplyScalar(c)).add(o.multiplyScalar(1 - n));
    }
  }
  _updateNearPlaneCorners() {
    if ($n(this._camera)) {
      const e = this._camera, r = e.near, n = e.getEffectiveFOV() * Xi, i = Math.tan(n * 0.5) * r, s = i * e.aspect;
      this._nearPlaneCorners[0].set(-s, -i, 0), this._nearPlaneCorners[1].set(s, -i, 0), this._nearPlaneCorners[2].set(s, i, 0), this._nearPlaneCorners[3].set(-s, i, 0);
    } else if (bn(this._camera)) {
      const e = this._camera, r = 1 / e.zoom, n = e.left * r, i = e.right * r, s = e.top * r, a = e.bottom * r;
      this._nearPlaneCorners[0].set(n, s, 0), this._nearPlaneCorners[1].set(i, s, 0), this._nearPlaneCorners[2].set(i, a, 0), this._nearPlaneCorners[3].set(n, a, 0);
    }
  }
  // lateUpdate
  _collisionTest() {
    let e = 1 / 0;
    if (!(this.colliderMeshes.length >= 1) || gl(this._camera, "_collisionTest"))
      return e;
    const n = this._getTargetDirection(Ji);
    El.lookAt(Eu, n, this._camera.up);
    for (let i = 0; i < 4; i++) {
      const s = Ue.copy(this._nearPlaneCorners[i]);
      s.applyMatrix4(El);
      const a = Si.addVectors(this._target, s);
      ga.set(a, n), ga.far = this._spherical.radius + 1;
      const o = ga.intersectObjects(this.colliderMeshes);
      o.length !== 0 && o[0].distance < e && (e = o[0].distance);
    }
    return e;
  }
  /**
   * Get its client rect and package into given `DOMRect` .
   */
  _getClientRect(e) {
    if (!this._domElement)
      return;
    const r = this._domElement.getBoundingClientRect();
    return e.x = r.left, e.y = r.top, this._viewport ? (e.x += this._viewport.x, e.y += r.height - this._viewport.w - this._viewport.y, e.width = this._viewport.z, e.height = this._viewport.w) : (e.width = r.width, e.height = r.height), e;
  }
  _createOnRestPromise(e) {
    return e ? Promise.resolve() : (this._hasRested = false, this.dispatchEvent({ type: "transitionstart" }), new Promise((r) => {
      const n = () => {
        this.removeEventListener("rest", n), r();
      };
      this.addEventListener("rest", n);
    }));
  }
  // eslint-disable-next-line @typescript-eslint/no-unused-vars
  _addAllEventListeners(e) {
  }
  _removeAllEventListeners() {
  }
  /**
   * backward compatible
   * @deprecated use smoothTime (in seconds) instead
   * @category Properties
   */
  get dampingFactor() {
    return console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead."), 0;
  }
  /**
   * backward compatible
   * @deprecated use smoothTime (in seconds) instead
   * @category Properties
   */
  set dampingFactor(e) {
    console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead.");
  }
  /**
   * backward compatible
   * @deprecated use draggingSmoothTime (in seconds) instead
   * @category Properties
   */
  get draggingDampingFactor() {
    return console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead."), 0;
  }
  /**
   * backward compatible
   * @deprecated use draggingSmoothTime (in seconds) instead
   * @category Properties
   */
  set draggingDampingFactor(e) {
    console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead.");
  }
  static createBoundingSphere(e, r = new me.Sphere()) {
    const n = r, i = n.center;
    wi.makeEmpty(), e.traverseVisible((a) => {
      a.isMesh && wi.expandByObject(a);
    }), wi.getCenter(i);
    let s = 0;
    return e.traverseVisible((a) => {
      if (!a.isMesh)
        return;
      const o = a, l = o.geometry.clone();
      l.applyMatrix4(o.matrixWorld);
      const u = l.attributes.position;
      for (let h = 0, A = u.count; h < A; h++)
        Me.fromBufferAttribute(u, h), s = Math.max(s, i.distanceToSquared(Me));
    }), n.radius = Math.sqrt(s), n;
  }
}
const iC = ["min-polar-angle", "max-polar-angle", "min-azimuth-angle", "max-azimuth-angle", "distance", "min-distance", "max-distance", "infinity-dolly", "min-zoom", "max-zoom", "smooth-time", "dragging-smooth-time", "max-speed", "azimuth-rotate-speed", "polar-rotate-speed", "dolly-speed", "dolly-drag-inverted", "truck-speed", "dolly-to-cursor", "drag-to-offset", "vertical-drag-to-forward", "boundary-friction", "rest-threshold", "collider-meshes", "args"], Fx = /* @__PURE__ */ defineComponent({
  __name: "CameraControls",
  props: {
    makeDefault: { type: Boolean, default: false },
    camera: {},
    domElement: {},
    minPolarAngle: { default: 0 },
    maxPolarAngle: { default: Math.PI },
    minAzimuthAngle: { default: -1 / 0 },
    maxAzimuthAngle: { default: 1 / 0 },
    distance: { default: 8 },
    minDistance: { default: Number.EPSILON },
    maxDistance: { default: 1 / 0 },
    infinityDolly: { type: Boolean, default: false },
    minZoom: { default: 0.01 },
    maxZoom: { default: 1 / 0 },
    smoothTime: { default: 0.25 },
    draggingSmoothTime: { default: 0.125 },
    maxSpeed: { default: 1 / 0 },
    azimuthRotateSpeed: { default: 1 },
    polarRotateSpeed: { default: 1 },
    dollySpeed: { default: 1 },
    dollyDragInverted: { type: Boolean, default: false },
    truckSpeed: { default: 2 },
    dollyToCursor: { type: Boolean, default: false },
    dragToOffset: { type: Boolean, default: false },
    verticalDragToForward: { type: Boolean, default: false },
    boundaryFriction: { default: 0 },
    restThreshold: { default: 0.01 },
    colliderMeshes: { default: () => [] },
    mouseButtons: {},
    touches: {}
  },
  emits: ["change", "start", "end"],
  setup(t, { expose: e, emit: r }) {
    const n = t, {
      makeDefault: i,
      minPolarAngle: s,
      maxPolarAngle: a,
      minAzimuthAngle: o,
      maxAzimuthAngle: l,
      distance: c,
      minDistance: u,
      maxDistance: h,
      infinityDolly: A,
      minZoom: f,
      maxZoom: d,
      smoothTime: v,
      draggingSmoothTime: m,
      maxSpeed: E,
      azimuthRotateSpeed: y,
      polarRotateSpeed: p,
      dollySpeed: g,
      dollyDragInverted: C,
      truckSpeed: S,
      dollyToCursor: x,
      dragToOffset: T,
      verticalDragToForward: B,
      boundaryFriction: R,
      restThreshold: _,
      colliderMeshes: F
    } = toRefs(n), U = {
      Box3,
      MathUtils: {
        clamp: MathUtils.clamp
      },
      Matrix4,
      Quaternion,
      Raycaster,
      Sphere,
      Spherical,
      Vector2,
      Vector3,
      Vector4
    };
    Ss.install({ THREE: U });
    const { camera: Y, renderer: N, extend: Z, controls: j } = useTresContext(), Q = ref(null);
    Z({ CameraControls: Ss }), watchEffect(() => {
      $(), Q.value && i.value ? j.value = Q.value : j.value = null;
    });
    function $() {
      lt(Q.value, "update", () => r("change", Q.value)), lt(Q.value, "controlend", () => r("end", Q.value)), lt(Q.value, "controlstart", () => r("start", Q.value));
    }
    const { onLoop: X } = useRenderLoop();
    return X(({ delta: K }) => {
      var D, L;
      (D = Q.value) != null && D.enabled && ((L = Q.value) == null || L.update(K));
    }), onUnmounted(() => {
      Q.value && Q.value.disconnect();
    }), e({
      value: Q
    }), (K, D) => (K.camera || unref(Y)) && (K.domElement || unref(N)) ? (openBlock(), createElementBlock("TresCameraControls", {
      key: 0,
      ref_key: "controlsRef",
      ref: Q,
      "min-polar-angle": unref(s),
      "max-polar-angle": unref(a),
      "min-azimuth-angle": unref(o),
      "max-azimuth-angle": unref(l),
      distance: unref(c),
      "min-distance": unref(u),
      "max-distance": unref(h),
      "infinity-dolly": unref(A),
      "min-zoom": unref(f),
      "max-zoom": unref(d),
      "smooth-time": unref(v),
      "dragging-smooth-time": unref(m),
      "max-speed": unref(E),
      "azimuth-rotate-speed": unref(y),
      "polar-rotate-speed": unref(p),
      "dolly-speed": unref(g),
      "dolly-drag-inverted": unref(C),
      "truck-speed": unref(S),
      "dolly-to-cursor": unref(x),
      "drag-to-offset": unref(T),
      "vertical-drag-to-forward": unref(B),
      "boundary-friction": unref(R),
      "rest-threshold": unref(_),
      "collider-meshes": unref(F),
      args: [K.camera || unref(Y), K.domElement || unref(N).domElement]
    }, null, 8, iC)) : createCommentVNode("", true);
  }
});
class sC extends MeshStandardMaterial {
  constructor(r = {}) {
    super(r);
    tt(this, "_time");
    tt(this, "_factor");
    this.setValues(r), this._time = { value: 0 }, this._factor = { value: 1 };
  }
  onBeforeCompile(r) {
    r.uniforms || (r.uniforms = {}), r.uniforms.time = this._time, r.uniforms.factor = this._factor, r.vertexShader = `
        uniform float time;
        uniform float factor;
        ${r.vertexShader}
      `, r.vertexShader = r.vertexShader.replace(
      "#include <begin_vertex>",
      `float theta = sin( time + position.y ) / 2.0 * factor;
          float c = cos( theta );
          float s = sin( theta );
          mat3 m = mat3( c, 0, s, 0, 1, 0, -s, 0, c );
          vec3 transformed = vec3( position ) * m;
          vNormal = vNormal * m;`
    );
  }
  get time() {
    return this._time.value;
  }
  set time(r) {
    this._time.value = r;
  }
  get factor() {
    return this._factor.value;
  }
  set factor(r) {
    this._factor.value = r;
  }
}
const aC = ["factor"], Lx = /* @__PURE__ */ defineComponent({
  __name: "index",
  props: {
    speed: { default: 1 },
    factor: { default: 1 }
  },
  setup(t) {
    const e = t, r = shallowRef(), { extend: n } = useTresContext();
    n({ MeshWobbleMaterial: sC });
    const { onLoop: i } = useRenderLoop();
    return i(({ elapsed: s }) => {
      r.value && (r.value.time = s * (e == null ? void 0 : e.speed));
    }), (s, a) => (openBlock(), createElementBlock("TresMeshWobbleMaterial", mergeProps({
      ref_key: "materialRef",
      ref: r,
      factor: s.factor
    }, s.$attrs), null, 16, aC));
  }
});
function si(t, e, r) {
  return Math.max(e, Math.min(r, t));
}
function oC(t, e) {
  return (t % e + e) % e;
}
function Il(t, e, r) {
  return (1 - r) * t + r * e;
}
class e3 {
  constructor(e = 0, r = 0) {
    e3.prototype.isVector2 = true, this.x = e, this.y = r;
  }
  get width() {
    return this.x;
  }
  set width(e) {
    this.x = e;
  }
  get height() {
    return this.y;
  }
  set height(e) {
    this.y = e;
  }
  set(e, r) {
    return this.x = e, this.y = r, this;
  }
  setScalar(e) {
    return this.x = e, this.y = e, this;
  }
  setX(e) {
    return this.x = e, this;
  }
  setY(e) {
    return this.y = e, this;
  }
  setComponent(e, r) {
    switch (e) {
      case 0:
        this.x = r;
        break;
      case 1:
        this.y = r;
        break;
      default:
        throw new Error("index is out of range: " + e);
    }
    return this;
  }
  getComponent(e) {
    switch (e) {
      case 0:
        return this.x;
      case 1:
        return this.y;
      default:
        throw new Error("index is out of range: " + e);
    }
  }
  clone() {
    return new this.constructor(this.x, this.y);
  }
  copy(e) {
    return this.x = e.x, this.y = e.y, this;
  }
  add(e) {
    return this.x += e.x, this.y += e.y, this;
  }
  addScalar(e) {
    return this.x += e, this.y += e, this;
  }
  addVectors(e, r) {
    return this.x = e.x + r.x, this.y = e.y + r.y, this;
  }
  addScaledVector(e, r) {
    return this.x += e.x * r, this.y += e.y * r, this;
  }
  sub(e) {
    return this.x -= e.x, this.y -= e.y, this;
  }
  subScalar(e) {
    return this.x -= e, this.y -= e, this;
  }
  subVectors(e, r) {
    return this.x = e.x - r.x, this.y = e.y - r.y, this;
  }
  multiply(e) {
    return this.x *= e.x, this.y *= e.y, this;
  }
  multiplyScalar(e) {
    return this.x *= e, this.y *= e, this;
  }
  divide(e) {
    return this.x /= e.x, this.y /= e.y, this;
  }
  divideScalar(e) {
    return this.multiplyScalar(1 / e);
  }
  applyMatrix3(e) {
    const r = this.x, n = this.y, i = e.elements;
    return this.x = i[0] * r + i[3] * n + i[6], this.y = i[1] * r + i[4] * n + i[7], this;
  }
  min(e) {
    return this.x = Math.min(this.x, e.x), this.y = Math.min(this.y, e.y), this;
  }
  max(e) {
    return this.x = Math.max(this.x, e.x), this.y = Math.max(this.y, e.y), this;
  }
  clamp(e, r) {
    return this.x = Math.max(e.x, Math.min(r.x, this.x)), this.y = Math.max(e.y, Math.min(r.y, this.y)), this;
  }
  clampScalar(e, r) {
    return this.x = Math.max(e, Math.min(r, this.x)), this.y = Math.max(e, Math.min(r, this.y)), this;
  }
  clampLength(e, r) {
    const n = this.length();
    return this.divideScalar(n || 1).multiplyScalar(Math.max(e, Math.min(r, n)));
  }
  floor() {
    return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this;
  }
  ceil() {
    return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this;
  }
  round() {
    return this.x = Math.round(this.x), this.y = Math.round(this.y), this;
  }
  roundToZero() {
    return this.x = Math.trunc(this.x), this.y = Math.trunc(this.y), this;
  }
  negate() {
    return this.x = -this.x, this.y = -this.y, this;
  }
  dot(e) {
    return this.x * e.x + this.y * e.y;
  }
  cross(e) {
    return this.x * e.y - this.y * e.x;
  }
  lengthSq() {
    return this.x * this.x + this.y * this.y;
  }
  length() {
    return Math.sqrt(this.x * this.x + this.y * this.y);
  }
  manhattanLength() {
    return Math.abs(this.x) + Math.abs(this.y);
  }
  normalize() {
    return this.divideScalar(this.length() || 1);
  }
  angle() {
    return Math.atan2(-this.y, -this.x) + Math.PI;
  }
  angleTo(e) {
    const r = Math.sqrt(this.lengthSq() * e.lengthSq());
    if (r === 0)
      return Math.PI / 2;
    const n = this.dot(e) / r;
    return Math.acos(si(n, -1, 1));
  }
  distanceTo(e) {
    return Math.sqrt(this.distanceToSquared(e));
  }
  distanceToSquared(e) {
    const r = this.x - e.x, n = this.y - e.y;
    return r * r + n * n;
  }
  manhattanDistanceTo(e) {
    return Math.abs(this.x - e.x) + Math.abs(this.y - e.y);
  }
  setLength(e) {
    return this.normalize().multiplyScalar(e);
  }
  lerp(e, r) {
    return this.x += (e.x - this.x) * r, this.y += (e.y - this.y) * r, this;
  }
  lerpVectors(e, r, n) {
    return this.x = e.x + (r.x - e.x) * n, this.y = e.y + (r.y - e.y) * n, this;
  }
  equals(e) {
    return e.x === this.x && e.y === this.y;
  }
  fromArray(e, r = 0) {
    return this.x = e[r], this.y = e[r + 1], this;
  }
  toArray(e = [], r = 0) {
    return e[r] = this.x, e[r + 1] = this.y, e;
  }
  fromBufferAttribute(e, r) {
    return this.x = e.getX(r), this.y = e.getY(r), this;
  }
  rotateAround(e, r) {
    const n = Math.cos(r), i = Math.sin(r), s = this.x - e.x, a = this.y - e.y;
    return this.x = s * n - a * i + e.x, this.y = s * i + a * n + e.y, this;
  }
  random() {
    return this.x = Math.random(), this.y = Math.random(), this;
  }
  *[Symbol.iterator]() {
    yield this.x, yield this.y;
  }
}
const en = "srgb", t3 = "srgb-linear", OA = "display-p3";
class Ys {
  constructor(e, r, n, i, s, a, o, l, c) {
    Ys.prototype.isMatrix3 = true, this.elements = [
      1,
      0,
      0,
      0,
      1,
      0,
      0,
      0,
      1
    ], e !== void 0 && this.set(e, r, n, i, s, a, o, l, c);
  }
  set(e, r, n, i, s, a, o, l, c) {
    const u = this.elements;
    return u[0] = e, u[1] = i, u[2] = o, u[3] = r, u[4] = s, u[5] = l, u[6] = n, u[7] = a, u[8] = c, this;
  }
  identity() {
    return this.set(
      1,
      0,
      0,
      0,
      1,
      0,
      0,
      0,
      1
    ), this;
  }
  copy(e) {
    const r = this.elements, n = e.elements;
    return r[0] = n[0], r[1] = n[1], r[2] = n[2], r[3] = n[3], r[4] = n[4], r[5] = n[5], r[6] = n[6], r[7] = n[7], r[8] = n[8], this;
  }
  extractBasis(e, r, n) {
    return e.setFromMatrix3Column(this, 0), r.setFromMatrix3Column(this, 1), n.setFromMatrix3Column(this, 2), this;
  }
  setFromMatrix4(e) {
    const r = e.elements;
    return this.set(
      r[0],
      r[4],
      r[8],
      r[1],
      r[5],
      r[9],
      r[2],
      r[6],
      r[10]
    ), this;
  }
  multiply(e) {
    return this.multiplyMatrices(this, e);
  }
  premultiply(e) {
    return this.multiplyMatrices(e, this);
  }
  multiplyMatrices(e, r) {
    const n = e.elements, i = r.elements, s = this.elements, a = n[0], o = n[3], l = n[6], c = n[1], u = n[4], h = n[7], A = n[2], f = n[5], d = n[8], v = i[0], m = i[3], E = i[6], y = i[1], p = i[4], g = i[7], C = i[2], S = i[5], x = i[8];
    return s[0] = a * v + o * y + l * C, s[3] = a * m + o * p + l * S, s[6] = a * E + o * g + l * x, s[1] = c * v + u * y + h * C, s[4] = c * m + u * p + h * S, s[7] = c * E + u * g + h * x, s[2] = A * v + f * y + d * C, s[5] = A * m + f * p + d * S, s[8] = A * E + f * g + d * x, this;
  }
  multiplyScalar(e) {
    const r = this.elements;
    return r[0] *= e, r[3] *= e, r[6] *= e, r[1] *= e, r[4] *= e, r[7] *= e, r[2] *= e, r[5] *= e, r[8] *= e, this;
  }
  determinant() {
    const e = this.elements, r = e[0], n = e[1], i = e[2], s = e[3], a = e[4], o = e[5], l = e[6], c = e[7], u = e[8];
    return r * a * u - r * o * c - n * s * u + n * o * l + i * s * c - i * a * l;
  }
  invert() {
    const e = this.elements, r = e[0], n = e[1], i = e[2], s = e[3], a = e[4], o = e[5], l = e[6], c = e[7], u = e[8], h = u * a - o * c, A = o * l - u * s, f = c * s - a * l, d = r * h + n * A + i * f;
    if (d === 0)
      return this.set(0, 0, 0, 0, 0, 0, 0, 0, 0);
    const v = 1 / d;
    return e[0] = h * v, e[1] = (i * c - u * n) * v, e[2] = (o * n - i * a) * v, e[3] = A * v, e[4] = (u * r - i * l) * v, e[5] = (i * s - o * r) * v, e[6] = f * v, e[7] = (n * l - c * r) * v, e[8] = (a * r - n * s) * v, this;
  }
  transpose() {
    let e;
    const r = this.elements;
    return e = r[1], r[1] = r[3], r[3] = e, e = r[2], r[2] = r[6], r[6] = e, e = r[5], r[5] = r[7], r[7] = e, this;
  }
  getNormalMatrix(e) {
    return this.setFromMatrix4(e).invert().transpose();
  }
  transposeIntoArray(e) {
    const r = this.elements;
    return e[0] = r[0], e[1] = r[3], e[2] = r[6], e[3] = r[1], e[4] = r[4], e[5] = r[7], e[6] = r[2], e[7] = r[5], e[8] = r[8], this;
  }
  setUvTransform(e, r, n, i, s, a, o) {
    const l = Math.cos(s), c = Math.sin(s);
    return this.set(
      n * l,
      n * c,
      -n * (l * a + c * o) + a + e,
      -i * c,
      i * l,
      -i * (-c * a + l * o) + o + r,
      0,
      0,
      1
    ), this;
  }
  //
  scale(e, r) {
    return this.premultiply(Cl.makeScale(e, r)), this;
  }
  rotate(e) {
    return this.premultiply(Cl.makeRotation(-e)), this;
  }
  translate(e, r) {
    return this.premultiply(Cl.makeTranslation(e, r)), this;
  }
  // for 2D Transforms
  makeTranslation(e, r) {
    return e.isVector2 ? this.set(
      1,
      0,
      e.x,
      0,
      1,
      e.y,
      0,
      0,
      1
    ) : this.set(
      1,
      0,
      e,
      0,
      1,
      r,
      0,
      0,
      1
    ), this;
  }
  makeRotation(e) {
    const r = Math.cos(e), n = Math.sin(e);
    return this.set(
      r,
      -n,
      0,
      n,
      r,
      0,
      0,
      0,
      1
    ), this;
  }
  makeScale(e, r) {
    return this.set(
      e,
      0,
      0,
      0,
      r,
      0,
      0,
      0,
      1
    ), this;
  }
  //
  equals(e) {
    const r = this.elements, n = e.elements;
    for (let i = 0; i < 9; i++)
      if (r[i] !== n[i])
        return false;
    return true;
  }
  fromArray(e, r = 0) {
    for (let n = 0; n < 9; n++)
      this.elements[n] = e[n + r];
    return this;
  }
  toArray(e = [], r = 0) {
    const n = this.elements;
    return e[r] = n[0], e[r + 1] = n[1], e[r + 2] = n[2], e[r + 3] = n[3], e[r + 4] = n[4], e[r + 5] = n[5], e[r + 6] = n[6], e[r + 7] = n[7], e[r + 8] = n[8], e;
  }
  clone() {
    return new this.constructor().fromArray(this.elements);
  }
}
const Cl = /* @__PURE__ */ new Ys();
function xl(t) {
  return t < 0.04045 ? t * 0.0773993808 : Math.pow(t * 0.9478672986 + 0.0521327014, 2.4);
}
function Tl(t) {
  return t < 31308e-7 ? t * 12.92 : 1.055 * Math.pow(t, 0.41666) - 0.055;
}
const lC = /* @__PURE__ */ new Ys().fromArray([
  0.8224621,
  0.0331941,
  0.0170827,
  0.177538,
  0.9668058,
  0.0723974,
  -1e-7,
  1e-7,
  0.9105199
]), cC = /* @__PURE__ */ new Ys().fromArray([
  1.2249401,
  -0.0420569,
  -0.0196376,
  -0.2249404,
  1.0420571,
  -0.0786361,
  1e-7,
  0,
  1.0982735
]);
function uC(t) {
  return t.convertSRGBToLinear().applyMatrix3(cC);
}
function hC(t) {
  return t.applyMatrix3(lC).convertLinearToSRGB();
}
const AC = {
  [t3]: (t) => t,
  [en]: (t) => t.convertSRGBToLinear(),
  [OA]: uC
}, fC = {
  [t3]: (t) => t,
  [en]: (t) => t.convertLinearToSRGB(),
  [OA]: hC
}, mr = {
  enabled: true,
  get legacyMode() {
    return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."), !this.enabled;
  },
  set legacyMode(t) {
    console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."), this.enabled = !t;
  },
  get workingColorSpace() {
    return t3;
  },
  set workingColorSpace(t) {
    console.warn("THREE.ColorManagement: .workingColorSpace is readonly.");
  },
  convert: function(t, e, r) {
    if (this.enabled === false || e === r || !e || !r)
      return t;
    const n = AC[e], i = fC[r];
    if (n === void 0 || i === void 0)
      throw new Error(`Unsupported color space conversion, "${e}" to "${r}".`);
    return i(n(t));
  },
  fromWorkingColorSpace: function(t, e) {
    return this.convert(t, this.workingColorSpace, e);
  },
  toWorkingColorSpace: function(t, e) {
    return this.convert(t, e, this.workingColorSpace);
  }
}, PA = {
  aliceblue: 15792383,
  antiquewhite: 16444375,
  aqua: 65535,
  aquamarine: 8388564,
  azure: 15794175,
  beige: 16119260,
  bisque: 16770244,
  black: 0,
  blanchedalmond: 16772045,
  blue: 255,
  blueviolet: 9055202,
  brown: 10824234,
  burlywood: 14596231,
  cadetblue: 6266528,
  chartreuse: 8388352,
  chocolate: 13789470,
  coral: 16744272,
  cornflowerblue: 6591981,
  cornsilk: 16775388,
  crimson: 14423100,
  cyan: 65535,
  darkblue: 139,
  darkcyan: 35723,
  darkgoldenrod: 12092939,
  darkgray: 11119017,
  darkgreen: 25600,
  darkgrey: 11119017,
  darkkhaki: 12433259,
  darkmagenta: 9109643,
  darkolivegreen: 5597999,
  darkorange: 16747520,
  darkorchid: 10040012,
  darkred: 9109504,
  darksalmon: 15308410,
  darkseagreen: 9419919,
  darkslateblue: 4734347,
  darkslategray: 3100495,
  darkslategrey: 3100495,
  darkturquoise: 52945,
  darkviolet: 9699539,
  deeppink: 16716947,
  deepskyblue: 49151,
  dimgray: 6908265,
  dimgrey: 6908265,
  dodgerblue: 2003199,
  firebrick: 11674146,
  floralwhite: 16775920,
  forestgreen: 2263842,
  fuchsia: 16711935,
  gainsboro: 14474460,
  ghostwhite: 16316671,
  gold: 16766720,
  goldenrod: 14329120,
  gray: 8421504,
  green: 32768,
  greenyellow: 11403055,
  grey: 8421504,
  honeydew: 15794160,
  hotpink: 16738740,
  indianred: 13458524,
  indigo: 4915330,
  ivory: 16777200,
  khaki: 15787660,
  lavender: 15132410,
  lavenderblush: 16773365,
  lawngreen: 8190976,
  lemonchiffon: 16775885,
  lightblue: 11393254,
  lightcoral: 15761536,
  lightcyan: 14745599,
  lightgoldenrodyellow: 16448210,
  lightgray: 13882323,
  lightgreen: 9498256,
  lightgrey: 13882323,
  lightpink: 16758465,
  lightsalmon: 16752762,
  lightseagreen: 2142890,
  lightskyblue: 8900346,
  lightslategray: 7833753,
  lightslategrey: 7833753,
  lightsteelblue: 11584734,
  lightyellow: 16777184,
  lime: 65280,
  limegreen: 3329330,
  linen: 16445670,
  magenta: 16711935,
  maroon: 8388608,
  mediumaquamarine: 6737322,
  mediumblue: 205,
  mediumorchid: 12211667,
  mediumpurple: 9662683,
  mediumseagreen: 3978097,
  mediumslateblue: 8087790,
  mediumspringgreen: 64154,
  mediumturquoise: 4772300,
  mediumvioletred: 13047173,
  midnightblue: 1644912,
  mintcream: 16121850,
  mistyrose: 16770273,
  moccasin: 16770229,
  navajowhite: 16768685,
  navy: 128,
  oldlace: 16643558,
  olive: 8421376,
  olivedrab: 7048739,
  orange: 16753920,
  orangered: 16729344,
  orchid: 14315734,
  palegoldenrod: 15657130,
  palegreen: 10025880,
  paleturquoise: 11529966,
  palevioletred: 14381203,
  papayawhip: 16773077,
  peachpuff: 16767673,
  peru: 13468991,
  pink: 16761035,
  plum: 14524637,
  powderblue: 11591910,
  purple: 8388736,
  rebeccapurple: 6697881,
  red: 16711680,
  rosybrown: 12357519,
  royalblue: 4286945,
  saddlebrown: 9127187,
  salmon: 16416882,
  sandybrown: 16032864,
  seagreen: 3050327,
  seashell: 16774638,
  sienna: 10506797,
  silver: 12632256,
  skyblue: 8900331,
  slateblue: 6970061,
  slategray: 7372944,
  slategrey: 7372944,
  snow: 16775930,
  springgreen: 65407,
  steelblue: 4620980,
  tan: 13808780,
  teal: 32896,
  thistle: 14204888,
  tomato: 16737095,
  turquoise: 4251856,
  violet: 15631086,
  wheat: 16113331,
  white: 16777215,
  whitesmoke: 16119285,
  yellow: 16776960,
  yellowgreen: 10145074
}, vr = { h: 0, s: 0, l: 0 }, ma = { h: 0, s: 0, l: 0 };
function Sl(t, e, r) {
  return r < 0 && (r += 1), r > 1 && (r -= 1), r < 1 / 6 ? t + (e - t) * 6 * r : r < 1 / 2 ? e : r < 2 / 3 ? t + (e - t) * 6 * (2 / 3 - r) : t;
}
class $a {
  constructor(e, r, n) {
    return this.isColor = true, this.r = 1, this.g = 1, this.b = 1, this.set(e, r, n);
  }
  set(e, r, n) {
    if (r === void 0 && n === void 0) {
      const i = e;
      i && i.isColor ? this.copy(i) : typeof i == "number" ? this.setHex(i) : typeof i == "string" && this.setStyle(i);
    } else
      this.setRGB(e, r, n);
    return this;
  }
  setScalar(e) {
    return this.r = e, this.g = e, this.b = e, this;
  }
  setHex(e, r = en) {
    return e = Math.floor(e), this.r = (e >> 16 & 255) / 255, this.g = (e >> 8 & 255) / 255, this.b = (e & 255) / 255, mr.toWorkingColorSpace(this, r), this;
  }
  setRGB(e, r, n, i = mr.workingColorSpace) {
    return this.r = e, this.g = r, this.b = n, mr.toWorkingColorSpace(this, i), this;
  }
  setHSL(e, r, n, i = mr.workingColorSpace) {
    if (e = oC(e, 1), r = si(r, 0, 1), n = si(n, 0, 1), r === 0)
      this.r = this.g = this.b = n;
    else {
      const s = n <= 0.5 ? n * (1 + r) : n + r - n * r, a = 2 * n - s;
      this.r = Sl(a, s, e + 1 / 3), this.g = Sl(a, s, e), this.b = Sl(a, s, e - 1 / 3);
    }
    return mr.toWorkingColorSpace(this, i), this;
  }
  setStyle(e, r = en) {
    function n(s) {
      s !== void 0 && parseFloat(s) < 1 && console.warn("THREE.Color: Alpha component of " + e + " will be ignored.");
    }
    let i;
    if (i = /^(\w+)\(([^\)]*)\)/.exec(e)) {
      let s;
      const a = i[1], o = i[2];
      switch (a) {
        case "rgb":
        case "rgba":
          if (s = /^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))
            return n(s[4]), this.setRGB(
              Math.min(255, parseInt(s[1], 10)) / 255,
              Math.min(255, parseInt(s[2], 10)) / 255,
              Math.min(255, parseInt(s[3], 10)) / 255,
              r
            );
          if (s = /^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))
            return n(s[4]), this.setRGB(
              Math.min(100, parseInt(s[1], 10)) / 100,
              Math.min(100, parseInt(s[2], 10)) / 100,
              Math.min(100, parseInt(s[3], 10)) / 100,
              r
            );
          break;
        case "hsl":
        case "hsla":
          if (s = /^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))
            return n(s[4]), this.setHSL(
              parseFloat(s[1]) / 360,
              parseFloat(s[2]) / 100,
              parseFloat(s[3]) / 100,
              r
            );
          break;
        default:
          console.warn("THREE.Color: Unknown color model " + e);
      }
    } else if (i = /^\#([A-Fa-f\d]+)$/.exec(e)) {
      const s = i[1], a = s.length;
      if (a === 3)
        return this.setRGB(
          parseInt(s.charAt(0), 16) / 15,
          parseInt(s.charAt(1), 16) / 15,
          parseInt(s.charAt(2), 16) / 15,
          r
        );
      if (a === 6)
        return this.setHex(parseInt(s, 16), r);
      console.warn("THREE.Color: Invalid hex color " + e);
    } else if (e && e.length > 0)
      return this.setColorName(e, r);
    return this;
  }
  setColorName(e, r = en) {
    const n = PA[e.toLowerCase()];
    return n !== void 0 ? this.setHex(n, r) : console.warn("THREE.Color: Unknown color " + e), this;
  }
  clone() {
    return new this.constructor(this.r, this.g, this.b);
  }
  copy(e) {
    return this.r = e.r, this.g = e.g, this.b = e.b, this;
  }
  copySRGBToLinear(e) {
    return this.r = xl(e.r), this.g = xl(e.g), this.b = xl(e.b), this;
  }
  copyLinearToSRGB(e) {
    return this.r = Tl(e.r), this.g = Tl(e.g), this.b = Tl(e.b), this;
  }
  convertSRGBToLinear() {
    return this.copySRGBToLinear(this), this;
  }
  convertLinearToSRGB() {
    return this.copyLinearToSRGB(this), this;
  }
  getHex(e = en) {
    return mr.fromWorkingColorSpace(wt.copy(this), e), Math.round(si(wt.r * 255, 0, 255)) * 65536 + Math.round(si(wt.g * 255, 0, 255)) * 256 + Math.round(si(wt.b * 255, 0, 255));
  }
  getHexString(e = en) {
    return ("000000" + this.getHex(e).toString(16)).slice(-6);
  }
  getHSL(e, r = mr.workingColorSpace) {
    mr.fromWorkingColorSpace(wt.copy(this), r);
    const n = wt.r, i = wt.g, s = wt.b, a = Math.max(n, i, s), o = Math.min(n, i, s);
    let l, c;
    const u = (o + a) / 2;
    if (o === a)
      l = 0, c = 0;
    else {
      const h = a - o;
      switch (c = u <= 0.5 ? h / (a + o) : h / (2 - a - o), a) {
        case n:
          l = (i - s) / h + (i < s ? 6 : 0);
          break;
        case i:
          l = (s - n) / h + 2;
          break;
        case s:
          l = (n - i) / h + 4;
          break;
      }
      l /= 6;
    }
    return e.h = l, e.s = c, e.l = u, e;
  }
  getRGB(e, r = mr.workingColorSpace) {
    return mr.fromWorkingColorSpace(wt.copy(this), r), e.r = wt.r, e.g = wt.g, e.b = wt.b, e;
  }
  getStyle(e = en) {
    mr.fromWorkingColorSpace(wt.copy(this), e);
    const r = wt.r, n = wt.g, i = wt.b;
    return e !== en ? `color(${e} ${r.toFixed(3)} ${n.toFixed(3)} ${i.toFixed(3)})` : `rgb(${Math.round(r * 255)},${Math.round(n * 255)},${Math.round(i * 255)})`;
  }
  offsetHSL(e, r, n) {
    return this.getHSL(vr), vr.h += e, vr.s += r, vr.l += n, this.setHSL(vr.h, vr.s, vr.l), this;
  }
  add(e) {
    return this.r += e.r, this.g += e.g, this.b += e.b, this;
  }
  addColors(e, r) {
    return this.r = e.r + r.r, this.g = e.g + r.g, this.b = e.b + r.b, this;
  }
  addScalar(e) {
    return this.r += e, this.g += e, this.b += e, this;
  }
  sub(e) {
    return this.r = Math.max(0, this.r - e.r), this.g = Math.max(0, this.g - e.g), this.b = Math.max(0, this.b - e.b), this;
  }
  multiply(e) {
    return this.r *= e.r, this.g *= e.g, this.b *= e.b, this;
  }
  multiplyScalar(e) {
    return this.r *= e, this.g *= e, this.b *= e, this;
  }
  lerp(e, r) {
    return this.r += (e.r - this.r) * r, this.g += (e.g - this.g) * r, this.b += (e.b - this.b) * r, this;
  }
  lerpColors(e, r, n) {
    return this.r = e.r + (r.r - e.r) * n, this.g = e.g + (r.g - e.g) * n, this.b = e.b + (r.b - e.b) * n, this;
  }
  lerpHSL(e, r) {
    this.getHSL(vr), e.getHSL(ma);
    const n = Il(vr.h, ma.h, r), i = Il(vr.s, ma.s, r), s = Il(vr.l, ma.l, r);
    return this.setHSL(n, i, s), this;
  }
  setFromVector3(e) {
    return this.r = e.x, this.g = e.y, this.b = e.z, this;
  }
  applyMatrix3(e) {
    const r = this.r, n = this.g, i = this.b, s = e.elements;
    return this.r = s[0] * r + s[3] * n + s[6] * i, this.g = s[1] * r + s[4] * n + s[7] * i, this.b = s[2] * r + s[5] * n + s[8] * i, this;
  }
  equals(e) {
    return e.r === this.r && e.g === this.g && e.b === this.b;
  }
  fromArray(e, r = 0) {
    return this.r = e[r], this.g = e[r + 1], this.b = e[r + 2], this;
  }
  toArray(e = [], r = 0) {
    return e[r] = this.r, e[r + 1] = this.g, e[r + 2] = this.b, e;
  }
  fromBufferAttribute(e, r) {
    return this.r = e.getX(r), this.g = e.getY(r), this.b = e.getZ(r), this;
  }
  toJSON() {
    return this.getHex();
  }
  *[Symbol.iterator]() {
    yield this.r, yield this.g, yield this.b;
  }
}
const wt = /* @__PURE__ */ new $a();
$a.NAMES = PA;
class pC extends MeshStandardMaterial {
  constructor(r = {}) {
    super();
    tt(this, "isMeshPhysicalMaterial");
    tt(this, "clearcoatMap");
    tt(this, "clearcoatRoughness");
    tt(this, "clearcoatRoughnessMap");
    tt(this, "clearcoatNormalScale");
    tt(this, "clearcoatNormalMap");
    tt(this, "ior");
    tt(this, "transmissionMap");
    tt(this, "thickness");
    tt(this, "thicknessMap");
    tt(this, "attenuationDistance");
    tt(this, "attenuationColor");
    tt(this, "specularIntensity");
    tt(this, "specularIntensityMap");
    tt(this, "specularColor");
    tt(this, "specularColorMap");
    tt(this, "_clearcoat");
    tt(this, "_transmission");
    this.isMeshPhysicalMaterial = true, this.defines = {
      STANDARD: "",
      PHYSICAL: ""
    }, this.type = "MeshPhysicalMaterial", this.clearcoatMap = null, this.clearcoatRoughness = 0, this.clearcoatRoughnessMap = null, this.clearcoatNormalScale = new e3(1, 1), this.clearcoatNormalMap = null, this.ior = 1.5, Object.defineProperty(this, "reflectivity", {
      get() {
        return si(2.5 * (this.ior - 1) / (this.ior + 1), 0, 1);
      },
      set(n) {
        this.ior = (1 + 0.4 * n) / (1 - 0.4 * n);
      }
    }), this.roughness = 0, this.transmissionMap = null, this.thickness = 0.5, this.thicknessMap = null, this.attenuationDistance = 1 / 0, this.attenuationColor = new $a(1, 1, 1), this.specularIntensity = 1, this.specularIntensityMap = null, this.specularColor = new $a(1, 1, 1), this.specularColorMap = null, this._clearcoat = 0.5, this._transmission = 1, this.setValues(r);
  }
  get clearcoat() {
    return this._clearcoat;
  }
  set clearcoat(r) {
    this._clearcoat > 0 != r > 0 && this.version++, this._clearcoat = r;
  }
  get transmission() {
    return this._transmission;
  }
  set transmission(r) {
    this._transmission > 0 != r > 0 && this.version++, this._transmission = r;
  }
  copy(r) {
    return super.copy(r), this.defines = {
      STANDARD: "",
      PHYSICAL: ""
    }, this.clearcoat = r.clearcoat, this.clearcoatMap = r.clearcoatMap, this.clearcoatRoughness = r.clearcoatRoughness, this.clearcoatRoughnessMap = r.clearcoatRoughnessMap, this.clearcoatNormalMap = r.clearcoatNormalMap, this.clearcoatNormalScale.copy(r.clearcoatNormalScale), this.ior = r.ior, this.transmission = r.transmission, this.transmissionMap = r.transmissionMap, this.thickness = r.thickness, this.thicknessMap = r.thicknessMap, this.attenuationDistance = r.attenuationDistance, this.attenuationColor.copy(r.attenuationColor), this.specularIntensity = r.specularIntensity, this.specularIntensityMap = r.specularIntensityMap, this.specularColor.copy(r.specularColor), this.specularColorMap = r.specularColorMap, this;
  }
}
const dC = pC, Ox = /* @__PURE__ */ defineComponent({
  __name: "index",
  setup(t, { expose: e }) {
    const r = shallowRef(), { extend: n } = useTresContext();
    return n({ MeshGlassMaterial: dC }), e({ MeshGlassMaterialClass: r }), (i, s) => (openBlock(), createElementBlock("TresMeshGlassMaterial", {
      ref_key: "MeshGlassMaterialClass",
      ref: r
    }, null, 512));
  }
}), gC = ["args"], mC = ["color"], Px = /* @__PURE__ */ defineComponent({
  __name: "Box",
  props: {
    args: { default: () => [1, 1, 1] },
    color: { default: "#ffffff" }
  },
  setup(t, { expose: e }) {
    const r = t, { args: n, color: i } = toRefs(r), s = shallowRef();
    return e({
      value: s
    }), (a, o) => (openBlock(), createElementBlock("TresMesh", mergeProps({
      ref_key: "boxRef",
      ref: s
    }, a.$attrs), [
      createElementVNode("TresBoxGeometry", { args: unref(n) }, null, 8, gC),
      renderSlot(a.$slots, "default", {}, () => [
        createElementVNode("TresMeshBasicMaterial", { color: unref(i) }, null, 8, mC)
      ])
    ], 16));
  }
}), TC = ["args"], SC = ["color"], Gx = /* @__PURE__ */ defineComponent({
  __name: "Icosahedron",
  props: {
    args: { default: () => [1, 0] },
    color: { default: "#ffffff" }
  },
  setup(t, { expose: e }) {
    const r = t, { args: n, color: i } = toRefs(r), s = shallowRef();
    return e({
      value: s
    }), (a, o) => (openBlock(), createElementBlock("TresMesh", mergeProps({
      ref_key: "icosahedronRef",
      ref: s
    }, a.$attrs), [
      createElementVNode("TresIcosahedronGeometry", { args: unref(n) }, null, 8, TC),
      renderSlot(a.$slots, "default", {}, () => [
        createElementVNode("TresMeshBasicMaterial", { color: unref(i) }, null, 8, SC)
      ])
    ], 16));
  }
}), bC = ["rotation"], _C = ["args"], RC = ["color"], Vx = /* @__PURE__ */ defineComponent({
  __name: "Plane",
  props: {
    args: { default: () => [1, 1] },
    color: { default: "#ffffff" }
  },
  setup(t, { expose: e }) {
    const r = t, { args: n, color: i } = toRefs(r), s = shallowRef();
    return e({
      value: s
    }), (a, o) => (openBlock(), createElementBlock("TresMesh", mergeProps({
      ref_key: "planeRef",
      ref: s,
      rotation: [-Math.PI / 2, 0, 0]
    }, a.$attrs), [
      createElementVNode("TresPlaneGeometry", { args: unref(n) }, null, 8, _C),
      renderSlot(a.$slots, "default", {}, () => [
        createElementVNode("TresMeshBasicMaterial", { color: unref(i) }, null, 8, RC)
      ])
    ], 16, bC));
  }
}), kC = ["args"], FC = ["color"], Yx = /* @__PURE__ */ defineComponent({
  __name: "Sphere",
  props: {
    args: { default: () => [2, 32, 16] },
    color: { default: "#ffffff" }
  },
  setup(t, { expose: e }) {
    const r = t, { args: n, color: i } = toRefs(r), s = shallowRef();
    return e({
      value: s
    }), (a, o) => (openBlock(), createElementBlock("TresMesh", mergeProps({
      ref_key: "sphereRef",
      ref: s
    }, a.$attrs), [
      createElementVNode("TresSphereGeometry", { args: unref(n) }, null, 8, kC),
      renderSlot(a.$slots, "default", {}, () => [
        createElementVNode("TresMeshBasicMaterial", { color: unref(i) }, null, 8, FC)
      ])
    ], 16));
  }
}), UC = ["args"], GC = ["color"], qx = /* @__PURE__ */ defineComponent({
  __name: "TorusKnot",
  props: {
    args: { default: () => [1, 0.4, 64, 8] },
    color: { default: "#ffffff" }
  },
  setup(t, { expose: e }) {
    const r = t, { args: n, color: i } = toRefs(r), s = shallowRef();
    return e({
      value: s
    }), (a, o) => (openBlock(), createElementBlock("TresMesh", mergeProps({
      ref_key: "torusKnotRef",
      ref: s
    }, a.$attrs), [
      createElementVNode("TresTorusKnotGeometry", { args: unref(n) }, null, 8, UC),
      renderSlot(a.$slots, "default", {}, () => [
        createElementVNode("TresMeshBasicMaterial", { color: unref(i) }, null, 8, GC)
      ])
    ], 16));
  }
});
defineComponent({
  name: "Environment",
  props: ["background", "blur", "files", "encoding", "path", "preset"],
  async setup(t, { expose: e }) {
    let r = null;
    return e({ getTexture: () => r }), r = await UI(t), () => {
    };
  }
});
const zC = ["receive-shadow", "rotation"], YC = ["args"], WC = /* @__PURE__ */ createElementVNode("TresMeshStandardMaterial", {
  color: 8421504,
  side: 2
}, null, -1), $x = /* @__PURE__ */ defineComponent({
  __name: "Backdrop",
  props: {
    floor: { default: 0.25 },
    segments: { default: 20 },
    receiveShadow: { type: Boolean, default: false }
  },
  setup(t) {
    const e = t, r = (o) => o === 0 ? 0 : 2 ** (10 * o - 10), { floor: n, segments: i, receiveShadow: s } = toRefs(e), a = ref(null);
    return watch(
      () => [i.value, n.value, a.value],
      ([o, l, c]) => {
        if (!c || o === null)
          return;
        let u = 0;
        const h = o / o / 2, A = c.attributes.position;
        for (let f = 0; f < o + 1; f++)
          for (let d = 0; d < o + 1; d++)
            A.setXYZ(
              u++,
              f / o - h + (f === 0 ? -l : 0),
              d / o - h,
              r(f / o)
            );
        A.needsUpdate = true, c.computeVertexNormals();
      }
    ), (o, l) => (openBlock(), createElementBlock("TresGroup", normalizeProps(guardReactiveProps(o.$attrs)), [
      createElementVNode("TresMesh", {
        "receive-shadow": unref(s),
        rotation: [-Math.PI / 2, 0, Math.PI / 2]
      }, [
        createElementVNode("TresPlaneGeometry", {
          ref_key: "planeRef",
          ref: a,
          args: [1, 1, unref(i), unref(i)]
        }, null, 8, YC),
        renderSlot(o.$slots, "default", {}, () => [
          WC
        ])
      ], 8, zC)
    ], 16));
  }
}), jC = ["geometry"], qC = ["map", "opacity", "depth-write"], KC = ["object"], XC = ["args"], $C = ["rotation", "args"], Zx = /* @__PURE__ */ defineComponent({
  __name: "ContactShadows",
  props: {
    opacity: { default: 1 },
    width: { default: 1 },
    height: { default: 1 },
    blur: { default: 1 },
    far: { default: 10 },
    smooth: { type: Boolean, default: true },
    resolution: { default: 512 },
    frames: { default: 1 / 0 },
    scale: { default: 10 },
    color: { default: "#000000" },
    depthWrite: { type: Boolean, default: false },
    helper: { type: Boolean, default: false }
  },
  setup(t, { expose: e }) {
    const r = t, n = shallowRef(), i = shallowRef();
    e(n);
    let s, a, o, l, c;
    const { renderer: u, scene: h } = useTresContext(), A = computed(() => r.width * (Array.isArray(r.scale) ? r.scale[0] : r.scale || 1)), f = computed(() => r.height * (Array.isArray(r.scale) ? r.scale[1] : r.scale || 1));
    watchEffect(() => {
      s && s.dispose(), a && a.dispose(), o && o.dispose(), l && l.geometry.dispose(), s = new WebGLRenderTarget(r.resolution, r.resolution), a = new WebGLRenderTarget(r.resolution, r.resolution), a.texture.generateMipmaps = s.texture.generateMipmaps = false, i.value = new OrthographicCamera(
        -A.value / 2,
        A.value / 2,
        f.value / 2,
        -f.value / 2,
        0,
        r.far
      ), o = new PlaneGeometry(A.value, f.value).rotateX(Math.PI / 2), l = new Mesh(o), l.visible = false;
    }), watchEffect(() => {
      r.color && (c && c.dispose(), c = new MeshDepthMaterial(), c.depthTest = c.depthWrite = false, c.onBeforeCompile = (C) => {
        C.uniforms = {
          ...C.uniforms,
          ucolor: { value: r.color ? new Color(r.color) : new Color() }
        }, C.fragmentShader = C.fragmentShader.replace(
          "void main() {",
          //
          `uniform vec3 ucolor;
             void main() {
            `
        ), C.fragmentShader = C.fragmentShader.replace(
          "vec4( vec3( 1.0 - fragCoordZ ), opacity );",
          // Colorize the shadow, multiply by the falloff so that the center can remain darker
          "vec4( ucolor * fragCoordZ * 2.0, ( 1.0 - fragCoordZ ) * 1.0 );"
        );
      });
    });
    const d = new ShaderMaterial(e8), v = new ShaderMaterial(t8);
    v.depthTest = d.depthTest = false;
    function m(C) {
      !u.value || !i.value || (l.visible = true, l.material = d, d.uniforms.tDiffuse.value = s.texture, d.uniforms.h.value = C / 256, u.value.setRenderTarget(a), u.value.render(l, i.value), l.material = v, v.uniforms.tDiffuse.value = a.texture, v.uniforms.v.value = C / 256, u.value.setRenderTarget(s), u.value.render(l, i.value), l.visible = false);
    }
    const { onLoop: E } = useRenderLoop();
    let y = 0, p, g;
    return E(() => {
      !i.value || h.value === void 0 || u.value === void 0 || (r.frames === 1 / 0 || y < r.frames) && (y++, p = h.value.background, g = h.value.overrideMaterial, n.value.visible = false, h.value.background = null, h.value.overrideMaterial = c, u.value.setRenderTarget(s), u.value.render(h.value, i.value), m(r.blur), r.smooth && m(r.blur * 0.4), u.value.setRenderTarget(null), n.value.visible = true, h.value.background = p, h.value.overrideMaterial = g);
    }), (C, S) => (openBlock(), createElementBlock("TresGroup", mergeProps({
      ref_key: "groupRef",
      ref: n
    }, C.$attrs), [
      createElementVNode("TresMesh", {
        scale: [1, -1, 1],
        geometry: unref(o)
      }, [
        createElementVNode("TresMeshBasicMaterial", {
          map: unref(s).texture,
          opacity: C.opacity,
          "depth-write": C.depthWrite,
          transparent: true
        }, null, 8, qC)
      ], 8, jC),
      createElementVNode("primitive", { object: unref(l) }, null, 8, KC),
      i.value && C.helper ? (openBlock(), createElementBlock("TresCameraHelper", {
        key: 0,
        args: [i.value]
      }, null, 8, XC)) : createCommentVNode("", true),
      createElementVNode("TresOrthographicCamera", {
        ref_key: "shadowCamera",
        ref: i,
        position: [0, 0, 0],
        rotation: [Math.PI / 2, 0, 0],
        args: [-A.value / 2, A.value / 2, f.value / 2, -f.value / 2, 0, C.far]
      }, null, 8, $C)
    ], 16));
  }
}), ZC = ["position", "a-scale"], JC = ["size", "size-attenuation", "transparent", "alpha-test", "alpha-map"], Jx = /* @__PURE__ */ defineComponent({
  __name: "Stars",
  props: {
    size: { default: 0.1 },
    sizeAttenuation: { type: Boolean, default: true },
    transparent: { type: Boolean, default: true },
    alphaTest: { default: 0.01 },
    count: { default: 5e3 },
    depth: { default: 50 },
    radius: { default: 100 },
    alphaMap: { default: null }
  },
  setup(t, { expose: e }) {
    const r = t, n = ref(), i = ref(), { radius: s, depth: a, count: o, size: l, sizeAttenuation: c, transparent: u, alphaMap: h, alphaTest: A } = toRefs(r), f = () => {
      let v = s.value + a.value;
      const m = computed(() => a.value / o.value), E = [], y = Array.from(
        { length: o.value },
        () => (0.5 + 0.5 * Math.random()) * 4
      ), p = (g) => new Vector3().setFromSpherical(new Spherical(g, Math.acos(1 - Math.random() * 2), Math.random() * 2 * Math.PI)).toArray();
      for (let g = 0; g < o.value; g++)
        v -= m.value * Math.random(), E.push(...p(v));
      n.value = new Float32Array(E), i.value = new Float32Array(y);
    };
    watchEffect(() => {
      f();
    });
    const d = shallowRef();
    return e({
      value: d
    }), (v, m) => (openBlock(), createElementBlock("TresPoints", {
      ref_key: "starsRef",
      ref: d
    }, [
      createElementVNode("TresBufferGeometry", {
        position: [n.value, 3],
        "a-scale": [i.value, 1]
      }, null, 8, ZC),
      createElementVNode("TresPointsMaterial", {
        size: unref(l),
        "size-attenuation": unref(c),
        transparent: unref(u),
        "alpha-test": unref(A),
        "alpha-map": unref(h)
      }, null, 8, JC)
    ], 512));
  }
}), ex = ["size", "color", "alpha-map", "map", "opacity", "alpha-test", "depth-write", "transparent", "size-attenuation"], tx = ["position", "velocity"], eT = /* @__PURE__ */ defineComponent({
  __name: "Precipitation",
  props: {
    size: { default: 0.1 },
    area: { default: () => [10, 10, 20] },
    color: { default: 16777215 },
    map: {},
    alphaMap: {},
    alphaTest: { default: 0.01 },
    opacity: { default: 0.8 },
    count: { default: 5e3 },
    speed: { default: 0.1 },
    randomness: { default: 0.5 },
    depthWrite: { type: Boolean, default: false },
    transparent: { type: Boolean, default: true },
    sizeAttenuation: { type: Boolean, default: true }
  },
  setup(t) {
    const e = t, {
      size: r,
      area: n,
      color: i,
      alphaMap: s,
      map: a,
      opacity: o,
      alphaTest: l,
      depthWrite: c,
      transparent: u,
      sizeAttenuation: h,
      count: A,
      speed: f,
      randomness: d
    } = toRefs(e), v = shallowRef();
    let m = [], E = [];
    const y = () => {
      m = new Float32Array(A.value * 3);
      for (let C = 0; C < A.value; C++) {
        const S = C * 3;
        m[S] = (Math.random() - 0.5) * n.value[0], m[S + 1] = (Math.random() - 0.5) * n.value[1], m[S + 2] = (Math.random() - 0.5) * n.value[2];
      }
    }, p = () => {
      E = new Float32Array(A.value * 2);
      for (let C = 0; C < A.value * 2; C += 2)
        E[C] = (Math.random() - 0.5) / 5 * f.value * d.value, E[C + 1] = Math.random() / 5 * f.value + 0.01;
    };
    p(), y(), watchEffect(() => {
      p(), y();
    });
    const { onLoop: g } = useRenderLoop();
    return g(() => {
      var C, S;
      if ((C = v.value) != null && C.attributes.position.array && ((S = v.value) != null && S.attributes.position.count)) {
        const x = v.value.attributes.position.array;
        for (let T = 0; T < v.value.attributes.position.count; T++) {
          const B = E[T * 2], R = E[T * 2 + 1];
          x[T * 3] += B, x[T * 3 + 1] -= R, (x[T * 3] <= -n.value[0] / 2 || x[T * 3] >= n.value[0] / 2) && (x[T * 3] = x[T * 3] * -1), (x[T * 3 + 1] <= -n.value[1] / 2 || x[T * 3 + 1] >= n.value[1] / 2) && (x[T * 3 + 1] = x[T * 3 + 1] * -1);
        }
        v.value.attributes.position.needsUpdate = true;
      }
    }), (C, S) => (openBlock(), createElementBlock("TresPoints", null, [
      createElementVNode("TresPointsMaterial", {
        size: unref(r),
        color: unref(i),
        "alpha-map": unref(s),
        map: unref(a),
        opacity: unref(o),
        "alpha-test": unref(l),
        "depth-write": unref(c),
        transparent: unref(u),
        "size-attenuation": unref(h)
      }, null, 8, ex),
      createElementVNode("TresBufferGeometry", {
        ref_key: "geometryRef",
        ref: v,
        position: [unref(m), 3],
        velocity: [unref(E)]
      }, null, 8, tx)
    ]));
  }
}), rx = ["position"], nx = ["position"], ix = ["scale"], sx = ["map", "depth-test", "color-space", "color", "opacity"], tT = /* @__PURE__ */ defineComponent({
  __name: "Smoke",
  props: {
    color: { default: "#ffffff" },
    opacity: { default: 0.5 },
    speed: { default: 0.4 },
    width: { default: 10 },
    depth: { default: 1.5 },
    segments: { default: 20 },
    texture: { default: "https://raw.githubusercontent.com/Tresjs/assets/main/textures/clouds/defaultCloud.png" },
    depthTest: { type: Boolean, default: true }
  },
  async setup(t, { expose: e }) {
    let r, n;
    const i = t, { width: s, depth: a, segments: o, texture: l, color: c, depthTest: u, opacity: h, speed: A } = toRefs(i), f = shallowRef(), d = shallowRef();
    e({
      value: f
    });
    const v = [...new Array(o)].map((S, x) => ({
      x: s.value / 2 - Math.random() * s.value,
      y: s.value / 2 - Math.random() * s.value,
      scale: 0.4 + Math.sin((x + 1) / o.value * Math.PI) * ((0.2 + Math.random()) * 10),
      density: Math.max(0.2, Math.random()),
      rotation: Math.max(2e-3, 5e-3 * Math.random()) * A.value
    })), m = (S, x) => S / 6 * x * h.value, { map: E } = ([r, n] = withAsyncContext(() => useTexture({ map: l.value })), r = await r, n(), r), { renderer: y, camera: p } = useTresContext(), g = computed(() => {
      var S;
      return (S = y.value) == null ? void 0 : S.outputColorSpace;
    }), { onLoop: C } = useRenderLoop();
    return C(() => {
      var S, x;
      f.value && p.value && d.value && ((S = d.value) == null || S.children.forEach((T, B) => {
        T.rotation.z += v[B].rotation;
      }), f.value.lookAt((x = p.value) == null ? void 0 : x.position));
    }), (S, x) => (openBlock(), createElementBlock("TresGroup", mergeProps({
      ref_key: "smokeRef",
      ref: f
    }, S.$attrs), [
      createElementVNode("TresGroup", {
        ref_key: "groupRef",
        ref: d,
        position: [0, 0, unref(o) / 2 * unref(a)]
      }, [
        (openBlock(true), createElementBlock(Fragment, null, renderList(unref(v), ({ scale: T, x: B, y: R, density: _ }, F) => (openBlock(), createElementBlock("TresMesh", {
          key: `${F}`,
          position: [B, R, -F * unref(a)]
        }, [
          createElementVNode("TresPlaneGeometry", {
            scale: [T, T, T],
            rotation: [0, 0, 0]
          }, null, 8, ix),
          createElementVNode("TresMeshStandardMaterial", {
            map: unref(E),
            "depth-test": unref(u),
            "color-space": g.value,
            color: unref(c),
            "depth-write": false,
            transparent: "",
            opacity: m(T, _)
          }, null, 8, sx)
        ], 8, nx))), 128))
      ], 8, rx)
    ], 16));
  }
});
var ax = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : {};
var QA = { exports: {} };
(function(t, e) {
  (function(r, n) {
    t.exports = n();
  })(ax, function() {
    var r = function() {
      function n(f) {
        return a.appendChild(f.dom), f;
      }
      function i(f) {
        for (var d = 0; d < a.children.length; d++)
          a.children[d].style.display = d === f ? "block" : "none";
        s = f;
      }
      var s = 0, a = document.createElement("div");
      a.style.cssText = "position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000", a.addEventListener("click", function(f) {
        f.preventDefault(), i(++s % a.children.length);
      }, false);
      var o = (performance || Date).now(), l = o, c = 0, u = n(new r.Panel("FPS", "#0ff", "#002")), h = n(new r.Panel("MS", "#0f0", "#020"));
      if (self.performance && self.performance.memory)
        var A = n(new r.Panel("MB", "#f08", "#201"));
      return i(0), { REVISION: 16, dom: a, addPanel: n, showPanel: i, begin: function() {
        o = (performance || Date).now();
      }, end: function() {
        c++;
        var f = (performance || Date).now();
        if (h.update(f - o, 200), f > l + 1e3 && (u.update(1e3 * c / (f - l), 100), l = f, c = 0, A)) {
          var d = performance.memory;
          A.update(d.usedJSHeapSize / 1048576, d.jsHeapSizeLimit / 1048576);
        }
        return f;
      }, update: function() {
        o = this.end();
      }, domElement: a, setMode: i };
    };
    return r.Panel = function(n, i, s) {
      var a = 1 / 0, o = 0, l = Math.round, c = l(window.devicePixelRatio || 1), u = 80 * c, h = 48 * c, A = 3 * c, f = 2 * c, d = 3 * c, v = 15 * c, m = 74 * c, E = 30 * c, y = document.createElement("canvas");
      y.width = u, y.height = h, y.style.cssText = "width:80px;height:48px";
      var p = y.getContext("2d");
      return p.font = "bold " + 9 * c + "px Helvetica,Arial,sans-serif", p.textBaseline = "top", p.fillStyle = s, p.fillRect(0, 0, u, h), p.fillStyle = i, p.fillText(n, A, f), p.fillRect(d, v, m, E), p.fillStyle = s, p.globalAlpha = 0.9, p.fillRect(d, v, m, E), { dom: y, update: function(g, C) {
        a = Math.min(a, g), o = Math.max(o, g), p.fillStyle = s, p.globalAlpha = 1, p.fillRect(0, 0, u, v), p.fillStyle = i, p.fillText(l(g) + " " + n + " (" + l(a) + "-" + l(o) + ")", A, f), p.drawImage(y, d + c, v, m - c, E, d, v, m - c, E), p.fillRect(d + m - c, v, c, E), p.fillStyle = s, p.globalAlpha = 0.9, p.fillRect(d + m - c, v, c, l((1 - g / C) * E));
      } };
    }, r;
  });
})(QA);
const ux = ["geometry", "material"], iT = /* @__PURE__ */ defineComponent({
  __name: "HTML",
  props: {
    geometry: { default: new PlaneGeometry() },
    material: {},
    as: { default: "div" },
    transform: { type: Boolean, default: false },
    portal: {},
    wrapperClass: {},
    eps: { default: 1e-4 },
    distanceFactor: {},
    fullscreen: { type: Boolean },
    center: { type: Boolean },
    pointerEvents: { default: "auto" },
    sprite: { type: Boolean, default: false },
    zIndexRange: { default: () => [16777271, 0] },
    occlude: { type: [Array, Boolean, String] }
  },
  emits: ["onOcclude"],
  setup(t, { emit: e }) {
    const r = t, n = new Vector3(0, 0, 0), i = new Vector3(0, 0, 0), s = new Vector3(0, 0, 0);
    function a(M, w, J) {
      const he = n.setFromMatrixPosition(M.matrixWorld);
      he.project(w);
      const pe = J.width / 2, ke = J.height / 2;
      return [
        (Number.isNaN(he.x) ? 0 : he.x) * pe + pe,
        -(he.y * ke) + ke
      ];
    }
    function o(M, w) {
      const J = n.setFromMatrixPosition(M.matrixWorld), he = i.setFromMatrixPosition(w.matrixWorld), pe = J.sub(he), ke = w.getWorldDirection(s);
      return pe.angleTo(ke) > Math.PI / 2;
    }
    function l(M, w, J, he) {
      const pe = n.setFromMatrixPosition(M.matrixWorld), ke = pe.clone();
      ke.project(w), J.setFromCamera(new Vector2(ke.x, ke.y), w);
      const Ve = J.intersectObjects(he, true);
      if (Ve.length > 0) {
        const we = Ve[0].distance;
        return pe.distanceTo(J.ray.origin) < we;
      }
      return true;
    }
    function c(M, w) {
      if (w instanceof OrthographicCamera)
        return w.zoom;
      if (w instanceof PerspectiveCamera) {
        const J = n.setFromMatrixPosition(M.matrixWorld), he = i.setFromMatrixPosition(w.matrixWorld), pe = w.fov * Math.PI / 180, ke = J.distanceTo(he);
        return 1 / (2 * Math.tan(pe / 2) * ke);
      } else
        return 1;
    }
    function u(M, w, J) {
      if (w instanceof PerspectiveCamera || w instanceof OrthographicCamera) {
        const he = n.setFromMatrixPosition(M.matrixWorld), pe = i.setFromMatrixPosition(w.matrixWorld), ke = he.distanceTo(pe), Ve = (J[1] - J[0]) / (w.far - w.near), we = J[1] - Ve * w.far;
        return Math.round(Ve * ke + we);
      }
    }
    const h = (M) => Math.abs(M) < 1e-10 ? 0 : M;
    function A(M, w, J = "") {
      let he = "matrix3d(";
      for (let pe = 0; pe !== 16; pe++)
        he += h(w[pe] * M.elements[pe]) + (pe !== 15 ? "," : ")");
      return J + he;
    }
    const f = ((M) => (w) => A(w, M))([1, -1, 1, 1, 1, -1, 1, 1, 1, -1, 1, 1, 1, -1, 1, 1]), d = ((M) => (w, J) => A(w, M(J), "translate(-50%,-50%)"))((M) => [1 / M, 1 / M, 1 / M, 1, -1 / M, -1 / M, -1 / M, -1, 1 / M, 1 / M, 1 / M, 1, 1, 1, 1, 1]), v = useAttrs(), m = useSlots(), E = ref(), y = ref(), {
      geometry: p,
      material: g,
      as: C,
      transform: S,
      portal: x,
      wrapperClass: T,
      eps: B,
      distanceFactor: R,
      fullscreen: _,
      center: F,
      pointerEvents: U,
      sprite: Y,
      occlude: N,
      zIndexRange: Z
    } = toRefs(r), { renderer: j, scene: Q, camera: $, raycaster: X, sizes: K } = useTresContext(), D = computed(() => document.createElement(C.value)), L = ref([0, 0]), I = ref(0), O = ref(), V = computed(() => S.value ? {
      position: "absolute",
      top: 0,
      left: 0,
      width: `${K.width.value}px`,
      height: `${K.height.value}px`,
      transformStyle: "preserve-3d",
      pointerEvents: "none",
      zIndex: 2,
      willChange: "transform"
    } : {
      position: "absolute",
      transform: F.value ? "translate3d(-50%,-50%,0)" : "none",
      ..._.value && {
        top: -K.height.value / 2,
        left: -K.width.value / 2,
        width: `${K.width.value}px`,
        height: `${K.height.value}px`
      },
      zIndex: 2,
      ...v.style,
      willChange: "transform"
    }), k = computed(() => ({
      position: "absolute",
      pointerEvents: U.value
    })), q = ref(null), se = ref(false), re = computed(
      () => (N == null ? void 0 : N.value) && (N == null ? void 0 : N.value) !== "blending" || Array.isArray(N == null ? void 0 : N.value) && (N == null ? void 0 : N.value.length) && isRef(N.value[0])
    );
    watch(
      () => N,
      (M) => {
        M && M === "blending" ? (D.value.style.zIndex = `${Math.floor(Z.value[0] / 2)}`, D.value.style.position = "absolute", D.value.style.pointerEvents = "none") : (D.value.style.zIndex = null, D.value.style.position = null, D.value.style.pointerEvents = null);
      }
    ), watch(
      () => [E.value, j.value, K.width.value, K.height.value],
      ([M, w]) => {
        var J, he, pe, ke;
        if (M && w) {
          const Ve = (x == null ? void 0 : x.value) || w.domElement;
          if ((J = Q.value) == null || J.updateMatrixWorld(), S.value)
            D.value.style.cssText = "position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";
          else {
            const we = a(M, $.value, {
              width: K.width.value,
              height: K.height.value
            });
            D.value.style.cssText = `position:absolute;top:0;left:0;transform:translate3d(${we[0]}px,${we[1]}px,0);transform-origin:0 0;`;
          }
          Ve && ((he = Ve.parentNode) == null || he.appendChild(D.value)), S.value ? O.value = createVNode("div", { id: "outer", style: V.value }, [
            createVNode("div", { id: "inner", style: k.value }, [
              createVNode("div", { id: Q == null ? void 0 : Q.value.uuid, class: v.class, style: v.style }, (pe = m.default) == null ? void 0 : pe.call(m))
            ])
          ]) : O.value = createVNode("div", { id: Q == null ? void 0 : Q.value.uuid, style: V.value }, (ke = m.default) == null ? void 0 : ke.call(m)), render(O.value, D.value);
        }
      }
    ), watchEffect(() => {
      T != null && T.value && (D.value.className = T.value);
    });
    const ne = ref(true), { onLoop: te } = useRenderLoop();
    watchEffect(() => {
      console.log({
        width: K.width.value,
        height: K.height.value,
        styles: V.value,
        el: D.value.style
      });
    });
    const ge = ref(0);
    te(() => {
      var M, w, J, he, pe, ke, Ve;
      if (E.value && $.value && j.value) {
        (M = $.value) == null || M.updateMatrixWorld(), E.value.updateWorldMatrix(true, false);
        const we = S.value ? L.value : a(E.value, $.value, {
          width: K.width.value || 0,
          height: K.height.value || 0
        });
        if (S.value || Math.abs(I.value - $.value.zoom) > B.value || Math.abs(L.value[0] - we[0]) > B.value || Math.abs(L.value[1] - we[1]) > B.value) {
          const Tt = o(E.value, $.value);
          let It = false;
          re.value && (Array.isArray(N == null ? void 0 : N.value) ? It = N == null ? void 0 : N.value : (N == null ? void 0 : N.value) !== "blending" && (It = [Q.value]));
          const Lt = ne.value;
          if (It) {
            const Ot = l(
              E.value,
              $.value,
              X.value,
              It
            );
            ne.value = Ot && !Tt;
          } else
            ne.value = !Tt;
          Lt !== ne.value && (e("onOcclude", !ne.value), D.value.style.display = ne.value ? "block" : "none");
          const Wt = Math.floor(Z.value[0] / 2), Dr = N != null && N.value ? re.value ? [Z.value[0], Wt] : [Wt - 1, 0] : Z.value;
          if (D.value.style.zIndex = `${u(E.value, $.value, Dr)}`, D.value.style.willChange = "transform", S.value) {
            const [Ot, fr] = [
              K.width.value / 2,
              K.height.value / 2
            ], jt = $.value.projectionMatrix.elements[5] * fr, { isOrthographicCamera: P, top: ie, left: ye, bottom: Pe, right: ct } = $.value, pr = f($.value.matrixWorldInverse), St = P ? `scale(${jt})translate(${h(-(ct + ye) / 2)}px,${h((ie + Pe) / 2)}px)` : `translateZ(${jt}px)`;
            let Pt = E.value.matrixWorld;
            Y.value && (Pt = $.value.matrixWorldInverse.clone().transpose().copyPosition(Pt).scale(E.value.scale), Pt.elements[3] = Pt.elements[7] = Pt.elements[11] = 0, Pt.elements[15] = 1), D.value.style.width = `${K.width.value}px`, D.value.style.height = `${K.height.value}px`, D.value.style.perspective = P ? "" : `${jt}px`, (w = O.value) != null && w.el && ((J = O.value) != null && J.children) && (O.value.el.style.willChange = "transform", O.value.el.style.transform = `${St}${pr}translate(${Ot}px,${fr}px)`, O.value.children[0].willChange = "transform", O.value.children[0].el.style.transform = d(
              Pt,
              1 / (((R == null ? void 0 : R.value) || 10) / 400)
            ));
          } else {
            const Ot = (R == null ? void 0 : R.value) === void 0 ? 1 : c(E.value, $.value) * (R == null ? void 0 : R.value);
            D.value.style.transform = `translate3d(${we[0]}px,${we[1]}px,0) scale(${Ot})`;
          }
        }
        L.value = we, I.value = $.value.zoom;
      }
      if (!re.value && y.value && !se.value)
        if (S.value) {
          if ((he = O.value) != null && he.el && ((pe = O.value) != null && pe.children)) {
            const we = (ke = O.value) == null ? void 0 : ke.children[0];
            if (we != null && we.clientWidth && (we != null && we.clientHeight)) {
              const { isOrthographicCamera: Tt } = $.value;
              if (Tt || p)
                v.scale && (Array.isArray(v.scale) ? v.scale instanceof Vector3 ? y.value.scale.copy(v.scale.clone().divideScalar(1)) : y.value.scale.set(1 / v.scale[0], 1 / v.scale[1], 1 / v.scale[2]) : y.value.scale.setScalar(1 / v.scale));
              else {
                const It = ((R == null ? void 0 : R.value) || 10) / 400, Lt = we.clientWidth * It, Wt = we.clientHeight * It;
                y.value.scale.set(Lt, Wt, 1);
              }
              se.value = true;
            }
          }
        } else {
          const we = D.value.children[0];
          if (we != null && we.clientWidth && (we != null && we.clientHeight)) {
            const It = we.clientWidth * 1, Lt = we.clientHeight * 1;
            y.value.scale.set(It, Lt, 1), se.value = true;
          }
          q.value.lookAt((Ve = $.value) == null ? void 0 : Ve.position);
        }
      ge.value < 50 && (console.log({ vnode: O.value, el: D.value, styles: V.value, transformInnerStyles: k.value, awiwi: O.value.el.style.transform }), ge.value++);
    });
    const ee = computed(() => ({
      vertexShader: S.value ? void 0 : (
        /* glsl */
        `/*
    This shader is from the THREE's SpriteMaterial.
    We need to turn the backing plane into a Sprite
    (make it always face the camera) if "transfrom"
    is false.
  */
  #include <common>

  void main() {
    vec2 center = vec2(0., 1.);
    float rotation = 0.0;

    // This is somewhat arbitrary, but it seems to work well
    // Need to figure out how to derive this dynamically if it even matters
    float size = 0.03;

    vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
    vec2 scale;
    scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
    scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

    bool isPerspective = isPerspectiveMatrix( projectionMatrix );
    if ( isPerspective ) scale *= - mvPosition.z;

    vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
    vec2 rotatedPosition;
    rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
    rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
    mvPosition.xy += rotatedPosition;

    gl_Position = projectionMatrix * mvPosition;
  }
  `
      ),
      fragmentShader: (
        /* glsl */
        `
  void main() {
    gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
  }
  `
      )
    })), le = computed(() => {
      const M = ee.value;
      return g.value || new ShaderMaterial({
        vertexShader: M.vertexShader,
        fragmentShader: M.fragmentShader,
        side: DoubleSide
      });
    });
    return (M, w) => (openBlock(), createElementBlock("TresGroup", {
      ref_key: "groupRef",
      ref: E
    }, [
      unref(N) && !re.value ? (openBlock(), createElementBlock("TresMesh", {
        key: 0,
        ref_key: "meshRef",
        ref: y,
        geometry: unref(p),
        material: le.value
      }, null, 8, ux)) : createCommentVNode("", true)
    ], 512));
  }
});
const _sfc_main = {};
function _sfc_ssrRender(_ctx, _push, _parent, _attrs) {
  _push(`<div${ssrRenderAttrs(mergeProps({
    class: "relative aspect-video",
    style: { "height": "auto", "margin": "2rem 0", "border-radius": "8px", "overflow": "hidden" }
  }, _attrs))}>`);
  ssrRenderSuspense(_push, {
    default: () => {
      ssrRenderSlot(_ctx.$slots, "default", {}, null, _push, _parent);
    },
    _: 3
  });
  _push(`</div>`);
}
const _sfc_setup = _sfc_main.setup;
_sfc_main.setup = (props, ctx) => {
  const ssrContext = useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add(".vitepress/theme/components/DocsDemo.vue");
  return _sfc_setup ? _sfc_setup(props, ctx) : void 0;
};
const __unplugin_components_0 = /* @__PURE__ */ _export_sfc(_sfc_main, [["ssrRender", _sfc_ssrRender]]);
export {
  $x as $,
  Bx as B,
  Dx as D,
  Ex as E,
  Fx as F,
  Gx as G,
  HI as H,
  Ix as I,
  Jx as J,
  Lx as L,
  Ox as O,
  Px as P,
  Rx as R,
  Tx as T,
  Vx as V,
  Yx as Y,
  Zx as Z,
  __unplugin_components_0 as _,
  bx as b,
  eT as e,
  iT as i,
  kx as k,
  qx as q,
  tT as t,
  vx as v,
  wx as w,
  xx as x
};
